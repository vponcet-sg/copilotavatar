(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))p(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const a of f.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&p(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function p(s){if(s.ep)return;s.ep=!0;const f=o(s);fetch(s.href,f)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tD(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var i=r.default;if(typeof i=="function"){var o=function p(){var s=!1;try{s=this instanceof p}catch{}return s?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};o.prototype=i.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(r).forEach(function(p){var s=Object.getOwnPropertyDescriptor(r,p);Object.defineProperty(o,p,s.get?s:{enumerable:!0,get:function(){return r[p]}})}),o}var hd={exports:{}},Os={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function cN(){if(w0)return Os;w0=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(p,s,f){var a=null;if(f!==void 0&&(a=""+f),s.key!==void 0&&(a=""+s.key),"key"in s){f={};for(var n in s)n!=="key"&&(f[n]=s[n])}else f=s;return s=f.ref,{$$typeof:r,type:p,key:a,ref:s!==void 0?s:null,props:f}}return Os.Fragment=i,Os.jsx=o,Os.jsxs=o,Os}var A0;function uN(){return A0||(A0=1,hd.exports=cN()),hd.exports}var Be=uN(),pd={exports:{}},Is={},dd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function lN(){return T0||(T0=1,function(r){function i(j,J){var Z=j.length;j.push(J);e:for(;0<Z;){var G=Z-1>>>1,z=j[G];if(0<s(z,J))j[G]=J,j[Z]=z,Z=G;else break e}}function o(j){return j.length===0?null:j[0]}function p(j){if(j.length===0)return null;var J=j[0],Z=j.pop();if(Z!==J){j[0]=Z;e:for(var G=0,z=j.length,F=z>>>1;G<F;){var te=2*(G+1)-1,le=j[te],pe=te+1,_e=j[pe];if(0>s(le,Z))pe<z&&0>s(_e,le)?(j[G]=_e,j[pe]=Z,G=pe):(j[G]=le,j[te]=Z,G=te);else if(pe<z&&0>s(_e,Z))j[G]=_e,j[pe]=Z,G=pe;else break e}}return J}function s(j,J){var Z=j.sortIndex-J.sortIndex;return Z!==0?Z:j.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var a=Date,n=a.now();r.unstable_now=function(){return a.now()-n}}var l=[],u=[],h=1,d=null,y=3,g=!1,m=!1,C=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function w(j){for(var J=o(u);J!==null;){if(J.callback===null)p(u);else if(J.startTime<=j)p(u),J.sortIndex=J.expirationTime,i(l,J);else break;J=o(u)}}function O(j){if(C=!1,w(j),!m)if(o(l)!==null)m=!0,P||(P=!0,ae());else{var J=o(u);J!==null&&B(O,J.startTime-j)}}var P=!1,D=-1,N=5,$=-1;function Y(){return _?!0:!(r.unstable_now()-$<N)}function oe(){if(_=!1,P){var j=r.unstable_now();$=j;var J=!0;try{e:{m=!1,C&&(C=!1,R(D),D=-1),g=!0;var Z=y;try{t:{for(w(j),d=o(l);d!==null&&!(d.expirationTime>j&&Y());){var G=d.callback;if(typeof G=="function"){d.callback=null,y=d.priorityLevel;var z=G(d.expirationTime<=j);if(j=r.unstable_now(),typeof z=="function"){d.callback=z,w(j),J=!0;break t}d===o(l)&&p(l),w(j)}else p(l);d=o(l)}if(d!==null)J=!0;else{var F=o(u);F!==null&&B(O,F.startTime-j),J=!1}}break e}finally{d=null,y=Z,g=!1}J=void 0}}finally{J?ae():P=!1}}}var ae;if(typeof A=="function")ae=function(){A(oe)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=oe,ae=function(){se.postMessage(null)}}else ae=function(){b(oe,0)};function B(j,J){D=b(function(){j(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(j){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Z=y;y=J;try{return j()}finally{y=Z}},r.unstable_requestPaint=function(){_=!0},r.unstable_runWithPriority=function(j,J){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=y;y=j;try{return J()}finally{y=Z}},r.unstable_scheduleCallback=function(j,J,Z){var G=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?G+Z:G):Z=G,j){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Z+z,j={id:h++,callback:J,priorityLevel:j,startTime:Z,expirationTime:z,sortIndex:-1},Z>G?(j.sortIndex=Z,i(u,j),o(l)===null&&j===o(u)&&(C?(R(D),D=-1):C=!0,B(O,Z-G))):(j.sortIndex=z,i(l,j),m||g||(m=!0,P||(P=!0,ae()))),j},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(j){var J=y;return function(){var Z=y;y=J;try{return j.apply(this,arguments)}finally{y=Z}}}}(vd)),vd}var P0;function fN(){return P0||(P0=1,dd.exports=lN()),dd.exports}var gd={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function hN(){if(O0)return Ge;O0=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),a=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=d&&z[d]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,C={};function _(z,F,te){this.props=z,this.context=F,this.refs=C,this.updater=te||g}_.prototype.isReactComponent={},_.prototype.setState=function(z,F){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,F,"setState")},_.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function b(){}b.prototype=_.prototype;function R(z,F,te){this.props=z,this.context=F,this.refs=C,this.updater=te||g}var A=R.prototype=new b;A.constructor=R,m(A,_.prototype),A.isPureReactComponent=!0;var w=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function D(z,F,te,le,pe,_e){return te=_e.ref,{$$typeof:r,type:z,key:F,ref:te!==void 0?te:null,props:_e}}function N(z,F){return D(z.type,F,void 0,void 0,void 0,z.props)}function $(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function Y(z){var F={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(te){return F[te]})}var oe=/\/+/g;function ae(z,F){return typeof z=="object"&&z!==null&&z.key!=null?Y(""+z.key):F.toString(36)}function fe(){}function se(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(fe,fe):(z.status="pending",z.then(function(F){z.status==="pending"&&(z.status="fulfilled",z.value=F)},function(F){z.status==="pending"&&(z.status="rejected",z.reason=F)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function B(z,F,te,le,pe){var _e=typeof z;(_e==="undefined"||_e==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(_e){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case r:case i:Ee=!0;break;case h:return Ee=z._init,B(Ee(z._payload),F,te,le,pe)}}if(Ee)return pe=pe(z),Ee=le===""?"."+ae(z,0):le,w(pe)?(te="",Ee!=null&&(te=Ee.replace(oe,"$&/")+"/"),B(pe,F,te,"",function(Le){return Le})):pe!=null&&($(pe)&&(pe=N(pe,te+(pe.key==null||z&&z.key===pe.key?"":(""+pe.key).replace(oe,"$&/")+"/")+Ee)),F.push(pe)),1;Ee=0;var Ne=le===""?".":le+":";if(w(z))for(var Pe=0;Pe<z.length;Pe++)le=z[Pe],_e=Ne+ae(le,Pe),Ee+=B(le,F,te,_e,pe);else if(Pe=y(z),typeof Pe=="function")for(z=Pe.call(z),Pe=0;!(le=z.next()).done;)le=le.value,_e=Ne+ae(le,Pe++),Ee+=B(le,F,te,_e,pe);else if(_e==="object"){if(typeof z.then=="function")return B(se(z),F,te,le,pe);throw F=String(z),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function j(z,F,te){if(z==null)return z;var le=[],pe=0;return B(z,le,"","",function(_e){return F.call(te,_e,pe++)}),le}function J(z){if(z._status===-1){var F=z._result;F=F(),F.then(function(te){(z._status===0||z._status===-1)&&(z._status=1,z._result=te)},function(te){(z._status===0||z._status===-1)&&(z._status=2,z._result=te)}),z._status===-1&&(z._status=0,z._result=F)}if(z._status===1)return z._result.default;throw z._result}var Z=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function G(){}return Ge.Children={map:j,forEach:function(z,F,te){j(z,function(){F.apply(this,arguments)},te)},count:function(z){var F=0;return j(z,function(){F++}),F},toArray:function(z){return j(z,function(F){return F})||[]},only:function(z){if(!$(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ge.Component=_,Ge.Fragment=o,Ge.Profiler=s,Ge.PureComponent=R,Ge.StrictMode=p,Ge.Suspense=l,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(z){return O.H.useMemoCache(z)}},Ge.cache=function(z){return function(){return z.apply(null,arguments)}},Ge.cloneElement=function(z,F,te){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var le=m({},z.props),pe=z.key,_e=void 0;if(F!=null)for(Ee in F.ref!==void 0&&(_e=void 0),F.key!==void 0&&(pe=""+F.key),F)!P.call(F,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&F.ref===void 0||(le[Ee]=F[Ee]);var Ee=arguments.length-2;if(Ee===1)le.children=te;else if(1<Ee){for(var Ne=Array(Ee),Pe=0;Pe<Ee;Pe++)Ne[Pe]=arguments[Pe+2];le.children=Ne}return D(z.type,pe,void 0,void 0,_e,le)},Ge.createContext=function(z){return z={$$typeof:a,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:f,_context:z},z},Ge.createElement=function(z,F,te){var le,pe={},_e=null;if(F!=null)for(le in F.key!==void 0&&(_e=""+F.key),F)P.call(F,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(pe[le]=F[le]);var Ee=arguments.length-2;if(Ee===1)pe.children=te;else if(1<Ee){for(var Ne=Array(Ee),Pe=0;Pe<Ee;Pe++)Ne[Pe]=arguments[Pe+2];pe.children=Ne}if(z&&z.defaultProps)for(le in Ee=z.defaultProps,Ee)pe[le]===void 0&&(pe[le]=Ee[le]);return D(z,_e,void 0,void 0,null,pe)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(z){return{$$typeof:n,render:z}},Ge.isValidElement=$,Ge.lazy=function(z){return{$$typeof:h,_payload:{_status:-1,_result:z},_init:J}},Ge.memo=function(z,F){return{$$typeof:u,type:z,compare:F===void 0?null:F}},Ge.startTransition=function(z){var F=O.T,te={};O.T=te;try{var le=z(),pe=O.S;pe!==null&&pe(te,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(G,Z)}catch(_e){Z(_e)}finally{O.T=F}},Ge.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ge.use=function(z){return O.H.use(z)},Ge.useActionState=function(z,F,te){return O.H.useActionState(z,F,te)},Ge.useCallback=function(z,F){return O.H.useCallback(z,F)},Ge.useContext=function(z){return O.H.useContext(z)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(z,F){return O.H.useDeferredValue(z,F)},Ge.useEffect=function(z,F,te){var le=O.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(z,F)},Ge.useId=function(){return O.H.useId()},Ge.useImperativeHandle=function(z,F,te){return O.H.useImperativeHandle(z,F,te)},Ge.useInsertionEffect=function(z,F){return O.H.useInsertionEffect(z,F)},Ge.useLayoutEffect=function(z,F){return O.H.useLayoutEffect(z,F)},Ge.useMemo=function(z,F){return O.H.useMemo(z,F)},Ge.useOptimistic=function(z,F){return O.H.useOptimistic(z,F)},Ge.useReducer=function(z,F,te){return O.H.useReducer(z,F,te)},Ge.useRef=function(z){return O.H.useRef(z)},Ge.useState=function(z){return O.H.useState(z)},Ge.useSyncExternalStore=function(z,F,te){return O.H.useSyncExternalStore(z,F,te)},Ge.useTransition=function(){return O.H.useTransition()},Ge.version="19.1.0",Ge}var I0;function cS(){return I0||(I0=1,gd.exports=hN()),gd.exports}var yd={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function pN(){if(M0)return Ut;M0=1;var r=cS();function i(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var p={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");function f(l,u,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:d==null?null:""+d,children:l,containerInfo:u,implementation:h}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,Ut.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(i(299));return f(l,u,null,h)},Ut.flushSync=function(l){var u=a.T,h=p.p;try{if(a.T=null,p.p=2,l)return l()}finally{a.T=u,p.p=h,p.d.f()}},Ut.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,p.d.C(l,u))},Ut.prefetchDNS=function(l){typeof l=="string"&&p.d.D(l)},Ut.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,d=n(h,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?p.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:y,fetchPriority:g}):h==="script"&&p.d.X(l,{crossOrigin:d,integrity:y,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ut.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=n(u.as,u.crossOrigin);p.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&p.d.M(l)},Ut.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,d=n(h,u.crossOrigin);p.d.L(l,h,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ut.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=n(u.as,u.crossOrigin);p.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else p.d.m(l)},Ut.requestFormReset=function(l){p.d.r(l)},Ut.unstable_batchedUpdates=function(l,u){return l(u)},Ut.useFormState=function(l,u,h){return a.H.useFormState(l,u,h)},Ut.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ut.version="19.1.0",Ut}var D0;function dN(){if(D0)return yd.exports;D0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),yd.exports=pN(),yd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function vN(){if(j0)return Is;j0=1;var r=fN(),i=cS(),o=dN();function p(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)t+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,c=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(c=t.return),e=t.return;while(e)}return t.tag===3?c:null}function a(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function n(e){if(f(e)!==e)throw Error(p(188))}function l(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(p(188));return t!==e?null:e}for(var c=e,v=t;;){var S=c.return;if(S===null)break;var E=S.alternate;if(E===null){if(v=S.return,v!==null){c=v;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===c)return n(S),e;if(E===v)return n(S),t;E=E.sibling}throw Error(p(188))}if(c.return!==v.return)c=S,v=E;else{for(var q=!1,U=S.child;U;){if(U===c){q=!0,c=S,v=E;break}if(U===v){q=!0,v=S,c=E;break}U=U.sibling}if(!q){for(U=E.child;U;){if(U===c){q=!0,c=E,v=S;break}if(U===v){q=!0,v=E,c=S;break}U=U.sibling}if(!q)throw Error(p(189))}}if(c.alternate!==v)throw Error(p(190))}if(c.tag!==3)throw Error(p(188));return c.stateNode.current===c?e:t}function u(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=u(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,d=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),A=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case _:return"Profiler";case C:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case g:return"Portal";case A:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return t=e.displayName||null,t!==null?t:se(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return se(e(t))}catch{}}return null}var B=Array.isArray,j=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},G=[],z=-1;function F(e){return{current:e}}function te(e){0>z||(e.current=G[z],G[z]=null,z--)}function le(e,t){z++,G[z]=e.current,e.current=t}var pe=F(null),_e=F(null),Ee=F(null),Ne=F(null);function Pe(e,t){switch(le(Ee,t),le(_e,e),le(pe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ZR(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ZR(t),e=e0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}te(pe),le(pe,e)}function Le(){te(pe),te(_e),te(Ee)}function qe(e){e.memoizedState!==null&&le(Ne,e);var t=pe.current,c=e0(t,e.type);t!==c&&(le(_e,e),le(pe,c))}function lt(e){_e.current===e&&(te(pe),te(_e)),Ne.current===e&&(te(Ne),Es._currentValue=Z)}var pt=Object.prototype.hasOwnProperty,de=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,we=r.unstable_shouldYield,Me=r.unstable_requestPaint,Oe=r.unstable_now,K=r.unstable_getCurrentPriorityLevel,Q=r.unstable_ImmediatePriority,x=r.unstable_UserBlockingPriority,M=r.unstable_NormalPriority,k=r.unstable_LowPriority,H=r.unstable_IdlePriority,ne=r.log,Se=r.unstable_setDisableYieldValue,Re=null,L=null;function T(e){if(typeof ne=="function"&&Se(e),L&&typeof L.setStrictMode=="function")try{L.setStrictMode(Re,e)}catch{}}var I=Math.clz32?Math.clz32:ee,V=Math.log,W=Math.LN2;function ee(e){return e>>>=0,e===0?32:31-(V(e)/W|0)|0}var ue=256,Te=4194304;function Ie(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fe(e,t,c){var v=e.pendingLanes;if(v===0)return 0;var S=0,E=e.suspendedLanes,q=e.pingedLanes;e=e.warmLanes;var U=v&134217727;return U!==0?(v=U&~E,v!==0?S=Ie(v):(q&=U,q!==0?S=Ie(q):c||(c=U&~e,c!==0&&(S=Ie(c))))):(U=v&~E,U!==0?S=Ie(U):q!==0?S=Ie(q):c||(c=v&~e,c!==0&&(S=Ie(c)))),S===0?0:t!==0&&t!==S&&(t&E)===0&&(E=S&-S,c=t&-t,E>=c||E===32&&(c&4194048)!==0)?t:S}function We(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(){var e=ue;return ue<<=1,(ue&4194048)===0&&(ue=256),e}function br(){var e=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),e}function zt(e){for(var t=[],c=0;31>c;c++)t.push(e);return t}function Lt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cn(e,t,c,v,S,E){var q=e.pendingLanes;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=c,e.entangledLanes&=c,e.errorRecoveryDisabledLanes&=c,e.shellSuspendCounter=0;var U=e.entanglements,X=e.expirationTimes,ve=e.hiddenUpdates;for(c=q&~c;0<c;){var me=31-I(c),be=1<<me;U[me]=0,X[me]=-1;var ge=ve[me];if(ge!==null)for(ve[me]=null,me=0;me<ge.length;me++){var ye=ge[me];ye!==null&&(ye.lane&=-536870913)}c&=~be}v!==0&&lr(e,v,0),E!==0&&S===0&&e.tag!==0&&(e.suspendedLanes|=E&~(q&~t))}function lr(e,t,c){e.pendingLanes|=t,e.suspendedLanes&=~t;var v=31-I(t);e.entangledLanes|=t,e.entanglements[v]=e.entanglements[v]|1073741824|c&4194090}function un(e,t){var c=e.entangledLanes|=t;for(e=e.entanglements;c;){var v=31-I(c),S=1<<v;S&t|e[v]&t&&(e[v]|=t),c&=~S}}function Do(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function jo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Rl(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:S0(e.type))}function ih(e,t){var c=J.p;try{return J.p=e,t()}finally{J.p=c}}var Ir=Math.random().toString(36).slice(2),At="__reactFiber$"+Ir,xt="__reactProps$"+Ir,ln="__reactContainer$"+Ir,ko="__reactEvents$"+Ir,oh="__reactListeners$"+Ir,_l="__reactHandles$"+Ir,El="__reactResources$"+Ir,xn="__reactMarker$"+Ir;function No(e){delete e[At],delete e[xt],delete e[ko],delete e[oh],delete e[_l]}function zi(e){var t=e[At];if(t)return t;for(var c=e.parentNode;c;){if(t=c[ln]||c[At]){if(c=t.alternate,t.child!==null||c!==null&&c.child!==null)for(e=i0(e);e!==null;){if(c=e[At])return c;e=i0(e)}return t}e=c,c=e.parentNode}return null}function Li(e){if(e=e[At]||e[ln]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function qo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(p(33))}function xi(e){var t=e[El];return t||(t=e[El]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Tt(e){e[xn]=!0}var FS=new Set,HS={};function Bn(e,t){Bi(e,t),Bi(e+"Capture",t)}function Bi(e,t){for(HS[e]=t,e=0;e<t.length;e++)FS.add(t[e])}var ej=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),VS={},WS={};function tj(e){return pt.call(WS,e)?!0:pt.call(VS,e)?!1:ej.test(e)?WS[e]=!0:(VS[e]=!0,!1)}function wl(e,t,c){if(tj(t))if(c===null)e.removeAttribute(t);else{switch(typeof c){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var v=t.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+c)}}function Al(e,t,c){if(c===null)e.removeAttribute(t);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+c)}}function Lr(e,t,c,v){if(v===null)e.removeAttribute(c);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(c);return}e.setAttributeNS(t,c,""+v)}}var sh,GS;function Ui(e){if(sh===void 0)try{throw Error()}catch(c){var t=c.stack.trim().match(/\n( *(at )?)/);sh=t&&t[1]||"",GS=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sh+e+GS}var ah=!1;function ch(e,t){if(!e||ah)return"";ah=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(t){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ye){var ge=ye}Reflect.construct(e,[],be)}else{try{be.call()}catch(ye){ge=ye}e.call(be.prototype)}}else{try{throw Error()}catch(ye){ge=ye}(be=e())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ye){if(ye&&ge&&typeof ye.stack=="string")return[ye.stack,ge.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=v.DetermineComponentFrameRoot(),q=E[0],U=E[1];if(q&&U){var X=q.split(`
`),ve=U.split(`
`);for(S=v=0;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;for(;S<ve.length&&!ve[S].includes("DetermineComponentFrameRoot");)S++;if(v===X.length||S===ve.length)for(v=X.length-1,S=ve.length-1;1<=v&&0<=S&&X[v]!==ve[S];)S--;for(;1<=v&&0<=S;v--,S--)if(X[v]!==ve[S]){if(v!==1||S!==1)do if(v--,S--,0>S||X[v]!==ve[S]){var me=`
`+X[v].replace(" at new "," at ");return e.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",e.displayName)),me}while(1<=v&&0<=S);break}}}finally{ah=!1,Error.prepareStackTrace=c}return(c=e?e.displayName||e.name:"")?Ui(c):""}function rj(e){switch(e.tag){case 26:case 27:case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return ch(e.type,!1);case 11:return ch(e.type.render,!1);case 1:return ch(e.type,!0);case 31:return Ui("Activity");default:return""}}function KS(e){try{var t="";do t+=rj(e),e=e.return;while(e);return t}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function fr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $S(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nj(e){var t=$S(e)?"checked":"value",c=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),v=""+e[t];if(!e.hasOwnProperty(t)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var S=c.get,E=c.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return S.call(this)},set:function(q){v=""+q,E.call(this,q)}}),Object.defineProperty(e,t,{enumerable:c.enumerable}),{getValue:function(){return v},setValue:function(q){v=""+q},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tl(e){e._valueTracker||(e._valueTracker=nj(e))}function JS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var c=t.getValue(),v="";return e&&(v=$S(e)?e.checked?"true":"false":e.value),e=v,e!==c?(t.setValue(e),!0):!1}function Pl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ij=/[\n"\\]/g;function hr(e){return e.replace(ij,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function uh(e,t,c,v,S,E,q,U){e.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?e.type=q:e.removeAttribute("type"),t!=null?q==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+fr(t)):e.value!==""+fr(t)&&(e.value=""+fr(t)):q!=="submit"&&q!=="reset"||e.removeAttribute("value"),t!=null?lh(e,q,fr(t)):c!=null?lh(e,q,fr(c)):v!=null&&e.removeAttribute("value"),S==null&&E!=null&&(e.defaultChecked=!!E),S!=null&&(e.checked=S&&typeof S!="function"&&typeof S!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?e.name=""+fr(U):e.removeAttribute("name")}function QS(e,t,c,v,S,E,q,U){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.type=E),t!=null||c!=null){if(!(E!=="submit"&&E!=="reset"||t!=null))return;c=c!=null?""+fr(c):"",t=t!=null?""+fr(t):c,U||t===e.value||(e.value=t),e.defaultValue=t}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,e.checked=U?e.checked:!!v,e.defaultChecked=!!v,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(e.name=q)}function lh(e,t,c){t==="number"&&Pl(e.ownerDocument)===e||e.defaultValue===""+c||(e.defaultValue=""+c)}function Fi(e,t,c,v){if(e=e.options,t){t={};for(var S=0;S<c.length;S++)t["$"+c[S]]=!0;for(c=0;c<e.length;c++)S=t.hasOwnProperty("$"+e[c].value),e[c].selected!==S&&(e[c].selected=S),S&&v&&(e[c].defaultSelected=!0)}else{for(c=""+fr(c),t=null,S=0;S<e.length;S++){if(e[S].value===c){e[S].selected=!0,v&&(e[S].defaultSelected=!0);return}t!==null||e[S].disabled||(t=e[S])}t!==null&&(t.selected=!0)}}function YS(e,t,c){if(t!=null&&(t=""+fr(t),t!==e.value&&(e.value=t),c==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=c!=null?""+fr(c):""}function XS(e,t,c,v){if(t==null){if(v!=null){if(c!=null)throw Error(p(92));if(B(v)){if(1<v.length)throw Error(p(93));v=v[0]}c=v}c==null&&(c=""),t=c}c=fr(t),e.defaultValue=c,v=e.textContent,v===c&&v!==""&&v!==null&&(e.value=v)}function Hi(e,t){if(t){var c=e.firstChild;if(c&&c===e.lastChild&&c.nodeType===3){c.nodeValue=t;return}}e.textContent=t}var oj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ZS(e,t,c){var v=t.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?v?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":v?e.setProperty(t,c):typeof c!="number"||c===0||oj.has(t)?t==="float"?e.cssFloat=c:e[t]=(""+c).trim():e[t]=c+"px"}function eC(e,t,c){if(t!=null&&typeof t!="object")throw Error(p(62));if(e=e.style,c!=null){for(var v in c)!c.hasOwnProperty(v)||t!=null&&t.hasOwnProperty(v)||(v.indexOf("--")===0?e.setProperty(v,""):v==="float"?e.cssFloat="":e[v]="");for(var S in t)v=t[S],t.hasOwnProperty(S)&&c[S]!==v&&ZS(e,S,v)}else for(var E in t)t.hasOwnProperty(E)&&ZS(e,E,t[E])}function fh(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ol(e){return aj.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var hh=null;function ph(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vi=null,Wi=null;function tC(e){var t=Li(e);if(t&&(e=t.stateNode)){var c=e[xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(uh(e,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),t=c.name,c.type==="radio"&&t!=null){for(c=e;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+hr(""+t)+'"][type="radio"]'),t=0;t<c.length;t++){var v=c[t];if(v!==e&&v.form===e.form){var S=v[xt]||null;if(!S)throw Error(p(90));uh(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(t=0;t<c.length;t++)v=c[t],v.form===e.form&&JS(v)}break e;case"textarea":YS(e,c.value,c.defaultValue);break e;case"select":t=c.value,t!=null&&Fi(e,!!c.multiple,t,!1)}}}var dh=!1;function rC(e,t,c){if(dh)return e(t,c);dh=!0;try{var v=e(t);return v}finally{if(dh=!1,(Vi!==null||Wi!==null)&&(vf(),Vi&&(t=Vi,e=Wi,Wi=Vi=null,tC(t),e)))for(t=0;t<e.length;t++)tC(e[t])}}function zo(e,t){var c=e.stateNode;if(c===null)return null;var v=c[xt]||null;if(v===null)return null;c=v[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(e=e.type,v=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!v;break e;default:e=!1}if(e)return null;if(c&&typeof c!="function")throw Error(p(231,t,typeof c));return c}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=!1;if(xr)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){vh=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{vh=!1}var fn=null,gh=null,Il=null;function nC(){if(Il)return Il;var e,t=gh,c=t.length,v,S="value"in fn?fn.value:fn.textContent,E=S.length;for(e=0;e<c&&t[e]===S[e];e++);var q=c-e;for(v=1;v<=q&&t[c-v]===S[E-v];v++);return Il=S.slice(e,1<v?1-v:void 0)}function Ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dl(){return!0}function iC(){return!1}function Kt(e){function t(c,v,S,E,q){this._reactName=c,this._targetInst=S,this.type=v,this.nativeEvent=E,this.target=q,this.currentTarget=null;for(var U in e)e.hasOwnProperty(U)&&(c=e[U],this[U]=c?c(E):E[U]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Dl:iC,this.isPropagationStopped=iC,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),t}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=Kt(Un),xo=h({},Un,{view:0,detail:0}),cj=Kt(xo),yh,mh,Bo,kl=h({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bo&&(Bo&&e.type==="mousemove"?(yh=e.screenX-Bo.screenX,mh=e.screenY-Bo.screenY):mh=yh=0,Bo=e),yh)},movementY:function(e){return"movementY"in e?e.movementY:mh}}),oC=Kt(kl),uj=h({},kl,{dataTransfer:0}),lj=Kt(uj),fj=h({},xo,{relatedTarget:0}),Sh=Kt(fj),hj=h({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),pj=Kt(hj),dj=h({},Un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vj=Kt(dj),gj=h({},Un,{data:0}),sC=Kt(gj),yj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sj[e])?!!t[e]:!1}function Ch(){return Cj}var bj=h({},xo,{key:function(e){if(e.key){var t=yj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rj=Kt(bj),_j=h({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aC=Kt(_j),Ej=h({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),wj=Kt(Ej),Aj=h({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tj=Kt(Aj),Pj=h({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oj=Kt(Pj),Ij=h({},Un,{newState:0,oldState:0}),Mj=Kt(Ij),Dj=[9,13,27,32],bh=xr&&"CompositionEvent"in window,Uo=null;xr&&"documentMode"in document&&(Uo=document.documentMode);var jj=xr&&"TextEvent"in window&&!Uo,cC=xr&&(!bh||Uo&&8<Uo&&11>=Uo),uC=" ",lC=!1;function fC(e,t){switch(e){case"keyup":return Dj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gi=!1;function kj(e,t){switch(e){case"compositionend":return hC(t);case"keypress":return t.which!==32?null:(lC=!0,uC);case"textInput":return e=t.data,e===uC&&lC?null:e;default:return null}}function Nj(e,t){if(Gi)return e==="compositionend"||!bh&&fC(e,t)?(e=nC(),Il=gh=fn=null,Gi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cC&&t.locale!=="ko"?null:t.data;default:return null}}var qj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qj[e.type]:t==="textarea"}function dC(e,t,c,v){Vi?Wi?Wi.push(v):Wi=[v]:Vi=v,t=bf(t,"onChange"),0<t.length&&(c=new jl("onChange","change",null,c,v),e.push({event:c,listeners:t}))}var Fo=null,Ho=null;function zj(e){$R(e,0)}function Nl(e){var t=qo(e);if(JS(t))return e}function vC(e,t){if(e==="change")return t}var gC=!1;if(xr){var Rh;if(xr){var _h="oninput"in document;if(!_h){var yC=document.createElement("div");yC.setAttribute("oninput","return;"),_h=typeof yC.oninput=="function"}Rh=_h}else Rh=!1;gC=Rh&&(!document.documentMode||9<document.documentMode)}function mC(){Fo&&(Fo.detachEvent("onpropertychange",SC),Ho=Fo=null)}function SC(e){if(e.propertyName==="value"&&Nl(Ho)){var t=[];dC(t,Ho,e,ph(e)),rC(zj,t)}}function Lj(e,t,c){e==="focusin"?(mC(),Fo=t,Ho=c,Fo.attachEvent("onpropertychange",SC)):e==="focusout"&&mC()}function xj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nl(Ho)}function Bj(e,t){if(e==="click")return Nl(t)}function Uj(e,t){if(e==="input"||e==="change")return Nl(t)}function Fj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:Fj;function Vo(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var c=Object.keys(e),v=Object.keys(t);if(c.length!==v.length)return!1;for(v=0;v<c.length;v++){var S=c[v];if(!pt.call(t,S)||!Xt(e[S],t[S]))return!1}return!0}function CC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bC(e,t){var c=CC(e);e=0;for(var v;c;){if(c.nodeType===3){if(v=e+c.textContent.length,e<=t&&v>=t)return{node:c,offset:t-e};e=v}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=CC(c)}}function RC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _C(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Pl(e.document);t instanceof e.HTMLIFrameElement;){try{var c=typeof t.contentWindow.location.href=="string"}catch{c=!1}if(c)e=t.contentWindow;else break;t=Pl(e.document)}return t}function Eh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Hj=xr&&"documentMode"in document&&11>=document.documentMode,Ki=null,wh=null,Wo=null,Ah=!1;function EC(e,t,c){var v=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ah||Ki==null||Ki!==Pl(v)||(v=Ki,"selectionStart"in v&&Eh(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Wo&&Vo(Wo,v)||(Wo=v,v=bf(wh,"onSelect"),0<v.length&&(t=new jl("onSelect","select",null,t,c),e.push({event:t,listeners:v}),t.target=Ki)))}function Fn(e,t){var c={};return c[e.toLowerCase()]=t.toLowerCase(),c["Webkit"+e]="webkit"+t,c["Moz"+e]="moz"+t,c}var $i={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},Th={},wC={};xr&&(wC=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Hn(e){if(Th[e])return Th[e];if(!$i[e])return e;var t=$i[e],c;for(c in t)if(t.hasOwnProperty(c)&&c in wC)return Th[e]=t[c];return e}var AC=Hn("animationend"),TC=Hn("animationiteration"),PC=Hn("animationstart"),Vj=Hn("transitionrun"),Wj=Hn("transitionstart"),Gj=Hn("transitioncancel"),OC=Hn("transitionend"),IC=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function Rr(e,t){IC.set(e,t),Bn(t,[e])}var MC=new WeakMap;function pr(e,t){if(typeof e=="object"&&e!==null){var c=MC.get(e);return c!==void 0?c:(t={value:e,source:t,stack:KS(t)},MC.set(e,t),t)}return{value:e,source:t,stack:KS(t)}}var dr=[],Ji=0,Oh=0;function ql(){for(var e=Ji,t=Oh=Ji=0;t<e;){var c=dr[t];dr[t++]=null;var v=dr[t];dr[t++]=null;var S=dr[t];dr[t++]=null;var E=dr[t];if(dr[t++]=null,v!==null&&S!==null){var q=v.pending;q===null?S.next=S:(S.next=q.next,q.next=S),v.pending=S}E!==0&&DC(c,S,E)}}function zl(e,t,c,v){dr[Ji++]=e,dr[Ji++]=t,dr[Ji++]=c,dr[Ji++]=v,Oh|=v,e.lanes|=v,e=e.alternate,e!==null&&(e.lanes|=v)}function Ih(e,t,c,v){return zl(e,t,c,v),Ll(e)}function Qi(e,t){return zl(e,null,null,t),Ll(e)}function DC(e,t,c){e.lanes|=c;var v=e.alternate;v!==null&&(v.lanes|=c);for(var S=!1,E=e.return;E!==null;)E.childLanes|=c,v=E.alternate,v!==null&&(v.childLanes|=c),E.tag===22&&(e=E.stateNode,e===null||e._visibility&1||(S=!0)),e=E,E=E.return;return e.tag===3?(E=e.stateNode,S&&t!==null&&(S=31-I(c),e=E.hiddenUpdates,v=e[S],v===null?e[S]=[t]:v.push(t),t.lane=c|536870912),E):null}function Ll(e){if(50<gs)throw gs=0,qp=null,Error(p(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Yi={};function Kj(e,t,c,v){this.tag=e,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(e,t,c,v){return new Kj(e,t,c,v)}function Mh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Br(e,t){var c=e.alternate;return c===null?(c=Zt(e.tag,t,e.key,e.mode),c.elementType=e.elementType,c.type=e.type,c.stateNode=e.stateNode,c.alternate=e,e.alternate=c):(c.pendingProps=t,c.type=e.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=e.flags&65011712,c.childLanes=e.childLanes,c.lanes=e.lanes,c.child=e.child,c.memoizedProps=e.memoizedProps,c.memoizedState=e.memoizedState,c.updateQueue=e.updateQueue,t=e.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},c.sibling=e.sibling,c.index=e.index,c.ref=e.ref,c.refCleanup=e.refCleanup,c}function jC(e,t){e.flags&=65011714;var c=e.alternate;return c===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=c.childLanes,e.lanes=c.lanes,e.child=c.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=c.memoizedProps,e.memoizedState=c.memoizedState,e.updateQueue=c.updateQueue,e.type=c.type,t=c.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function xl(e,t,c,v,S,E){var q=0;if(v=e,typeof e=="function")Mh(e)&&(q=1);else if(typeof e=="string")q=Jk(e,c,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=Zt(31,c,t,S),e.elementType=$,e.lanes=E,e;case m:return Vn(c.children,S,E,t);case C:q=8,S|=24;break;case _:return e=Zt(12,c,t,S|2),e.elementType=_,e.lanes=E,e;case O:return e=Zt(13,c,t,S),e.elementType=O,e.lanes=E,e;case P:return e=Zt(19,c,t,S),e.elementType=P,e.lanes=E,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b:case A:q=10;break e;case R:q=9;break e;case w:q=11;break e;case D:q=14;break e;case N:q=16,v=null;break e}q=29,c=Error(p(130,e===null?"null":typeof e,"")),v=null}return t=Zt(q,c,t,S),t.elementType=e,t.type=v,t.lanes=E,t}function Vn(e,t,c,v){return e=Zt(7,e,v,t),e.lanes=c,e}function Dh(e,t,c){return e=Zt(6,e,null,t),e.lanes=c,e}function jh(e,t,c){return t=Zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=c,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xi=[],Zi=0,Bl=null,Ul=0,vr=[],gr=0,Wn=null,Ur=1,Fr="";function Gn(e,t){Xi[Zi++]=Ul,Xi[Zi++]=Bl,Bl=e,Ul=t}function kC(e,t,c){vr[gr++]=Ur,vr[gr++]=Fr,vr[gr++]=Wn,Wn=e;var v=Ur;e=Fr;var S=32-I(v)-1;v&=~(1<<S),c+=1;var E=32-I(t)+S;if(30<E){var q=S-S%5;E=(v&(1<<q)-1).toString(32),v>>=q,S-=q,Ur=1<<32-I(t)+S|c<<S|v,Fr=E+e}else Ur=1<<E|c<<S|v,Fr=e}function kh(e){e.return!==null&&(Gn(e,1),kC(e,1,0))}function Nh(e){for(;e===Bl;)Bl=Xi[--Zi],Xi[Zi]=null,Ul=Xi[--Zi],Xi[Zi]=null;for(;e===Wn;)Wn=vr[--gr],vr[gr]=null,Fr=vr[--gr],vr[gr]=null,Ur=vr[--gr],vr[gr]=null}var Ht=null,mt=null,nt=!1,Kn=null,Mr=!1,qh=Error(p(519));function $n(e){var t=Error(p(418,""));throw $o(pr(t,e)),qh}function NC(e){var t=e.stateNode,c=e.type,v=e.memoizedProps;switch(t[At]=e,t[xt]=v,c){case"dialog":Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":case"embed":Ye("load",t);break;case"video":case"audio":for(c=0;c<ms.length;c++)Ye(ms[c],t);break;case"source":Ye("error",t);break;case"img":case"image":case"link":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"input":Ye("invalid",t),QS(t,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Tl(t);break;case"select":Ye("invalid",t);break;case"textarea":Ye("invalid",t),XS(t,v.value,v.defaultValue,v.children),Tl(t)}c=v.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||t.textContent===""+c||v.suppressHydrationWarning===!0||XR(t.textContent,c)?(v.popover!=null&&(Ye("beforetoggle",t),Ye("toggle",t)),v.onScroll!=null&&Ye("scroll",t),v.onScrollEnd!=null&&Ye("scrollend",t),v.onClick!=null&&(t.onclick=Rf),t=!0):t=!1,t||$n(e)}function qC(e){for(Ht=e.return;Ht;)switch(Ht.tag){case 5:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:Ht=Ht.return}}function Go(e){if(e!==Ht)return!1;if(!nt)return qC(e),nt=!0,!1;var t=e.tag,c;if((c=t!==3&&t!==27)&&((c=t===5)&&(c=e.type,c=!(c!=="form"&&c!=="button")||Xp(e.type,e.memoizedProps)),c=!c),c&&mt&&$n(e),qC(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(c=e.data,c==="/$"){if(t===0){mt=Er(e.nextSibling);break e}t--}else c!=="$"&&c!=="$!"&&c!=="$?"||t++;e=e.nextSibling}mt=null}}else t===27?(t=mt,Tn(e.type)?(e=rd,rd=null,mt=e):mt=t):mt=Ht?Er(e.stateNode.nextSibling):null;return!0}function Ko(){mt=Ht=null,nt=!1}function zC(){var e=Kn;return e!==null&&(Qt===null?Qt=e:Qt.push.apply(Qt,e),Kn=null),e}function $o(e){Kn===null?Kn=[e]:Kn.push(e)}var zh=F(null),Jn=null,Hr=null;function hn(e,t,c){le(zh,t._currentValue),t._currentValue=c}function Vr(e){e._currentValue=zh.current,te(zh)}function Lh(e,t,c){for(;e!==null;){var v=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,v!==null&&(v.childLanes|=t)):v!==null&&(v.childLanes&t)!==t&&(v.childLanes|=t),e===c)break;e=e.return}}function xh(e,t,c,v){var S=e.child;for(S!==null&&(S.return=e);S!==null;){var E=S.dependencies;if(E!==null){var q=S.child;E=E.firstContext;e:for(;E!==null;){var U=E;E=S;for(var X=0;X<t.length;X++)if(U.context===t[X]){E.lanes|=c,U=E.alternate,U!==null&&(U.lanes|=c),Lh(E.return,c,e),v||(q=null);break e}E=U.next}}else if(S.tag===18){if(q=S.return,q===null)throw Error(p(341));q.lanes|=c,E=q.alternate,E!==null&&(E.lanes|=c),Lh(q,c,e),q=null}else q=S.child;if(q!==null)q.return=S;else for(q=S;q!==null;){if(q===e){q=null;break}if(S=q.sibling,S!==null){S.return=q.return,q=S;break}q=q.return}S=q}}function Jo(e,t,c,v){e=null;for(var S=t,E=!1;S!==null;){if(!E){if((S.flags&524288)!==0)E=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var q=S.alternate;if(q===null)throw Error(p(387));if(q=q.memoizedProps,q!==null){var U=S.type;Xt(S.pendingProps.value,q.value)||(e!==null?e.push(U):e=[U])}}else if(S===Ne.current){if(q=S.alternate,q===null)throw Error(p(387));q.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(e!==null?e.push(Es):e=[Es])}S=S.return}e!==null&&xh(t,e,c,v),t.flags|=262144}function Fl(e){for(e=e.firstContext;e!==null;){if(!Xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qn(e){Jn=e,Hr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bt(e){return LC(Jn,e)}function Hl(e,t){return Jn===null&&Qn(e),LC(e,t)}function LC(e,t){var c=t._currentValue;if(t={context:t,memoizedValue:c,next:null},Hr===null){if(e===null)throw Error(p(308));Hr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hr=Hr.next=t;return c}var $j=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(c,v){e.push(v)}};this.abort=function(){t.aborted=!0,e.forEach(function(c){return c()})}},Jj=r.unstable_scheduleCallback,Qj=r.unstable_NormalPriority,Et={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bh(){return{controller:new $j,data:new Map,refCount:0}}function Qo(e){e.refCount--,e.refCount===0&&Jj(Qj,function(){e.controller.abort()})}var Yo=null,Uh=0,eo=0,to=null;function Yj(e,t){if(Yo===null){var c=Yo=[];Uh=0,eo=Hp(),to={status:"pending",value:void 0,then:function(v){c.push(v)}}}return Uh++,t.then(xC,xC),t}function xC(){if(--Uh===0&&Yo!==null){to!==null&&(to.status="fulfilled");var e=Yo;Yo=null,eo=0,to=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Xj(e,t){var c=[],v={status:"pending",value:null,reason:null,then:function(S){c.push(S)}};return e.then(function(){v.status="fulfilled",v.value=t;for(var S=0;S<c.length;S++)(0,c[S])(t)},function(S){for(v.status="rejected",v.reason=S,S=0;S<c.length;S++)(0,c[S])(void 0)}),v}var BC=j.S;j.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Yj(e,t),BC!==null&&BC(e,t)};var Yn=F(null);function Fh(){var e=Yn.current;return e!==null?e:ht.pooledCache}function Vl(e,t){t===null?le(Yn,Yn.current):le(Yn,t.pool)}function UC(){var e=Fh();return e===null?null:{parent:Et._currentValue,pool:e}}var Xo=Error(p(460)),FC=Error(p(474)),Wl=Error(p(542)),Hh={then:function(){}};function HC(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gl(){}function VC(e,t,c){switch(c=e[c],c===void 0?e.push(t):c!==t&&(t.then(Gl,Gl),t=c),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,GC(e),e;default:if(typeof t.status=="string")t.then(Gl,Gl);else{if(e=ht,e!==null&&100<e.shellSuspendCounter)throw Error(p(482));e=t,e.status="pending",e.then(function(v){if(t.status==="pending"){var S=t;S.status="fulfilled",S.value=v}},function(v){if(t.status==="pending"){var S=t;S.status="rejected",S.reason=v}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,GC(e),e}throw Zo=t,Xo}}var Zo=null;function WC(){if(Zo===null)throw Error(p(459));var e=Zo;return Zo=null,e}function GC(e){if(e===Xo||e===Wl)throw Error(p(483))}var pn=!1;function Vh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vn(e,t,c){var v=e.updateQueue;if(v===null)return null;if(v=v.shared,(ot&2)!==0){var S=v.pending;return S===null?t.next=t:(t.next=S.next,S.next=t),v.pending=t,t=Ll(e),DC(e,null,c),t}return zl(e,v,t,c),Ll(e)}function es(e,t,c){if(t=t.updateQueue,t!==null&&(t=t.shared,(c&4194048)!==0)){var v=t.lanes;v&=e.pendingLanes,c|=v,t.lanes=c,un(e,c)}}function Gh(e,t){var c=e.updateQueue,v=e.alternate;if(v!==null&&(v=v.updateQueue,c===v)){var S=null,E=null;if(c=c.firstBaseUpdate,c!==null){do{var q={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};E===null?S=E=q:E=E.next=q,c=c.next}while(c!==null);E===null?S=E=t:E=E.next=t}else S=E=t;c={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:v.shared,callbacks:v.callbacks},e.updateQueue=c;return}e=c.lastBaseUpdate,e===null?c.firstBaseUpdate=t:e.next=t,c.lastBaseUpdate=t}var Kh=!1;function ts(){if(Kh){var e=to;if(e!==null)throw e}}function rs(e,t,c,v){Kh=!1;var S=e.updateQueue;pn=!1;var E=S.firstBaseUpdate,q=S.lastBaseUpdate,U=S.shared.pending;if(U!==null){S.shared.pending=null;var X=U,ve=X.next;X.next=null,q===null?E=ve:q.next=ve,q=X;var me=e.alternate;me!==null&&(me=me.updateQueue,U=me.lastBaseUpdate,U!==q&&(U===null?me.firstBaseUpdate=ve:U.next=ve,me.lastBaseUpdate=X))}if(E!==null){var be=S.baseState;q=0,me=ve=X=null,U=E;do{var ge=U.lane&-536870913,ye=ge!==U.lane;if(ye?(Ze&ge)===ge:(v&ge)===ge){ge!==0&&ge===eo&&(Kh=!0),me!==null&&(me=me.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var He=e,xe=U;ge=t;var ut=c;switch(xe.tag){case 1:if(He=xe.payload,typeof He=="function"){be=He.call(ut,be,ge);break e}be=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=xe.payload,ge=typeof He=="function"?He.call(ut,be,ge):He,ge==null)break e;be=h({},be,ge);break e;case 2:pn=!0}}ge=U.callback,ge!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=S.callbacks,ye===null?S.callbacks=[ge]:ye.push(ge))}else ye={lane:ge,tag:U.tag,payload:U.payload,callback:U.callback,next:null},me===null?(ve=me=ye,X=be):me=me.next=ye,q|=ge;if(U=U.next,U===null){if(U=S.shared.pending,U===null)break;ye=U,U=ye.next,ye.next=null,S.lastBaseUpdate=ye,S.shared.pending=null}}while(!0);me===null&&(X=be),S.baseState=X,S.firstBaseUpdate=ve,S.lastBaseUpdate=me,E===null&&(S.shared.lanes=0),_n|=q,e.lanes=q,e.memoizedState=be}}function KC(e,t){if(typeof e!="function")throw Error(p(191,e));e.call(t)}function $C(e,t){var c=e.callbacks;if(c!==null)for(e.callbacks=null,e=0;e<c.length;e++)KC(c[e],t)}var ro=F(null),Kl=F(0);function JC(e,t){e=Yr,le(Kl,e),le(ro,t),Yr=e|t.baseLanes}function $h(){le(Kl,Yr),le(ro,ro.current)}function Jh(){Yr=Kl.current,te(ro),te(Kl)}var gn=0,$e=null,at=null,Rt=null,$l=!1,no=!1,Xn=!1,Jl=0,ns=0,io=null,Zj=0;function Ct(){throw Error(p(321))}function Qh(e,t){if(t===null)return!1;for(var c=0;c<t.length&&c<e.length;c++)if(!Xt(e[c],t[c]))return!1;return!0}function Yh(e,t,c,v,S,E){return gn=E,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Db:jb,Xn=!1,E=c(v,S),Xn=!1,no&&(E=YC(t,c,v,S)),QC(e),E}function QC(e){j.H=tf;var t=at!==null&&at.next!==null;if(gn=0,Rt=at=$e=null,$l=!1,ns=0,io=null,t)throw Error(p(300));e===null||Pt||(e=e.dependencies,e!==null&&Fl(e)&&(Pt=!0))}function YC(e,t,c,v){$e=e;var S=0;do{if(no&&(io=null),ns=0,no=!1,25<=S)throw Error(p(301));if(S+=1,Rt=at=null,e.updateQueue!=null){var E=e.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}j.H=sk,E=t(c,v)}while(no);return E}function ek(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?is(t):t,e=e.useState()[0],(at!==null?at.memoizedState:null)!==e&&($e.flags|=1024),t}function Xh(){var e=Jl!==0;return Jl=0,e}function Zh(e,t,c){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c}function ep(e){if($l){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}$l=!1}gn=0,Rt=at=$e=null,no=!1,ns=Jl=0,io=null}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?$e.memoizedState=Rt=e:Rt=Rt.next=e,Rt}function _t(){if(at===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=Rt===null?$e.memoizedState:Rt.next;if(t!==null)Rt=t,at=e;else{if(e===null)throw $e.alternate===null?Error(p(467)):Error(p(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Rt===null?$e.memoizedState=Rt=e:Rt=Rt.next=e}return Rt}function tp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function is(e){var t=ns;return ns+=1,io===null&&(io=[]),e=VC(io,e,t),t=$e,(Rt===null?t.memoizedState:Rt.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Db:jb),e}function Ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return is(e);if(e.$$typeof===A)return Bt(e)}throw Error(p(438,String(e)))}function rp(e){var t=null,c=$e.updateQueue;if(c!==null&&(t=c.memoCache),t==null){var v=$e.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(t={data:v.data.map(function(S){return S.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),c===null&&(c=tp(),$e.updateQueue=c),c.memoCache=t,c=t.data[t.index],c===void 0)for(c=t.data[t.index]=Array(e),v=0;v<e;v++)c[v]=Y;return t.index++,c}function Wr(e,t){return typeof t=="function"?t(e):t}function Yl(e){var t=_t();return np(t,at,e)}function np(e,t,c){var v=e.queue;if(v===null)throw Error(p(311));v.lastRenderedReducer=c;var S=e.baseQueue,E=v.pending;if(E!==null){if(S!==null){var q=S.next;S.next=E.next,E.next=q}t.baseQueue=S=E,v.pending=null}if(E=e.baseState,S===null)e.memoizedState=E;else{t=S.next;var U=q=null,X=null,ve=t,me=!1;do{var be=ve.lane&-536870913;if(be!==ve.lane?(Ze&be)===be:(gn&be)===be){var ge=ve.revertLane;if(ge===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),be===eo&&(me=!0);else if((gn&ge)===ge){ve=ve.next,ge===eo&&(me=!0);continue}else be={lane:0,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},X===null?(U=X=be,q=E):X=X.next=be,$e.lanes|=ge,_n|=ge;be=ve.action,Xn&&c(E,be),E=ve.hasEagerState?ve.eagerState:c(E,be)}else ge={lane:be,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},X===null?(U=X=ge,q=E):X=X.next=ge,$e.lanes|=be,_n|=be;ve=ve.next}while(ve!==null&&ve!==t);if(X===null?q=E:X.next=U,!Xt(E,e.memoizedState)&&(Pt=!0,me&&(c=to,c!==null)))throw c;e.memoizedState=E,e.baseState=q,e.baseQueue=X,v.lastRenderedState=E}return S===null&&(v.lanes=0),[e.memoizedState,v.dispatch]}function ip(e){var t=_t(),c=t.queue;if(c===null)throw Error(p(311));c.lastRenderedReducer=e;var v=c.dispatch,S=c.pending,E=t.memoizedState;if(S!==null){c.pending=null;var q=S=S.next;do E=e(E,q.action),q=q.next;while(q!==S);Xt(E,t.memoizedState)||(Pt=!0),t.memoizedState=E,t.baseQueue===null&&(t.baseState=E),c.lastRenderedState=E}return[E,v]}function XC(e,t,c){var v=$e,S=_t(),E=nt;if(E){if(c===void 0)throw Error(p(407));c=c()}else c=t();var q=!Xt((at||S).memoizedState,c);q&&(S.memoizedState=c,Pt=!0),S=S.queue;var U=tb.bind(null,v,S,e);if(os(2048,8,U,[e]),S.getSnapshot!==t||q||Rt!==null&&Rt.memoizedState.tag&1){if(v.flags|=2048,oo(9,Xl(),eb.bind(null,v,S,c,t),null),ht===null)throw Error(p(349));E||(gn&124)!==0||ZC(v,t,c)}return c}function ZC(e,t,c){e.flags|=16384,e={getSnapshot:t,value:c},t=$e.updateQueue,t===null?(t=tp(),$e.updateQueue=t,t.stores=[e]):(c=t.stores,c===null?t.stores=[e]:c.push(e))}function eb(e,t,c,v){t.value=c,t.getSnapshot=v,rb(t)&&nb(e)}function tb(e,t,c){return c(function(){rb(t)&&nb(e)})}function rb(e){var t=e.getSnapshot;e=e.value;try{var c=t();return!Xt(e,c)}catch{return!0}}function nb(e){var t=Qi(e,2);t!==null&&ir(t,e,2)}function op(e){var t=$t();if(typeof e=="function"){var c=e;if(e=c(),Xn){T(!0);try{c()}finally{T(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:e},t}function ib(e,t,c,v){return e.baseState=c,np(e,at,typeof v=="function"?v:Wr)}function tk(e,t,c,v,S){if(ef(e))throw Error(p(485));if(e=t.action,e!==null){var E={payload:S,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){E.listeners.push(q)}};j.T!==null?c(!0):E.isTransition=!1,v(E),c=t.pending,c===null?(E.next=t.pending=E,ob(t,E)):(E.next=c.next,t.pending=c.next=E)}}function ob(e,t){var c=t.action,v=t.payload,S=e.state;if(t.isTransition){var E=j.T,q={};j.T=q;try{var U=c(S,v),X=j.S;X!==null&&X(q,U),sb(e,t,U)}catch(ve){sp(e,t,ve)}finally{j.T=E}}else try{E=c(S,v),sb(e,t,E)}catch(ve){sp(e,t,ve)}}function sb(e,t,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(v){ab(e,t,v)},function(v){return sp(e,t,v)}):ab(e,t,c)}function ab(e,t,c){t.status="fulfilled",t.value=c,cb(t),e.state=c,t=e.pending,t!==null&&(c=t.next,c===t?e.pending=null:(c=c.next,t.next=c,ob(e,c)))}function sp(e,t,c){var v=e.pending;if(e.pending=null,v!==null){v=v.next;do t.status="rejected",t.reason=c,cb(t),t=t.next;while(t!==v)}e.action=null}function cb(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ub(e,t){return t}function lb(e,t){if(nt){var c=ht.formState;if(c!==null){e:{var v=$e;if(nt){if(mt){t:{for(var S=mt,E=Mr;S.nodeType!==8;){if(!E){S=null;break t}if(S=Er(S.nextSibling),S===null){S=null;break t}}E=S.data,S=E==="F!"||E==="F"?S:null}if(S){mt=Er(S.nextSibling),v=S.data==="F!";break e}}$n(v)}v=!1}v&&(t=c[0])}}return c=$t(),c.memoizedState=c.baseState=t,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ub,lastRenderedState:t},c.queue=v,c=Ob.bind(null,$e,v),v.dispatch=c,v=op(!1),E=fp.bind(null,$e,!1,v.queue),v=$t(),S={state:t,dispatch:null,action:e,pending:null},v.queue=S,c=tk.bind(null,$e,S,E,c),S.dispatch=c,v.memoizedState=e,[t,c,!1]}function fb(e){var t=_t();return hb(t,at,e)}function hb(e,t,c){if(t=np(e,t,ub)[0],e=Yl(Wr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var v=is(t)}catch(q){throw q===Xo?Wl:q}else v=t;t=_t();var S=t.queue,E=S.dispatch;return c!==t.memoizedState&&($e.flags|=2048,oo(9,Xl(),rk.bind(null,S,c),null)),[v,E,e]}function rk(e,t){e.action=t}function pb(e){var t=_t(),c=at;if(c!==null)return hb(t,c,e);_t(),t=t.memoizedState,c=_t();var v=c.queue.dispatch;return c.memoizedState=e,[t,v,!1]}function oo(e,t,c,v){return e={tag:e,create:c,deps:v,inst:t,next:null},t=$e.updateQueue,t===null&&(t=tp(),$e.updateQueue=t),c=t.lastEffect,c===null?t.lastEffect=e.next=e:(v=c.next,c.next=e,e.next=v,t.lastEffect=e),e}function Xl(){return{destroy:void 0,resource:void 0}}function db(){return _t().memoizedState}function Zl(e,t,c,v){var S=$t();v=v===void 0?null:v,$e.flags|=e,S.memoizedState=oo(1|t,Xl(),c,v)}function os(e,t,c,v){var S=_t();v=v===void 0?null:v;var E=S.memoizedState.inst;at!==null&&v!==null&&Qh(v,at.memoizedState.deps)?S.memoizedState=oo(t,E,c,v):($e.flags|=e,S.memoizedState=oo(1|t,E,c,v))}function vb(e,t){Zl(8390656,8,e,t)}function gb(e,t){os(2048,8,e,t)}function yb(e,t){return os(4,2,e,t)}function mb(e,t){return os(4,4,e,t)}function Sb(e,t){if(typeof t=="function"){e=e();var c=t(e);return function(){typeof c=="function"?c():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cb(e,t,c){c=c!=null?c.concat([e]):null,os(4,4,Sb.bind(null,t,e),c)}function ap(){}function bb(e,t){var c=_t();t=t===void 0?null:t;var v=c.memoizedState;return t!==null&&Qh(t,v[1])?v[0]:(c.memoizedState=[e,t],e)}function Rb(e,t){var c=_t();t=t===void 0?null:t;var v=c.memoizedState;if(t!==null&&Qh(t,v[1]))return v[0];if(v=e(),Xn){T(!0);try{e()}finally{T(!1)}}return c.memoizedState=[v,t],v}function cp(e,t,c){return c===void 0||(gn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=c,e=wR(),$e.lanes|=e,_n|=e,c)}function _b(e,t,c,v){return Xt(c,t)?c:ro.current!==null?(e=cp(e,c,v),Xt(e,t)||(Pt=!0),e):(gn&42)===0?(Pt=!0,e.memoizedState=c):(e=wR(),$e.lanes|=e,_n|=e,t)}function Eb(e,t,c,v,S){var E=J.p;J.p=E!==0&&8>E?E:8;var q=j.T,U={};j.T=U,fp(e,!1,t,c);try{var X=S(),ve=j.S;if(ve!==null&&ve(U,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var me=Xj(X,v);ss(e,t,me,nr(e))}else ss(e,t,v,nr(e))}catch(be){ss(e,t,{then:function(){},status:"rejected",reason:be},nr())}finally{J.p=E,j.T=q}}function nk(){}function up(e,t,c,v){if(e.tag!==5)throw Error(p(476));var S=wb(e).queue;Eb(e,S,t,Z,c===null?nk:function(){return Ab(e),c(v)})}function wb(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:Z},next:null};var c={};return t.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:c},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ab(e){var t=wb(e).next.queue;ss(e,t,{},nr())}function lp(){return Bt(Es)}function Tb(){return _t().memoizedState}function Pb(){return _t().memoizedState}function ik(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var c=nr();e=dn(c);var v=vn(t,e,c);v!==null&&(ir(v,t,c),es(v,t,c)),t={cache:Bh()},e.payload=t;return}t=t.return}}function ok(e,t,c){var v=nr();c={lane:v,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},ef(e)?Ib(t,c):(c=Ih(e,t,c,v),c!==null&&(ir(c,e,v),Mb(c,t,v)))}function Ob(e,t,c){var v=nr();ss(e,t,c,v)}function ss(e,t,c,v){var S={lane:v,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(ef(e))Ib(t,S);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=t.lastRenderedReducer,E!==null))try{var q=t.lastRenderedState,U=E(q,c);if(S.hasEagerState=!0,S.eagerState=U,Xt(U,q))return zl(e,t,S,0),ht===null&&ql(),!1}catch{}finally{}if(c=Ih(e,t,S,v),c!==null)return ir(c,e,v),Mb(c,t,v),!0}return!1}function fp(e,t,c,v){if(v={lane:2,revertLane:Hp(),action:v,hasEagerState:!1,eagerState:null,next:null},ef(e)){if(t)throw Error(p(479))}else t=Ih(e,c,v,2),t!==null&&ir(t,e,2)}function ef(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function Ib(e,t){no=$l=!0;var c=e.pending;c===null?t.next=t:(t.next=c.next,c.next=t),e.pending=t}function Mb(e,t,c){if((c&4194048)!==0){var v=t.lanes;v&=e.pendingLanes,c|=v,t.lanes=c,un(e,c)}}var tf={readContext:Bt,use:Ql,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Db={readContext:Bt,use:Ql,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:vb,useImperativeHandle:function(e,t,c){c=c!=null?c.concat([e]):null,Zl(4194308,4,Sb.bind(null,t,e),c)},useLayoutEffect:function(e,t){return Zl(4194308,4,e,t)},useInsertionEffect:function(e,t){Zl(4,2,e,t)},useMemo:function(e,t){var c=$t();t=t===void 0?null:t;var v=e();if(Xn){T(!0);try{e()}finally{T(!1)}}return c.memoizedState=[v,t],v},useReducer:function(e,t,c){var v=$t();if(c!==void 0){var S=c(t);if(Xn){T(!0);try{c(t)}finally{T(!1)}}}else S=t;return v.memoizedState=v.baseState=S,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:S},v.queue=e,e=e.dispatch=ok.bind(null,$e,e),[v.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:function(e){e=op(e);var t=e.queue,c=Ob.bind(null,$e,t);return t.dispatch=c,[e.memoizedState,c]},useDebugValue:ap,useDeferredValue:function(e,t){var c=$t();return cp(c,e,t)},useTransition:function(){var e=op(!1);return e=Eb.bind(null,$e,e.queue,!0,!1),$t().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,c){var v=$e,S=$t();if(nt){if(c===void 0)throw Error(p(407));c=c()}else{if(c=t(),ht===null)throw Error(p(349));(Ze&124)!==0||ZC(v,t,c)}S.memoizedState=c;var E={value:c,getSnapshot:t};return S.queue=E,vb(tb.bind(null,v,E,e),[e]),v.flags|=2048,oo(9,Xl(),eb.bind(null,v,E,c,t),null),c},useId:function(){var e=$t(),t=ht.identifierPrefix;if(nt){var c=Fr,v=Ur;c=(v&~(1<<32-I(v)-1)).toString(32)+c,t=""+t+"R"+c,c=Jl++,0<c&&(t+="H"+c.toString(32)),t+=""}else c=Zj++,t=""+t+"r"+c.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:lp,useFormState:lb,useActionState:lb,useOptimistic:function(e){var t=$t();t.memoizedState=t.baseState=e;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=c,t=fp.bind(null,$e,!0,c),c.dispatch=t,[e,t]},useMemoCache:rp,useCacheRefresh:function(){return $t().memoizedState=ik.bind(null,$e)}},jb={readContext:Bt,use:Ql,useCallback:bb,useContext:Bt,useEffect:gb,useImperativeHandle:Cb,useInsertionEffect:yb,useLayoutEffect:mb,useMemo:Rb,useReducer:Yl,useRef:db,useState:function(){return Yl(Wr)},useDebugValue:ap,useDeferredValue:function(e,t){var c=_t();return _b(c,at.memoizedState,e,t)},useTransition:function(){var e=Yl(Wr)[0],t=_t().memoizedState;return[typeof e=="boolean"?e:is(e),t]},useSyncExternalStore:XC,useId:Tb,useHostTransitionStatus:lp,useFormState:fb,useActionState:fb,useOptimistic:function(e,t){var c=_t();return ib(c,at,e,t)},useMemoCache:rp,useCacheRefresh:Pb},sk={readContext:Bt,use:Ql,useCallback:bb,useContext:Bt,useEffect:gb,useImperativeHandle:Cb,useInsertionEffect:yb,useLayoutEffect:mb,useMemo:Rb,useReducer:ip,useRef:db,useState:function(){return ip(Wr)},useDebugValue:ap,useDeferredValue:function(e,t){var c=_t();return at===null?cp(c,e,t):_b(c,at.memoizedState,e,t)},useTransition:function(){var e=ip(Wr)[0],t=_t().memoizedState;return[typeof e=="boolean"?e:is(e),t]},useSyncExternalStore:XC,useId:Tb,useHostTransitionStatus:lp,useFormState:pb,useActionState:pb,useOptimistic:function(e,t){var c=_t();return at!==null?ib(c,at,e,t):(c.baseState=e,[e,c.queue.dispatch])},useMemoCache:rp,useCacheRefresh:Pb},so=null,as=0;function rf(e){var t=as;return as+=1,so===null&&(so=[]),VC(so,e,t)}function cs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function nf(e,t){throw t.$$typeof===d?Error(p(525)):(e=Object.prototype.toString.call(t),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function kb(e){var t=e._init;return t(e._payload)}function Nb(e){function t(ce,re){if(e){var he=ce.deletions;he===null?(ce.deletions=[re],ce.flags|=16):he.push(re)}}function c(ce,re){if(!e)return null;for(;re!==null;)t(ce,re),re=re.sibling;return null}function v(ce){for(var re=new Map;ce!==null;)ce.key!==null?re.set(ce.key,ce):re.set(ce.index,ce),ce=ce.sibling;return re}function S(ce,re){return ce=Br(ce,re),ce.index=0,ce.sibling=null,ce}function E(ce,re,he){return ce.index=he,e?(he=ce.alternate,he!==null?(he=he.index,he<re?(ce.flags|=67108866,re):he):(ce.flags|=67108866,re)):(ce.flags|=1048576,re)}function q(ce){return e&&ce.alternate===null&&(ce.flags|=67108866),ce}function U(ce,re,he,Ce){return re===null||re.tag!==6?(re=Dh(he,ce.mode,Ce),re.return=ce,re):(re=S(re,he),re.return=ce,re)}function X(ce,re,he,Ce){var je=he.type;return je===m?me(ce,re,he.props.children,Ce,he.key):re!==null&&(re.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===N&&kb(je)===re.type)?(re=S(re,he.props),cs(re,he),re.return=ce,re):(re=xl(he.type,he.key,he.props,null,ce.mode,Ce),cs(re,he),re.return=ce,re)}function ve(ce,re,he,Ce){return re===null||re.tag!==4||re.stateNode.containerInfo!==he.containerInfo||re.stateNode.implementation!==he.implementation?(re=jh(he,ce.mode,Ce),re.return=ce,re):(re=S(re,he.children||[]),re.return=ce,re)}function me(ce,re,he,Ce,je){return re===null||re.tag!==7?(re=Vn(he,ce.mode,Ce,je),re.return=ce,re):(re=S(re,he),re.return=ce,re)}function be(ce,re,he){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Dh(""+re,ce.mode,he),re.return=ce,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case y:return he=xl(re.type,re.key,re.props,null,ce.mode,he),cs(he,re),he.return=ce,he;case g:return re=jh(re,ce.mode,he),re.return=ce,re;case N:var Ce=re._init;return re=Ce(re._payload),be(ce,re,he)}if(B(re)||ae(re))return re=Vn(re,ce.mode,he,null),re.return=ce,re;if(typeof re.then=="function")return be(ce,rf(re),he);if(re.$$typeof===A)return be(ce,Hl(ce,re),he);nf(ce,re)}return null}function ge(ce,re,he,Ce){var je=re!==null?re.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return je!==null?null:U(ce,re,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case y:return he.key===je?X(ce,re,he,Ce):null;case g:return he.key===je?ve(ce,re,he,Ce):null;case N:return je=he._init,he=je(he._payload),ge(ce,re,he,Ce)}if(B(he)||ae(he))return je!==null?null:me(ce,re,he,Ce,null);if(typeof he.then=="function")return ge(ce,re,rf(he),Ce);if(he.$$typeof===A)return ge(ce,re,Hl(ce,he),Ce);nf(ce,he)}return null}function ye(ce,re,he,Ce,je){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ce=ce.get(he)||null,U(re,ce,""+Ce,je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return ce=ce.get(Ce.key===null?he:Ce.key)||null,X(re,ce,Ce,je);case g:return ce=ce.get(Ce.key===null?he:Ce.key)||null,ve(re,ce,Ce,je);case N:var Je=Ce._init;return Ce=Je(Ce._payload),ye(ce,re,he,Ce,je)}if(B(Ce)||ae(Ce))return ce=ce.get(he)||null,me(re,ce,Ce,je,null);if(typeof Ce.then=="function")return ye(ce,re,he,rf(Ce),je);if(Ce.$$typeof===A)return ye(ce,re,he,Hl(re,Ce),je);nf(re,Ce)}return null}function He(ce,re,he,Ce){for(var je=null,Je=null,ke=re,Ue=re=0,It=null;ke!==null&&Ue<he.length;Ue++){ke.index>Ue?(It=ke,ke=null):It=ke.sibling;var tt=ge(ce,ke,he[Ue],Ce);if(tt===null){ke===null&&(ke=It);break}e&&ke&&tt.alternate===null&&t(ce,ke),re=E(tt,re,Ue),Je===null?je=tt:Je.sibling=tt,Je=tt,ke=It}if(Ue===he.length)return c(ce,ke),nt&&Gn(ce,Ue),je;if(ke===null){for(;Ue<he.length;Ue++)ke=be(ce,he[Ue],Ce),ke!==null&&(re=E(ke,re,Ue),Je===null?je=ke:Je.sibling=ke,Je=ke);return nt&&Gn(ce,Ue),je}for(ke=v(ke);Ue<he.length;Ue++)It=ye(ke,ce,Ue,he[Ue],Ce),It!==null&&(e&&It.alternate!==null&&ke.delete(It.key===null?Ue:It.key),re=E(It,re,Ue),Je===null?je=It:Je.sibling=It,Je=It);return e&&ke.forEach(function(Dn){return t(ce,Dn)}),nt&&Gn(ce,Ue),je}function xe(ce,re,he,Ce){if(he==null)throw Error(p(151));for(var je=null,Je=null,ke=re,Ue=re=0,It=null,tt=he.next();ke!==null&&!tt.done;Ue++,tt=he.next()){ke.index>Ue?(It=ke,ke=null):It=ke.sibling;var Dn=ge(ce,ke,tt.value,Ce);if(Dn===null){ke===null&&(ke=It);break}e&&ke&&Dn.alternate===null&&t(ce,ke),re=E(Dn,re,Ue),Je===null?je=Dn:Je.sibling=Dn,Je=Dn,ke=It}if(tt.done)return c(ce,ke),nt&&Gn(ce,Ue),je;if(ke===null){for(;!tt.done;Ue++,tt=he.next())tt=be(ce,tt.value,Ce),tt!==null&&(re=E(tt,re,Ue),Je===null?je=tt:Je.sibling=tt,Je=tt);return nt&&Gn(ce,Ue),je}for(ke=v(ke);!tt.done;Ue++,tt=he.next())tt=ye(ke,ce,Ue,tt.value,Ce),tt!==null&&(e&&tt.alternate!==null&&ke.delete(tt.key===null?Ue:tt.key),re=E(tt,re,Ue),Je===null?je=tt:Je.sibling=tt,Je=tt);return e&&ke.forEach(function(aN){return t(ce,aN)}),nt&&Gn(ce,Ue),je}function ut(ce,re,he,Ce){if(typeof he=="object"&&he!==null&&he.type===m&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case y:e:{for(var je=he.key;re!==null;){if(re.key===je){if(je=he.type,je===m){if(re.tag===7){c(ce,re.sibling),Ce=S(re,he.props.children),Ce.return=ce,ce=Ce;break e}}else if(re.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===N&&kb(je)===re.type){c(ce,re.sibling),Ce=S(re,he.props),cs(Ce,he),Ce.return=ce,ce=Ce;break e}c(ce,re);break}else t(ce,re);re=re.sibling}he.type===m?(Ce=Vn(he.props.children,ce.mode,Ce,he.key),Ce.return=ce,ce=Ce):(Ce=xl(he.type,he.key,he.props,null,ce.mode,Ce),cs(Ce,he),Ce.return=ce,ce=Ce)}return q(ce);case g:e:{for(je=he.key;re!==null;){if(re.key===je)if(re.tag===4&&re.stateNode.containerInfo===he.containerInfo&&re.stateNode.implementation===he.implementation){c(ce,re.sibling),Ce=S(re,he.children||[]),Ce.return=ce,ce=Ce;break e}else{c(ce,re);break}else t(ce,re);re=re.sibling}Ce=jh(he,ce.mode,Ce),Ce.return=ce,ce=Ce}return q(ce);case N:return je=he._init,he=je(he._payload),ut(ce,re,he,Ce)}if(B(he))return He(ce,re,he,Ce);if(ae(he)){if(je=ae(he),typeof je!="function")throw Error(p(150));return he=je.call(he),xe(ce,re,he,Ce)}if(typeof he.then=="function")return ut(ce,re,rf(he),Ce);if(he.$$typeof===A)return ut(ce,re,Hl(ce,he),Ce);nf(ce,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,re!==null&&re.tag===6?(c(ce,re.sibling),Ce=S(re,he),Ce.return=ce,ce=Ce):(c(ce,re),Ce=Dh(he,ce.mode,Ce),Ce.return=ce,ce=Ce),q(ce)):c(ce,re)}return function(ce,re,he,Ce){try{as=0;var je=ut(ce,re,he,Ce);return so=null,je}catch(ke){if(ke===Xo||ke===Wl)throw ke;var Je=Zt(29,ke,null,ce.mode);return Je.lanes=Ce,Je.return=ce,Je}finally{}}}var ao=Nb(!0),qb=Nb(!1),yr=F(null),Dr=null;function yn(e){var t=e.alternate;le(wt,wt.current&1),le(yr,e),Dr===null&&(t===null||ro.current!==null||t.memoizedState!==null)&&(Dr=e)}function zb(e){if(e.tag===22){if(le(wt,wt.current),le(yr,e),Dr===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Dr=e)}}else mn()}function mn(){le(wt,wt.current),le(yr,yr.current)}function Gr(e){te(yr),Dr===e&&(Dr=null),te(wt)}var wt=F(0);function of(e){for(var t=e;t!==null;){if(t.tag===13){var c=t.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||td(c)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hp(e,t,c,v){t=e.memoizedState,c=c(v,t),c=c==null?t:h({},t,c),e.memoizedState=c,e.lanes===0&&(e.updateQueue.baseState=c)}var pp={enqueueSetState:function(e,t,c){e=e._reactInternals;var v=nr(),S=dn(v);S.payload=t,c!=null&&(S.callback=c),t=vn(e,S,v),t!==null&&(ir(t,e,v),es(t,e,v))},enqueueReplaceState:function(e,t,c){e=e._reactInternals;var v=nr(),S=dn(v);S.tag=1,S.payload=t,c!=null&&(S.callback=c),t=vn(e,S,v),t!==null&&(ir(t,e,v),es(t,e,v))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var c=nr(),v=dn(c);v.tag=2,t!=null&&(v.callback=t),t=vn(e,v,c),t!==null&&(ir(t,e,c),es(t,e,c))}};function Lb(e,t,c,v,S,E,q){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(v,E,q):t.prototype&&t.prototype.isPureReactComponent?!Vo(c,v)||!Vo(S,E):!0}function xb(e,t,c,v){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(c,v),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(c,v),t.state!==e&&pp.enqueueReplaceState(t,t.state,null)}function Zn(e,t){var c=t;if("ref"in t){c={};for(var v in t)v!=="ref"&&(c[v]=t[v])}if(e=e.defaultProps){c===t&&(c=h({},c));for(var S in e)c[S]===void 0&&(c[S]=e[S])}return c}var sf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Bb(e){sf(e)}function Ub(e){console.error(e)}function Fb(e){sf(e)}function af(e,t){try{var c=e.onUncaughtError;c(t.value,{componentStack:t.stack})}catch(v){setTimeout(function(){throw v})}}function Hb(e,t,c){try{var v=e.onCaughtError;v(c.value,{componentStack:c.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function dp(e,t,c){return c=dn(c),c.tag=3,c.payload={element:null},c.callback=function(){af(e,t)},c}function Vb(e){return e=dn(e),e.tag=3,e}function Wb(e,t,c,v){var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var E=v.value;e.payload=function(){return S(E)},e.callback=function(){Hb(t,c,v)}}var q=c.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(e.callback=function(){Hb(t,c,v),typeof S!="function"&&(En===null?En=new Set([this]):En.add(this));var U=v.stack;this.componentDidCatch(v.value,{componentStack:U!==null?U:""})})}function ak(e,t,c,v,S){if(c.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(t=c.alternate,t!==null&&Jo(t,c,S,!0),c=yr.current,c!==null){switch(c.tag){case 13:return Dr===null?Lp():c.alternate===null&&St===0&&(St=3),c.flags&=-257,c.flags|=65536,c.lanes=S,v===Hh?c.flags|=16384:(t=c.updateQueue,t===null?c.updateQueue=new Set([v]):t.add(v),Bp(e,v,S)),!1;case 22:return c.flags|=65536,v===Hh?c.flags|=16384:(t=c.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([v])},c.updateQueue=t):(c=t.retryQueue,c===null?t.retryQueue=new Set([v]):c.add(v)),Bp(e,v,S)),!1}throw Error(p(435,c.tag))}return Bp(e,v,S),Lp(),!1}if(nt)return t=yr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=S,v!==qh&&(e=Error(p(422),{cause:v}),$o(pr(e,c)))):(v!==qh&&(t=Error(p(423),{cause:v}),$o(pr(t,c))),e=e.current.alternate,e.flags|=65536,S&=-S,e.lanes|=S,v=pr(v,c),S=dp(e.stateNode,v,S),Gh(e,S),St!==4&&(St=2)),!1;var E=Error(p(520),{cause:v});if(E=pr(E,c),vs===null?vs=[E]:vs.push(E),St!==4&&(St=2),t===null)return!0;v=pr(v,c),c=t;do{switch(c.tag){case 3:return c.flags|=65536,e=S&-S,c.lanes|=e,e=dp(c.stateNode,v,e),Gh(c,e),!1;case 1:if(t=c.type,E=c.stateNode,(c.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(En===null||!En.has(E))))return c.flags|=65536,S&=-S,c.lanes|=S,S=Vb(S),Wb(S,e,c,v),Gh(c,S),!1}c=c.return}while(c!==null);return!1}var Gb=Error(p(461)),Pt=!1;function jt(e,t,c,v){t.child=e===null?qb(t,null,c,v):ao(t,e.child,c,v)}function Kb(e,t,c,v,S){c=c.render;var E=t.ref;if("ref"in v){var q={};for(var U in v)U!=="ref"&&(q[U]=v[U])}else q=v;return Qn(t),v=Yh(e,t,c,q,E,S),U=Xh(),e!==null&&!Pt?(Zh(e,t,S),Kr(e,t,S)):(nt&&U&&kh(t),t.flags|=1,jt(e,t,v,S),t.child)}function $b(e,t,c,v,S){if(e===null){var E=c.type;return typeof E=="function"&&!Mh(E)&&E.defaultProps===void 0&&c.compare===null?(t.tag=15,t.type=E,Jb(e,t,E,v,S)):(e=xl(c.type,null,v,t,t.mode,S),e.ref=t.ref,e.return=t,t.child=e)}if(E=e.child,!Rp(e,S)){var q=E.memoizedProps;if(c=c.compare,c=c!==null?c:Vo,c(q,v)&&e.ref===t.ref)return Kr(e,t,S)}return t.flags|=1,e=Br(E,v),e.ref=t.ref,e.return=t,t.child=e}function Jb(e,t,c,v,S){if(e!==null){var E=e.memoizedProps;if(Vo(E,v)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=v=E,Rp(e,S))(e.flags&131072)!==0&&(Pt=!0);else return t.lanes=e.lanes,Kr(e,t,S)}return vp(e,t,c,v,S)}function Qb(e,t,c){var v=t.pendingProps,S=v.children,E=e!==null?e.memoizedState:null;if(v.mode==="hidden"){if((t.flags&128)!==0){if(v=E!==null?E.baseLanes|c:c,e!==null){for(S=t.child=e.child,E=0;S!==null;)E=E|S.lanes|S.childLanes,S=S.sibling;t.childLanes=E&~v}else t.childLanes=0,t.child=null;return Yb(e,t,v,c)}if((c&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vl(t,E!==null?E.cachePool:null),E!==null?JC(t,E):$h(),zb(t);else return t.lanes=t.childLanes=536870912,Yb(e,t,E!==null?E.baseLanes|c:c,c)}else E!==null?(Vl(t,E.cachePool),JC(t,E),mn(),t.memoizedState=null):(e!==null&&Vl(t,null),$h(),mn());return jt(e,t,S,c),t.child}function Yb(e,t,c,v){var S=Fh();return S=S===null?null:{parent:Et._currentValue,pool:S},t.memoizedState={baseLanes:c,cachePool:S},e!==null&&Vl(t,null),$h(),zb(t),e!==null&&Jo(e,t,v,!0),null}function cf(e,t){var c=t.ref;if(c===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(p(284));(e===null||e.ref!==c)&&(t.flags|=4194816)}}function vp(e,t,c,v,S){return Qn(t),c=Yh(e,t,c,v,void 0,S),v=Xh(),e!==null&&!Pt?(Zh(e,t,S),Kr(e,t,S)):(nt&&v&&kh(t),t.flags|=1,jt(e,t,c,S),t.child)}function Xb(e,t,c,v,S,E){return Qn(t),t.updateQueue=null,c=YC(t,v,c,S),QC(e),v=Xh(),e!==null&&!Pt?(Zh(e,t,E),Kr(e,t,E)):(nt&&v&&kh(t),t.flags|=1,jt(e,t,c,E),t.child)}function Zb(e,t,c,v,S){if(Qn(t),t.stateNode===null){var E=Yi,q=c.contextType;typeof q=="object"&&q!==null&&(E=Bt(q)),E=new c(v,E),t.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=pp,t.stateNode=E,E._reactInternals=t,E=t.stateNode,E.props=v,E.state=t.memoizedState,E.refs={},Vh(t),q=c.contextType,E.context=typeof q=="object"&&q!==null?Bt(q):Yi,E.state=t.memoizedState,q=c.getDerivedStateFromProps,typeof q=="function"&&(hp(t,c,q,v),E.state=t.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(q=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),q!==E.state&&pp.enqueueReplaceState(E,E.state,null),rs(t,v,E,S),ts(),E.state=t.memoizedState),typeof E.componentDidMount=="function"&&(t.flags|=4194308),v=!0}else if(e===null){E=t.stateNode;var U=t.memoizedProps,X=Zn(c,U);E.props=X;var ve=E.context,me=c.contextType;q=Yi,typeof me=="object"&&me!==null&&(q=Bt(me));var be=c.getDerivedStateFromProps;me=typeof be=="function"||typeof E.getSnapshotBeforeUpdate=="function",U=t.pendingProps!==U,me||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(U||ve!==q)&&xb(t,E,v,q),pn=!1;var ge=t.memoizedState;E.state=ge,rs(t,v,E,S),ts(),ve=t.memoizedState,U||ge!==ve||pn?(typeof be=="function"&&(hp(t,c,be,v),ve=t.memoizedState),(X=pn||Lb(t,c,X,v,ge,ve,q))?(me||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(t.flags|=4194308)):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=v,t.memoizedState=ve),E.props=v,E.state=ve,E.context=q,v=X):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),v=!1)}else{E=t.stateNode,Wh(e,t),q=t.memoizedProps,me=Zn(c,q),E.props=me,be=t.pendingProps,ge=E.context,ve=c.contextType,X=Yi,typeof ve=="object"&&ve!==null&&(X=Bt(ve)),U=c.getDerivedStateFromProps,(ve=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(q!==be||ge!==X)&&xb(t,E,v,X),pn=!1,ge=t.memoizedState,E.state=ge,rs(t,v,E,S),ts();var ye=t.memoizedState;q!==be||ge!==ye||pn||e!==null&&e.dependencies!==null&&Fl(e.dependencies)?(typeof U=="function"&&(hp(t,c,U,v),ye=t.memoizedState),(me=pn||Lb(t,c,me,v,ge,ye,X)||e!==null&&e.dependencies!==null&&Fl(e.dependencies))?(ve||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(v,ye,X),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(v,ye,X)),typeof E.componentDidUpdate=="function"&&(t.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof E.componentDidUpdate!="function"||q===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),t.memoizedProps=v,t.memoizedState=ye),E.props=v,E.state=ye,E.context=X,v=me):(typeof E.componentDidUpdate!="function"||q===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||q===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),v=!1)}return E=v,cf(e,t),v=(t.flags&128)!==0,E||v?(E=t.stateNode,c=v&&typeof c.getDerivedStateFromError!="function"?null:E.render(),t.flags|=1,e!==null&&v?(t.child=ao(t,e.child,null,S),t.child=ao(t,null,c,S)):jt(e,t,c,S),t.memoizedState=E.state,e=t.child):e=Kr(e,t,S),e}function eR(e,t,c,v){return Ko(),t.flags|=256,jt(e,t,c,v),t.child}var gp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(e){return{baseLanes:e,cachePool:UC()}}function mp(e,t,c){return e=e!==null?e.childLanes&~c:0,t&&(e|=mr),e}function tR(e,t,c){var v=t.pendingProps,S=!1,E=(t.flags&128)!==0,q;if((q=E)||(q=e!==null&&e.memoizedState===null?!1:(wt.current&2)!==0),q&&(S=!0,t.flags&=-129),q=(t.flags&32)!==0,t.flags&=-33,e===null){if(nt){if(S?yn(t):mn(),nt){var U=mt,X;if(X=U){e:{for(X=U,U=Mr;X.nodeType!==8;){if(!U){U=null;break e}if(X=Er(X.nextSibling),X===null){U=null;break e}}U=X}U!==null?(t.memoizedState={dehydrated:U,treeContext:Wn!==null?{id:Ur,overflow:Fr}:null,retryLane:536870912,hydrationErrors:null},X=Zt(18,null,null,0),X.stateNode=U,X.return=t,t.child=X,Ht=t,mt=null,X=!0):X=!1}X||$n(t)}if(U=t.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return td(U)?t.lanes=32:t.lanes=536870912,null;Gr(t)}return U=v.children,v=v.fallback,S?(mn(),S=t.mode,U=uf({mode:"hidden",children:U},S),v=Vn(v,S,c,null),U.return=t,v.return=t,U.sibling=v,t.child=U,S=t.child,S.memoizedState=yp(c),S.childLanes=mp(e,q,c),t.memoizedState=gp,v):(yn(t),Sp(t,U))}if(X=e.memoizedState,X!==null&&(U=X.dehydrated,U!==null)){if(E)t.flags&256?(yn(t),t.flags&=-257,t=Cp(e,t,c)):t.memoizedState!==null?(mn(),t.child=e.child,t.flags|=128,t=null):(mn(),S=v.fallback,U=t.mode,v=uf({mode:"visible",children:v.children},U),S=Vn(S,U,c,null),S.flags|=2,v.return=t,S.return=t,v.sibling=S,t.child=v,ao(t,e.child,null,c),v=t.child,v.memoizedState=yp(c),v.childLanes=mp(e,q,c),t.memoizedState=gp,t=S);else if(yn(t),td(U)){if(q=U.nextSibling&&U.nextSibling.dataset,q)var ve=q.dgst;q=ve,v=Error(p(419)),v.stack="",v.digest=q,$o({value:v,source:null,stack:null}),t=Cp(e,t,c)}else if(Pt||Jo(e,t,c,!1),q=(c&e.childLanes)!==0,Pt||q){if(q=ht,q!==null&&(v=c&-c,v=(v&42)!==0?1:Do(v),v=(v&(q.suspendedLanes|c))!==0?0:v,v!==0&&v!==X.retryLane))throw X.retryLane=v,Qi(e,v),ir(q,e,v),Gb;U.data==="$?"||Lp(),t=Cp(e,t,c)}else U.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=X.treeContext,mt=Er(U.nextSibling),Ht=t,nt=!0,Kn=null,Mr=!1,e!==null&&(vr[gr++]=Ur,vr[gr++]=Fr,vr[gr++]=Wn,Ur=e.id,Fr=e.overflow,Wn=t),t=Sp(t,v.children),t.flags|=4096);return t}return S?(mn(),S=v.fallback,U=t.mode,X=e.child,ve=X.sibling,v=Br(X,{mode:"hidden",children:v.children}),v.subtreeFlags=X.subtreeFlags&65011712,ve!==null?S=Br(ve,S):(S=Vn(S,U,c,null),S.flags|=2),S.return=t,v.return=t,v.sibling=S,t.child=v,v=S,S=t.child,U=e.child.memoizedState,U===null?U=yp(c):(X=U.cachePool,X!==null?(ve=Et._currentValue,X=X.parent!==ve?{parent:ve,pool:ve}:X):X=UC(),U={baseLanes:U.baseLanes|c,cachePool:X}),S.memoizedState=U,S.childLanes=mp(e,q,c),t.memoizedState=gp,v):(yn(t),c=e.child,e=c.sibling,c=Br(c,{mode:"visible",children:v.children}),c.return=t,c.sibling=null,e!==null&&(q=t.deletions,q===null?(t.deletions=[e],t.flags|=16):q.push(e)),t.child=c,t.memoizedState=null,c)}function Sp(e,t){return t=uf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function uf(e,t){return e=Zt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Cp(e,t,c){return ao(t,e.child,null,c),e=Sp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rR(e,t,c){e.lanes|=t;var v=e.alternate;v!==null&&(v.lanes|=t),Lh(e.return,t,c)}function bp(e,t,c,v,S){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:v,tail:c,tailMode:S}:(E.isBackwards=t,E.rendering=null,E.renderingStartTime=0,E.last=v,E.tail=c,E.tailMode=S)}function nR(e,t,c){var v=t.pendingProps,S=v.revealOrder,E=v.tail;if(jt(e,t,v.children,c),v=wt.current,(v&2)!==0)v=v&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rR(e,c,t);else if(e.tag===19)rR(e,c,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}v&=1}switch(le(wt,v),S){case"forwards":for(c=t.child,S=null;c!==null;)e=c.alternate,e!==null&&of(e)===null&&(S=c),c=c.sibling;c=S,c===null?(S=t.child,t.child=null):(S=c.sibling,c.sibling=null),bp(t,!1,S,c,E);break;case"backwards":for(c=null,S=t.child,t.child=null;S!==null;){if(e=S.alternate,e!==null&&of(e)===null){t.child=S;break}e=S.sibling,S.sibling=c,c=S,S=e}bp(t,!0,c,null,E);break;case"together":bp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kr(e,t,c){if(e!==null&&(t.dependencies=e.dependencies),_n|=t.lanes,(c&t.childLanes)===0)if(e!==null){if(Jo(e,t,c,!1),(c&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(p(153));if(t.child!==null){for(e=t.child,c=Br(e,e.pendingProps),t.child=c,c.return=t;e.sibling!==null;)e=e.sibling,c=c.sibling=Br(e,e.pendingProps),c.return=t;c.sibling=null}return t.child}function Rp(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Fl(e)))}function ck(e,t,c){switch(t.tag){case 3:Pe(t,t.stateNode.containerInfo),hn(t,Et,e.memoizedState.cache),Ko();break;case 27:case 5:qe(t);break;case 4:Pe(t,t.stateNode.containerInfo);break;case 10:hn(t,t.type,t.memoizedProps.value);break;case 13:var v=t.memoizedState;if(v!==null)return v.dehydrated!==null?(yn(t),t.flags|=128,null):(c&t.child.childLanes)!==0?tR(e,t,c):(yn(t),e=Kr(e,t,c),e!==null?e.sibling:null);yn(t);break;case 19:var S=(e.flags&128)!==0;if(v=(c&t.childLanes)!==0,v||(Jo(e,t,c,!1),v=(c&t.childLanes)!==0),S){if(v)return nR(e,t,c);t.flags|=128}if(S=t.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),le(wt,wt.current),v)break;return null;case 22:case 23:return t.lanes=0,Qb(e,t,c);case 24:hn(t,Et,e.memoizedState.cache)}return Kr(e,t,c)}function iR(e,t,c){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pt=!0;else{if(!Rp(e,c)&&(t.flags&128)===0)return Pt=!1,ck(e,t,c);Pt=(e.flags&131072)!==0}else Pt=!1,nt&&(t.flags&1048576)!==0&&kC(t,Ul,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var v=t.elementType,S=v._init;if(v=S(v._payload),t.type=v,typeof v=="function")Mh(v)?(e=Zn(v,e),t.tag=1,t=Zb(null,t,v,e,c)):(t.tag=0,t=vp(null,t,v,e,c));else{if(v!=null){if(S=v.$$typeof,S===w){t.tag=11,t=Kb(null,t,v,e,c);break e}else if(S===D){t.tag=14,t=$b(null,t,v,e,c);break e}}throw t=se(v)||v,Error(p(306,t,""))}}return t;case 0:return vp(e,t,t.type,t.pendingProps,c);case 1:return v=t.type,S=Zn(v,t.pendingProps),Zb(e,t,v,S,c);case 3:e:{if(Pe(t,t.stateNode.containerInfo),e===null)throw Error(p(387));v=t.pendingProps;var E=t.memoizedState;S=E.element,Wh(e,t),rs(t,v,null,c);var q=t.memoizedState;if(v=q.cache,hn(t,Et,v),v!==E.cache&&xh(t,[Et],c,!0),ts(),v=q.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:q.cache},t.updateQueue.baseState=E,t.memoizedState=E,t.flags&256){t=eR(e,t,v,c);break e}else if(v!==S){S=pr(Error(p(424)),t),$o(S),t=eR(e,t,v,c);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(mt=Er(e.firstChild),Ht=t,nt=!0,Kn=null,Mr=!0,c=qb(t,null,v,c),t.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ko(),v===S){t=Kr(e,t,c);break e}jt(e,t,v,c)}t=t.child}return t;case 26:return cf(e,t),e===null?(c=c0(t.type,null,t.pendingProps,null))?t.memoizedState=c:nt||(c=t.type,e=t.pendingProps,v=_f(Ee.current).createElement(c),v[At]=t,v[xt]=e,Nt(v,c,e),Tt(v),t.stateNode=v):t.memoizedState=c0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return qe(t),e===null&&nt&&(v=t.stateNode=o0(t.type,t.pendingProps,Ee.current),Ht=t,Mr=!0,S=mt,Tn(t.type)?(rd=S,mt=Er(v.firstChild)):mt=S),jt(e,t,t.pendingProps.children,c),cf(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&nt&&((S=v=mt)&&(v=qk(v,t.type,t.pendingProps,Mr),v!==null?(t.stateNode=v,Ht=t,mt=Er(v.firstChild),Mr=!1,S=!0):S=!1),S||$n(t)),qe(t),S=t.type,E=t.pendingProps,q=e!==null?e.memoizedProps:null,v=E.children,Xp(S,E)?v=null:q!==null&&Xp(S,q)&&(t.flags|=32),t.memoizedState!==null&&(S=Yh(e,t,ek,null,null,c),Es._currentValue=S),cf(e,t),jt(e,t,v,c),t.child;case 6:return e===null&&nt&&((e=c=mt)&&(c=zk(c,t.pendingProps,Mr),c!==null?(t.stateNode=c,Ht=t,mt=null,e=!0):e=!1),e||$n(t)),null;case 13:return tR(e,t,c);case 4:return Pe(t,t.stateNode.containerInfo),v=t.pendingProps,e===null?t.child=ao(t,null,v,c):jt(e,t,v,c),t.child;case 11:return Kb(e,t,t.type,t.pendingProps,c);case 7:return jt(e,t,t.pendingProps,c),t.child;case 8:return jt(e,t,t.pendingProps.children,c),t.child;case 12:return jt(e,t,t.pendingProps.children,c),t.child;case 10:return v=t.pendingProps,hn(t,t.type,v.value),jt(e,t,v.children,c),t.child;case 9:return S=t.type._context,v=t.pendingProps.children,Qn(t),S=Bt(S),v=v(S),t.flags|=1,jt(e,t,v,c),t.child;case 14:return $b(e,t,t.type,t.pendingProps,c);case 15:return Jb(e,t,t.type,t.pendingProps,c);case 19:return nR(e,t,c);case 31:return v=t.pendingProps,c=t.mode,v={mode:v.mode,children:v.children},e===null?(c=uf(v,c),c.ref=t.ref,t.child=c,c.return=t,t=c):(c=Br(e.child,v),c.ref=t.ref,t.child=c,c.return=t,t=c),t;case 22:return Qb(e,t,c);case 24:return Qn(t),v=Bt(Et),e===null?(S=Fh(),S===null&&(S=ht,E=Bh(),S.pooledCache=E,E.refCount++,E!==null&&(S.pooledCacheLanes|=c),S=E),t.memoizedState={parent:v,cache:S},Vh(t),hn(t,Et,S)):((e.lanes&c)!==0&&(Wh(e,t),rs(t,null,null,c),ts()),S=e.memoizedState,E=t.memoizedState,S.parent!==v?(S={parent:v,cache:v},t.memoizedState=S,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=S),hn(t,Et,v)):(v=E.cache,hn(t,Et,v),v!==S.cache&&xh(t,[Et],c,!0))),jt(e,t,t.pendingProps.children,c),t.child;case 29:throw t.pendingProps}throw Error(p(156,t.tag))}function $r(e){e.flags|=4}function oR(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!p0(t)){if(t=yr.current,t!==null&&((Ze&4194048)===Ze?Dr!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||t!==Dr))throw Zo=Hh,FC;e.flags|=8192}}function lf(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?br():536870912,e.lanes|=t,fo|=t)}function us(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var c=null;t!==null;)t.alternate!==null&&(c=t),t=t.sibling;c===null?e.tail=null:c.sibling=null;break;case"collapsed":c=e.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:v.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,c=0,v=0;if(t)for(var S=e.child;S!==null;)c|=S.lanes|S.childLanes,v|=S.subtreeFlags&65011712,v|=S.flags&65011712,S.return=e,S=S.sibling;else for(S=e.child;S!==null;)c|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=e,S=S.sibling;return e.subtreeFlags|=v,e.childLanes=c,t}function uk(e,t,c){var v=t.pendingProps;switch(Nh(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return c=t.stateNode,v=null,e!==null&&(v=e.memoizedState.cache),t.memoizedState.cache!==v&&(t.flags|=2048),Vr(Et),Le(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Go(t)?$r(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zC())),vt(t),null;case 26:return c=t.memoizedState,e===null?($r(t),c!==null?(vt(t),oR(t,c)):(vt(t),t.flags&=-16777217)):c?c!==e.memoizedState?($r(t),vt(t),oR(t,c)):(vt(t),t.flags&=-16777217):(e.memoizedProps!==v&&$r(t),vt(t),t.flags&=-16777217),null;case 27:lt(t),c=Ee.current;var S=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==v&&$r(t);else{if(!v){if(t.stateNode===null)throw Error(p(166));return vt(t),null}e=pe.current,Go(t)?NC(t):(e=o0(S,v,c),t.stateNode=e,$r(t))}return vt(t),null;case 5:if(lt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==v&&$r(t);else{if(!v){if(t.stateNode===null)throw Error(p(166));return vt(t),null}if(e=pe.current,Go(t))NC(t);else{switch(S=_f(Ee.current),e){case 1:e=S.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:e=S.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":e=S.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":e=S.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof v.is=="string"?S.createElement("select",{is:v.is}):S.createElement("select"),v.multiple?e.multiple=!0:v.size&&(e.size=v.size);break;default:e=typeof v.is=="string"?S.createElement(c,{is:v.is}):S.createElement(c)}}e[At]=t,e[xt]=v;e:for(S=t.child;S!==null;){if(S.tag===5||S.tag===6)e.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}t.stateNode=e;e:switch(Nt(e,c,v),c){case"button":case"input":case"select":case"textarea":e=!!v.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$r(t)}}return vt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==v&&$r(t);else{if(typeof v!="string"&&t.stateNode===null)throw Error(p(166));if(e=Ee.current,Go(t)){if(e=t.stateNode,c=t.memoizedProps,v=null,S=Ht,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}e[At]=t,e=!!(e.nodeValue===c||v!==null&&v.suppressHydrationWarning===!0||XR(e.nodeValue,c)),e||$n(t)}else e=_f(e).createTextNode(v),e[At]=t,t.stateNode=e}return vt(t),null;case 13:if(v=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(S=Go(t),v!==null&&v.dehydrated!==null){if(e===null){if(!S)throw Error(p(318));if(S=t.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(p(317));S[At]=t}else Ko(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),S=!1}else S=zC(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=S),S=!0;if(!S)return t.flags&256?(Gr(t),t):(Gr(t),null)}if(Gr(t),(t.flags&128)!==0)return t.lanes=c,t;if(c=v!==null,e=e!==null&&e.memoizedState!==null,c){v=t.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool);var E=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(E=v.memoizedState.cachePool.pool),E!==S&&(v.flags|=2048)}return c!==e&&c&&(t.child.flags|=8192),lf(t,t.updateQueue),vt(t),null;case 4:return Le(),e===null&&Kp(t.stateNode.containerInfo),vt(t),null;case 10:return Vr(t.type),vt(t),null;case 19:if(te(wt),S=t.memoizedState,S===null)return vt(t),null;if(v=(t.flags&128)!==0,E=S.rendering,E===null)if(v)us(S,!1);else{if(St!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(E=of(e),E!==null){for(t.flags|=128,us(S,!1),e=E.updateQueue,t.updateQueue=e,lf(t,e),t.subtreeFlags=0,e=c,c=t.child;c!==null;)jC(c,e),c=c.sibling;return le(wt,wt.current&1|2),t.child}e=e.sibling}S.tail!==null&&Oe()>pf&&(t.flags|=128,v=!0,us(S,!1),t.lanes=4194304)}else{if(!v)if(e=of(E),e!==null){if(t.flags|=128,v=!0,e=e.updateQueue,t.updateQueue=e,lf(t,e),us(S,!0),S.tail===null&&S.tailMode==="hidden"&&!E.alternate&&!nt)return vt(t),null}else 2*Oe()-S.renderingStartTime>pf&&c!==536870912&&(t.flags|=128,v=!0,us(S,!1),t.lanes=4194304);S.isBackwards?(E.sibling=t.child,t.child=E):(e=S.last,e!==null?e.sibling=E:t.child=E,S.last=E)}return S.tail!==null?(t=S.tail,S.rendering=t,S.tail=t.sibling,S.renderingStartTime=Oe(),t.sibling=null,e=wt.current,le(wt,v?e&1|2:e&1),t):(vt(t),null);case 22:case 23:return Gr(t),Jh(),v=t.memoizedState!==null,e!==null?e.memoizedState!==null!==v&&(t.flags|=8192):v&&(t.flags|=8192),v?(c&536870912)!==0&&(t.flags&128)===0&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),c=t.updateQueue,c!==null&&lf(t,c.retryQueue),c=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(c=e.memoizedState.cachePool.pool),v=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(v=t.memoizedState.cachePool.pool),v!==c&&(t.flags|=2048),e!==null&&te(Yn),null;case 24:return c=null,e!==null&&(c=e.memoizedState.cache),t.memoizedState.cache!==c&&(t.flags|=2048),Vr(Et),vt(t),null;case 25:return null;case 30:return null}throw Error(p(156,t.tag))}function lk(e,t){switch(Nh(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vr(Et),Le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return lt(t),null;case 13:if(Gr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(p(340));Ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(wt),null;case 4:return Le(),null;case 10:return Vr(t.type),null;case 22:case 23:return Gr(t),Jh(),e!==null&&te(Yn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Vr(Et),null;case 25:return null;default:return null}}function sR(e,t){switch(Nh(t),t.tag){case 3:Vr(Et),Le();break;case 26:case 27:case 5:lt(t);break;case 4:Le();break;case 13:Gr(t);break;case 19:te(wt);break;case 10:Vr(t.type);break;case 22:case 23:Gr(t),Jh(),e!==null&&te(Yn);break;case 24:Vr(Et)}}function ls(e,t){try{var c=t.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var S=v.next;c=S;do{if((c.tag&e)===e){v=void 0;var E=c.create,q=c.inst;v=E(),q.destroy=v}c=c.next}while(c!==S)}}catch(U){ft(t,t.return,U)}}function Sn(e,t,c){try{var v=t.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var E=S.next;v=E;do{if((v.tag&e)===e){var q=v.inst,U=q.destroy;if(U!==void 0){q.destroy=void 0,S=t;var X=c,ve=U;try{ve()}catch(me){ft(S,X,me)}}}v=v.next}while(v!==E)}}catch(me){ft(t,t.return,me)}}function aR(e){var t=e.updateQueue;if(t!==null){var c=e.stateNode;try{$C(t,c)}catch(v){ft(e,e.return,v)}}}function cR(e,t,c){c.props=Zn(e.type,e.memoizedProps),c.state=e.memoizedState;try{c.componentWillUnmount()}catch(v){ft(e,t,v)}}function fs(e,t){try{var c=e.ref;if(c!==null){switch(e.tag){case 26:case 27:case 5:var v=e.stateNode;break;case 30:v=e.stateNode;break;default:v=e.stateNode}typeof c=="function"?e.refCleanup=c(v):c.current=v}}catch(S){ft(e,t,S)}}function jr(e,t){var c=e.ref,v=e.refCleanup;if(c!==null)if(typeof v=="function")try{v()}catch(S){ft(e,t,S)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(S){ft(e,t,S)}else c.current=null}function uR(e){var t=e.type,c=e.memoizedProps,v=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":c.autoFocus&&v.focus();break e;case"img":c.src?v.src=c.src:c.srcSet&&(v.srcset=c.srcSet)}}catch(S){ft(e,e.return,S)}}function _p(e,t,c){try{var v=e.stateNode;Mk(v,e.type,c,t),v[xt]=t}catch(S){ft(e,e.return,S)}}function lR(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Tn(e.type)||e.tag===4}function Ep(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Tn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wp(e,t,c){var v=e.tag;if(v===5||v===6)e=e.stateNode,t?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(e,t):(t=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,t.appendChild(e),c=c._reactRootContainer,c!=null||t.onclick!==null||(t.onclick=Rf));else if(v!==4&&(v===27&&Tn(e.type)&&(c=e.stateNode,t=null),e=e.child,e!==null))for(wp(e,t,c),e=e.sibling;e!==null;)wp(e,t,c),e=e.sibling}function ff(e,t,c){var v=e.tag;if(v===5||v===6)e=e.stateNode,t?c.insertBefore(e,t):c.appendChild(e);else if(v!==4&&(v===27&&Tn(e.type)&&(c=e.stateNode),e=e.child,e!==null))for(ff(e,t,c),e=e.sibling;e!==null;)ff(e,t,c),e=e.sibling}function fR(e){var t=e.stateNode,c=e.memoizedProps;try{for(var v=e.type,S=t.attributes;S.length;)t.removeAttributeNode(S[0]);Nt(t,v,c),t[At]=e,t[xt]=c}catch(E){ft(e,e.return,E)}}var Jr=!1,bt=!1,Ap=!1,hR=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function fk(e,t){if(e=e.containerInfo,Qp=Of,e=_C(e),Eh(e)){if("selectionStart"in e)var c={start:e.selectionStart,end:e.selectionEnd};else e:{c=(c=e.ownerDocument)&&c.defaultView||window;var v=c.getSelection&&c.getSelection();if(v&&v.rangeCount!==0){c=v.anchorNode;var S=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{c.nodeType,E.nodeType}catch{c=null;break e}var q=0,U=-1,X=-1,ve=0,me=0,be=e,ge=null;t:for(;;){for(var ye;be!==c||S!==0&&be.nodeType!==3||(U=q+S),be!==E||v!==0&&be.nodeType!==3||(X=q+v),be.nodeType===3&&(q+=be.nodeValue.length),(ye=be.firstChild)!==null;)ge=be,be=ye;for(;;){if(be===e)break t;if(ge===c&&++ve===S&&(U=q),ge===E&&++me===v&&(X=q),(ye=be.nextSibling)!==null)break;be=ge,ge=be.parentNode}be=ye}c=U===-1||X===-1?null:{start:U,end:X}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yp={focusedElem:e,selectionRange:c},Of=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,E=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&E!==null){e=void 0,c=t,S=E.memoizedProps,E=E.memoizedState,v=c.stateNode;try{var He=Zn(c.type,S,c.elementType===c.type);e=v.getSnapshotBeforeUpdate(He,E),v.__reactInternalSnapshotBeforeUpdate=e}catch(xe){ft(c,c.return,xe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,c=e.nodeType,c===9)ed(e);else if(c===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(p(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function pR(e,t,c){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Cn(e,c),v&4&&ls(5,c);break;case 1:if(Cn(e,c),v&4)if(e=c.stateNode,t===null)try{e.componentDidMount()}catch(q){ft(c,c.return,q)}else{var S=Zn(c.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(S,t,e.__reactInternalSnapshotBeforeUpdate)}catch(q){ft(c,c.return,q)}}v&64&&aR(c),v&512&&fs(c,c.return);break;case 3:if(Cn(e,c),v&64&&(e=c.updateQueue,e!==null)){if(t=null,c.child!==null)switch(c.child.tag){case 27:case 5:t=c.child.stateNode;break;case 1:t=c.child.stateNode}try{$C(e,t)}catch(q){ft(c,c.return,q)}}break;case 27:t===null&&v&4&&fR(c);case 26:case 5:Cn(e,c),t===null&&v&4&&uR(c),v&512&&fs(c,c.return);break;case 12:Cn(e,c);break;case 13:Cn(e,c),v&4&&gR(e,c),v&64&&(e=c.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(c=Ck.bind(null,c),Lk(e,c))));break;case 22:if(v=c.memoizedState!==null||Jr,!v){t=t!==null&&t.memoizedState!==null||bt,S=Jr;var E=bt;Jr=v,(bt=t)&&!E?bn(e,c,(c.subtreeFlags&8772)!==0):Cn(e,c),Jr=S,bt=E}break;case 30:break;default:Cn(e,c)}}function dR(e){var t=e.alternate;t!==null&&(e.alternate=null,dR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&No(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,Jt=!1;function Qr(e,t,c){for(c=c.child;c!==null;)vR(e,t,c),c=c.sibling}function vR(e,t,c){if(L&&typeof L.onCommitFiberUnmount=="function")try{L.onCommitFiberUnmount(Re,c)}catch{}switch(c.tag){case 26:bt||jr(c,t),Qr(e,t,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:bt||jr(c,t);var v=dt,S=Jt;Tn(c.type)&&(dt=c.stateNode,Jt=!1),Qr(e,t,c),Cs(c.stateNode),dt=v,Jt=S;break;case 5:bt||jr(c,t);case 6:if(v=dt,S=Jt,dt=null,Qr(e,t,c),dt=v,Jt=S,dt!==null)if(Jt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(c.stateNode)}catch(E){ft(c,t,E)}else try{dt.removeChild(c.stateNode)}catch(E){ft(c,t,E)}break;case 18:dt!==null&&(Jt?(e=dt,n0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,c.stateNode),Ps(e)):n0(dt,c.stateNode));break;case 4:v=dt,S=Jt,dt=c.stateNode.containerInfo,Jt=!0,Qr(e,t,c),dt=v,Jt=S;break;case 0:case 11:case 14:case 15:bt||Sn(2,c,t),bt||Sn(4,c,t),Qr(e,t,c);break;case 1:bt||(jr(c,t),v=c.stateNode,typeof v.componentWillUnmount=="function"&&cR(c,t,v)),Qr(e,t,c);break;case 21:Qr(e,t,c);break;case 22:bt=(v=bt)||c.memoizedState!==null,Qr(e,t,c),bt=v;break;default:Qr(e,t,c)}}function gR(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(c){ft(t,t.return,c)}}function hk(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hR),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hR),t;default:throw Error(p(435,e.tag))}}function Tp(e,t){var c=hk(e);t.forEach(function(v){var S=bk.bind(null,e,v);c.has(v)||(c.add(v),v.then(S,S))})}function er(e,t){var c=t.deletions;if(c!==null)for(var v=0;v<c.length;v++){var S=c[v],E=e,q=t,U=q;e:for(;U!==null;){switch(U.tag){case 27:if(Tn(U.type)){dt=U.stateNode,Jt=!1;break e}break;case 5:dt=U.stateNode,Jt=!1;break e;case 3:case 4:dt=U.stateNode.containerInfo,Jt=!0;break e}U=U.return}if(dt===null)throw Error(p(160));vR(E,q,S),dt=null,Jt=!1,E=S.alternate,E!==null&&(E.return=null),S.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)yR(t,e),t=t.sibling}var _r=null;function yR(e,t){var c=e.alternate,v=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:er(t,e),tr(e),v&4&&(Sn(3,e,e.return),ls(3,e),Sn(5,e,e.return));break;case 1:er(t,e),tr(e),v&512&&(bt||c===null||jr(c,c.return)),v&64&&Jr&&(e=e.updateQueue,e!==null&&(v=e.callbacks,v!==null&&(c=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=c===null?v:c.concat(v))));break;case 26:var S=_r;if(er(t,e),tr(e),v&512&&(bt||c===null||jr(c,c.return)),v&4){var E=c!==null?c.memoizedState:null;if(v=e.memoizedState,c===null)if(v===null)if(e.stateNode===null){e:{v=e.type,c=e.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":E=S.getElementsByTagName("title")[0],(!E||E[xn]||E[At]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=S.createElement(v),S.head.insertBefore(E,S.querySelector("head > title"))),Nt(E,v,c),E[At]=e,Tt(E),v=E;break e;case"link":var q=f0("link","href",S).get(v+(c.href||""));if(q){for(var U=0;U<q.length;U++)if(E=q[U],E.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&E.getAttribute("rel")===(c.rel==null?null:c.rel)&&E.getAttribute("title")===(c.title==null?null:c.title)&&E.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){q.splice(U,1);break t}}E=S.createElement(v),Nt(E,v,c),S.head.appendChild(E);break;case"meta":if(q=f0("meta","content",S).get(v+(c.content||""))){for(U=0;U<q.length;U++)if(E=q[U],E.getAttribute("content")===(c.content==null?null:""+c.content)&&E.getAttribute("name")===(c.name==null?null:c.name)&&E.getAttribute("property")===(c.property==null?null:c.property)&&E.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&E.getAttribute("charset")===(c.charSet==null?null:c.charSet)){q.splice(U,1);break t}}E=S.createElement(v),Nt(E,v,c),S.head.appendChild(E);break;default:throw Error(p(468,v))}E[At]=e,Tt(E),v=E}e.stateNode=v}else h0(S,e.type,e.stateNode);else e.stateNode=l0(S,v,e.memoizedProps);else E!==v?(E===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):E.count--,v===null?h0(S,e.type,e.stateNode):l0(S,v,e.memoizedProps)):v===null&&e.stateNode!==null&&_p(e,e.memoizedProps,c.memoizedProps)}break;case 27:er(t,e),tr(e),v&512&&(bt||c===null||jr(c,c.return)),c!==null&&v&4&&_p(e,e.memoizedProps,c.memoizedProps);break;case 5:if(er(t,e),tr(e),v&512&&(bt||c===null||jr(c,c.return)),e.flags&32){S=e.stateNode;try{Hi(S,"")}catch(ye){ft(e,e.return,ye)}}v&4&&e.stateNode!=null&&(S=e.memoizedProps,_p(e,S,c!==null?c.memoizedProps:S)),v&1024&&(Ap=!0);break;case 6:if(er(t,e),tr(e),v&4){if(e.stateNode===null)throw Error(p(162));v=e.memoizedProps,c=e.stateNode;try{c.nodeValue=v}catch(ye){ft(e,e.return,ye)}}break;case 3:if(Af=null,S=_r,_r=Ef(t.containerInfo),er(t,e),_r=S,tr(e),v&4&&c!==null&&c.memoizedState.isDehydrated)try{Ps(t.containerInfo)}catch(ye){ft(e,e.return,ye)}Ap&&(Ap=!1,mR(e));break;case 4:v=_r,_r=Ef(e.stateNode.containerInfo),er(t,e),tr(e),_r=v;break;case 12:er(t,e),tr(e);break;case 13:er(t,e),tr(e),e.child.flags&8192&&e.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(jp=Oe()),v&4&&(v=e.updateQueue,v!==null&&(e.updateQueue=null,Tp(e,v)));break;case 22:S=e.memoizedState!==null;var X=c!==null&&c.memoizedState!==null,ve=Jr,me=bt;if(Jr=ve||S,bt=me||X,er(t,e),bt=me,Jr=ve,tr(e),v&8192)e:for(t=e.stateNode,t._visibility=S?t._visibility&-2:t._visibility|1,S&&(c===null||X||Jr||bt||ei(e)),c=null,t=e;;){if(t.tag===5||t.tag===26){if(c===null){X=c=t;try{if(E=X.stateNode,S)q=E.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{U=X.stateNode;var be=X.memoizedProps.style,ge=be!=null&&be.hasOwnProperty("display")?be.display:null;U.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(ye){ft(X,X.return,ye)}}}else if(t.tag===6){if(c===null){X=t;try{X.stateNode.nodeValue=S?"":X.memoizedProps}catch(ye){ft(X,X.return,ye)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;c===t&&(c=null),t=t.return}c===t&&(c=null),t.sibling.return=t.return,t=t.sibling}v&4&&(v=e.updateQueue,v!==null&&(c=v.retryQueue,c!==null&&(v.retryQueue=null,Tp(e,c))));break;case 19:er(t,e),tr(e),v&4&&(v=e.updateQueue,v!==null&&(e.updateQueue=null,Tp(e,v)));break;case 30:break;case 21:break;default:er(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{for(var c,v=e.return;v!==null;){if(lR(v)){c=v;break}v=v.return}if(c==null)throw Error(p(160));switch(c.tag){case 27:var S=c.stateNode,E=Ep(e);ff(e,E,S);break;case 5:var q=c.stateNode;c.flags&32&&(Hi(q,""),c.flags&=-33);var U=Ep(e);ff(e,U,q);break;case 3:case 4:var X=c.stateNode.containerInfo,ve=Ep(e);wp(e,ve,X);break;default:throw Error(p(161))}}catch(me){ft(e,e.return,me)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mR(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mR(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Cn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)pR(e,t.alternate,t),t=t.sibling}function ei(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Sn(4,t,t.return),ei(t);break;case 1:jr(t,t.return);var c=t.stateNode;typeof c.componentWillUnmount=="function"&&cR(t,t.return,c),ei(t);break;case 27:Cs(t.stateNode);case 26:case 5:jr(t,t.return),ei(t);break;case 22:t.memoizedState===null&&ei(t);break;case 30:ei(t);break;default:ei(t)}e=e.sibling}}function bn(e,t,c){for(c=c&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var v=t.alternate,S=e,E=t,q=E.flags;switch(E.tag){case 0:case 11:case 15:bn(S,E,c),ls(4,E);break;case 1:if(bn(S,E,c),v=E,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(ve){ft(v,v.return,ve)}if(v=E,S=v.updateQueue,S!==null){var U=v.stateNode;try{var X=S.shared.hiddenCallbacks;if(X!==null)for(S.shared.hiddenCallbacks=null,S=0;S<X.length;S++)KC(X[S],U)}catch(ve){ft(v,v.return,ve)}}c&&q&64&&aR(E),fs(E,E.return);break;case 27:fR(E);case 26:case 5:bn(S,E,c),c&&v===null&&q&4&&uR(E),fs(E,E.return);break;case 12:bn(S,E,c);break;case 13:bn(S,E,c),c&&q&4&&gR(S,E);break;case 22:E.memoizedState===null&&bn(S,E,c),fs(E,E.return);break;case 30:break;default:bn(S,E,c)}t=t.sibling}}function Pp(e,t){var c=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(c=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==c&&(e!=null&&e.refCount++,c!=null&&Qo(c))}function Op(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e))}function kr(e,t,c,v){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)SR(e,t,c,v),t=t.sibling}function SR(e,t,c,v){var S=t.flags;switch(t.tag){case 0:case 11:case 15:kr(e,t,c,v),S&2048&&ls(9,t);break;case 1:kr(e,t,c,v);break;case 3:kr(e,t,c,v),S&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qo(e)));break;case 12:if(S&2048){kr(e,t,c,v),e=t.stateNode;try{var E=t.memoizedProps,q=E.id,U=E.onPostCommit;typeof U=="function"&&U(q,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(X){ft(t,t.return,X)}}else kr(e,t,c,v);break;case 13:kr(e,t,c,v);break;case 23:break;case 22:E=t.stateNode,q=t.alternate,t.memoizedState!==null?E._visibility&2?kr(e,t,c,v):hs(e,t):E._visibility&2?kr(e,t,c,v):(E._visibility|=2,co(e,t,c,v,(t.subtreeFlags&10256)!==0)),S&2048&&Pp(q,t);break;case 24:kr(e,t,c,v),S&2048&&Op(t.alternate,t);break;default:kr(e,t,c,v)}}function co(e,t,c,v,S){for(S=S&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var E=e,q=t,U=c,X=v,ve=q.flags;switch(q.tag){case 0:case 11:case 15:co(E,q,U,X,S),ls(8,q);break;case 23:break;case 22:var me=q.stateNode;q.memoizedState!==null?me._visibility&2?co(E,q,U,X,S):hs(E,q):(me._visibility|=2,co(E,q,U,X,S)),S&&ve&2048&&Pp(q.alternate,q);break;case 24:co(E,q,U,X,S),S&&ve&2048&&Op(q.alternate,q);break;default:co(E,q,U,X,S)}t=t.sibling}}function hs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var c=e,v=t,S=v.flags;switch(v.tag){case 22:hs(c,v),S&2048&&Pp(v.alternate,v);break;case 24:hs(c,v),S&2048&&Op(v.alternate,v);break;default:hs(c,v)}t=t.sibling}}var ps=8192;function uo(e){if(e.subtreeFlags&ps)for(e=e.child;e!==null;)CR(e),e=e.sibling}function CR(e){switch(e.tag){case 26:uo(e),e.flags&ps&&e.memoizedState!==null&&Yk(_r,e.memoizedState,e.memoizedProps);break;case 5:uo(e);break;case 3:case 4:var t=_r;_r=Ef(e.stateNode.containerInfo),uo(e),_r=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ps,ps=16777216,uo(e),ps=t):uo(e));break;default:uo(e)}}function bR(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var c=0;c<t.length;c++){var v=t[c];Ot=v,_R(v,e)}bR(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)RR(e),e=e.sibling}function RR(e){switch(e.tag){case 0:case 11:case 15:ds(e),e.flags&2048&&Sn(9,e,e.return);break;case 3:ds(e);break;case 12:ds(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,hf(e)):ds(e);break;default:ds(e)}}function hf(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var c=0;c<t.length;c++){var v=t[c];Ot=v,_R(v,e)}bR(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Sn(8,t,t.return),hf(t);break;case 22:c=t.stateNode,c._visibility&2&&(c._visibility&=-3,hf(t));break;default:hf(t)}e=e.sibling}}function _R(e,t){for(;Ot!==null;){var c=Ot;switch(c.tag){case 0:case 11:case 15:Sn(8,c,t);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var v=c.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Qo(c.memoizedState.cache)}if(v=c.child,v!==null)v.return=c,Ot=v;else e:for(c=e;Ot!==null;){v=Ot;var S=v.sibling,E=v.return;if(dR(v),v===c){Ot=null;break e}if(S!==null){S.return=E,Ot=S;break e}Ot=E}}}var pk={getCacheForType:function(e){var t=Bt(Et),c=t.data.get(e);return c===void 0&&(c=e(),t.data.set(e,c)),c}},dk=typeof WeakMap=="function"?WeakMap:Map,ot=0,ht=null,Qe=null,Ze=0,st=0,rr=null,Rn=!1,lo=!1,Ip=!1,Yr=0,St=0,_n=0,ti=0,Mp=0,mr=0,fo=0,vs=null,Qt=null,Dp=!1,jp=0,pf=1/0,df=null,En=null,kt=0,wn=null,ho=null,po=0,kp=0,Np=null,ER=null,gs=0,qp=null;function nr(){if((ot&2)!==0&&Ze!==0)return Ze&-Ze;if(j.T!==null){var e=eo;return e!==0?e:Hp()}return Rl()}function wR(){mr===0&&(mr=(Ze&536870912)===0||nt?ur():536870912);var e=yr.current;return e!==null&&(e.flags|=32),mr}function ir(e,t,c){(e===ht&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(vo(e,0),An(e,Ze,mr,!1)),Lt(e,c),((ot&2)===0||e!==ht)&&(e===ht&&((ot&2)===0&&(ti|=c),St===4&&An(e,Ze,mr,!1)),Nr(e))}function AR(e,t,c){if((ot&6)!==0)throw Error(p(327));var v=!c&&(t&124)===0&&(t&e.expiredLanes)===0||We(e,t),S=v?yk(e,t):xp(e,t,!0),E=v;do{if(S===0){lo&&!v&&An(e,t,0,!1);break}else{if(c=e.current.alternate,E&&!vk(c)){S=xp(e,t,!1),E=!1;continue}if(S===2){if(E=t,e.errorRecoveryDisabledLanes&E)var q=0;else q=e.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){t=q;e:{var U=e;S=vs;var X=U.current.memoizedState.isDehydrated;if(X&&(vo(U,q).flags|=256),q=xp(U,q,!1),q!==2){if(Ip&&!X){U.errorRecoveryDisabledLanes|=E,ti|=E,S=4;break e}E=Qt,Qt=S,E!==null&&(Qt===null?Qt=E:Qt.push.apply(Qt,E))}S=q}if(E=!1,S!==2)continue}}if(S===1){vo(e,0),An(e,t,0,!0);break}e:{switch(v=e,E=S,E){case 0:case 1:throw Error(p(345));case 4:if((t&4194048)!==t)break;case 6:An(v,t,mr,!Rn);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(p(329))}if((t&62914560)===t&&(S=jp+300-Oe(),10<S)){if(An(v,t,mr,!Rn),Fe(v,0,!0)!==0)break e;v.timeoutHandle=t0(TR.bind(null,v,c,Qt,df,Dp,t,mr,ti,fo,Rn,E,2,-0,0),S);break e}TR(v,c,Qt,df,Dp,t,mr,ti,fo,Rn,E,0,-0,0)}}break}while(!0);Nr(e)}function TR(e,t,c,v,S,E,q,U,X,ve,me,be,ge,ye){if(e.timeoutHandle=-1,be=t.subtreeFlags,(be&8192||(be&16785408)===16785408)&&(_s={stylesheets:null,count:0,unsuspend:Qk},CR(t),be=Xk(),be!==null)){e.cancelPendingCommit=be(kR.bind(null,e,t,E,c,v,S,q,U,X,me,1,ge,ye)),An(e,E,q,!ve);return}kR(e,t,E,c,v,S,q,U,X)}function vk(e){for(var t=e;;){var c=t.tag;if((c===0||c===11||c===15)&&t.flags&16384&&(c=t.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var v=0;v<c.length;v++){var S=c[v],E=S.getSnapshot;S=S.value;try{if(!Xt(E(),S))return!1}catch{return!1}}if(c=t.child,t.subtreeFlags&16384&&c!==null)c.return=t,t=c;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t,c,v){t&=~Mp,t&=~ti,e.suspendedLanes|=t,e.pingedLanes&=~t,v&&(e.warmLanes|=t),v=e.expirationTimes;for(var S=t;0<S;){var E=31-I(S),q=1<<E;v[E]=-1,S&=~q}c!==0&&lr(e,c,t)}function vf(){return(ot&6)===0?(ys(0),!1):!0}function zp(){if(Qe!==null){if(st===0)var e=Qe.return;else e=Qe,Hr=Jn=null,ep(e),so=null,as=0,e=Qe;for(;e!==null;)sR(e.alternate,e),e=e.return;Qe=null}}function vo(e,t){var c=e.timeoutHandle;c!==-1&&(e.timeoutHandle=-1,jk(c)),c=e.cancelPendingCommit,c!==null&&(e.cancelPendingCommit=null,c()),zp(),ht=e,Qe=c=Br(e.current,null),Ze=t,st=0,rr=null,Rn=!1,lo=We(e,t),Ip=!1,fo=mr=Mp=ti=_n=St=0,Qt=vs=null,Dp=!1,(t&8)!==0&&(t|=t&32);var v=e.entangledLanes;if(v!==0)for(e=e.entanglements,v&=t;0<v;){var S=31-I(v),E=1<<S;t|=e[S],v&=~E}return Yr=t,ql(),c}function PR(e,t){$e=null,j.H=tf,t===Xo||t===Wl?(t=WC(),st=3):t===FC?(t=WC(),st=4):st=t===Gb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,rr=t,Qe===null&&(St=1,af(e,pr(t,e.current)))}function OR(){var e=j.H;return j.H=tf,e===null?tf:e}function IR(){var e=j.A;return j.A=pk,e}function Lp(){St=4,Rn||(Ze&4194048)!==Ze&&yr.current!==null||(lo=!0),(_n&134217727)===0&&(ti&134217727)===0||ht===null||An(ht,Ze,mr,!1)}function xp(e,t,c){var v=ot;ot|=2;var S=OR(),E=IR();(ht!==e||Ze!==t)&&(df=null,vo(e,t)),t=!1;var q=St;e:do try{if(st!==0&&Qe!==null){var U=Qe,X=rr;switch(st){case 8:zp(),q=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(t=!0);var ve=st;if(st=0,rr=null,go(e,U,X,ve),c&&lo){q=0;break e}break;default:ve=st,st=0,rr=null,go(e,U,X,ve)}}gk(),q=St;break}catch(me){PR(e,me)}while(!0);return t&&e.shellSuspendCounter++,Hr=Jn=null,ot=v,j.H=S,j.A=E,Qe===null&&(ht=null,Ze=0,ql()),q}function gk(){for(;Qe!==null;)MR(Qe)}function yk(e,t){var c=ot;ot|=2;var v=OR(),S=IR();ht!==e||Ze!==t?(df=null,pf=Oe()+500,vo(e,t)):lo=We(e,t);e:do try{if(st!==0&&Qe!==null){t=Qe;var E=rr;t:switch(st){case 1:st=0,rr=null,go(e,t,E,1);break;case 2:case 9:if(HC(E)){st=0,rr=null,DR(t);break}t=function(){st!==2&&st!==9||ht!==e||(st=7),Nr(e)},E.then(t,t);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:HC(E)?(st=0,rr=null,DR(t)):(st=0,rr=null,go(e,t,E,7));break;case 5:var q=null;switch(Qe.tag){case 26:q=Qe.memoizedState;case 5:case 27:var U=Qe;if(!q||p0(q)){st=0,rr=null;var X=U.sibling;if(X!==null)Qe=X;else{var ve=U.return;ve!==null?(Qe=ve,gf(ve)):Qe=null}break t}}st=0,rr=null,go(e,t,E,5);break;case 6:st=0,rr=null,go(e,t,E,6);break;case 8:zp(),St=6;break e;default:throw Error(p(462))}}mk();break}catch(me){PR(e,me)}while(!0);return Hr=Jn=null,j.H=v,j.A=S,ot=c,Qe!==null?0:(ht=null,Ze=0,ql(),St)}function mk(){for(;Qe!==null&&!we();)MR(Qe)}function MR(e){var t=iR(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,t===null?gf(e):Qe=t}function DR(e){var t=e,c=t.alternate;switch(t.tag){case 15:case 0:t=Xb(c,t,t.pendingProps,t.type,void 0,Ze);break;case 11:t=Xb(c,t,t.pendingProps,t.type.render,t.ref,Ze);break;case 5:ep(t);default:sR(c,t),t=Qe=jC(t,Yr),t=iR(c,t,Yr)}e.memoizedProps=e.pendingProps,t===null?gf(e):Qe=t}function go(e,t,c,v){Hr=Jn=null,ep(t),so=null,as=0;var S=t.return;try{if(ak(e,S,t,c,Ze)){St=1,af(e,pr(c,e.current)),Qe=null;return}}catch(E){if(S!==null)throw Qe=S,E;St=1,af(e,pr(c,e.current)),Qe=null;return}t.flags&32768?(nt||v===1?e=!0:lo||(Ze&536870912)!==0?e=!1:(Rn=e=!0,(v===2||v===9||v===3||v===6)&&(v=yr.current,v!==null&&v.tag===13&&(v.flags|=16384))),jR(t,e)):gf(t)}function gf(e){var t=e;do{if((t.flags&32768)!==0){jR(t,Rn);return}e=t.return;var c=uk(t.alternate,t,Yr);if(c!==null){Qe=c;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);St===0&&(St=5)}function jR(e,t){do{var c=lk(e.alternate,e);if(c!==null){c.flags&=32767,Qe=c;return}if(c=e.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!t&&(e=e.sibling,e!==null)){Qe=e;return}Qe=e=c}while(e!==null);St=6,Qe=null}function kR(e,t,c,v,S,E,q,U,X){e.cancelPendingCommit=null;do yf();while(kt!==0);if((ot&6)!==0)throw Error(p(327));if(t!==null){if(t===e.current)throw Error(p(177));if(E=t.lanes|t.childLanes,E|=Oh,cn(e,c,E,q,U,X),e===ht&&(Qe=ht=null,Ze=0),ho=t,wn=e,po=c,kp=E,Np=S,ER=v,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Rk(M,function(){return xR(),null})):(e.callbackNode=null,e.callbackPriority=0),v=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||v){v=j.T,j.T=null,S=J.p,J.p=2,q=ot,ot|=4;try{fk(e,t,c)}finally{ot=q,J.p=S,j.T=v}}kt=1,NR(),qR(),zR()}}function NR(){if(kt===1){kt=0;var e=wn,t=ho,c=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||c){c=j.T,j.T=null;var v=J.p;J.p=2;var S=ot;ot|=4;try{yR(t,e);var E=Yp,q=_C(e.containerInfo),U=E.focusedElem,X=E.selectionRange;if(q!==U&&U&&U.ownerDocument&&RC(U.ownerDocument.documentElement,U)){if(X!==null&&Eh(U)){var ve=X.start,me=X.end;if(me===void 0&&(me=ve),"selectionStart"in U)U.selectionStart=ve,U.selectionEnd=Math.min(me,U.value.length);else{var be=U.ownerDocument||document,ge=be&&be.defaultView||window;if(ge.getSelection){var ye=ge.getSelection(),He=U.textContent.length,xe=Math.min(X.start,He),ut=X.end===void 0?xe:Math.min(X.end,He);!ye.extend&&xe>ut&&(q=ut,ut=xe,xe=q);var ce=bC(U,xe),re=bC(U,ut);if(ce&&re&&(ye.rangeCount!==1||ye.anchorNode!==ce.node||ye.anchorOffset!==ce.offset||ye.focusNode!==re.node||ye.focusOffset!==re.offset)){var he=be.createRange();he.setStart(ce.node,ce.offset),ye.removeAllRanges(),xe>ut?(ye.addRange(he),ye.extend(re.node,re.offset)):(he.setEnd(re.node,re.offset),ye.addRange(he))}}}}for(be=[],ye=U;ye=ye.parentNode;)ye.nodeType===1&&be.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<be.length;U++){var Ce=be[U];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Of=!!Qp,Yp=Qp=null}finally{ot=S,J.p=v,j.T=c}}e.current=t,kt=2}}function qR(){if(kt===2){kt=0;var e=wn,t=ho,c=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||c){c=j.T,j.T=null;var v=J.p;J.p=2;var S=ot;ot|=4;try{pR(e,t.alternate,t)}finally{ot=S,J.p=v,j.T=c}}kt=3}}function zR(){if(kt===4||kt===3){kt=0,Me();var e=wn,t=ho,c=po,v=ER;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?kt=5:(kt=0,ho=wn=null,LR(e,e.pendingLanes));var S=e.pendingLanes;if(S===0&&(En=null),jo(c),t=t.stateNode,L&&typeof L.onCommitFiberRoot=="function")try{L.onCommitFiberRoot(Re,t,void 0,(t.current.flags&128)===128)}catch{}if(v!==null){t=j.T,S=J.p,J.p=2,j.T=null;try{for(var E=e.onRecoverableError,q=0;q<v.length;q++){var U=v[q];E(U.value,{componentStack:U.stack})}}finally{j.T=t,J.p=S}}(po&3)!==0&&yf(),Nr(e),S=e.pendingLanes,(c&4194090)!==0&&(S&42)!==0?e===qp?gs++:(gs=0,qp=e):gs=0,ys(0)}}function LR(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qo(t)))}function yf(e){return NR(),qR(),zR(),xR()}function xR(){if(kt!==5)return!1;var e=wn,t=kp;kp=0;var c=jo(po),v=j.T,S=J.p;try{J.p=32>c?32:c,j.T=null,c=Np,Np=null;var E=wn,q=po;if(kt=0,ho=wn=null,po=0,(ot&6)!==0)throw Error(p(331));var U=ot;if(ot|=4,RR(E.current),SR(E,E.current,q,c),ot=U,ys(0,!1),L&&typeof L.onPostCommitFiberRoot=="function")try{L.onPostCommitFiberRoot(Re,E)}catch{}return!0}finally{J.p=S,j.T=v,LR(e,t)}}function BR(e,t,c){t=pr(c,t),t=dp(e.stateNode,t,2),e=vn(e,t,2),e!==null&&(Lt(e,2),Nr(e))}function ft(e,t,c){if(e.tag===3)BR(e,e,c);else for(;t!==null;){if(t.tag===3){BR(t,e,c);break}else if(t.tag===1){var v=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(En===null||!En.has(v))){e=pr(c,e),c=Vb(2),v=vn(t,c,2),v!==null&&(Wb(c,v,t,e),Lt(v,2),Nr(v));break}}t=t.return}}function Bp(e,t,c){var v=e.pingCache;if(v===null){v=e.pingCache=new dk;var S=new Set;v.set(t,S)}else S=v.get(t),S===void 0&&(S=new Set,v.set(t,S));S.has(c)||(Ip=!0,S.add(c),e=Sk.bind(null,e,t,c),t.then(e,e))}function Sk(e,t,c){var v=e.pingCache;v!==null&&v.delete(t),e.pingedLanes|=e.suspendedLanes&c,e.warmLanes&=~c,ht===e&&(Ze&c)===c&&(St===4||St===3&&(Ze&62914560)===Ze&&300>Oe()-jp?(ot&2)===0&&vo(e,0):Mp|=c,fo===Ze&&(fo=0)),Nr(e)}function UR(e,t){t===0&&(t=br()),e=Qi(e,t),e!==null&&(Lt(e,t),Nr(e))}function Ck(e){var t=e.memoizedState,c=0;t!==null&&(c=t.retryLane),UR(e,c)}function bk(e,t){var c=0;switch(e.tag){case 13:var v=e.stateNode,S=e.memoizedState;S!==null&&(c=S.retryLane);break;case 19:v=e.stateNode;break;case 22:v=e.stateNode._retryCache;break;default:throw Error(p(314))}v!==null&&v.delete(t),UR(e,c)}function Rk(e,t){return de(e,t)}var mf=null,yo=null,Up=!1,Sf=!1,Fp=!1,ri=0;function Nr(e){e!==yo&&e.next===null&&(yo===null?mf=yo=e:yo=yo.next=e),Sf=!0,Up||(Up=!0,Ek())}function ys(e,t){if(!Fp&&Sf){Fp=!0;do for(var c=!1,v=mf;v!==null;){if(e!==0){var S=v.pendingLanes;if(S===0)var E=0;else{var q=v.suspendedLanes,U=v.pingedLanes;E=(1<<31-I(42|e)+1)-1,E&=S&~(q&~U),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(c=!0,WR(v,E))}else E=Ze,E=Fe(v,v===ht?E:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(E&3)===0||We(v,E)||(c=!0,WR(v,E));v=v.next}while(c);Fp=!1}}function _k(){FR()}function FR(){Sf=Up=!1;var e=0;ri!==0&&(Dk()&&(e=ri),ri=0);for(var t=Oe(),c=null,v=mf;v!==null;){var S=v.next,E=HR(v,t);E===0?(v.next=null,c===null?mf=S:c.next=S,S===null&&(yo=c)):(c=v,(e!==0||(E&3)!==0)&&(Sf=!0)),v=S}ys(e)}function HR(e,t){for(var c=e.suspendedLanes,v=e.pingedLanes,S=e.expirationTimes,E=e.pendingLanes&-62914561;0<E;){var q=31-I(E),U=1<<q,X=S[q];X===-1?((U&c)===0||(U&v)!==0)&&(S[q]=Ke(U,t)):X<=t&&(e.expiredLanes|=U),E&=~U}if(t=ht,c=Ze,c=Fe(e,e===t?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),v=e.callbackNode,c===0||e===t&&(st===2||st===9)||e.cancelPendingCommit!==null)return v!==null&&v!==null&&ie(v),e.callbackNode=null,e.callbackPriority=0;if((c&3)===0||We(e,c)){if(t=c&-c,t===e.callbackPriority)return t;switch(v!==null&&ie(v),jo(c)){case 2:case 8:c=x;break;case 32:c=M;break;case 268435456:c=H;break;default:c=M}return v=VR.bind(null,e),c=de(c,v),e.callbackPriority=t,e.callbackNode=c,t}return v!==null&&v!==null&&ie(v),e.callbackPriority=2,e.callbackNode=null,2}function VR(e,t){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var c=e.callbackNode;if(yf()&&e.callbackNode!==c)return null;var v=Ze;return v=Fe(e,e===ht?v:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),v===0?null:(AR(e,v,t),HR(e,Oe()),e.callbackNode!=null&&e.callbackNode===c?VR.bind(null,e):null)}function WR(e,t){if(yf())return null;AR(e,t,!0)}function Ek(){kk(function(){(ot&6)!==0?de(Q,_k):FR()})}function Hp(){return ri===0&&(ri=ur()),ri}function GR(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ol(""+e)}function KR(e,t){var c=t.ownerDocument.createElement("input");return c.name=t.name,c.value=t.value,e.id&&c.setAttribute("form",e.id),t.parentNode.insertBefore(c,t),e=new FormData(e),c.parentNode.removeChild(c),e}function wk(e,t,c,v,S){if(t==="submit"&&c&&c.stateNode===S){var E=GR((S[xt]||null).action),q=v.submitter;q&&(t=(t=q[xt]||null)?GR(t.formAction):q.getAttribute("formAction"),t!==null&&(E=t,q=null));var U=new jl("action","action",null,v,S);e.push({event:U,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ri!==0){var X=q?KR(S,q):new FormData(S);up(c,{pending:!0,data:X,method:S.method,action:E},null,X)}}else typeof E=="function"&&(U.preventDefault(),X=q?KR(S,q):new FormData(S),up(c,{pending:!0,data:X,method:S.method,action:E},E,X))},currentTarget:S}]})}}for(var Vp=0;Vp<Ph.length;Vp++){var Wp=Ph[Vp],Ak=Wp.toLowerCase(),Tk=Wp[0].toUpperCase()+Wp.slice(1);Rr(Ak,"on"+Tk)}Rr(AC,"onAnimationEnd"),Rr(TC,"onAnimationIteration"),Rr(PC,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Vj,"onTransitionRun"),Rr(Wj,"onTransitionStart"),Rr(Gj,"onTransitionCancel"),Rr(OC,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ms));function $R(e,t){t=(t&4)!==0;for(var c=0;c<e.length;c++){var v=e[c],S=v.event;v=v.listeners;e:{var E=void 0;if(t)for(var q=v.length-1;0<=q;q--){var U=v[q],X=U.instance,ve=U.currentTarget;if(U=U.listener,X!==E&&S.isPropagationStopped())break e;E=U,S.currentTarget=ve;try{E(S)}catch(me){sf(me)}S.currentTarget=null,E=X}else for(q=0;q<v.length;q++){if(U=v[q],X=U.instance,ve=U.currentTarget,U=U.listener,X!==E&&S.isPropagationStopped())break e;E=U,S.currentTarget=ve;try{E(S)}catch(me){sf(me)}S.currentTarget=null,E=X}}}}function Ye(e,t){var c=t[ko];c===void 0&&(c=t[ko]=new Set);var v=e+"__bubble";c.has(v)||(JR(t,e,2,!1),c.add(v))}function Gp(e,t,c){var v=0;t&&(v|=4),JR(c,e,v,t)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Kp(e){if(!e[Cf]){e[Cf]=!0,FS.forEach(function(c){c!=="selectionchange"&&(Pk.has(c)||Gp(c,!1,e),Gp(c,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cf]||(t[Cf]=!0,Gp("selectionchange",!1,t))}}function JR(e,t,c,v){switch(S0(t)){case 2:var S=tN;break;case 8:S=rN;break;default:S=ad}c=S.bind(null,t,c,e),S=void 0,!vh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(S=!0),v?S!==void 0?e.addEventListener(t,c,{capture:!0,passive:S}):e.addEventListener(t,c,!0):S!==void 0?e.addEventListener(t,c,{passive:S}):e.addEventListener(t,c,!1)}function $p(e,t,c,v,S){var E=v;if((t&1)===0&&(t&2)===0&&v!==null)e:for(;;){if(v===null)return;var q=v.tag;if(q===3||q===4){var U=v.stateNode.containerInfo;if(U===S)break;if(q===4)for(q=v.return;q!==null;){var X=q.tag;if((X===3||X===4)&&q.stateNode.containerInfo===S)return;q=q.return}for(;U!==null;){if(q=zi(U),q===null)return;if(X=q.tag,X===5||X===6||X===26||X===27){v=E=q;continue e}U=U.parentNode}}v=v.return}rC(function(){var ve=E,me=ph(c),be=[];e:{var ge=IC.get(e);if(ge!==void 0){var ye=jl,He=e;switch(e){case"keypress":if(Ml(c)===0)break e;case"keydown":case"keyup":ye=Rj;break;case"focusin":He="focus",ye=Sh;break;case"focusout":He="blur",ye=Sh;break;case"beforeblur":case"afterblur":ye=Sh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=oC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=wj;break;case AC:case TC:case PC:ye=pj;break;case OC:ye=Tj;break;case"scroll":case"scrollend":ye=cj;break;case"wheel":ye=Oj;break;case"copy":case"cut":case"paste":ye=vj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=aC;break;case"toggle":case"beforetoggle":ye=Mj}var xe=(t&4)!==0,ut=!xe&&(e==="scroll"||e==="scrollend"),ce=xe?ge!==null?ge+"Capture":null:ge;xe=[];for(var re=ve,he;re!==null;){var Ce=re;if(he=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||he===null||ce===null||(Ce=zo(re,ce),Ce!=null&&xe.push(Ss(re,Ce,he))),ut)break;re=re.return}0<xe.length&&(ge=new ye(ge,He,null,c,me),be.push({event:ge,listeners:xe}))}}if((t&7)===0){e:{if(ge=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",ge&&c!==hh&&(He=c.relatedTarget||c.fromElement)&&(zi(He)||He[ln]))break e;if((ye||ge)&&(ge=me.window===me?me:(ge=me.ownerDocument)?ge.defaultView||ge.parentWindow:window,ye?(He=c.relatedTarget||c.toElement,ye=ve,He=He?zi(He):null,He!==null&&(ut=f(He),xe=He.tag,He!==ut||xe!==5&&xe!==27&&xe!==6)&&(He=null)):(ye=null,He=ve),ye!==He)){if(xe=oC,Ce="onMouseLeave",ce="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(xe=aC,Ce="onPointerLeave",ce="onPointerEnter",re="pointer"),ut=ye==null?ge:qo(ye),he=He==null?ge:qo(He),ge=new xe(Ce,re+"leave",ye,c,me),ge.target=ut,ge.relatedTarget=he,Ce=null,zi(me)===ve&&(xe=new xe(ce,re+"enter",He,c,me),xe.target=he,xe.relatedTarget=ut,Ce=xe),ut=Ce,ye&&He)t:{for(xe=ye,ce=He,re=0,he=xe;he;he=mo(he))re++;for(he=0,Ce=ce;Ce;Ce=mo(Ce))he++;for(;0<re-he;)xe=mo(xe),re--;for(;0<he-re;)ce=mo(ce),he--;for(;re--;){if(xe===ce||ce!==null&&xe===ce.alternate)break t;xe=mo(xe),ce=mo(ce)}xe=null}else xe=null;ye!==null&&QR(be,ge,ye,xe,!1),He!==null&&ut!==null&&QR(be,ut,He,xe,!0)}}e:{if(ge=ve?qo(ve):window,ye=ge.nodeName&&ge.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ge.type==="file")var je=vC;else if(pC(ge))if(gC)je=Uj;else{je=xj;var Je=Lj}else ye=ge.nodeName,!ye||ye.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?ve&&fh(ve.elementType)&&(je=vC):je=Bj;if(je&&(je=je(e,ve))){dC(be,je,c,me);break e}Je&&Je(e,ge,ve),e==="focusout"&&ve&&ge.type==="number"&&ve.memoizedProps.value!=null&&lh(ge,"number",ge.value)}switch(Je=ve?qo(ve):window,e){case"focusin":(pC(Je)||Je.contentEditable==="true")&&(Ki=Je,wh=ve,Wo=null);break;case"focusout":Wo=wh=Ki=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,EC(be,c,me);break;case"selectionchange":if(Hj)break;case"keydown":case"keyup":EC(be,c,me)}var ke;if(bh)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Gi?fC(e,c)&&(Ue="onCompositionEnd"):e==="keydown"&&c.keyCode===229&&(Ue="onCompositionStart");Ue&&(cC&&c.locale!=="ko"&&(Gi||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Gi&&(ke=nC()):(fn=me,gh="value"in fn?fn.value:fn.textContent,Gi=!0)),Je=bf(ve,Ue),0<Je.length&&(Ue=new sC(Ue,e,null,c,me),be.push({event:Ue,listeners:Je}),ke?Ue.data=ke:(ke=hC(c),ke!==null&&(Ue.data=ke)))),(ke=jj?kj(e,c):Nj(e,c))&&(Ue=bf(ve,"onBeforeInput"),0<Ue.length&&(Je=new sC("onBeforeInput","beforeinput",null,c,me),be.push({event:Je,listeners:Ue}),Je.data=ke)),wk(be,e,ve,c,me)}$R(be,t)})}function Ss(e,t,c){return{instance:e,listener:t,currentTarget:c}}function bf(e,t){for(var c=t+"Capture",v=[];e!==null;){var S=e,E=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||E===null||(S=zo(e,c),S!=null&&v.unshift(Ss(e,S,E)),S=zo(e,t),S!=null&&v.push(Ss(e,S,E))),e.tag===3)return v;e=e.return}return[]}function mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function QR(e,t,c,v,S){for(var E=t._reactName,q=[];c!==null&&c!==v;){var U=c,X=U.alternate,ve=U.stateNode;if(U=U.tag,X!==null&&X===v)break;U!==5&&U!==26&&U!==27||ve===null||(X=ve,S?(ve=zo(c,E),ve!=null&&q.unshift(Ss(c,ve,X))):S||(ve=zo(c,E),ve!=null&&q.push(Ss(c,ve,X)))),c=c.return}q.length!==0&&e.push({event:t,listeners:q})}var Ok=/\r\n?/g,Ik=/\u0000|\uFFFD/g;function YR(e){return(typeof e=="string"?e:""+e).replace(Ok,`
`).replace(Ik,"")}function XR(e,t){return t=YR(t),YR(e)===t}function Rf(){}function ct(e,t,c,v,S,E){switch(c){case"children":typeof v=="string"?t==="body"||t==="textarea"&&v===""||Hi(e,v):(typeof v=="number"||typeof v=="bigint")&&t!=="body"&&Hi(e,""+v);break;case"className":Al(e,"class",v);break;case"tabIndex":Al(e,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,c,v);break;case"style":eC(e,v,E);break;case"data":if(t!=="object"){Al(e,"data",v);break}case"src":case"href":if(v===""&&(t!=="a"||c!=="href")){e.removeAttribute(c);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){e.removeAttribute(c);break}v=Ol(""+v),e.setAttribute(c,v);break;case"action":case"formAction":if(typeof v=="function"){e.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(c==="formAction"?(t!=="input"&&ct(e,t,"name",S.name,S,null),ct(e,t,"formEncType",S.formEncType,S,null),ct(e,t,"formMethod",S.formMethod,S,null),ct(e,t,"formTarget",S.formTarget,S,null)):(ct(e,t,"encType",S.encType,S,null),ct(e,t,"method",S.method,S,null),ct(e,t,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){e.removeAttribute(c);break}v=Ol(""+v),e.setAttribute(c,v);break;case"onClick":v!=null&&(e.onclick=Rf);break;case"onScroll":v!=null&&Ye("scroll",e);break;case"onScrollEnd":v!=null&&Ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(p(61));if(c=v.__html,c!=null){if(S.children!=null)throw Error(p(60));e.innerHTML=c}}break;case"multiple":e.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":e.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){e.removeAttribute("xlink:href");break}c=Ol(""+v),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?e.setAttribute(c,""+v):e.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?e.setAttribute(c,""):e.removeAttribute(c);break;case"capture":case"download":v===!0?e.setAttribute(c,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?e.setAttribute(c,v):e.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?e.setAttribute(c,v):e.removeAttribute(c);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?e.removeAttribute(c):e.setAttribute(c,v);break;case"popover":Ye("beforetoggle",e),Ye("toggle",e),wl(e,"popover",v);break;case"xlinkActuate":Lr(e,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Lr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Lr(e,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Lr(e,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Lr(e,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Lr(e,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Lr(e,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Lr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Lr(e,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":wl(e,"is",v);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=sj.get(c)||c,wl(e,c,v))}}function Jp(e,t,c,v,S,E){switch(c){case"style":eC(e,v,E);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(p(61));if(c=v.__html,c!=null){if(S.children!=null)throw Error(p(60));e.innerHTML=c}}break;case"children":typeof v=="string"?Hi(e,v):(typeof v=="number"||typeof v=="bigint")&&Hi(e,""+v);break;case"onScroll":v!=null&&Ye("scroll",e);break;case"onScrollEnd":v!=null&&Ye("scrollend",e);break;case"onClick":v!=null&&(e.onclick=Rf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!HS.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(S=c.endsWith("Capture"),t=c.slice(2,S?c.length-7:void 0),E=e[xt]||null,E=E!=null?E[c]:null,typeof E=="function"&&e.removeEventListener(t,E,S),typeof v=="function")){typeof E!="function"&&E!==null&&(c in e?e[c]=null:e.hasAttribute(c)&&e.removeAttribute(c)),e.addEventListener(t,v,S);break e}c in e?e[c]=v:v===!0?e.setAttribute(c,""):wl(e,c,v)}}}function Nt(e,t,c){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",e),Ye("load",e);var v=!1,S=!1,E;for(E in c)if(c.hasOwnProperty(E)){var q=c[E];if(q!=null)switch(E){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:ct(e,t,E,q,c,null)}}S&&ct(e,t,"srcSet",c.srcSet,c,null),v&&ct(e,t,"src",c.src,c,null);return;case"input":Ye("invalid",e);var U=E=q=S=null,X=null,ve=null;for(v in c)if(c.hasOwnProperty(v)){var me=c[v];if(me!=null)switch(v){case"name":S=me;break;case"type":q=me;break;case"checked":X=me;break;case"defaultChecked":ve=me;break;case"value":E=me;break;case"defaultValue":U=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(p(137,t));break;default:ct(e,t,v,me,c,null)}}QS(e,E,U,X,ve,q,S,!1),Tl(e);return;case"select":Ye("invalid",e),v=q=E=null;for(S in c)if(c.hasOwnProperty(S)&&(U=c[S],U!=null))switch(S){case"value":E=U;break;case"defaultValue":q=U;break;case"multiple":v=U;default:ct(e,t,S,U,c,null)}t=E,c=q,e.multiple=!!v,t!=null?Fi(e,!!v,t,!1):c!=null&&Fi(e,!!v,c,!0);return;case"textarea":Ye("invalid",e),E=S=v=null;for(q in c)if(c.hasOwnProperty(q)&&(U=c[q],U!=null))switch(q){case"value":v=U;break;case"defaultValue":S=U;break;case"children":E=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(p(91));break;default:ct(e,t,q,U,c,null)}XS(e,v,S,E),Tl(e);return;case"option":for(X in c)if(c.hasOwnProperty(X)&&(v=c[X],v!=null))switch(X){case"selected":e.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:ct(e,t,X,v,c,null)}return;case"dialog":Ye("beforetoggle",e),Ye("toggle",e),Ye("cancel",e),Ye("close",e);break;case"iframe":case"object":Ye("load",e);break;case"video":case"audio":for(v=0;v<ms.length;v++)Ye(ms[v],e);break;case"image":Ye("error",e),Ye("load",e);break;case"details":Ye("toggle",e);break;case"embed":case"source":case"link":Ye("error",e),Ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in c)if(c.hasOwnProperty(ve)&&(v=c[ve],v!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:ct(e,t,ve,v,c,null)}return;default:if(fh(t)){for(me in c)c.hasOwnProperty(me)&&(v=c[me],v!==void 0&&Jp(e,t,me,v,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(v=c[U],v!=null&&ct(e,t,U,v,c,null))}function Mk(e,t,c,v){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,E=null,q=null,U=null,X=null,ve=null,me=null;for(ye in c){var be=c[ye];if(c.hasOwnProperty(ye)&&be!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":X=be;default:v.hasOwnProperty(ye)||ct(e,t,ye,null,v,be)}}for(var ge in v){var ye=v[ge];if(be=c[ge],v.hasOwnProperty(ge)&&(ye!=null||be!=null))switch(ge){case"type":E=ye;break;case"name":S=ye;break;case"checked":ve=ye;break;case"defaultChecked":me=ye;break;case"value":q=ye;break;case"defaultValue":U=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(p(137,t));break;default:ye!==be&&ct(e,t,ge,ye,v,be)}}uh(e,q,U,X,ve,me,E,S);return;case"select":ye=q=U=ge=null;for(E in c)if(X=c[E],c.hasOwnProperty(E)&&X!=null)switch(E){case"value":break;case"multiple":ye=X;default:v.hasOwnProperty(E)||ct(e,t,E,null,v,X)}for(S in v)if(E=v[S],X=c[S],v.hasOwnProperty(S)&&(E!=null||X!=null))switch(S){case"value":ge=E;break;case"defaultValue":U=E;break;case"multiple":q=E;default:E!==X&&ct(e,t,S,E,v,X)}t=U,c=q,v=ye,ge!=null?Fi(e,!!c,ge,!1):!!v!=!!c&&(t!=null?Fi(e,!!c,t,!0):Fi(e,!!c,c?[]:"",!1));return;case"textarea":ye=ge=null;for(U in c)if(S=c[U],c.hasOwnProperty(U)&&S!=null&&!v.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ct(e,t,U,null,v,S)}for(q in v)if(S=v[q],E=c[q],v.hasOwnProperty(q)&&(S!=null||E!=null))switch(q){case"value":ge=S;break;case"defaultValue":ye=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(p(91));break;default:S!==E&&ct(e,t,q,S,v,E)}YS(e,ge,ye);return;case"option":for(var He in c)if(ge=c[He],c.hasOwnProperty(He)&&ge!=null&&!v.hasOwnProperty(He))switch(He){case"selected":e.selected=!1;break;default:ct(e,t,He,null,v,ge)}for(X in v)if(ge=v[X],ye=c[X],v.hasOwnProperty(X)&&ge!==ye&&(ge!=null||ye!=null))switch(X){case"selected":e.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:ct(e,t,X,ge,v,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in c)ge=c[xe],c.hasOwnProperty(xe)&&ge!=null&&!v.hasOwnProperty(xe)&&ct(e,t,xe,null,v,ge);for(ve in v)if(ge=v[ve],ye=c[ve],v.hasOwnProperty(ve)&&ge!==ye&&(ge!=null||ye!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(p(137,t));break;default:ct(e,t,ve,ge,v,ye)}return;default:if(fh(t)){for(var ut in c)ge=c[ut],c.hasOwnProperty(ut)&&ge!==void 0&&!v.hasOwnProperty(ut)&&Jp(e,t,ut,void 0,v,ge);for(me in v)ge=v[me],ye=c[me],!v.hasOwnProperty(me)||ge===ye||ge===void 0&&ye===void 0||Jp(e,t,me,ge,v,ye);return}}for(var ce in c)ge=c[ce],c.hasOwnProperty(ce)&&ge!=null&&!v.hasOwnProperty(ce)&&ct(e,t,ce,null,v,ge);for(be in v)ge=v[be],ye=c[be],!v.hasOwnProperty(be)||ge===ye||ge==null&&ye==null||ct(e,t,be,ge,v,ye)}var Qp=null,Yp=null;function _f(e){return e.nodeType===9?e:e.ownerDocument}function ZR(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function e0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Xp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zp=null;function Dk(){var e=window.event;return e&&e.type==="popstate"?e===Zp?!1:(Zp=e,!0):(Zp=null,!1)}var t0=typeof setTimeout=="function"?setTimeout:void 0,jk=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,kk=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(e){return r0.resolve(null).then(e).catch(Nk)}:t0;function Nk(e){setTimeout(function(){throw e})}function Tn(e){return e==="head"}function n0(e,t){var c=t,v=0,S=0;do{var E=c.nextSibling;if(e.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"){if(0<v&&8>v){c=v;var q=e.ownerDocument;if(c&1&&Cs(q.documentElement),c&2&&Cs(q.body),c&4)for(c=q.head,Cs(c),q=c.firstChild;q;){var U=q.nextSibling,X=q.nodeName;q[xn]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&q.rel.toLowerCase()==="stylesheet"||c.removeChild(q),q=U}}if(S===0){e.removeChild(E),Ps(t);return}S--}else c==="$"||c==="$?"||c==="$!"?S++:v=c.charCodeAt(0)-48;else v=0;c=E}while(c);Ps(t)}function ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var c=t;switch(t=t.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ed(c),No(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}e.removeChild(c)}}function qk(e,t,c,v){for(;e.nodeType===1;){var S=c;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!v&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(v){if(!e[xn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(E=e.getAttribute("rel"),E==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(E!==S.rel||e.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||e.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||e.getAttribute("title")!==(S.title==null?null:S.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(E=e.getAttribute("src"),(E!==(S.src==null?null:S.src)||e.getAttribute("type")!==(S.type==null?null:S.type)||e.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&E&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var E=S.name==null?null:""+S.name;if(S.type==="hidden"&&e.getAttribute("name")===E)return e}else return e;if(e=Er(e.nextSibling),e===null)break}return null}function zk(e,t,c){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!c||(e=Er(e.nextSibling),e===null))return null;return e}function td(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Lk(e,t){var c=e.ownerDocument;if(e.data!=="$?"||c.readyState==="complete")t();else{var v=function(){t(),c.removeEventListener("DOMContentLoaded",v)};c.addEventListener("DOMContentLoaded",v),e._reactRetry=v}}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var rd=null;function i0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var c=e.data;if(c==="$"||c==="$!"||c==="$?"){if(t===0)return e;t--}else c==="/$"&&t++}e=e.previousSibling}return null}function o0(e,t,c){switch(t=_f(c),e){case"html":if(e=t.documentElement,!e)throw Error(p(452));return e;case"head":if(e=t.head,!e)throw Error(p(453));return e;case"body":if(e=t.body,!e)throw Error(p(454));return e;default:throw Error(p(451))}}function Cs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);No(e)}var Sr=new Map,s0=new Set;function Ef(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xr=J.d;J.d={f:xk,r:Bk,D:Uk,C:Fk,L:Hk,m:Vk,X:Gk,S:Wk,M:Kk};function xk(){var e=Xr.f(),t=vf();return e||t}function Bk(e){var t=Li(e);t!==null&&t.tag===5&&t.type==="form"?Ab(t):Xr.r(e)}var So=typeof document>"u"?null:document;function a0(e,t,c){var v=So;if(v&&typeof t=="string"&&t){var S=hr(t);S='link[rel="'+e+'"][href="'+S+'"]',typeof c=="string"&&(S+='[crossorigin="'+c+'"]'),s0.has(S)||(s0.add(S),e={rel:e,crossOrigin:c,href:t},v.querySelector(S)===null&&(t=v.createElement("link"),Nt(t,"link",e),Tt(t),v.head.appendChild(t)))}}function Uk(e){Xr.D(e),a0("dns-prefetch",e,null)}function Fk(e,t){Xr.C(e,t),a0("preconnect",e,t)}function Hk(e,t,c){Xr.L(e,t,c);var v=So;if(v&&e&&t){var S='link[rel="preload"][as="'+hr(t)+'"]';t==="image"&&c&&c.imageSrcSet?(S+='[imagesrcset="'+hr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(S+='[imagesizes="'+hr(c.imageSizes)+'"]')):S+='[href="'+hr(e)+'"]';var E=S;switch(t){case"style":E=Co(e);break;case"script":E=bo(e)}Sr.has(E)||(e=h({rel:"preload",href:t==="image"&&c&&c.imageSrcSet?void 0:e,as:t},c),Sr.set(E,e),v.querySelector(S)!==null||t==="style"&&v.querySelector(bs(E))||t==="script"&&v.querySelector(Rs(E))||(t=v.createElement("link"),Nt(t,"link",e),Tt(t),v.head.appendChild(t)))}}function Vk(e,t){Xr.m(e,t);var c=So;if(c&&e){var v=t&&typeof t.as=="string"?t.as:"script",S='link[rel="modulepreload"][as="'+hr(v)+'"][href="'+hr(e)+'"]',E=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=bo(e)}if(!Sr.has(E)&&(e=h({rel:"modulepreload",href:e},t),Sr.set(E,e),c.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Rs(E)))return}v=c.createElement("link"),Nt(v,"link",e),Tt(v),c.head.appendChild(v)}}}function Wk(e,t,c){Xr.S(e,t,c);var v=So;if(v&&e){var S=xi(v).hoistableStyles,E=Co(e);t=t||"default";var q=S.get(E);if(!q){var U={loading:0,preload:null};if(q=v.querySelector(bs(E)))U.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},c),(c=Sr.get(E))&&nd(e,c);var X=q=v.createElement("link");Tt(X),Nt(X,"link",e),X._p=new Promise(function(ve,me){X.onload=ve,X.onerror=me}),X.addEventListener("load",function(){U.loading|=1}),X.addEventListener("error",function(){U.loading|=2}),U.loading|=4,wf(q,t,v)}q={type:"stylesheet",instance:q,count:1,state:U},S.set(E,q)}}}function Gk(e,t){Xr.X(e,t);var c=So;if(c&&e){var v=xi(c).hoistableScripts,S=bo(e),E=v.get(S);E||(E=c.querySelector(Rs(S)),E||(e=h({src:e,async:!0},t),(t=Sr.get(S))&&id(e,t),E=c.createElement("script"),Tt(E),Nt(E,"link",e),c.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(S,E))}}function Kk(e,t){Xr.M(e,t);var c=So;if(c&&e){var v=xi(c).hoistableScripts,S=bo(e),E=v.get(S);E||(E=c.querySelector(Rs(S)),E||(e=h({src:e,async:!0,type:"module"},t),(t=Sr.get(S))&&id(e,t),E=c.createElement("script"),Tt(E),Nt(E,"link",e),c.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(S,E))}}function c0(e,t,c,v){var S=(S=Ee.current)?Ef(S):null;if(!S)throw Error(p(446));switch(e){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(t=Co(c.href),c=xi(S).hoistableStyles,v=c.get(t),v||(v={type:"style",instance:null,count:0,state:null},c.set(t,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){e=Co(c.href);var E=xi(S).hoistableStyles,q=E.get(e);if(q||(S=S.ownerDocument||S,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(e,q),(E=S.querySelector(bs(e)))&&!E._p&&(q.instance=E,q.state.loading=5),Sr.has(e)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Sr.set(e,c),E||$k(S,e,c,q.state))),t&&v===null)throw Error(p(528,""));return q}if(t&&v!==null)throw Error(p(529,""));return null;case"script":return t=c.async,c=c.src,typeof c=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=bo(c),c=xi(S).hoistableScripts,v=c.get(t),v||(v={type:"script",instance:null,count:0,state:null},c.set(t,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,e))}}function Co(e){return'href="'+hr(e)+'"'}function bs(e){return'link[rel="stylesheet"]['+e+"]"}function u0(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function $k(e,t,c,v){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?v.loading=1:(t=e.createElement("link"),v.preload=t,t.addEventListener("load",function(){return v.loading|=1}),t.addEventListener("error",function(){return v.loading|=2}),Nt(t,"link",c),Tt(t),e.head.appendChild(t))}function bo(e){return'[src="'+hr(e)+'"]'}function Rs(e){return"script[async]"+e}function l0(e,t,c){if(t.count++,t.instance===null)switch(t.type){case"style":var v=e.querySelector('style[data-href~="'+hr(c.href)+'"]');if(v)return t.instance=v,Tt(v),v;var S=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return v=(e.ownerDocument||e).createElement("style"),Tt(v),Nt(v,"style",S),wf(v,c.precedence,e),t.instance=v;case"stylesheet":S=Co(c.href);var E=e.querySelector(bs(S));if(E)return t.state.loading|=4,t.instance=E,Tt(E),E;v=u0(c),(S=Sr.get(S))&&nd(v,S),E=(e.ownerDocument||e).createElement("link"),Tt(E);var q=E;return q._p=new Promise(function(U,X){q.onload=U,q.onerror=X}),Nt(E,"link",v),t.state.loading|=4,wf(E,c.precedence,e),t.instance=E;case"script":return E=bo(c.src),(S=e.querySelector(Rs(E)))?(t.instance=S,Tt(S),S):(v=c,(S=Sr.get(E))&&(v=h({},c),id(v,S)),e=e.ownerDocument||e,S=e.createElement("script"),Tt(S),Nt(S,"link",v),e.head.appendChild(S),t.instance=S);case"void":return null;default:throw Error(p(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(v=t.instance,t.state.loading|=4,wf(v,c.precedence,e));return t.instance}function wf(e,t,c){for(var v=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,E=S,q=0;q<v.length;q++){var U=v[q];if(U.dataset.precedence===t)E=U;else if(E!==S)break}E?E.parentNode.insertBefore(e,E.nextSibling):(t=c.nodeType===9?c.head:c,t.insertBefore(e,t.firstChild))}function nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function id(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Af=null;function f0(e,t,c){if(Af===null){var v=new Map,S=Af=new Map;S.set(c,v)}else S=Af,v=S.get(c),v||(v=new Map,S.set(c,v));if(v.has(e))return v;for(v.set(e,null),c=c.getElementsByTagName(e),S=0;S<c.length;S++){var E=c[S];if(!(E[xn]||E[At]||e==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var q=E.getAttribute(t)||"";q=e+q;var U=v.get(q);U?U.push(E):v.set(q,[E])}}return v}function h0(e,t,c){e=e.ownerDocument||e,e.head.insertBefore(c,t==="title"?e.querySelector("head > title"):null)}function Jk(e,t,c){if(c===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var _s=null;function Qk(){}function Yk(e,t,c){if(_s===null)throw Error(p(475));var v=_s;if(t.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var S=Co(c.href),E=e.querySelector(bs(S));if(E){e=E._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(v.count++,v=Tf.bind(v),e.then(v,v)),t.state.loading|=4,t.instance=E,Tt(E);return}E=e.ownerDocument||e,c=u0(c),(S=Sr.get(S))&&nd(c,S),E=E.createElement("link"),Tt(E);var q=E;q._p=new Promise(function(U,X){q.onload=U,q.onerror=X}),Nt(E,"link",c),t.instance=E}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(v.count++,t=Tf.bind(v),e.addEventListener("load",t),e.addEventListener("error",t))}}function Xk(){if(_s===null)throw Error(p(475));var e=_s;return e.stylesheets&&e.count===0&&od(e,e.stylesheets),0<e.count?function(t){var c=setTimeout(function(){if(e.stylesheets&&od(e,e.stylesheets),e.unsuspend){var v=e.unsuspend;e.unsuspend=null,v()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(c)}}:null}function Tf(){if(this.count--,this.count===0){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pf=null;function od(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pf=new Map,t.forEach(Zk,e),Pf=null,Tf.call(e))}function Zk(e,t){if(!(t.state.loading&4)){var c=Pf.get(e);if(c)var v=c.get(null);else{c=new Map,Pf.set(e,c);for(var S=e.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<S.length;E++){var q=S[E];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(c.set(q.dataset.precedence,q),v=q)}v&&c.set(null,v)}S=t.instance,q=S.getAttribute("data-precedence"),E=c.get(q)||v,E===v&&c.set(null,S),c.set(q,S),this.count++,v=Tf.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),E?E.parentNode.insertBefore(S,E.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(S,e.firstChild)),t.state.loading|=4}}var Es={$$typeof:A,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function eN(e,t,c,v,S,E,q,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=E,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function d0(e,t,c,v,S,E,q,U,X,ve,me,be){return e=new eN(e,t,c,q,U,X,ve,be),t=1,E===!0&&(t|=24),E=Zt(3,null,null,t),e.current=E,E.stateNode=e,t=Bh(),t.refCount++,e.pooledCache=t,t.refCount++,E.memoizedState={element:v,isDehydrated:c,cache:t},Vh(E),e}function v0(e){return e?(e=Yi,e):Yi}function g0(e,t,c,v,S,E){S=v0(S),v.context===null?v.context=S:v.pendingContext=S,v=dn(t),v.payload={element:c},E=E===void 0?null:E,E!==null&&(v.callback=E),c=vn(e,v,t),c!==null&&(ir(c,e,t),es(c,e,t))}function y0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var c=e.retryLane;e.retryLane=c!==0&&c<t?c:t}}function sd(e,t){y0(e,t),(e=e.alternate)&&y0(e,t)}function m0(e){if(e.tag===13){var t=Qi(e,67108864);t!==null&&ir(t,e,67108864),sd(e,67108864)}}var Of=!0;function tN(e,t,c,v){var S=j.T;j.T=null;var E=J.p;try{J.p=2,ad(e,t,c,v)}finally{J.p=E,j.T=S}}function rN(e,t,c,v){var S=j.T;j.T=null;var E=J.p;try{J.p=8,ad(e,t,c,v)}finally{J.p=E,j.T=S}}function ad(e,t,c,v){if(Of){var S=cd(v);if(S===null)$p(e,t,v,If,c),C0(e,v);else if(iN(S,e,t,c,v))v.stopPropagation();else if(C0(e,v),t&4&&-1<nN.indexOf(e)){for(;S!==null;){var E=Li(S);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var q=Ie(E.pendingLanes);if(q!==0){var U=E;for(U.pendingLanes|=2,U.entangledLanes|=2;q;){var X=1<<31-I(q);U.entanglements[1]|=X,q&=~X}Nr(E),(ot&6)===0&&(pf=Oe()+500,ys(0))}}break;case 13:U=Qi(E,2),U!==null&&ir(U,E,2),vf(),sd(E,2)}if(E=cd(v),E===null&&$p(e,t,v,If,c),E===S)break;S=E}S!==null&&v.stopPropagation()}else $p(e,t,v,null,c)}}function cd(e){return e=ph(e),ud(e)}var If=null;function ud(e){if(If=null,e=zi(e),e!==null){var t=f(e);if(t===null)e=null;else{var c=t.tag;if(c===13){if(e=a(t),e!==null)return e;e=null}else if(c===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return If=e,null}function S0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(K()){case Q:return 2;case x:return 8;case M:case k:return 32;case H:return 268435456;default:return 32}default:return 32}}var ld=!1,Pn=null,On=null,In=null,ws=new Map,As=new Map,Mn=[],nN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(t.pointerId)}}function Ts(e,t,c,v,S,E){return e===null||e.nativeEvent!==E?(e={blockedOn:t,domEventName:c,eventSystemFlags:v,nativeEvent:E,targetContainers:[S]},t!==null&&(t=Li(t),t!==null&&m0(t)),e):(e.eventSystemFlags|=v,t=e.targetContainers,S!==null&&t.indexOf(S)===-1&&t.push(S),e)}function iN(e,t,c,v,S){switch(t){case"focusin":return Pn=Ts(Pn,e,t,c,v,S),!0;case"dragenter":return On=Ts(On,e,t,c,v,S),!0;case"mouseover":return In=Ts(In,e,t,c,v,S),!0;case"pointerover":var E=S.pointerId;return ws.set(E,Ts(ws.get(E)||null,e,t,c,v,S)),!0;case"gotpointercapture":return E=S.pointerId,As.set(E,Ts(As.get(E)||null,e,t,c,v,S)),!0}return!1}function b0(e){var t=zi(e.target);if(t!==null){var c=f(t);if(c!==null){if(t=c.tag,t===13){if(t=a(c),t!==null){e.blockedOn=t,ih(e.priority,function(){if(c.tag===13){var v=nr();v=Do(v);var S=Qi(c,v);S!==null&&ir(S,c,v),sd(c,v)}});return}}else if(t===3&&c.stateNode.current.memoizedState.isDehydrated){e.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var c=cd(e.nativeEvent);if(c===null){c=e.nativeEvent;var v=new c.constructor(c.type,c);hh=v,c.target.dispatchEvent(v),hh=null}else return t=Li(c),t!==null&&m0(t),e.blockedOn=c,!1;t.shift()}return!0}function R0(e,t,c){Mf(e)&&c.delete(t)}function oN(){ld=!1,Pn!==null&&Mf(Pn)&&(Pn=null),On!==null&&Mf(On)&&(On=null),In!==null&&Mf(In)&&(In=null),ws.forEach(R0),As.forEach(R0)}function Df(e,t){e.blockedOn===t&&(e.blockedOn=null,ld||(ld=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,oN)))}var jf=null;function _0(e){jf!==e&&(jf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jf===e&&(jf=null);for(var t=0;t<e.length;t+=3){var c=e[t],v=e[t+1],S=e[t+2];if(typeof v!="function"){if(ud(v||c)===null)continue;break}var E=Li(c);E!==null&&(e.splice(t,3),t-=3,up(E,{pending:!0,data:S,method:c.method,action:v},v,S))}}))}function Ps(e){function t(X){return Df(X,e)}Pn!==null&&Df(Pn,e),On!==null&&Df(On,e),In!==null&&Df(In,e),ws.forEach(t),As.forEach(t);for(var c=0;c<Mn.length;c++){var v=Mn[c];v.blockedOn===e&&(v.blockedOn=null)}for(;0<Mn.length&&(c=Mn[0],c.blockedOn===null);)b0(c),c.blockedOn===null&&Mn.shift();if(c=(e.ownerDocument||e).$$reactFormReplay,c!=null)for(v=0;v<c.length;v+=3){var S=c[v],E=c[v+1],q=S[xt]||null;if(typeof E=="function")q||_0(c);else if(q){var U=null;if(E&&E.hasAttribute("formAction")){if(S=E,q=E[xt]||null)U=q.formAction;else if(ud(S)!==null)continue}else U=q.action;typeof U=="function"?c[v+1]=U:(c.splice(v,3),v-=3),_0(c)}}}function fd(e){this._internalRoot=e}kf.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(p(409));var c=t.current,v=nr();g0(c,v,e,t,null,null)},kf.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;g0(e.current,2,null,e,null,null),vf(),t[ln]=null}};function kf(e){this._internalRoot=e}kf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rl();e={blockedOn:null,target:e,priority:t};for(var c=0;c<Mn.length&&t!==0&&t<Mn[c].priority;c++);Mn.splice(c,0,e),c===0&&b0(e)}};var E0=i.version;if(E0!=="19.1.0")throw Error(p(527,E0,"19.1.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=l(t),e=e!==null?u(e):null,e=e===null?null:e.stateNode,e};var sN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{Re=Nf.inject(sN),L=Nf}catch{}}return Is.createRoot=function(e,t){if(!s(e))throw Error(p(299));var c=!1,v="",S=Bb,E=Ub,q=Fb,U=null;return t!=null&&(t.unstable_strictMode===!0&&(c=!0),t.identifierPrefix!==void 0&&(v=t.identifierPrefix),t.onUncaughtError!==void 0&&(S=t.onUncaughtError),t.onCaughtError!==void 0&&(E=t.onCaughtError),t.onRecoverableError!==void 0&&(q=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(U=t.unstable_transitionCallbacks)),t=d0(e,1,!1,null,null,c,v,S,E,q,U,null),e[ln]=t.current,Kp(e),new fd(t)},Is.hydrateRoot=function(e,t,c){if(!s(e))throw Error(p(299));var v=!1,S="",E=Bb,q=Ub,U=Fb,X=null,ve=null;return c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(q=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(X=c.unstable_transitionCallbacks),c.formState!==void 0&&(ve=c.formState)),t=d0(e,1,!0,t,c??null,v,S,E,q,U,X,ve),t.context=v0(null),c=t.current,v=nr(),v=Do(v),S=dn(v),S.callback=null,vn(c,S,v),c=v,t.current.lanes=c,Lt(t,c),Nr(t),e[ln]=t.current,Kp(e),new kf(t)},Is.version="19.1.0",Is}var k0;function gN(){if(k0)return pd.exports;k0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),pd.exports=vN(),pd.exports}var yN=gN(),it=cS(),ni={},ii={},Ms={},oi={},gt={},md={},si={},Sd={},Ds={},qf={},N0;function rD(){if(N0)return qf;N0=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.default=o;let r;const i=new Uint8Array(16);function o(){if(!r&&(r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}return qf}var Ro={},js={},ks={},q0;function mN(){if(q0)return ks;q0=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.default=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return ks.default=r,ks}var z0;function Vf(){if(z0)return js;z0=1,Object.defineProperty(js,"__esModule",{value:!0}),js.default=void 0;var r=i(mN());function i(s){return s&&s.__esModule?s:{default:s}}function o(s){return typeof s=="string"&&r.default.test(s)}var p=o;return js.default=p,js}var L0;function Wf(){if(L0)return Ro;L0=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.default=void 0,Ro.unsafeStringify=p;var r=i(Vf());function i(a){return a&&a.__esModule?a:{default:a}}const o=[];for(let a=0;a<256;++a)o.push((a+256).toString(16).slice(1));function p(a,n=0){return o[a[n+0]]+o[a[n+1]]+o[a[n+2]]+o[a[n+3]]+"-"+o[a[n+4]]+o[a[n+5]]+"-"+o[a[n+6]]+o[a[n+7]]+"-"+o[a[n+8]]+o[a[n+9]]+"-"+o[a[n+10]]+o[a[n+11]]+o[a[n+12]]+o[a[n+13]]+o[a[n+14]]+o[a[n+15]]}function s(a,n=0){const l=p(a,n);if(!(0,r.default)(l))throw TypeError("Stringified UUID is invalid");return l}var f=s;return Ro.default=f,Ro}var x0;function SN(){if(x0)return Ds;x0=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.default=void 0;var r=o(rD()),i=Wf();function o(u){return u&&u.__esModule?u:{default:u}}let p,s,f=0,a=0;function n(u,h,d){let y=h&&d||0;const g=h||new Array(16);u=u||{};let m=u.node||p,C=u.clockseq!==void 0?u.clockseq:s;if(m==null||C==null){const O=u.random||(u.rng||r.default)();m==null&&(m=p=[O[0]|1,O[1],O[2],O[3],O[4],O[5]]),C==null&&(C=s=(O[6]<<8|O[7])&16383)}let _=u.msecs!==void 0?u.msecs:Date.now(),b=u.nsecs!==void 0?u.nsecs:a+1;const R=_-f+(b-a)/1e4;if(R<0&&u.clockseq===void 0&&(C=C+1&16383),(R<0||_>f)&&u.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=_,a=b,s=C,_+=122192928e5;const A=((_&268435455)*1e4+b)%4294967296;g[y++]=A>>>24&255,g[y++]=A>>>16&255,g[y++]=A>>>8&255,g[y++]=A&255;const w=_/4294967296*1e4&268435455;g[y++]=w>>>8&255,g[y++]=w&255,g[y++]=w>>>24&15|16,g[y++]=w>>>16&255,g[y++]=C>>>8|128,g[y++]=C&255;for(let O=0;O<6;++O)g[y+O]=m[O];return h||(0,i.unsafeStringify)(g)}var l=n;return Ds.default=l,Ds}var Ns={},jn={},qs={},B0;function nD(){if(B0)return qs;B0=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.default=void 0;var r=i(Vf());function i(s){return s&&s.__esModule?s:{default:s}}function o(s){if(!(0,r.default)(s))throw TypeError("Invalid UUID");let f;const a=new Uint8Array(16);return a[0]=(f=parseInt(s.slice(0,8),16))>>>24,a[1]=f>>>16&255,a[2]=f>>>8&255,a[3]=f&255,a[4]=(f=parseInt(s.slice(9,13),16))>>>8,a[5]=f&255,a[6]=(f=parseInt(s.slice(14,18),16))>>>8,a[7]=f&255,a[8]=(f=parseInt(s.slice(19,23),16))>>>8,a[9]=f&255,a[10]=(f=parseInt(s.slice(24,36),16))/1099511627776&255,a[11]=f/4294967296&255,a[12]=f>>>24&255,a[13]=f>>>16&255,a[14]=f>>>8&255,a[15]=f&255,a}var p=o;return qs.default=p,qs}var U0;function iD(){if(U0)return jn;U0=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.URL=jn.DNS=void 0,jn.default=a;var r=Wf(),i=o(nD());function o(n){return n&&n.__esModule?n:{default:n}}function p(n){n=unescape(encodeURIComponent(n));const l=[];for(let u=0;u<n.length;++u)l.push(n.charCodeAt(u));return l}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";jn.DNS=s;const f="6ba7b811-9dad-11d1-80b4-00c04fd430c8";jn.URL=f;function a(n,l,u){function h(d,y,g,m){var C;if(typeof d=="string"&&(d=p(d)),typeof y=="string"&&(y=(0,i.default)(y)),((C=y)===null||C===void 0?void 0:C.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let _=new Uint8Array(16+d.length);if(_.set(y),_.set(d,y.length),_=u(_),_[6]=_[6]&15|l,_[8]=_[8]&63|128,g){m=m||0;for(let b=0;b<16;++b)g[m+b]=_[b];return g}return(0,r.unsafeStringify)(_)}try{h.name=n}catch{}return h.DNS=s,h.URL=f,h}return jn}var zs={},F0;function CN(){if(F0)return zs;F0=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.default=void 0;function r(g){if(typeof g=="string"){const m=unescape(encodeURIComponent(g));g=new Uint8Array(m.length);for(let C=0;C<m.length;++C)g[C]=m.charCodeAt(C)}return i(p(s(g),g.length*8))}function i(g){const m=[],C=g.length*32,_="0123456789abcdef";for(let b=0;b<C;b+=8){const R=g[b>>5]>>>b%32&255,A=parseInt(_.charAt(R>>>4&15)+_.charAt(R&15),16);m.push(A)}return m}function o(g){return(g+64>>>9<<4)+14+1}function p(g,m){g[m>>5]|=128<<m%32,g[o(m)-1]=m;let C=1732584193,_=-271733879,b=-1732584194,R=271733878;for(let A=0;A<g.length;A+=16){const w=C,O=_,P=b,D=R;C=l(C,_,b,R,g[A],7,-680876936),R=l(R,C,_,b,g[A+1],12,-389564586),b=l(b,R,C,_,g[A+2],17,606105819),_=l(_,b,R,C,g[A+3],22,-1044525330),C=l(C,_,b,R,g[A+4],7,-176418897),R=l(R,C,_,b,g[A+5],12,1200080426),b=l(b,R,C,_,g[A+6],17,-1473231341),_=l(_,b,R,C,g[A+7],22,-45705983),C=l(C,_,b,R,g[A+8],7,1770035416),R=l(R,C,_,b,g[A+9],12,-1958414417),b=l(b,R,C,_,g[A+10],17,-42063),_=l(_,b,R,C,g[A+11],22,-1990404162),C=l(C,_,b,R,g[A+12],7,1804603682),R=l(R,C,_,b,g[A+13],12,-40341101),b=l(b,R,C,_,g[A+14],17,-1502002290),_=l(_,b,R,C,g[A+15],22,1236535329),C=u(C,_,b,R,g[A+1],5,-165796510),R=u(R,C,_,b,g[A+6],9,-1069501632),b=u(b,R,C,_,g[A+11],14,643717713),_=u(_,b,R,C,g[A],20,-373897302),C=u(C,_,b,R,g[A+5],5,-701558691),R=u(R,C,_,b,g[A+10],9,38016083),b=u(b,R,C,_,g[A+15],14,-660478335),_=u(_,b,R,C,g[A+4],20,-405537848),C=u(C,_,b,R,g[A+9],5,568446438),R=u(R,C,_,b,g[A+14],9,-1019803690),b=u(b,R,C,_,g[A+3],14,-187363961),_=u(_,b,R,C,g[A+8],20,1163531501),C=u(C,_,b,R,g[A+13],5,-1444681467),R=u(R,C,_,b,g[A+2],9,-51403784),b=u(b,R,C,_,g[A+7],14,1735328473),_=u(_,b,R,C,g[A+12],20,-1926607734),C=h(C,_,b,R,g[A+5],4,-378558),R=h(R,C,_,b,g[A+8],11,-2022574463),b=h(b,R,C,_,g[A+11],16,1839030562),_=h(_,b,R,C,g[A+14],23,-35309556),C=h(C,_,b,R,g[A+1],4,-1530992060),R=h(R,C,_,b,g[A+4],11,1272893353),b=h(b,R,C,_,g[A+7],16,-155497632),_=h(_,b,R,C,g[A+10],23,-1094730640),C=h(C,_,b,R,g[A+13],4,681279174),R=h(R,C,_,b,g[A],11,-358537222),b=h(b,R,C,_,g[A+3],16,-722521979),_=h(_,b,R,C,g[A+6],23,76029189),C=h(C,_,b,R,g[A+9],4,-640364487),R=h(R,C,_,b,g[A+12],11,-421815835),b=h(b,R,C,_,g[A+15],16,530742520),_=h(_,b,R,C,g[A+2],23,-995338651),C=d(C,_,b,R,g[A],6,-198630844),R=d(R,C,_,b,g[A+7],10,1126891415),b=d(b,R,C,_,g[A+14],15,-1416354905),_=d(_,b,R,C,g[A+5],21,-57434055),C=d(C,_,b,R,g[A+12],6,1700485571),R=d(R,C,_,b,g[A+3],10,-1894986606),b=d(b,R,C,_,g[A+10],15,-1051523),_=d(_,b,R,C,g[A+1],21,-2054922799),C=d(C,_,b,R,g[A+8],6,1873313359),R=d(R,C,_,b,g[A+15],10,-30611744),b=d(b,R,C,_,g[A+6],15,-1560198380),_=d(_,b,R,C,g[A+13],21,1309151649),C=d(C,_,b,R,g[A+4],6,-145523070),R=d(R,C,_,b,g[A+11],10,-1120210379),b=d(b,R,C,_,g[A+2],15,718787259),_=d(_,b,R,C,g[A+9],21,-343485551),C=f(C,w),_=f(_,O),b=f(b,P),R=f(R,D)}return[C,_,b,R]}function s(g){if(g.length===0)return[];const m=g.length*8,C=new Uint32Array(o(m));for(let _=0;_<m;_+=8)C[_>>5]|=(g[_/8]&255)<<_%32;return C}function f(g,m){const C=(g&65535)+(m&65535);return(g>>16)+(m>>16)+(C>>16)<<16|C&65535}function a(g,m){return g<<m|g>>>32-m}function n(g,m,C,_,b,R){return f(a(f(f(m,g),f(_,R)),b),C)}function l(g,m,C,_,b,R,A){return n(m&C|~m&_,g,m,b,R,A)}function u(g,m,C,_,b,R,A){return n(m&_|C&~_,g,m,b,R,A)}function h(g,m,C,_,b,R,A){return n(m^C^_,g,m,b,R,A)}function d(g,m,C,_,b,R,A){return n(C^(m|~_),g,m,b,R,A)}var y=r;return zs.default=y,zs}var H0;function bN(){if(H0)return Ns;H0=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.default=void 0;var r=o(iD()),i=o(CN());function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,r.default)("v3",48,i.default);return Ns.default=s,Ns}var Ls={},xs={},V0;function RN(){if(V0)return xs;V0=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.default=void 0;var i={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return xs.default=i,xs}var W0;function _N(){if(W0)return Ls;W0=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.default=void 0;var r=p(RN()),i=p(rD()),o=Wf();function p(a){return a&&a.__esModule?a:{default:a}}function s(a,n,l){if(r.default.randomUUID&&!n&&!a)return r.default.randomUUID();a=a||{};const u=a.random||(a.rng||i.default)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,n){l=l||0;for(let h=0;h<16;++h)n[l+h]=u[h];return n}return(0,o.unsafeStringify)(u)}var f=s;return Ls.default=f,Ls}var Bs={},Us={},G0;function EN(){if(G0)return Us;G0=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.default=void 0;function r(s,f,a,n){switch(s){case 0:return f&a^~f&n;case 1:return f^a^n;case 2:return f&a^f&n^a&n;case 3:return f^a^n}}function i(s,f){return s<<f|s>>>32-f}function o(s){const f=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){const h=unescape(encodeURIComponent(s));s=[];for(let d=0;d<h.length;++d)s.push(h.charCodeAt(d))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);const n=s.length/4+2,l=Math.ceil(n/16),u=new Array(l);for(let h=0;h<l;++h){const d=new Uint32Array(16);for(let y=0;y<16;++y)d[y]=s[h*64+y*4]<<24|s[h*64+y*4+1]<<16|s[h*64+y*4+2]<<8|s[h*64+y*4+3];u[h]=d}u[l-1][14]=(s.length-1)*8/Math.pow(2,32),u[l-1][14]=Math.floor(u[l-1][14]),u[l-1][15]=(s.length-1)*8&4294967295;for(let h=0;h<l;++h){const d=new Uint32Array(80);for(let b=0;b<16;++b)d[b]=u[h][b];for(let b=16;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16],1);let y=a[0],g=a[1],m=a[2],C=a[3],_=a[4];for(let b=0;b<80;++b){const R=Math.floor(b/20),A=i(y,5)+r(R,g,m,C)+_+f[R]+d[b]>>>0;_=C,C=m,m=i(g,30)>>>0,g=y,y=A}a[0]=a[0]+y>>>0,a[1]=a[1]+g>>>0,a[2]=a[2]+m>>>0,a[3]=a[3]+C>>>0,a[4]=a[4]+_>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var p=o;return Us.default=p,Us}var K0;function wN(){if(K0)return Bs;K0=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.default=void 0;var r=o(iD()),i=o(EN());function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,r.default)("v5",80,i.default);return Bs.default=s,Bs}var Fs={},$0;function AN(){if($0)return Fs;$0=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.default=void 0;var r="00000000-0000-0000-0000-000000000000";return Fs.default=r,Fs}var Hs={},J0;function TN(){if(J0)return Hs;J0=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.default=void 0;var r=i(Vf());function i(s){return s&&s.__esModule?s:{default:s}}function o(s){if(!(0,r.default)(s))throw TypeError("Invalid UUID");return parseInt(s.slice(14,15),16)}var p=o;return Hs.default=p,Hs}var Q0;function PN(){return Q0||(Q0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return a.default}});var i=h(SN()),o=h(bN()),p=h(_N()),s=h(wN()),f=h(AN()),a=h(TN()),n=h(Vf()),l=h(Wf()),u=h(nD());function h(d){return d&&d.__esModule?d:{default:d}}}(Sd)),Sd}var Y0;function Di(){if(Y0)return si;Y0=1,Object.defineProperty(si,"__esModule",{value:!0}),si.createNoDashGuid=si.createGuid=void 0;const r=PN(),i=()=>(0,r.v4)();si.createGuid=i;const o=()=>i().replace(new RegExp("-","g"),"").toUpperCase();return si.createNoDashGuid=o,si}var X0;function dl(){return X0||(X0=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PlatformEvent=r.EventType=void 0;const i=Di();(function(p){p[p.Debug=0]="Debug",p[p.Info=1]="Info",p[p.Warning=2]="Warning",p[p.Error=3]="Error",p[p.None=4]="None"})(r.EventType||(r.EventType={}));class o{constructor(s,f){this.privName=s,this.privEventId=(0,i.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=f,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}r.PlatformEvent=o}(md)),md}var Z0;function ON(){if(Z0)return gt;Z0=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.AudioStreamNodeErrorEvent=gt.AudioStreamNodeDetachedEvent=gt.AudioStreamNodeAttachedEvent=gt.AudioStreamNodeAttachingEvent=gt.AudioStreamNodeEvent=gt.AudioSourceErrorEvent=gt.AudioSourceOffEvent=gt.AudioSourceReadyEvent=gt.AudioSourceInitializingEvent=gt.AudioSourceEvent=void 0;const r=dl();class i extends r.PlatformEvent{constructor(y,g,m=r.EventType.Info){super(y,m),this.privAudioSourceId=g}get audioSourceId(){return this.privAudioSourceId}}gt.AudioSourceEvent=i;class o extends i{constructor(y){super("AudioSourceInitializingEvent",y)}}gt.AudioSourceInitializingEvent=o;class p extends i{constructor(y){super("AudioSourceReadyEvent",y)}}gt.AudioSourceReadyEvent=p;class s extends i{constructor(y){super("AudioSourceOffEvent",y)}}gt.AudioSourceOffEvent=s;class f extends i{constructor(y,g){super("AudioSourceErrorEvent",y,r.EventType.Error),this.privError=g}get error(){return this.privError}}gt.AudioSourceErrorEvent=f;class a extends i{constructor(y,g,m){super(y,g),this.privAudioNodeId=m}get audioNodeId(){return this.privAudioNodeId}}gt.AudioStreamNodeEvent=a;class n extends a{constructor(y,g){super("AudioStreamNodeAttachingEvent",y,g)}}gt.AudioStreamNodeAttachingEvent=n;class l extends a{constructor(y,g){super("AudioStreamNodeAttachedEvent",y,g)}}gt.AudioStreamNodeAttachedEvent=l;class u extends a{constructor(y,g){super("AudioStreamNodeDetachedEvent",y,g)}}gt.AudioStreamNodeDetachedEvent=u;class h extends a{constructor(y,g,m){super("AudioStreamNodeErrorEvent",y,g),this.privError=m}get error(){return this.privError}}return gt.AudioStreamNodeErrorEvent=h,gt}var yt={},e_;function IN(){if(e_)return yt;e_=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.ConnectionRedirectEvent=yt.ConnectionMessageSentEvent=yt.ConnectionMessageReceivedEvent=yt.ConnectionEstablishErrorEvent=yt.ConnectionErrorEvent=yt.ConnectionClosedEvent=yt.ConnectionEstablishedEvent=yt.ConnectionStartEvent=yt.ConnectionEvent=yt.ServiceEvent=void 0;const r=dl();class i extends r.PlatformEvent{constructor(y,g,m=r.EventType.Info){super(y,m),this.privJsonResult=g}get jsonString(){return this.privJsonResult}}yt.ServiceEvent=i;class o extends r.PlatformEvent{constructor(y,g,m=r.EventType.Info){super(y,m),this.privConnectionId=g}get connectionId(){return this.privConnectionId}}yt.ConnectionEvent=o;class p extends o{constructor(y,g,m){super("ConnectionStartEvent",y),this.privUri=g,this.privHeaders=m}get uri(){return this.privUri}get headers(){return this.privHeaders}}yt.ConnectionStartEvent=p;class s extends o{constructor(y){super("ConnectionEstablishedEvent",y)}}yt.ConnectionEstablishedEvent=s;class f extends o{constructor(y,g,m){super("ConnectionClosedEvent",y,r.EventType.Debug),this.privReason=m,this.privStatusCode=g}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}yt.ConnectionClosedEvent=f;class a extends o{constructor(y,g,m){super("ConnectionErrorEvent",y,r.EventType.Debug),this.privMessage=g,this.privType=m}get message(){return this.privMessage}get type(){return this.privType}}yt.ConnectionErrorEvent=a;class n extends o{constructor(y,g,m){super("ConnectionEstablishErrorEvent",y,r.EventType.Error),this.privStatusCode=g,this.privReason=m}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}yt.ConnectionEstablishErrorEvent=n;class l extends o{constructor(y,g,m){super("ConnectionMessageReceivedEvent",y),this.privNetworkReceivedTime=g,this.privMessage=m}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}yt.ConnectionMessageReceivedEvent=l;class u extends o{constructor(y,g,m){super("ConnectionMessageSentEvent",y),this.privNetworkSentTime=g,this.privMessage=m}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}yt.ConnectionMessageSentEvent=u;class h extends o{constructor(y,g,m,C){super("ConnectionRedirectEvent",y,r.EventType.Info),this.privRedirectUrl=g,this.privOriginalUrl=m,this.privContext=C}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return yt.ConnectionRedirectEvent=h,yt}var Cd={},Zr={},t_;function zr(){if(t_)return Zr;t_=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.ObjectDisposedError=Zr.InvalidOperationError=Zr.ArgumentNullError=void 0;class r extends Error{constructor(s){super(s),this.name="ArgumentNull",this.message=s}}Zr.ArgumentNullError=r;class i extends Error{constructor(s){super(s),this.name="InvalidOperation",this.message=s}}Zr.InvalidOperationError=i;class o extends Error{constructor(s,f){super(f),this.name=s+"ObjectDisposed",this.message=f}}return Zr.ObjectDisposedError=o,Zr}var r_;function oD(){return r_||(r_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionMessage=r.MessageType=void 0;const i=zr(),o=Di();var p;(function(f){f[f.Text=0]="Text",f[f.Binary=1]="Binary"})(p=r.MessageType||(r.MessageType={}));class s{constructor(a,n,l,u){if(this.privBody=null,a===p.Text&&n&&typeof n!="string")throw new i.InvalidOperationError("Payload must be a string");if(a===p.Binary&&n&&!(n instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=n,this.privHeaders=l||{},this.privId=u||(0,o.createNoDashGuid)(),this.messageType){case p.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case p.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===p.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===p.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}r.ConnectionMessage=s}(Cd)),Cd}var Vs={},n_;function MN(){if(n_)return Vs;n_=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.ConnectionOpenResponse=void 0;let r=class{constructor(o,p){this.privStatusCode=o,this.privReason=p}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return Vs.ConnectionOpenResponse=r,Vs}var Ws={},i_;function DN(){if(i_)return Ws;i_=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.DeferralMap=void 0;let r=class{constructor(){this.privMap={}}add(o,p){this.privMap[o]=p}getId(o){return this.privMap[o]}complete(o,p){try{this.privMap[o].resolve(p)}catch(s){this.privMap[o].reject(s)}finally{this.privMap[o]=void 0}}};return Ws.DeferralMap=r,Ws}var ai={},o_;function sD(){if(o_)return ai;o_=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.SendingAgentContextMessageEvent=ai.DialogEvent=void 0;const r=dl();class i extends r.PlatformEvent{constructor(s,f=r.EventType.Info){super(s,f)}}ai.DialogEvent=i;class o extends i{constructor(s){super("SendingAgentContextMessageEvent"),this.privAgentConfig=s}get agentConfig(){return this.privAgentConfig}}return ai.SendingAgentContextMessageEvent=o,ai}var Gs={},Ks={},s_;function aD(){if(s_)return Ks;s_=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.EventSource=void 0;const r=zr(),i=Di();let o=class{constructor(s){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=s}onEvent(s){if(this.isDisposed())throw new r.ObjectDisposedError("EventSource");if(this.metadata)for(const f in this.metadata)f&&s.metadata&&(s.metadata[f]||(s.metadata[f]=this.metadata[f]));for(const f in this.privEventListeners)f&&this.privEventListeners[f]&&this.privEventListeners[f](s)}attach(s){const f=(0,i.createNoDashGuid)();return this.privEventListeners[f]=s,{detach:()=>(delete this.privEventListeners[f],Promise.resolve())}}attachListener(s){return this.attach(f=>s.onEvent(f))}attachConsoleListener(s){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(f=>s.onEvent(f)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return Ks.EventSource=o,Ks}var a_;function jN(){if(a_)return Gs;a_=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.Events=void 0;const r=zr(),i=aD();let o=class Xm{static setEventSource(s){if(!s)throw new r.ArgumentNullError("eventSource");Xm.privInstance=s}static get instance(){return Xm.privInstance}};return Gs.Events=o,o.privInstance=new i.EventSource,Gs}var bd={},c_;function kN(){return c_||(c_=1,Object.defineProperty(bd,"__esModule",{value:!0})),bd}var Rd={},u_;function NN(){return u_||(u_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionState=void 0,function(i){i[i.None=0]="None",i[i.Connected=1]="Connected",i[i.Connecting=2]="Connecting",i[i.Disconnected=3]="Disconnected"}(r.ConnectionState||(r.ConnectionState={}))}(Rd)),Rd}var _d={},l_;function qN(){return l_||(l_=1,Object.defineProperty(_d,"__esModule",{value:!0})),_d}var Ed={},f_;function zN(){return f_||(f_=1,Object.defineProperty(Ed,"__esModule",{value:!0})),Ed}var wd={},h_;function LN(){return h_||(h_=1,Object.defineProperty(wd,"__esModule",{value:!0})),wd}var Ad={},p_;function xN(){return p_||(p_=1,Object.defineProperty(Ad,"__esModule",{value:!0})),Ad}var Td={},d_;function BN(){return d_||(d_=1,Object.defineProperty(Td,"__esModule",{value:!0})),Td}var Pd={},v_;function UN(){return v_||(v_=1,Object.defineProperty(Pd,"__esModule",{value:!0})),Pd}var Od={},g_;function FN(){return g_||(g_=1,Object.defineProperty(Od,"__esModule",{value:!0})),Od}var Id={},y_;function HN(){return y_||(y_=1,Object.defineProperty(Id,"__esModule",{value:!0})),Id}var $s={},m_;function cD(){if(m_)return $s;m_=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.List=void 0;const r=zr();let i=class Oi{constructor(p){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],p)for(const s of p)this.privList.push(s)}get(p){return this.throwIfDisposed(),this.privList[p]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(p){this.throwIfDisposed(),this.insertAt(this.privList.length,p)}insertAt(p,s){this.throwIfDisposed(),p===0?this.privList.unshift(s):p===this.privList.length?this.privList.push(s):this.privList.splice(p,0,s),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(p){return this.throwIfDisposed(),this.remove(p,1)[0]}remove(p,s){this.throwIfDisposed();const f=this.privList.splice(p,s);return this.triggerSubscriptions(this.privRemoveSubscriptions),f}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(p){this.throwIfDisposed();const s=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[s]=p,{detach:()=>(delete this.privAddSubscriptions[s],Promise.resolve())}}onRemoved(p){this.throwIfDisposed();const s=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[s]=p,{detach:()=>(delete this.privRemoveSubscriptions[s],Promise.resolve())}}onDisposed(p){this.throwIfDisposed();const s=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[s]=p,{detach:()=>(delete this.privDisposedSubscriptions[s],Promise.resolve())}}join(p){return this.throwIfDisposed(),this.privList.join(p)}toArray(){const p=Array();return this.privList.forEach(s=>{p.push(s)}),p}any(p){return this.throwIfDisposed(),p?this.where(p).length()>0:this.length()>0}all(p){return this.throwIfDisposed(),this.where(p).length()===this.length()}forEach(p){this.throwIfDisposed();for(let s=0;s<this.length();s++)p(this.privList[s],s)}select(p){this.throwIfDisposed();const s=[];for(let f=0;f<this.privList.length;f++)s.push(p(this.privList[f],f));return new Oi(s)}where(p){this.throwIfDisposed();const s=new Oi;for(let f=0;f<this.privList.length;f++)p(this.privList[f],f)&&s.add(this.privList[f]);return s}orderBy(p){this.throwIfDisposed();const f=this.toArray().sort(p);return new Oi(f)}orderByDesc(p){return this.throwIfDisposed(),this.orderBy((s,f)=>p(f,s))}clone(){return this.throwIfDisposed(),new Oi(this.toArray())}concat(p){return this.throwIfDisposed(),new Oi(this.privList.concat(p.toArray()))}concatArray(p){return this.throwIfDisposed(),new Oi(this.privList.concat(p))}isDisposed(){return this.privList==null}dispose(p){this.isDisposed()||(this.privDisposeReason=p,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new r.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(p){if(p)for(const s in p)s&&p[s]()}};return $s.List=i,$s}var Md={},S_;function uD(){return S_||(S_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.marshalPromiseToCallbacks=r.Sink=r.Deferred=r.PromiseResultEventSource=r.PromiseResult=r.PromiseState=void 0;var i;(function(n){n[n.None=0]="None",n[n.Resolved=1]="Resolved",n[n.Rejected=2]="Rejected"})(i=r.PromiseState||(r.PromiseState={}));class o{constructor(l){this.throwIfError=()=>{if(this.isError)throw this.error},l.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}r.PromiseResult=o;class p{constructor(){this.setResult=l=>{this.privOnSetResult(l)},this.setError=l=>{this.privOnSetError(l)},this.on=(l,u)=>{this.privOnSetResult=l,this.privOnSetError=u}}}r.PromiseResultEventSource=p;class s{constructor(){this.resolve=l=>(this.privResolve(l),this),this.reject=l=>(this.privReject(l),this),this.privPromise=new Promise((l,u)=>{this.privResolve=l,this.privReject=u})}get promise(){return this.privPromise}}r.Deferred=s;class f{constructor(){this.privState=i.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new p,this.privPromiseResult=new o(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(l){if(this.privState!==i.None)throw new Error("'Cannot resolve a completed promise'");this.privState=i.Resolved,this.privPromiseResultEvents.setResult(l);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(l,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(l){if(this.privState!==i.None)throw new Error("'Cannot reject a completed promise'");this.privState=i.Rejected,this.privPromiseResultEvents.setError(l);for(const u of this.privErrorHandlers)this.executeErrorCallback(l,u);this.detachHandlers()}on(l,u){l==null&&(l=()=>{}),this.privState===i.None?(this.privSuccessHandlers.push(l),this.privErrorHandlers.push(u)):(this.privState===i.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,l,u):this.privState===i.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(l,u,h){try{u(l)}catch(d){this.executeErrorCallback(`'Unhandled callback error: ${d}'`,h)}}executeErrorCallback(l,u){if(u)try{u(l)}catch(h){throw new Error(`'Unhandled callback error: ${h}. InnerError: ${l}'`)}else throw new Error(`'Unhandled error: ${l}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}r.Sink=f;function a(n,l,u){n.then(h=>{try{l&&l(h)}catch(d){if(u)try{if(d instanceof Error){const y=d;u(y.name+": "+y.message)}else u(d)}catch{}}},h=>{if(u)try{if(h instanceof Error){const d=h;u(d.name+": "+d.message)}else u(h)}catch{}})}r.marshalPromiseToCallbacks=a}(Md)),Md}var Js={},C_;function lD(){if(C_)return Js;C_=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.Queue=void 0;const r=zr(),i=cD(),o=uD();var p;(function(f){f[f.Dequeue=0]="Dequeue",f[f.Peek=1]="Peek"})(p||(p={}));let s=class{constructor(a){this.privPromiseStore=new i.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=a||new i.List,this.privDetachables=[],this.privSubscribers=new i.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(a){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(a)))}enqueueFromPromise(a){this.throwIfDispose(),a.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const a=new o.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:p.Dequeue}),this.drain()),a.promise}peek(){this.throwIfDispose();const a=new o.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:p.Peek}),this.drain()),a.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(a,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const l=this.privSubscribers;if(l){for(;l.length()>0;)l.removeFirst().deferral.resolve(void 0);this.privSubscribers===l&&(this.privSubscribers=l)}for(const u of this.privDetachables)await u.detach();if(this.privPromiseStore.length()>0&&a){const u=[];return this.privPromiseStore.toArray().forEach(h=>{u.push(h)}),Promise.all(u).finally(()=>{this.privSubscribers=null,this.privList.forEach(h=>{a(h)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(a){await this.drainAndDispose(null,a)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const a=this.privSubscribers,n=this.privList;if(a&&n){for(;n.length()>0&&a.length()>0&&!this.privIsDisposing;){const l=a.removeFirst();if(l.type===p.Peek)l.deferral.resolve(n.first());else{const u=n.removeFirst();l.deferral.resolve(u)}}this.privSubscribers===a&&(this.privSubscribers=a),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new r.InvalidOperationError(this.privDisposeReason):new r.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new r.InvalidOperationError("Queue disposing")}};return Js.Queue=s,Js}var Qs={},b_;function VN(){if(b_)return Qs;b_=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.RawWebsocketMessage=void 0;const r=oD(),i=zr(),o=Di();let p=class{constructor(f,a,n){if(this.privPayload=null,!a)throw new i.ArgumentNullError("payload");if(f===r.MessageType.Binary&&Object.getPrototypeOf(a).constructor.name!=="ArrayBuffer")throw new i.InvalidOperationError("Payload must be ArrayBuffer");if(f===r.MessageType.Text&&typeof a!="string")throw new i.InvalidOperationError("Payload must be a string");this.privMessageType=f,this.privPayload=a,this.privId=n||(0,o.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.MessageType.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.MessageType.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return Qs.RawWebsocketMessage=p,Qs}var Ys={},R_;function WN(){if(R_)return Ys;R_=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.RiffPcmEncoder=void 0;let r=class{constructor(o,p){this.privActualSampleRate=o,this.privDesiredSampleRate=p}encode(o){const p=this.downSampleAudioFrame(o,this.privActualSampleRate,this.privDesiredSampleRate);if(!p)return null;const s=p.length*2,f=new ArrayBuffer(s),a=new DataView(f);return this.floatTo16BitPCM(a,0,p),f}setString(o,p,s){for(let f=0;f<s.length;f++)o.setUint8(p+f,s.charCodeAt(f))}floatTo16BitPCM(o,p,s){for(let f=0;f<s.length;f++,p+=2){const a=Math.max(-1,Math.min(1,s[f]));o.setInt16(p,a<0?a*32768:a*32767,!0)}}downSampleAudioFrame(o,p,s){if(!o)return null;if(s===p||s>p)return o;const f=p/s,a=Math.round(o.length/f),n=new Float32Array(a);let l=0,u=0;for(;u<a;){const h=Math.round((u+1)*f);let d=0,y=0;for(;l<h&&l<o.length;)d+=o[l++],y++;n[u++]=d/y}return n}};return Ys.RiffPcmEncoder=r,Ys}var Xs={},__;function GN(){if(__)return Xs;__=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.Stream=void 0;const r=zr(),i=Di(),o=lD();let p=class{constructor(f){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=f||(0,i.createNoDashGuid)(),this.privReaderQueue=new o.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(f){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(f)}catch{}}read(){if(this.privIsReadEnded)throw new r.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async f=>((f===void 0||f.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),f))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new o.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.InvalidOperationError("Stream closed")}};return Xs.Stream=p,Xs}var Dd={},E_;function uS(){return E_||(E_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,function(i){i[i.Success=0]="Success",i[i.Error=1]="Error"}(r.TranslationStatus||(r.TranslationStatus={}))}(Dd)),Dd}var Zs={},w_;function KN(){if(w_)return Zs;w_=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.ChunkedArrayBufferStream=void 0;const r=ze();let i=class extends r.Stream{constructor(p,s){super(s),this.privTargetChunkSize=Math.round(p),this.privNextBufferReadyBytes=0}writeStreamChunk(p){if(p.isEnd||this.privNextBufferReadyBytes===0&&p.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(p);return}let s=0;for(;s<p.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=p.timeReceived);const f=Math.min(p.buffer.byteLength-s,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(p.buffer.slice(s,f+s));a.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=f,s+=f,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Zs.ChunkedArrayBufferStream=i,Zs}var jd={},A_;function $N(){return A_||(A_=1,Object.defineProperty(jd,"__esModule",{value:!0})),jd}var ea={},T_;function JN(){if(T_)return ea;T_=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.Timeout=void 0;let r=class Nn{static load(){const o=new Map([[0,()=>{}]]),p=new Map,f="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),a=new Worker(f);return a.addEventListener("message",({data:u})=>{if(Nn.isCallNotification(u)){const{params:{timerId:h}}=u,d=o.get(h);if(typeof d=="number"){const y=p.get(d);if(y===void 0||y!==h)throw new Error("The timer is in an undefined state.")}else if(typeof d<"u")d(),o.delete(h);else throw new Error("The timer is in an undefined state.")}else if(Nn.isClearResponse(u)){const{id:h}=u,d=p.get(h);if(d===void 0)throw new Error("The timer is in an undefined state.");p.delete(h),o.delete(d)}else{const{error:{message:h}}=u;throw new Error(h)}}),{clearTimeout:u=>{const h=Math.random();p.set(h,u),o.set(u,h),a.postMessage({id:h,method:"clear",params:{timerId:u}})},setTimeout:(u,h)=>{const d=Math.random();return o.set(d,u),a.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:d}}),d}}}static loadWorkerTimers(){return()=>(Nn.workerTimers!==null||(Nn.workerTimers=Nn.load()),Nn.workerTimers)}static isCallNotification(o){return o.method!==void 0&&o.method==="call"}static isClearResponse(o){return o.error===null&&typeof o.id=="number"}};return ea.Timeout=r,r.workerTimers=null,r.clearTimeout=i=>r.timers().clearTimeout(i),r.setTimeout=(i,o)=>r.timers().setTimeout(i,o),r.timers=r.loadWorkerTimers(),ea}var Xe={},P_;function QN(){if(P_)return Xe;P_=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.OCSPCacheUpdateErrorEvent=Xe.OCSPResponseRetrievedEvent=Xe.OCSPCacheFetchErrorEvent=Xe.OCSPVerificationFailedEvent=Xe.OCSPCacheHitEvent=Xe.OCSPCacheEntryNeedsRefreshEvent=Xe.OCSPCacheEntryExpiredEvent=Xe.OCSPWSUpgradeStartedEvent=Xe.OCSPStapleReceivedEvent=Xe.OCSPCacheUpdateCompleteEvent=Xe.OCSPDiskCacheStoreEvent=Xe.OCSPMemoryCacheStoreEvent=Xe.OCSPCacheUpdateNeededEvent=Xe.OCSPDiskCacheHitEvent=Xe.OCSPCacheMissEvent=Xe.OCSPMemoryCacheHitEvent=Xe.OCSPEvent=void 0;const r=dl();class i extends r.PlatformEvent{constructor(A,w,O){super(A,w),this.privSignature=O}}Xe.OCSPEvent=i;class o extends i{constructor(A){super("OCSPMemoryCacheHitEvent",r.EventType.Debug,A)}}Xe.OCSPMemoryCacheHitEvent=o;class p extends i{constructor(A){super("OCSPCacheMissEvent",r.EventType.Debug,A)}}Xe.OCSPCacheMissEvent=p;class s extends i{constructor(A){super("OCSPDiskCacheHitEvent",r.EventType.Debug,A)}}Xe.OCSPDiskCacheHitEvent=s;class f extends i{constructor(A){super("OCSPCacheUpdateNeededEvent",r.EventType.Debug,A)}}Xe.OCSPCacheUpdateNeededEvent=f;class a extends i{constructor(A){super("OCSPMemoryCacheStoreEvent",r.EventType.Debug,A)}}Xe.OCSPMemoryCacheStoreEvent=a;class n extends i{constructor(A){super("OCSPDiskCacheStoreEvent",r.EventType.Debug,A)}}Xe.OCSPDiskCacheStoreEvent=n;class l extends i{constructor(A){super("OCSPCacheUpdateCompleteEvent",r.EventType.Debug,A)}}Xe.OCSPCacheUpdateCompleteEvent=l;class u extends i{constructor(){super("OCSPStapleReceivedEvent",r.EventType.Debug,"")}}Xe.OCSPStapleReceivedEvent=u;class h extends i{constructor(A){super("OCSPWSUpgradeStartedEvent",r.EventType.Debug,A)}}Xe.OCSPWSUpgradeStartedEvent=h;class d extends i{constructor(A,w){super("OCSPCacheEntryExpiredEvent",r.EventType.Debug,A),this.privExpireTime=w}}Xe.OCSPCacheEntryExpiredEvent=d;class y extends i{constructor(A,w,O){super("OCSPCacheEntryNeedsRefreshEvent",r.EventType.Debug,A),this.privExpireTime=O,this.privStartTime=w}}Xe.OCSPCacheEntryNeedsRefreshEvent=y;class g extends i{constructor(A,w,O){super("OCSPCacheHitEvent",r.EventType.Debug,A),this.privExpireTime=O,this.privExpireTimeString=new Date(O).toLocaleDateString(),this.privStartTime=w,this.privStartTimeString=new Date(w).toLocaleTimeString()}}Xe.OCSPCacheHitEvent=g;class m extends i{constructor(A,w){super("OCSPVerificationFailedEvent",r.EventType.Debug,A),this.privError=w}}Xe.OCSPVerificationFailedEvent=m;class C extends i{constructor(A,w){super("OCSPCacheFetchErrorEvent",r.EventType.Debug,A),this.privError=w}}Xe.OCSPCacheFetchErrorEvent=C;class _ extends i{constructor(A){super("OCSPResponseRetrievedEvent",r.EventType.Debug,A)}}Xe.OCSPResponseRetrievedEvent=_;class b extends i{constructor(A,w){super("OCSPCacheUpdateErrorEvent",r.EventType.Debug,A),this.privError=w}}return Xe.OCSPCacheUpdateErrorEvent=b,Xe}var ta={},O_;function YN(){if(O_)return ta;O_=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.BackgroundEvent=void 0;const r=ze();class i extends r.PlatformEvent{constructor(p){super("BackgroundEvent",r.EventType.Error),this.privError=p}get error(){return this.privError}}return ta.BackgroundEvent=i,ta}var I_;function ze(){return I_||(I_=1,function(r){var i=oi&&oi.__createBinding||(Object.create?function(s,f,a,n){n===void 0&&(n=a),Object.defineProperty(s,n,{enumerable:!0,get:function(){return f[a]}})}:function(s,f,a,n){n===void 0&&(n=a),s[n]=f[a]}),o=oi&&oi.__exportStar||function(s,f){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(f,a)&&i(f,s,a)};Object.defineProperty(r,"__esModule",{value:!0}),r.TranslationStatus=void 0,o(ON(),r),o(IN(),r),o(oD(),r),o(MN(),r),o(DN(),r),o(sD(),r),o(zr(),r),o(jN(),r),o(aD(),r),o(Di(),r),o(kN(),r),o(NN(),r),o(qN(),r),o(zN(),r),o(LN(),r),o(xN(),r),o(BN(),r),o(UN(),r),o(FN(),r),o(HN(),r),o(cD(),r),o(dl(),r),o(uD(),r),o(lD(),r),o(VN(),r),o(WN(),r),o(GN(),r);var p=uS();Object.defineProperty(r,"TranslationStatus",{enumerable:!0,get:function(){return p.TranslationStatus}}),o(KN(),r),o($N(),r),o(JN(),r),o(QN(),r),o(YN(),r)}(oi)),oi}var ra={},M_;function Gt(){if(M_)return ra;M_=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.HeaderNames=void 0;let r=class{};return ra.HeaderNames=r,r.AuthKey="Ocp-Apim-Subscription-Key",r.Authorization="Authorization",r.SpIDAuthKey="Apim-Subscription-Id",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp",ra}var na={},D_;function lS(){if(D_)return na;D_=1,Object.defineProperty(na,"__esModule",{value:!0}),na.AuthInfo=void 0;class r{constructor(o,p){this.privHeaderName=o,this.privToken=p}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return na.AuthInfo=r,na}var j_;function XN(){if(j_)return Ms;j_=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.CognitiveSubscriptionKeyAuthentication=void 0;const r=ze(),i=Gt(),o=lS();let p=class{constructor(f){if(!f)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(i.HeaderNames.AuthKey,f)}fetch(f){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(f){return Promise.resolve(this.privAuthInfo)}};return Ms.CognitiveSubscriptionKeyAuthentication=p,Ms}var ia={},k_;function ZN(){if(k_)return ia;k_=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.CognitiveTokenAuthentication=void 0;const r=ze(),i=lS(),o=Gt();let p=class Zm{constructor(f,a){if(!f)throw new r.ArgumentNullError("fetchCallback");if(!a)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=f,this.privFetchOnExpiryCallback=a}fetch(f){return this.privFetchCallback(f).then(a=>new i.AuthInfo(o.HeaderNames.Authorization,a===void 0?void 0:Zm.privTokenPrefix+a))}fetchOnExpiry(f){return this.privFetchOnExpiryCallback(f).then(a=>new i.AuthInfo(o.HeaderNames.Authorization,a===void 0?void 0:Zm.privTokenPrefix+a))}};return ia.CognitiveTokenAuthentication=p,p.privTokenPrefix="Bearer ",ia}var kd={},N_;function eq(){return N_||(N_=1,Object.defineProperty(kd,"__esModule",{value:!0})),kd}var Nd={},q_;function tq(){return q_||(q_=1,Object.defineProperty(Nd,"__esModule",{value:!0})),Nd}var oa={},ci={},wr={};const rq={},nq=Object.freeze(Object.defineProperty({__proto__:null,default:rq},Symbol.toStringTag,{value:"Module"})),Mi=tD(nq);var qd={},z_;function fD(){return z_||(z_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0;const i=ze();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return i.EventType}})}(qd)),qd}var sa={},L_;function Ve(){if(L_)return sa;L_=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.Contracts=void 0;let r=class Ii{static throwIfNullOrUndefined(o,p){if(o==null)throw new Error("throwIfNullOrUndefined:"+p)}static throwIfNull(o,p){if(o===null)throw new Error("throwIfNull:"+p)}static throwIfNullOrWhitespace(o,p){if(Ii.throwIfNullOrUndefined(o,p),(""+o).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+p)}static throwIfNullOrTooLong(o,p,s){if(Ii.throwIfNullOrUndefined(o,p),(""+o).length>s)throw new Error("throwIfNullOrTooLong:"+p+" (more than "+s.toString()+" characters)")}static throwIfNullOrTooShort(o,p,s){if(Ii.throwIfNullOrUndefined(o,p),(""+o).length<s)throw new Error("throwIfNullOrTooShort:"+p+" (less than "+s.toString()+" characters)")}static throwIfDisposed(o){if(o)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(o,p){if(Ii.throwIfNullOrUndefined(o,p),o.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+p);for(const s of o)Ii.throwIfNullOrWhitespace(s,p)}static throwIfFileDoesNotExist(o,p){Ii.throwIfNullOrWhitespace(o,p)}static throwIfNotUndefined(o,p){if(o!==void 0)throw new Error("throwIfNotUndefined:"+p)}};return sa.Contracts=r,sa}var x_;function iq(){if(x_)return wr;x_=1;var r=wr&&wr.__createBinding||(Object.create?function(n,l,u,h){h===void 0&&(h=u),Object.defineProperty(n,h,{enumerable:!0,get:function(){return l[u]}})}:function(n,l,u,h){h===void 0&&(h=u),n[h]=l[u]}),i=wr&&wr.__setModuleDefault||(Object.create?function(n,l){Object.defineProperty(n,"default",{enumerable:!0,value:l})}:function(n,l){n.default=l}),o=wr&&wr.__importStar||function(n){if(n&&n.__esModule)return n;var l={};if(n!=null)for(var u in n)u!=="default"&&Object.prototype.hasOwnProperty.call(n,u)&&r(l,n,u);return i(l,n),l};Object.defineProperty(wr,"__esModule",{value:!0}),wr.ConsoleLoggingListener=void 0;const p=o(Mi),s=fD(),f=Ve();let a=class{constructor(l=s.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=l}set logPath(l){f.Contracts.throwIfNullOrUndefined(p.openSync,`
File System access not available`),this.privLogPath=l}set enableConsoleOutput(l){this.privEnableConsoleOutput=l}onEvent(l){if(l.eventType>=this.privLogLevelFilter){const u=this.toString(l);if(this.logCallback&&this.logCallback(u),this.privLogPath&&p.writeFileSync(this.privLogPath,u+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(l.eventType){case s.LogLevel.Debug:console.debug(u);break;case s.LogLevel.Info:console.info(u);break;case s.LogLevel.Warning:console.warn(u);break;case s.LogLevel.Error:console.error(u);break;default:console.log(u);break}}}toString(l){const u=[`${l.eventTime}`,`${l.name}`],h=l;for(const d in h)if(d&&l.hasOwnProperty(d)&&d!=="eventTime"&&d!=="eventType"&&d!=="eventId"&&d!=="name"&&d!=="constructor"){const y=h[d];let g="<NULL>";y!=null&&(typeof y=="number"||typeof y=="string"?g=y.toString():g=JSON.stringify(y)),u.push(`${d}: ${g}`)}return u.join(" | ")}};return wr.ConsoleLoggingListener=a,wr}var zd={},B_;function oq(){return B_||(B_=1,Object.defineProperty(zd,"__esModule",{value:!0})),zd}var Ld={},xd={},U_;function ji(){return U_||(U_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AudioStreamFormatImpl=r.AudioStreamFormat=r.AudioFormatTag=void 0;var i;(function(s){s[s.PCM=1]="PCM",s[s.MuLaw=2]="MuLaw",s[s.Siren=3]="Siren",s[s.MP3=4]="MP3",s[s.SILKSkype=5]="SILKSkype",s[s.OGG_OPUS=6]="OGG_OPUS",s[s.WEBM_OPUS=7]="WEBM_OPUS",s[s.ALaw=8]="ALaw",s[s.FLAC=9]="FLAC",s[s.OPUS=10]="OPUS",s[s.AMR_WB=11]="AMR_WB",s[s.G722=12]="G722"})(i=r.AudioFormatTag||(r.AudioFormatTag={}));class o{static getDefaultInputFormat(){return p.getDefaultInputFormat()}static getWaveFormat(f,a,n,l){return new p(f,a,n,l)}static getWaveFormatPCM(f,a,n){return new p(f,a,n)}}r.AudioStreamFormat=o;class p extends o{constructor(f=16e3,a=16,n=1,l=i.PCM){super();let u=!0;switch(l){case i.PCM:this.formatTag=1;break;case i.ALaw:this.formatTag=6;break;case i.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=f,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const h=new DataView(this.privHeader);this.setString(h,0,"RIFF"),h.setUint32(4,0,!0),this.setString(h,8,"WAVEfmt "),h.setUint32(16,16,!0),h.setUint16(20,this.formatTag,!0),h.setUint16(22,this.channels,!0),h.setUint32(24,this.samplesPerSec,!0),h.setUint32(28,this.avgBytesPerSec,!0),h.setUint16(32,this.channels*(this.bitsPerSample/8),!0),h.setUint16(34,this.bitsPerSample,!0),this.setString(h,36,"data"),h.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new p}static getAudioContext(f){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return f!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:f}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(f,a,n){for(let l=0;l<n.length;l++)f.setUint8(a+l,n.charCodeAt(l))}}r.AudioStreamFormatImpl=p}(xd)),xd}var F_;function sq(){return F_||(F_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MicAudioSource=r.AudioWorkletSourceURLPropertyName=void 0;const i=De(),o=ze(),p=ji();r.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class s{constructor(a,n,l,u){this.privRecorder=a,this.deviceId=n,this.privStreams={},this.privOutputChunkSize=s.AUDIOFORMAT.avgBytesPerSec/10,this.privId=l||(0,o.createNoDashGuid)(),this.privEvents=new o.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(s.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new o.Deferred;try{this.createAudioContext()}catch(l){if(l instanceof Error){const u=l;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(l);return this.privInitializeDeferral.promise}const a=window.navigator;let n=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(n=(l,u,h)=>{a.mediaDevices.getUserMedia(l).then(u).catch(h)}),n){const l=()=>{this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):n({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const h=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(h),this.onEvent(new o.AudioSourceErrorEvent(this.privId,h))})};this.privContext.state==="suspended"?this.privContext.resume().then(l).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):l()}else{const l="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(l),this.onEvent(new o.AudioSourceErrorEvent(l,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(n=>(this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(n.readEnded(),delete this.privStreams[a],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>n.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const n=this.privStreams[a];n&&n.close()}this.onEvent(new o.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:s.AUDIOFORMAT.bitsPerSample,channelcount:s.AUDIOFORMAT.channels,connectivity:i.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:s.AUDIOFORMAT.samplesPerSec,type:i.type.Microphones}))}setProperty(a,n){if(a===r.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(n);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(n===void 0)return Promise.resolve(this.privMicrophoneLabel);const l=new o.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const h of u)if(h.deviceId===n){this.privMicrophoneLabel=h.label;break}l.resolve(this.privMicrophoneLabel)},()=>l.resolve(this.privMicrophoneLabel)),l.promise}async listen(a){await this.turnOn();const n=new o.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=n;try{this.privRecorder.record(this.privContext,this.privMediaStream,n)}catch(u){throw this.onEvent(new o.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return n}onEvent(a){this.privEvents.onEvent(a),o.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=p.AudioStreamFormatImpl.getAudioContext(s.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}r.MicAudioSource=s,s.AUDIOFORMAT=p.AudioStreamFormat.getDefaultInputFormat()}(Ld)),Ld}var aa={},H_;function aq(){if(H_)return aa;H_=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.FileAudioSource=void 0;const r=De(),i=ze(),o=ji();let p=class{constructor(f,a,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||(0,i.createNoDashGuid)(),this.privEvents=new i.EventSource,this.privSource=f,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=f.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const f=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new i.AudioSourceErrorEvent(f,"")),Promise.reject(f)}this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(f){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,f));const a=await this.upload(f);return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,f)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[f],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,f)),await this.turnOff()},id:()=>f,read:()=>a.read()})}detach(f){f&&this.privStreams[f]&&(this.privStreams[f].close(),delete this.privStreams[f],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,f)))}turnOff(){for(const f in this.privStreams)if(f){const a=this.privStreams[f];a&&!a.isClosed&&a.close()}return this.onEvent(new i.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(f=>Promise.resolve({bitspersample:f.bitsPerSample,channelcount:f.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:f.samplesPerSec,type:r.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),n=new i.Deferred,l=u=>{const h=new DataView(u),d=b=>String.fromCharCode(h.getUint8(b),h.getUint8(b+1),h.getUint8(b+2),h.getUint8(b+3));if(d(0)!=="RIFF"){n.reject("Invalid WAV header in file, RIFF was not found");return}if(d(8)!=="WAVE"||d(12)!=="fmt "){n.reject("Invalid WAV header in file, WAVEfmt was not found");return}const y=h.getInt32(16,!0),g=h.getUint16(22,!0),m=h.getUint32(24,!0),C=h.getUint16(34,!0);let _=36+Math.max(y-16,0);for(;d(_)!=="data";_+=2)if(_>4288){n.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=_+8,n.resolve(o.AudioStreamFormat.getWaveFormatPCM(m,C,g))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=h=>{const d=h.target.result;l(d)},u.readAsArrayBuffer(a)}else{const u=a;l(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return n.promise}async upload(f){const a=n=>{const l=`Error occurred while processing '${this.privFilename}'. ${n}`;throw this.onEvent(new i.AudioStreamNodeErrorEvent(this.privId,f,l)),new Error(l)};try{await this.turnOn();const n=await this.privAudioFormatPromise,l=new i.ChunkedArrayBufferStream(n.avgBytesPerSec/10,f);this.privStreams[f]=l;const u=this.privSource.slice(this.privHeaderEnd),h=d=>{l.isClosed||(l.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()}),l.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const d=new FileReader;d.onerror=y=>a(y.toString()),d.onload=y=>{const g=y.target.result;h(g)},d.readAsArrayBuffer(u)}else{const d=u;h(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return l}catch(n){a(n)}}onEvent(f){this.privEvents.onEvent(f),i.Events.instance.onEvent(f)}};return aa.FileAudioSource=p,aa}var ca={},V_;function cq(){if(V_)return ca;V_=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.PcmRecorder=void 0;const r=ze();class i{constructor(p){this.privStopInputOnRelease=p}record(p,s,f){const n=new r.RiffPcmEncoder(p.sampleRate,16e3),l=p.createMediaStreamSource(s),u=()=>{const d=(()=>{let y=0;try{return p.createScriptProcessor(y,1,1)}catch{y=2048;let m=p.sampleRate;for(;y<16384&&m>=32e3;)y<<=1,m>>=1;return p.createScriptProcessor(y,1,1)}})();d.onaudioprocess=y=>{const g=y.inputBuffer.getChannelData(0);if(f&&!f.isClosed){const m=n.encode(g);m&&f.writeStreamChunk({buffer:m,isEnd:!1,timeReceived:Date.now()})}},l.connect(d),d.connect(p.destination),this.privMediaResources={scriptProcessorNode:d,source:l,stream:s}},h=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(p.audioWorklet&&!h){if(!this.privSpeechProcessorScript){const d=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,y=new Blob([d],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(y)}p.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const d=new AudioWorkletNode(p,"speech-processor");d.port.onmessage=y=>{const g=y.data;if(f&&!f.isClosed){const m=n.encode(g);m&&f.writeStreamChunk({buffer:m,isEnd:!1,timeReceived:Date.now()})}},l.connect(d),d.connect(p.destination),this.privMediaResources={scriptProcessorNode:d,source:l,stream:s}}).catch(()=>{u()})}else try{u()}catch(d){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${d}`)}}releaseMediaResources(p){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(p.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(s=>s.stop()),this.privMediaResources.source=null))}setWorkletUrl(p){this.privSpeechProcessorScript=p}}return ca.PcmRecorder=i,ca}var ua={},or={},W_;function hD(){if(W_)return or;W_=1;var r=or&&or.__createBinding||(Object.create?function(y,g,m,C){C===void 0&&(C=m),Object.defineProperty(y,C,{enumerable:!0,get:function(){return g[m]}})}:function(y,g,m,C){C===void 0&&(C=m),y[C]=g[m]}),i=or&&or.__setModuleDefault||(Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g}),o=or&&or.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&r(g,y,m);return i(g,y),g},p=or&&or.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(or,"__esModule",{value:!0}),or.WebsocketMessageAdapter=void 0;const s=o(Mi),f=o(Mi),a=p(Mi),n=p(Mi),l=p(Mi),u=Gt(),h=ze();let d=class eS{constructor(g,m,C,_,b,R){if(!g)throw new h.ArgumentNullError("uri");if(!C)throw new h.ArgumentNullError("messageFormatter");this.proxyInfo=_,this.privConnectionEvents=new h.EventSource,this.privConnectionId=m,this.privMessageFormatter=C,this.privConnectionState=h.ConnectionState.None,this.privUri=g,this.privHeaders=b,this.privEnableCompression=R,this.privHeaders[u.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===h.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new h.Deferred,this.privCertificateValidatedDeferral=new h.Deferred,this.privConnectionState=h.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!eS.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let m=new URL(this.privUri).protocol;m?.toLocaleLowerCase()==="wss:"?m="https:":m?.toLocaleLowerCase()==="ws:"&&(m="http:");const C={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:m.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),C.agent=this.getAgent(),C.agent.protocol=m,this.privWebsocketClient=new l.default(this.privUri,C),this.privWebsocketClient.on("redirect",_=>{const b=new h.ConnectionRedirectEvent(this.privConnectionId,_,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${_}'`);h.Events.instance.onEvent(b)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.Queue,this.privDisconnectDeferral=new h.Deferred,this.privSendMessageQueue=new h.Queue,this.processSendQueue().catch(g=>{h.Events.instance.onEvent(new h.BackgroundEvent(g))})}catch(g){return this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(500,g)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new h.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=h.ConnectionState.Connected,this.onEvent(new h.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(200,""))},g=>{this.privConnectionEstablishDeferral.reject(g)})},this.privWebsocketClient.onerror=g=>{this.onEvent(new h.ConnectionErrorEvent(this.privConnectionId,g.message,g.type)),this.privLastErrorReceived=g.message},this.privWebsocketClient.onclose=g=>{this.privConnectionState===h.ConnectionState.Connecting?(this.privConnectionState=h.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(g.code,g.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=h.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new h.ConnectionClosedEvent(this.privConnectionId,g.code,g.reason))),this.onClose(g.code,g.reason).catch(m=>{h.Events.instance.onEvent(new h.BackgroundEvent(m))})},this.privWebsocketClient.onmessage=g=>{const m=new Date().toISOString();if(this.privConnectionState===h.ConnectionState.Connected){const C=new h.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(C.promise),g.data instanceof ArrayBuffer){const _=new h.RawWebsocketMessage(h.MessageType.Binary,g.data);this.privMessageFormatter.toConnectionMessage(_).then(b=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,m,b)),C.resolve(b)},b=>{C.reject(`Invalid binary message format. Error: ${b}`)})}else{const _=new h.RawWebsocketMessage(h.MessageType.Text,g.data);this.privMessageFormatter.toConnectionMessage(_).then(b=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,m,b)),C.resolve(b)},b=>{C.reject(`Invalid text message format. Error: ${b}`)})}}},this.privConnectionEstablishDeferral.promise}send(g){if(this.privConnectionState!==h.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${h.ConnectionState[this.privConnectionState]} state`);const m=new h.Deferred,C=new h.Deferred;return this.privSendMessageQueue.enqueueFromPromise(C.promise),this.privMessageFormatter.fromConnectionMessage(g).then(_=>{C.resolve({Message:g,RawWebsocketMessage:_,sendStatusDeferral:m})},_=>{C.reject(`Error formatting the message. ${_}`)}),m.promise}read(){return this.privConnectionState!==h.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(g){if(this.privWebsocketClient)this.privConnectionState!==h.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,g||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(g){try{if(!g)return Promise.resolve();if(this.onEvent(new h.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),g.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(g.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+g.Message.id+" "+new Error().stack);return Promise.resolve()}catch(m){return Promise.reject(`websocket send error: ${m}`)}}async onClose(g,m){const C=`Connection closed. ${g}: ${m}`;this.privConnectionState=h.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},C),await this.privSendMessageQueue.drainAndDispose(_=>{_.sendStatusDeferral.reject(C)},C)}async processSendQueue(){for(;;){const m=await this.privSendMessageQueue.dequeue();if(!m)return;try{await this.sendRawMessage(m),m.sendStatusDeferral.resolve()}catch(C){m.sendStatusDeferral.reject(C)}}}onEvent(g){this.privConnectionEvents.onEvent(g),h.Events.instance.onEvent(g)}getAgent(){const g=new a.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(g.proxyInfo=this.proxyInfo),g}static GetProxyAgent(g){const m={host:g.HostName,port:g.Port};return g.UserName?m.headers={"Proxy-Authentication":"Basic "+new Buffer(`${g.UserName}:${g.Password===void 0?"":g.Password}`).toString("base64")}:m.headers={},m.headers.requestOCSP="true",new n.default(m)}createConnection(g,m){let C;if(m={...m,requestOCSP:!0,servername:m.host},this.proxyInfo){const b=eS.GetProxyAgent(this.proxyInfo);C=new Promise((R,A)=>{b.callback(g,m,(w,O)=>{w?A(w):R(O)})})}else m.secureEndpoint?C=Promise.resolve(f.connect(m)):C=Promise.resolve(s.connect(m));return C}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return or.WebsocketMessageAdapter=d,d.forceNpmWebSocket=!1,or}var G_;function uq(){if(G_)return ua;G_=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.WebsocketConnection=void 0;const r=ze(),i=hD();let o=class{constructor(s,f,a,n,l,u=!1,h){if(this.privIsDisposed=!1,!s)throw new r.ArgumentNullError("uri");if(!n)throw new r.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;let d="",y=0;if(f){for(const g in f)if(g){d+=y===0&&s.indexOf("?")===-1?"?":"&";const m=encodeURIComponent(g);d+=m;let C=f[g];C&&(C=encodeURIComponent(C),d+=`=${C}`),y++}}if(a){for(const g in a)if(g){d+=y===0&&s.indexOf("?")===-1?"?":"&";const m=encodeURIComponent(a[g]);d+=`${g}=${m}`,y++}}this.privUri=s+d,this.privId=h||(0,r.createNoDashGuid)(),this.privConnectionMessageAdapter=new i.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,l,a,u)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(s){return this.privConnectionMessageAdapter.send(s)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return ua.WebsocketConnection=o,ua}var la={},K_;function lq(){if(K_)return la;K_=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ReplayableAudioNode=void 0;let r=class{constructor(p,s){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=p,this.privBytesPerSecond=s}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const p=this.privReplayOffset-this.privBufferStartOffset;let s=Math.round(p*this.privBytesPerSecond*1e-7);s%2!==0&&s++;let f=0;for(;f<this.privBuffers.length&&s>=this.privBuffers[f].chunk.buffer.byteLength;)s-=this.privBuffers[f++].chunk.buffer.byteLength;if(f<this.privBuffers.length){const a=this.privBuffers[f].chunk.buffer.slice(s);return this.privReplayOffset+=a.byteLength/this.privBytesPerSecond*1e7,f===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:a,isEnd:!1,timeReceived:this.privBuffers[f].chunk.timeReceived})}}return this.privAudioNode.read().then(p=>(p&&p.buffer&&this.privBuffers&&(this.privBuffers.push(new i(p,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=p.buffer.byteLength),p))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(p){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=p;const s=p-this.privBufferStartOffset;let f=Math.round(s*this.privBytesPerSecond*1e-7),a=0;for(;a<this.privBuffers.length&&f>=this.privBuffers[a].chunk.buffer.byteLength;)f-=this.privBuffers[a++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(p-f/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(a)}findTimeAtOffset(p){if(p<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const s of this.privBuffers){const f=s.byteOffset/this.privBytesPerSecond*1e7,a=f+s.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(p>=f&&p<=a)return s.chunk.timeReceived}return 0}};la.ReplayableAudioNode=r;class i{constructor(p,s,f){this.chunk=p,this.serial=s,this.byteOffset=f}}return la}var fa={},Bd={},en={},Ar={},$_;function pD(){if($_)return Ar;$_=1;var r=Ar&&Ar.__createBinding||(Object.create?function(a,n,l,u){u===void 0&&(u=l),Object.defineProperty(a,u,{enumerable:!0,get:function(){return n[l]}})}:function(a,n,l,u){u===void 0&&(u=l),a[u]=n[l]}),i=Ar&&Ar.__setModuleDefault||(Object.create?function(a,n){Object.defineProperty(a,"default",{enumerable:!0,value:n})}:function(a,n){a.default=n}),o=Ar&&Ar.__importStar||function(a){if(a&&a.__esModule)return a;var n={};if(a!=null)for(var l in a)l!=="default"&&Object.prototype.hasOwnProperty.call(a,l)&&r(n,a,l);return i(n,a),n};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.AudioFileWriter=void 0;const p=o(Mi),s=Ve();let f=class{constructor(n){s.Contracts.throwIfNullOrUndefined(p.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=p.openSync(n,"w")}set format(n){s.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=n;let l=0;this.privAudioFormat.hasHeader&&(l=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=p.createWriteStream("",{fd:this.privFd,start:l,autoClose:!1}))}write(n){s.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(n.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),p.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),p.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return Ar.AudioFileWriter=f,Ar}var sr={},J_;function dD(){if(J_)return sr;J_=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.PullAudioInputStreamImpl=sr.PullAudioInputStream=sr.PushAudioInputStreamImpl=sr.PushAudioInputStream=sr.AudioInputStream=void 0;const r=De(),i=ze(),o=Di(),p=Ae(),s=ji();let f=class{constructor(){}static createPushStream(d){return a.create(d)}static createPullStream(d,y){return l.create(d,y)}};sr.AudioInputStream=f;class a extends f{static create(d){return new n(d)}}sr.PushAudioInputStream=a;class n extends a{constructor(d){super(),d===void 0?this.privFormat=s.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=d,this.privEvents=new i.EventSource,this.privId=(0,o.createNoDashGuid)(),this.privStream=new i.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(d){this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(d){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,d)),await this.turnOn();const y=this.privStream;return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,d)),{detach:async()=>(this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,d)),this.turnOff()),id:()=>d,read:()=>y.read()}}detach(d){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,d))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(d){this.privEvents.onEvent(d),i.Events.instance.onEvent(d)}toBuffer(d){const y=Buffer.alloc(d.byteLength),g=new Uint8Array(d);for(let m=0;m<y.length;++m)y[m]=g[m];return y}}sr.PushAudioInputStreamImpl=n;class l extends f{constructor(){super()}static create(d,y){return new u(d,y)}}sr.PullAudioInputStream=l;class u extends l{constructor(d,y){super(),y===void 0?this.privFormat=p.AudioStreamFormat.getDefaultInputFormat():this.privFormat=y,this.privEvents=new i.EventSource,this.privId=(0,o.createNoDashGuid)(),this.privCallback=d,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(d){return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,d)),await this.turnOn(),this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,d)),{detach:()=>(this.privCallback.close(),this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,d)),this.turnOff()),id:()=>d,read:()=>{let y=0,g;for(;y<this.privBufferSize;){const m=new ArrayBuffer(this.privBufferSize-y),C=this.privCallback.read(m);if(g===void 0?g=m:new Int8Array(g).set(new Int8Array(m),y),C===0)break;y+=C}return Promise.resolve({buffer:g.slice(0,y),isEnd:this.privIsClosed||y===0,timeReceived:Date.now()})}}}detach(d){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,d))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(d){this.privEvents.onEvent(d),i.Events.instance.onEvent(d)}}return sr.PullAudioInputStreamImpl=u,sr}var ar={},ha={},Ud={},Q_;function vD(){return Q_||(Q_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisOutputFormat=void 0,function(i){i[i.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",i[i.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",i[i.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",i[i.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",i[i.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",i[i.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",i[i.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",i[i.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",i[i.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",i[i.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",i[i.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",i[i.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",i[i.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",i[i.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",i[i.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",i[i.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",i[i.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",i[i.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",i[i.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",i[i.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",i[i.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",i[i.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",i[i.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",i[i.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",i[i.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",i[i.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",i[i.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",i[i.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",i[i.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",i[i.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",i[i.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",i[i.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",i[i.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",i[i.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",i[i.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",i[i.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",i[i.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",i[i.AmrWb16000Hz=37]="AmrWb16000Hz",i[i.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(r.SpeechSynthesisOutputFormat||(r.SpeechSynthesisOutputFormat={}))}(Ud)),Ud}var Y_;function vl(){if(Y_)return ha;Y_=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.AudioOutputFormatImpl=void 0;const r=vD(),i=ji();class o extends i.AudioStreamFormatImpl{constructor(s,f,a,n,l,u,h,d,y){super(a,u,f,s),this.formatTag=s,this.avgBytesPerSec=n,this.blockAlign=l,this.priAudioFormatString=h,this.priRequestAudioFormatString=d,this.priHasHeader=y}static fromSpeechSynthesisOutputFormat(s){return s===void 0?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[s])}static fromSpeechSynthesisOutputFormatString(s){switch(s){case"raw-8khz-8bit-mono-mulaw":return new o(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,s,s,!1);case"riff-16khz-16kbps-mono-siren":return new o(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,s,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,s,s,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,16e3,4096,2,16,s,s,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,16e3,16384,2,16,s,s,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,16e3,8192,2,16,s,s,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,24e3,6144,2,16,s,s,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,24e3,12288,2,16,s,s,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,24e3,20480,2,16,s,s,!1);case"raw-16khz-16bit-mono-truesilk":return new o(i.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,s,s,!1);case"riff-8khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,s,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,s,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,s,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,s,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,s,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,s,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(i.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,s,s,!1);case"ogg-24khz-16bit-mono-opus":return new o(i.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,s,s,!1);case"raw-48khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,s,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,s,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,48e3,12288,2,16,s,s,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(i.AudioFormatTag.MP3,1,48e3,24576,2,16,s,s,!1);case"ogg-48khz-16bit-mono-opus":return new o(i.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,s,s,!1);case"webm-16khz-16bit-mono-opus":return new o(i.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,s,s,!1);case"webm-24khz-16bit-mono-opus":return new o(i.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,s,s,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new o(i.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,s,s,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new o(i.AudioFormatTag.OPUS,1,16e3,4e3,2,16,s,s,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new o(i.AudioFormatTag.OPUS,1,24e3,6e3,2,16,s,s,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new o(i.AudioFormatTag.OPUS,1,24e3,3e3,2,16,s,s,!1);case"audio-24khz-16bit-mono-flac":return new o(i.AudioFormatTag.FLAC,1,24e3,24e3,2,16,s,s,!1);case"audio-48khz-16bit-mono-flac":return new o(i.AudioFormatTag.FLAC,1,48e3,3e4,2,16,s,s,!1);case"raw-24khz-16bit-mono-truesilk":return new o(i.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,s,s,!1);case"raw-8khz-8bit-mono-alaw":return new o(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,s,s,!1);case"riff-8khz-8bit-mono-alaw":return new o(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,s,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,22050,44100,2,16,s,s,!1);case"riff-22050hz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,22050,44100,2,16,s,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,44100,88200,2,16,s,s,!1);case"riff-44100hz-16bit-mono-pcm":return new o(i.AudioFormatTag.PCM,1,44100,88200,2,16,s,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new o(i.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,s,s,!1);case"g722-16khz-64kbps":return new o(i.AudioFormatTag.G722,1,16e3,8e3,2,16,s,s,!1);case"riff-16khz-16bit-mono-pcm":default:return new o(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(s){if(this.priHasHeader){const f=new DataView(this.privHeader);f.setUint32(4,s+this.privHeader.byteLength-8,!0),f.setUint32(40,s,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(s){if(!this.hasHeader)return s;this.updateHeader(s.byteLength);const f=new Uint8Array(s.byteLength+this.header.byteLength);return f.set(new Uint8Array(this.header),0),f.set(new Uint8Array(s),this.header.byteLength),f.buffer}}return ha.AudioOutputFormatImpl=o,o.SpeechSynthesisOutputFormatToString={[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[r.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},ha}var X_;function wo(){if(X_)return ar;X_=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PushAudioOutputStreamImpl=ar.PushAudioOutputStream=ar.PullAudioOutputStreamImpl=ar.PullAudioOutputStream=ar.AudioOutputStream=void 0;const r=ze(),i=Ve(),o=vl();let p=class{constructor(){}static createPullStream(){return s.create()}};ar.AudioOutputStream=p;class s extends p{static create(){return new f}}ar.PullAudioOutputStream=s;class f extends s{constructor(){super(),this.privId=(0,r.createNoDashGuid)(),this.privStream=new r.Stream}set format(u){u==null&&(this.privFormat=o.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=u}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(u){const h=new Int8Array(u);let d=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>u.byteLength)return h.set(this.privLastChunkView.slice(0,u.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(u.byteLength),Promise.resolve(u.byteLength);h.set(this.privLastChunkView),d=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;d<u.byteLength&&!this.privStream.isReadEnded;){const y=await this.privStream.read();if(y!==void 0&&!y.isEnd){let g;y.buffer.byteLength>u.byteLength-d?(g=y.buffer.slice(0,u.byteLength-d),this.privLastChunkView=new Int8Array(y.buffer.slice(u.byteLength-d))):g=y.buffer,h.set(new Int8Array(g),d),d+=g.byteLength}else this.privStream.readEnded()}return d}write(u){i.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:u,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ar.PullAudioOutputStreamImpl=f;class a extends p{constructor(){super()}static create(u){return new n(u)}}ar.PushAudioOutputStream=a;class n extends a{constructor(u){super(),this.privId=(0,r.createNoDashGuid)(),this.privCallback=u}set format(u){}write(u){this.privCallback.write&&this.privCallback.write(u)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return ar.PushAudioOutputStreamImpl=n,ar}var Z_;function yD(){if(Z_)return en;Z_=1,Object.defineProperty(en,"__esModule",{value:!0}),en.AudioOutputConfigImpl=en.AudioConfigImpl=en.AudioConfig=void 0;const r=Mt(),i=Ve(),o=Ae(),p=pD(),s=dD(),f=wo();let a=class gD{static fromDefaultMicrophoneInput(){const h=new r.PcmRecorder(!0);return new n(new r.MicAudioSource(h))}static fromMicrophoneInput(h){const d=new r.PcmRecorder(!0);return new n(new r.MicAudioSource(d,h))}static fromWavFileInput(h,d="unnamedBuffer.wav"){return new n(new r.FileAudioSource(h,d))}static fromStreamInput(h){if(h instanceof o.PullAudioInputStreamCallback)return new n(new s.PullAudioInputStreamImpl(h));if(h instanceof o.AudioInputStream)return new n(h);if(typeof MediaStream<"u"&&h instanceof MediaStream){const d=new r.PcmRecorder(!1);return new n(new r.MicAudioSource(d,null,null,h))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new l(new o.SpeakerAudioDestination)}static fromSpeakerOutput(h){if(h===void 0)return gD.fromDefaultSpeakerOutput();if(h instanceof o.SpeakerAudioDestination)return new l(h);throw new Error("Not Supported Type")}static fromAudioFileOutput(h){return new l(new p.AudioFileWriter(h))}static fromStreamOutput(h){if(h instanceof o.PushAudioOutputStreamCallback)return new l(new f.PushAudioOutputStreamImpl(h));if(h instanceof o.PushAudioOutputStream)return new l(h);if(h instanceof o.PullAudioOutputStream)return new l(h);throw new Error("Not Supported Type")}};en.AudioConfig=a;class n extends a{constructor(h){super(),this.privSource=h}get format(){return this.privSource.format}close(h,d){this.privSource.turnOff().then(()=>{h&&h()},y=>{d&&d(y)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(h){return this.privSource.attach(h)}detach(h){return this.privSource.detach(h)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(h,d){if(i.Contracts.throwIfNull(d,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(h,d);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(h,d){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(h,d);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}en.AudioConfigImpl=n;class l extends a{constructor(h){super(),this.privDestination=h}set format(h){this.privDestination.format=h}write(h){this.privDestination.write(h)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return en.AudioOutputConfigImpl=l,en}var Fd={},e1;function fq(){return e1||(e1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationReason=void 0,function(i){i[i.Error=0]="Error",i[i.EndOfStream=1]="EndOfStream"}(r.CancellationReason||(r.CancellationReason={}))}(Fd)),Fd}var pa={},t1;function hq(){if(t1)return pa;t1=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.PullAudioInputStreamCallback=void 0;let r=class{};return pa.PullAudioInputStreamCallback=r,pa}var da={},r1;function pq(){if(r1)return da;r1=1,Object.defineProperty(da,"__esModule",{value:!0}),da.PushAudioOutputStreamCallback=void 0;let r=class{};return da.PushAudioOutputStreamCallback=r,da}var va={},n1;function dq(){if(n1)return va;n1=1,Object.defineProperty(va,"__esModule",{value:!0}),va.KeywordRecognitionModel=void 0;const r=Ve();let i=class{constructor(){this.privDisposed=!1}static fromFile(p){throw r.Contracts.throwIfFileDoesNotExist(p,"fileName"),new Error("Not yet implemented.")}static fromStream(p){throw r.Contracts.throwIfNull(p,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return va.KeywordRecognitionModel=i,va}var ga={},i1;function vq(){if(i1)return ga;i1=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.SessionEventArgs=void 0;let r=class{constructor(o){this.privSessionId=o}get sessionId(){return this.privSessionId}};return ga.SessionEventArgs=r,ga}var ya={},o1;function gq(){if(o1)return ya;o1=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.RecognitionEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{constructor(p,s){super(s),this.privOffset=p}get offset(){return this.privOffset}};return ya.RecognitionEventArgs=i,ya}var Hd={},s1;function yq(){return s1||(s1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OutputFormat=void 0,function(i){i[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed"}(r.OutputFormat||(r.OutputFormat={}))}(Hd)),Hd}var ma={},a1;function mq(){if(a1)return ma;a1=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.IntentRecognitionEventArgs=void 0;const r=Ae();let i=class extends r.RecognitionEventArgs{constructor(p,s,f){super(s,f),this.privResult=p}get result(){return this.privResult}};return ma.IntentRecognitionEventArgs=i,ma}var Sa={},c1;function Sq(){if(c1)return Sa;c1=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.RecognitionResult=void 0;let r=class{constructor(o,p,s,f,a,n,l,u,h,d){this.privResultId=o,this.privReason=p,this.privText=s,this.privDuration=f,this.privOffset=a,this.privLanguage=n,this.privLanguageDetectionConfidence=l,this.privErrorDetails=u,this.privJson=h,this.privProperties=d}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Sa.RecognitionResult=r,Sa}var Ca={},u1;function Cq(){if(u1)return Ca;u1=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.SpeechRecognitionResult=void 0;const r=Ae();let i=class extends r.RecognitionResult{constructor(p,s,f,a,n,l,u,h,d,y,g){super(p,s,f,a,n,l,u,d,y,g),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Ca.SpeechRecognitionResult=i,Ca}var ba={},l1;function bq(){if(l1)return ba;l1=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.IntentRecognitionResult=void 0;const r=Ae();let i=class extends r.SpeechRecognitionResult{constructor(p,s,f,a,n,l,u,h,d,y,g){super(s,f,a,n,l,u,h,void 0,d,y,g),this.privIntentId=p}get intentId(){return this.privIntentId}};return ba.IntentRecognitionResult=i,ba}var ui={},f1;function Rq(){if(f1)return ui;f1=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.LanguageUnderstandingModelImpl=ui.LanguageUnderstandingModel=void 0;const r=Ve();let i=class{constructor(){}static fromEndpoint(s){r.Contracts.throwIfNull(s,"uri"),r.Contracts.throwIfNullOrWhitespace(s.hostname,"uri");const f=new o,a=s.host.indexOf(".");if(a===-1)throw new Error("Could not determine region from endpoint");f.region=s.host.substr(0,a);const n=s.pathname.lastIndexOf("/")+1;if(n===-1)throw new Error("Could not determine appId from endpoint");if(f.appId=s.pathname.substr(n),f.subscriptionKey=s.searchParams.get("subscription-key"),f.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return f}static fromAppId(s){r.Contracts.throwIfNullOrWhitespace(s,"appId");const f=new o;return f.appId=s,f}static fromSubscription(s,f,a){r.Contracts.throwIfNullOrWhitespace(s,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(f,"appId"),r.Contracts.throwIfNullOrWhitespace(a,"region");const n=new o;return n.appId=f,n.region=a,n.subscriptionKey=s,n}};ui.LanguageUnderstandingModel=i;class o extends i{}return ui.LanguageUnderstandingModelImpl=o,ui}var tn={},h1;function _q(){if(h1)return tn;h1=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.MeetingTranscriptionEventArgs=tn.ConversationTranscriptionEventArgs=tn.SpeechRecognitionEventArgs=void 0;const r=Ae();let i=class extends r.RecognitionEventArgs{constructor(f,a,n){super(a,n),this.privResult=f}get result(){return this.privResult}};tn.SpeechRecognitionEventArgs=i;class o extends r.RecognitionEventArgs{constructor(f,a,n){super(a,n),this.privResult=f}get result(){return this.privResult}}tn.ConversationTranscriptionEventArgs=o;class p extends i{}return tn.MeetingTranscriptionEventArgs=p,tn}var Ra={},_a={},p1;function gl(){if(p1)return _a;p1=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.CancellationEventArgsBase=void 0;const r=Ae();let i=class extends r.RecognitionEventArgs{constructor(p,s,f,a,n){super(a,n),this.privReason=p,this.privErrorDetails=s,this.privErrorCode=f}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return _a.CancellationEventArgsBase=i,_a}var d1;function Eq(){if(d1)return Ra;d1=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.SpeechRecognitionCanceledEventArgs=void 0;const r=gl();let i=class extends r.CancellationEventArgsBase{};return Ra.SpeechRecognitionCanceledEventArgs=i,Ra}var Ea={},v1;function wq(){if(v1)return Ea;v1=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.TranslationRecognitionEventArgs=void 0;const r=Ae();let i=class extends r.RecognitionEventArgs{constructor(p,s,f){super(s,f),this.privResult=p}get result(){return this.privResult}};return Ea.TranslationRecognitionEventArgs=i,Ea}var wa={},g1;function Aq(){if(g1)return wa;g1=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.TranslationSynthesisEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{constructor(p,s){super(s),this.privResult=p}get result(){return this.privResult}};return wa.TranslationSynthesisEventArgs=i,wa}var Aa={},y1;function SD(){if(y1)return Aa;y1=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.TranslationRecognitionResult=void 0;const r=Ae();let i=class mD extends r.SpeechRecognitionResult{constructor(p,s,f,a,n,l,u,h,d,y,g){super(s,f,a,n,l,u,h,void 0,d,y,g),this.privTranslations=p}static fromSpeechRecognitionResult(p){return new mD(void 0,p.resultId,p.reason,p.text,p.duration,p.offset,p.language,p.languageDetectionConfidence,p.errorDetails,p.json,p.properties)}get translations(){return this.privTranslations}};return Aa.TranslationRecognitionResult=i,Aa}var Ta={},m1;function Tq(){if(m1)return Ta;m1=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.TranslationSynthesisResult=void 0;let r=class{constructor(o,p){this.privReason=o,this.privAudio=p}get audio(){return this.privAudio}get reason(){return this.privReason}};return Ta.TranslationSynthesisResult=r,Ta}var Vd={},S1;function Pq(){return S1||(S1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultReason=void 0,function(i){i[i.NoMatch=0]="NoMatch",i[i.Canceled=1]="Canceled",i[i.RecognizingSpeech=2]="RecognizingSpeech",i[i.RecognizedSpeech=3]="RecognizedSpeech",i[i.RecognizedKeyword=4]="RecognizedKeyword",i[i.RecognizingIntent=5]="RecognizingIntent",i[i.RecognizedIntent=6]="RecognizedIntent",i[i.TranslatingSpeech=7]="TranslatingSpeech",i[i.TranslatedSpeech=8]="TranslatedSpeech",i[i.SynthesizingAudio=9]="SynthesizingAudio",i[i.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",i[i.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",i[i.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",i[i.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",i[i.RecognizedSpeakers=14]="RecognizedSpeakers",i[i.RecognizedSpeaker=15]="RecognizedSpeaker",i[i.ResetVoiceProfile=16]="ResetVoiceProfile",i[i.DeletedVoiceProfile=17]="DeletedVoiceProfile",i[i.VoicesListRetrieved=18]="VoicesListRetrieved",i[i.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",i[i.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",i[i.TranslatedInstantMessage=21]="TranslatedInstantMessage",i[i.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(r.ResultReason||(r.ResultReason={}))}(Vd)),Vd}var li={},C1;function Oq(){if(C1)return li;C1=1,Object.defineProperty(li,"__esModule",{value:!0}),li.SpeechConfigImpl=li.SpeechConfig=void 0;const r=De(),i=Ve(),o=Ae();let p=class{constructor(){}static fromSubscription(a,n){i.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(n,"region");const l=new s;return l.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,n),l.setProperty(o.PropertyId.SpeechServiceConnection_Key,a),l}static fromEndpoint(a,n){i.Contracts.throwIfNull(a,"endpoint");const l=typeof n=="string"&&n.trim().length>0,u=typeof n=="object"&&n!==null&&typeof n.getToken=="function";if(n!==void 0&&!l&&!u)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const h=typeof n=="object"?new s(n):new s;return h.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof n=="string"&&n.trim().length>0&&h.setProperty(o.PropertyId.SpeechServiceConnection_Key,n),h}static fromHost(a,n){i.Contracts.throwIfNull(a,"hostName");const l=new s;return l.setProperty(o.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),l.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),n!==void 0&&l.setProperty(o.PropertyId.SpeechServiceConnection_Key,n),l}static fromAuthorizationToken(a,n){i.Contracts.throwIfNull(a,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(n,"region");const l=new s;return l.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,n),l.authorizationToken=a,l}close(){}};li.SpeechConfig=p;class s extends p{constructor(a){super(),this.privProperties=new o.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=o.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return o.OutputFormat[this.privProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(r.OutputFormatPropertyName,o.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,n){i.Contracts.throwIfNull(n,"value"),this.privProperties.setProperty(a,n)}getProperty(a,n){return this.privProperties.getProperty(a,n)}setProxy(a,n,l,u){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],l),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,n){const l=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));l[a]=n,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(l))}setProfanity(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(r.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(r.ForceDictationPropertyName,"true")}clone(){const a=new s(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[a])}}return li.SpeechConfigImpl=s,li}var fi={},b1;function Iq(){if(b1)return fi;b1=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.SpeechTranslationConfigImpl=fi.SpeechTranslationConfig=void 0;const r=De(),i=Ve(),o=Ae();let p=class extends o.SpeechConfig{constructor(){super()}static fromSubscription(a,n){i.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(n,"region");const l=new s;return l.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,a),l.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l}static fromAuthorizationToken(a,n){i.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(n,"region");const l=new s;return l.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,a),l.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l}static fromHost(a,n){i.Contracts.throwIfNull(a,"hostName");const l=new s;return l.setProperty(o.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),n!==void 0&&l.setProperty(o.PropertyId.SpeechServiceConnection_Key,n),l}static fromEndpoint(a,n){i.Contracts.throwIfNull(a,"endpoint");const l=typeof n=="string"&&n.trim().length>0,u=typeof n=="object"&&n!==null&&typeof n.getToken=="function";if(n!==void 0&&!l&&!u)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const h=typeof n=="object"?new s(n):new s;return h.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof n=="string"&&n.trim().length>0&&h.setProperty(o.PropertyId.SpeechServiceConnection_Key,n),h}};fi.SpeechTranslationConfig=p;class s extends p{constructor(a){super(),this.privSpeechProperties=new o.PropertyCollection,this.outputFormat=o.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){i.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){i.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return o.OutputFormat[this.privSpeechProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(r.OutputFormatPropertyName,o.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){i.Contracts.throwIfNullOrWhitespace(a,"value");const n=this.targetLanguages;n.includes(a)||(n.push(a),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){i.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,n,l,u){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],l),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,n){return this.privSpeechProperties.getProperty(a,n)}setProperty(a,n){this.privSpeechProperties.setProperty(a,n)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,n){const l=JSON.parse(this.privSpeechProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));l[a]=n,this.privSpeechProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(l))}setProfanity(a){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(r.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[a])}}return fi.SpeechTranslationConfigImpl=s,fi}var Pa={},R1;function bD(){if(R1)return Pa;R1=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.PropertyCollection=void 0;const r=Ae();let i=class CD{constructor(){this.privKeys=[],this.privValues=[]}getProperty(p,s){let f;typeof p=="string"?f=p:f=r.PropertyId[p];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===f)return this.privValues[a];if(s!==void 0)return String(s)}setProperty(p,s){let f;typeof p=="string"?f=p:f=r.PropertyId[p];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===f){this.privValues[a]=s;return}this.privKeys.push(f),this.privValues.push(s)}clone(){const p=new CD;for(let s=0;s<this.privKeys.length;s++)p.privKeys.push(this.privKeys[s]),p.privValues.push(this.privValues[s]);return p}mergeTo(p){this.privKeys.forEach(s=>{if(p.getProperty(s,void 0)===void 0){const f=this.getProperty(s);p.setProperty(s,f)}})}get keys(){return this.privKeys}};return Pa.PropertyCollection=i,Pa}var Wd={},_1;function fS(){return _1||(_1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PropertyId=void 0,function(i){i[i.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",i[i.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",i[i.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",i[i.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",i[i.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",i[i.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",i[i.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",i[i.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",i[i.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",i[i.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",i[i.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",i[i.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",i[i.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",i[i.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",i[i.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",i[i.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",i[i.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",i[i.Speech_SessionId=17]="Speech_SessionId",i[i.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",i[i.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",i[i.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",i[i.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",i[i.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",i[i.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",i[i.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",i[i.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",i[i.CancellationDetails_Reason=26]="CancellationDetails_Reason",i[i.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",i[i.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",i[i.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",i[i.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",i[i.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",i[i.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",i[i.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",i[i.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",i[i.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",i[i.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",i[i.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",i[i.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",i[i.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",i[i.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",i[i.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",i[i.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",i[i.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",i[i.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",i[i.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",i[i.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",i[i.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",i[i.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",i[i.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",i[i.Conversation_ApplicationId=50]="Conversation_ApplicationId",i[i.Conversation_DialogType=51]="Conversation_DialogType",i[i.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",i[i.Conversation_From_Id=53]="Conversation_From_Id",i[i.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",i[i.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",i[i.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",i[i.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",i[i.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",i[i.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",i[i.ConversationTranslator_Host=60]="ConversationTranslator_Host",i[i.ConversationTranslator_Name=61]="ConversationTranslator_Name",i[i.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",i[i.ConversationTranslator_Token=63]="ConversationTranslator_Token",i[i.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",i[i.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",i[i.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",i[i.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",i[i.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",i[i.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",i[i.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",i[i.WebWorkerLoadType=71]="WebWorkerLoadType",i[i.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(r.PropertyId||(r.PropertyId={}))}(Wd)),Wd}var Oa={},E1;function Mq(){if(E1)return Oa;E1=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Recognizer=void 0;const r=De(),i=ze(),o=Ve(),p=Ae();let s=class RD{constructor(a,n,l,u){this.audioConfig=a!==void 0?a:p.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=n.clone(),this.privConnectionFactory=l,this.tokenCredential=u,this.implCommonRecognizerSetup()}close(a,n){o.Contracts.throwIfDisposed(this.privDisposed),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),a,n)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){r.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",n="unknown",l="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,n=navigator.userAgent,l=navigator.appVersion);const u=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(a,n,l))));this.privReco=this.createServiceRecognizer(RD.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){o.Contracts.throwIfDisposed(this.privDisposed);const n=new i.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,n.resolve,n.reject);const l=await n.promise;return await this.implRecognizerStop(),l}async startContinuousRecognitionAsyncImpl(a){o.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){o.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,n){const l=a.getProperty(p.PropertyId.SpeechServiceConnection_Key,void 0);return l&&l!==""?new r.CognitiveSubscriptionKeyAuthentication(l):n?new r.CognitiveTokenAuthentication(async()=>{try{return(await n.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(u){throw u}},async()=>{try{return(await n.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(u){throw u}}):new r.CognitiveTokenAuthentication(()=>{const u=a.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return Oa.Recognizer=s,Oa}var Ia={},Gd={},w1;function Cr(){return w1||(w1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionMode=void 0,function(i){i.Interactive="Interactive",i.Dictation="Dictation",i.Conversation="Conversation",i.None="None"}(r.RecognitionMode||(r.RecognitionMode={}))}(Gd)),Gd}var A1;function Dq(){if(A1)return Ia;A1=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.SpeechRecognizer=void 0;const r=De(),i=Cr(),o=ze(),p=Ve(),s=Ae();let f=class _D extends s.Recognizer{constructor(n,l){const u=n;p.Contracts.throwIfNull(u,"speechConfig"),p.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,u.properties,new r.SpeechConnectionFactory,n.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(n,l,u){const h=n;return l.properties.mergeTo(h.properties),new _D(n,u)}get endpointId(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){p.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,n)}get speechRecognitionLanguage(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),n,l)}startContinuousRecognitionAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(r.ForceDictationPropertyName,void 0)===void 0?i.RecognitionMode.Conversation:i.RecognitionMode.Dictation),n,l)}stopContinuousRecognitionAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),n,l)}startKeywordRecognitionAsync(n,l,u){p.Contracts.throwIfNull(n,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(n){n&&n()}close(n,l){p.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,o.marshalPromiseToCallbacks)(this.dispose(!0),n,l)}async dispose(n){this.privDisposedRecognizer||(n&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(n))}createRecognizerConfig(n){return new r.RecognizerConfig(n,this.privProperties)}createServiceRecognizer(n,l,u,h){const d=u;return new r.SpeechServiceRecognizer(n,l,d,h,this)}};return Ia.SpeechRecognizer=f,Ia}var Ma={},T1;function jq(){if(T1)return Ma;T1=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.IntentRecognizer=void 0;const r=De(),i=Cr(),o=ze(),p=Ve(),s=Ae();let f=class extends s.Recognizer{constructor(n,l){p.Contracts.throwIfNullOrUndefined(n,"speechConfig");const u=n;p.Contracts.throwIfNullOrUndefined(u,"speechConfig"),super(l,u.properties,new r.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=u.properties,p.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return p.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,n)}get properties(){return this.privProperties}recognizeOnceAsync(n,l){if(p.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=u.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,o.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),n,l)}startContinuousRecognitionAsync(n,l){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=u.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,o.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),n,l)}stopContinuousRecognitionAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),n,l)}startKeywordRecognitionAsync(n,l,u){p.Contracts.throwIfNull(n,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(n,l){if(n)try{n()}catch(u){l&&l(u)}}addIntent(n,l){p.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),p.Contracts.throwIfNullOrWhitespace(l,"intentId"),p.Contracts.throwIfNullOrWhitespace(n,"simplePhrase"),this.privAddedIntents.push([l,n])}addIntentWithLanguageModel(n,l,u){p.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),p.Contracts.throwIfNullOrWhitespace(n,"intentId"),p.Contracts.throwIfNull(l,"model");const h=l;p.Contracts.throwIfNullOrWhitespace(h.appId,"model.appId"),this.privAddedLmIntents[n]=new r.AddedLmIntent(h,u)}addAllIntents(n,l){p.Contracts.throwIfNull(n,"model");const u=n;p.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privUmbrellaIntent=new r.AddedLmIntent(u,l)}close(n,l){p.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,o.marshalPromiseToCallbacks)(this.dispose(!0),n,l)}createRecognizerConfig(n){return new r.RecognizerConfig(n,this.privProperties)}createServiceRecognizer(n,l,u,h){const d=u;return new r.IntentServiceRecognizer(n,l,d,h,this)}async dispose(n){this.privDisposedIntentRecognizer||n&&(this.privDisposedIntentRecognizer=!0,await super.dispose(n))}buildSpeechContext(){let n,l,u;const h=[];this.privUmbrellaIntent!==void 0&&(n=this.privUmbrellaIntent.modelImpl.appId,l=this.privUmbrellaIntent.modelImpl.region,u=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const d of Object.keys(this.privAddedLmIntents)){const y=this.privAddedLmIntents[d];if(n===void 0)n=y.modelImpl.appId;else if(n!==y.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(l===void 0)l=y.modelImpl.region;else if(l!==y.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(u===void 0)u=y.modelImpl.subscriptionKey;else if(u!==y.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const g="luis/"+n+"-PRODUCTION#"+d;h.push(g)}return{Intent:{id:n,key:u===void 0?this.privProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key]):u,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?h:["luis/"+n+"-PRODUCTION"]}}};return Ma.IntentRecognizer=f,Ma}var Kd={},P1;function kq(){return P1||(P1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceProfileType=void 0,function(i){i[i.TextIndependentIdentification=0]="TextIndependentIdentification",i[i.TextDependentVerification=1]="TextDependentVerification",i[i.TextIndependentVerification=2]="TextIndependentVerification"}(r.VoiceProfileType||(r.VoiceProfileType={}))}(Kd)),Kd}var Da={},ja={},hi={},O1;function ED(){if(O1)return hi;O1=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.ConnectionMessageImpl=hi.ConnectionMessage=void 0;const r=Gt(),i=ze(),o=bD(),p=fS();let s=class{};hi.ConnectionMessage=s;class f{constructor(n){this.privConnectionMessage=n,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(p.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(l=>{this.privProperties.setProperty(l,this.privConnectionMessage.headers[l])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(n=>n.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===i.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===i.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return hi.ConnectionMessageImpl=f,hi}var I1;function wD(){if(I1)return ja;I1=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.Connection=void 0;const r=De(),i=ze(),o=ED(),p=Ve(),s=Ae();let f=class tS{static fromRecognizer(n){const l=n.internalData,u=new tS;return u.privInternalData=l,u.setupEvents(),u}static fromSynthesizer(n){const l=n.internalData,u=new tS;return u.privInternalData=l,u.setupEvents(),u}openConnection(n,l){(0,i.marshalPromiseToCallbacks)(this.privInternalData.connect(),n,l)}closeConnection(n,l){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,i.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),n,l)}setMessageProperty(n,l,u){if(p.Contracts.throwIfNullOrWhitespace(l,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if(n.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const h=this.privInternalData.speechContext.getContext();h[l]=u}}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if(n.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(l,u)}}sendMessageAsync(n,l,u,h){(0,i.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(n,l),u,h)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(n=>{n.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new s.ConnectionEventArgs(n.connectionId)):n.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new s.ConnectionEventArgs(n.connectionId)):n.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(n.message))):n.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(n.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(n=>{this.receivedServiceMessage&&this.receivedServiceMessage(new s.ServiceEventArgs(n.jsonString,n.name))})}};return ja.Connection=f,ja}var M1;function Nq(){if(M1)return Da;M1=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.TranslationRecognizer=void 0;const r=De(),i=Cr(),o=ze(),p=wD(),s=Ve(),f=Ae();let a=class AD extends f.Recognizer{constructor(l,u,h){const d=l;s.Contracts.throwIfNull(d,"speechConfig"),super(u,d.properties,h||new r.TranslationConnectionFactory,l.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice),f.PropertyId[f.PropertyId.SpeechServiceConnection_TranslationVoice]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages),f.PropertyId[f.PropertyId.SpeechServiceConnection_TranslationToLanguages]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage),f.PropertyId[f.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(l,u,h){const d=l;return u.properties.mergeTo(d.properties),u.properties.getProperty(f.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===r.AutoDetectSourceLanguagesOpenRangeOptionName&&d.properties.setProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new AD(l,h)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(f.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(f.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){this.properties.setProperty(f.PropertyId.SpeechServiceAuthorization_Token,l)}recognizeOnceAsync(l,u){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,o.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(i.RecognitionMode.Interactive),l,u)}startContinuousRecognitionAsync(l,u){(0,o.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),l,u)}stopContinuousRecognitionAsync(l,u){(0,o.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),l,u)}removeTargetLanguage(l){if(s.Contracts.throwIfNullOrUndefined(l,"language to be removed"),this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const u=this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),h=u.indexOf(l);h>-1&&(u.splice(h,1),this.properties.setProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")),this.updateLanguages(u))}}addTargetLanguage(l){s.Contracts.throwIfNullOrUndefined(l,"language to be added");let u=[];this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(u=this.properties.getProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u.includes(l)||(u.push(l),this.properties.setProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")))):(this.properties.setProperty(f.PropertyId.SpeechServiceConnection_TranslationToLanguages,l),u=[l]),this.updateLanguages(u)}close(l,u){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,o.marshalPromiseToCallbacks)(this.dispose(!0),l,u)}onConnection(){}async dispose(l){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,l&&(await this.implRecognizerStop(),await super.dispose(l)))}createRecognizerConfig(l){return new r.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,h,d){const y=h;return new r.TranslationServiceRecognizer(l,u,y,d,this)}updateLanguages(l){const u=p.Connection.fromRecognizer(this);u&&(u.setMessageProperty("speech.context","translationcontext",{to:l}),u.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:l})))}};return Da.TranslationRecognizer=a,Da}var ka={},D1;function qq(){if(D1)return ka;D1=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.Translations=void 0;const r=Ae();let i=class{constructor(){this.privMap=new r.PropertyCollection}get languages(){return this.privMap.keys}get(p,s){return this.privMap.getProperty(p,s)}set(p,s){this.privMap.setProperty(p,s)}};return ka.Translations=i,ka}var $d={},j1;function zq(){return j1||(j1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NoMatchReason=void 0,function(i){i[i.NotRecognized=0]="NotRecognized",i[i.InitialSilenceTimeout=1]="InitialSilenceTimeout",i[i.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(r.NoMatchReason||(r.NoMatchReason={}))}($d)),$d}var Na={},k1;function Lq(){if(k1)return Na;k1=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.NoMatchDetails=void 0;const r=De(),i=Ae();let o=class TD{constructor(s){this.privReason=s}static fromResult(s){const f=r.SimpleSpeechPhrase.fromJSON(s.json,0);let a=i.NoMatchReason.NotRecognized;switch(f.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:a=i.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:a=i.NoMatchReason.InitialSilenceTimeout;break;default:a=i.NoMatchReason.NotRecognized;break}return new TD(a)}get reason(){return this.privReason}};return Na.NoMatchDetails=o,Na}var qa={},N1;function xq(){if(N1)return qa;N1=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.TranslationRecognitionCanceledEventArgs=void 0;let r=class{constructor(o,p,s,f,a){this.privCancelReason=p,this.privErrorDetails=s,this.privResult=a,this.privSessionId=o,this.privErrorCode=f}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return qa.TranslationRecognitionCanceledEventArgs=r,qa}var za={},q1;function Bq(){if(q1)return za;q1=1,Object.defineProperty(za,"__esModule",{value:!0}),za.IntentRecognitionCanceledEventArgs=void 0;const r=Ae();let i=class extends r.IntentRecognitionEventArgs{constructor(p,s,f,a,n,l){super(a,n,l),this.privReason=p,this.privErrorDetails=s,this.privErrorCode=f}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return za.IntentRecognitionCanceledEventArgs=i,za}var La={},z1;function PD(){if(z1)return La;z1=1,Object.defineProperty(La,"__esModule",{value:!0}),La.CancellationDetailsBase=void 0;let r=class{constructor(o,p,s){this.privReason=o,this.privErrorDetails=p,this.privErrorCode=s}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return La.CancellationDetailsBase=r,La}var xa={},L1;function Uq(){if(L1)return xa;L1=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.CancellationDetails=void 0;const r=De(),i=PD(),o=Ae();let p=class OD extends i.CancellationDetailsBase{constructor(f,a,n){super(f,a,n)}static fromResult(f){let a=o.CancellationReason.Error,n=o.CancellationErrorCode.NoError;if(f instanceof o.RecognitionResult&&f.json){const l=r.SimpleSpeechPhrase.fromJSON(f.json,0);a=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus)}return f.properties&&(n=o.CancellationErrorCode[f.properties.getProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new OD(a,f.errorDetails||r.EnumTranslation.implTranslateErrorDetails(n),n)}};return xa.CancellationDetails=p,xa}var Jd={},x1;function Fq(){return x1||(x1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationErrorCode=void 0,function(i){i[i.NoError=0]="NoError",i[i.AuthenticationFailure=1]="AuthenticationFailure",i[i.BadRequestParameters=2]="BadRequestParameters",i[i.TooManyRequests=3]="TooManyRequests",i[i.ConnectionFailure=4]="ConnectionFailure",i[i.ServiceTimeout=5]="ServiceTimeout",i[i.ServiceError=6]="ServiceError",i[i.RuntimeError=7]="RuntimeError",i[i.Forbidden=8]="Forbidden"}(r.CancellationErrorCode||(r.CancellationErrorCode={}))}(Jd)),Jd}var Ba={},B1;function Hq(){if(B1)return Ba;B1=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.ConnectionEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{};return Ba.ConnectionEventArgs=i,Ba}var Ua={},U1;function Vq(){if(U1)return Ua;U1=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.ServiceEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{constructor(p,s,f){super(f),this.privJsonResult=p,this.privEventName=s}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ua.ServiceEventArgs=i,Ua}var Fa={},F1;function Wq(){if(F1)return Fa;F1=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.PhraseListGrammar=void 0;let r=class ID{constructor(o){this.privGrammerBuilder=o.dynamicGrammar}static fromRecognizer(o){const p=o.internalData;return new ID(p)}addPhrase(o){this.privGrammerBuilder.addPhrase(o)}addPhrases(o){this.privGrammerBuilder.addPhrase(o)}clear(){this.privGrammerBuilder.clearPhrases()}};return Fa.PhraseListGrammar=r,Fa}var pi={},H1;function hS(){if(H1)return pi;H1=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.DialogServiceConfigImpl=pi.DialogServiceConfig=void 0;const r=Ve(),i=Ae();let o=class{constructor(){}set applicationId(f){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};pi.DialogServiceConfig=o;class p extends o{constructor(){super(),this.privSpeechConfig=new i.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(f){r.Contracts.throwIfNullOrWhitespace(f,"value"),this.privSpeechConfig.speechRecognitionLanguage=f}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(f){this.privSpeechConfig.outputFormat=f}setProperty(f,a){this.privSpeechConfig.setProperty(f,a)}getProperty(f,a){return this.privSpeechConfig.getProperty(f)}setProxy(f,a,n,l){this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName,f),this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),n&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName,n),l&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword,l)}setServiceProperty(f,a,n){this.privSpeechConfig.setServiceProperty(f,a)}close(){}}return pi.DialogServiceConfigImpl=p,pi}var Ha={},V1;function Gq(){if(V1)return Ha;V1=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.BotFrameworkConfig=void 0;const r=Ve(),i=hS(),o=Ae();let p=class extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(f,a,n){r.Contracts.throwIfNullOrWhitespace(f,"subscription"),r.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i.DialogServiceConfigImpl;return l.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(o.PropertyId.SpeechServiceConnection_Key,f),l.setProperty(o.PropertyId.SpeechServiceConnection_Region,a),n&&l.setProperty(o.PropertyId.Conversation_ApplicationId,n),l}static fromAuthorizationToken(f,a,n){r.Contracts.throwIfNullOrWhitespace(f,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(a,"region");const l=new i.DialogServiceConfigImpl;return l.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,f),l.setProperty(o.PropertyId.SpeechServiceConnection_Region,a),n&&l.setProperty(o.PropertyId.Conversation_ApplicationId,n),l}static fromHost(f,a,n){r.Contracts.throwIfNullOrUndefined(f,"host");const l=f instanceof URL?f:new URL(`wss://${f}.convai.speech.azure.us`);r.Contracts.throwIfNullOrUndefined(l,"resolvedHost");const u=new i.DialogServiceConfigImpl;return u.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(o.PropertyId.SpeechServiceConnection_Host,l.toString()),a!==void 0&&u.setProperty(o.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(f,a){r.Contracts.throwIfNull(f,"endpoint");const n=new i.DialogServiceConfigImpl;return n.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,f.toString()),a!==void 0&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,a),n}};return Ha.BotFrameworkConfig=p,Ha}var Va={},W1;function Kq(){if(W1)return Va;W1=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.CustomCommandsConfig=void 0;const r=Ve(),i=hS(),o=Ae();let p=class extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(f,a,n){r.Contracts.throwIfNullOrWhitespace(f,"applicationId"),r.Contracts.throwIfNullOrWhitespace(a,"subscription"),r.Contracts.throwIfNullOrWhitespace(n,"region");const l=new i.DialogServiceConfigImpl;return l.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),l.setProperty(o.PropertyId.Conversation_ApplicationId,f),l.setProperty(o.PropertyId.SpeechServiceConnection_Key,a),l.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l}static fromAuthorizationToken(f,a,n){r.Contracts.throwIfNullOrWhitespace(f,"applicationId"),r.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(n,"region");const l=new i.DialogServiceConfigImpl;return l.setProperty(o.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),l.setProperty(o.PropertyId.Conversation_ApplicationId,f),l.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,a),l.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),l}set applicationId(f){r.Contracts.throwIfNullOrWhitespace(f,"value"),this.setProperty(o.PropertyId.Conversation_ApplicationId,f)}get applicationId(){return this.getProperty(o.PropertyId.Conversation_ApplicationId)}};return Va.CustomCommandsConfig=p,Va}var Wa={},Ga={},Ka={},$a={},G1;function zn(){if(G1)return $a;G1=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.QueryParameterNames=void 0;let r=class{};return $a.QueryParameterNames=r,r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",r.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",r.SegmentationStrategy="segmentationStrategy",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks",r.Postprocessing="postprocessing",r.CtsMeetingId="meetingId",r.CtsDeviceId="deviceId",r.CtsIsParticipant="isParticipant",r.EnableAvatar="enableTalkingAvatar",$a}var K1;function Or(){if(K1)return Ka;K1=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.ConnectionFactoryBase=void 0;const r=De(),i=ze(),o=Ae(),p=zn();let s=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,n,l){new Map([[o.PropertyId.Speech_SegmentationSilenceTimeoutMs,p.QueryParameterNames.SegmentationSilenceTimeoutMs],[o.PropertyId.SpeechServiceConnection_EnableAudioLogging,p.QueryParameterNames.EnableAudioLogging],[o.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,p.QueryParameterNames.EndSilenceTimeoutMs],[o.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,p.QueryParameterNames.InitialSilenceTimeoutMs],[o.PropertyId.SpeechServiceResponse_PostProcessingOption,p.QueryParameterNames.Postprocessing],[o.PropertyId.SpeechServiceResponse_ProfanityOption,p.QueryParameterNames.Profanity],[o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,p.QueryParameterNames.EnableWordLevelTimestamps],[o.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,p.QueryParameterNames.StableIntermediateThreshold]]).forEach((d,y)=>{this.setUrlParameter(y,d,a,n,l)});const h=JSON.parse(a.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(d=>{n[d]=h[d]})}setUrlParameter(a,n,l,u,h){const d=l.parameters.getProperty(a,void 0);d&&(!h||h.search(n)===-1)&&(u[n]=d.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){let n;if(typeof window<"u"&&typeof window.fetch<"u"){const l=new URL(a);l.protocol="https:",l.port="443",l.searchParams.append("GenerateRedirectResponse","true");const h=l.toString();i.Events.instance.onEvent(new i.ConnectionRedirectEvent("",h,void 0,"ConnectionFactoryBase: redirectUrl request"));const d=await fetch(h);if(d.status!==200)return a;n=await d.text()}else n=a;i.Events.instance.onEvent(new i.ConnectionRedirectEvent("",n,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(n.trim()).toString()}catch{return a}}};return Ka.ConnectionFactoryBase=s,Ka}var $1;function $q(){if($1)return Ga;$1=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.DialogConnectionFactory=void 0;const r=Mt(),i=De(),o=Ae(),p=Or(),s=De(),f=Gt(),a=zn();class n extends p.ConnectionFactoryBase{create(u,h,d){const y=u.parameters.getProperty(o.PropertyId.Conversation_ApplicationId,""),g=u.parameters.getProperty(o.PropertyId.Conversation_DialogType),m=u.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),C=u.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),_=u.parameters.getProperty(o.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),b={};b[f.HeaderNames.ConnectionId]=d,b[a.QueryParameterNames.Format]=u.parameters.getProperty(i.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase(),b[a.QueryParameterNames.Language]=C,b[a.QueryParameterNames.RequestBotStatusMessages]=_,y&&(b[a.QueryParameterNames.BotId]=y,g===o.DialogServiceConfig.DialogTypes.CustomCommands&&(b[f.HeaderNames.CustomCommandsAppId]=y));const R=g===o.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",A=g===o.DialogServiceConfig.DialogTypes.CustomCommands?"v1":g===o.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",w={};h.token!=null&&h.token!==""&&(w[h.headerName]=h.token);let O=u.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,"");if(!O){const D=p.ConnectionFactoryBase.getHostSuffix(m),N=u.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,`wss://${m}.${n.BaseUrl}${D}`);O=`${N.endsWith("/")?N:N+"/"}${R}${n.ApiKey}/${A}`}this.setCommonUrlParams(u,b,O);const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(O,b,w,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),P,d))}}return Ga.DialogConnectionFactory=n,n.ApiKey="api",n.BaseUrl="convai.speech",Ga}var J1;function Jq(){if(J1)return Wa;J1=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.DialogServiceConnector=void 0;const r=$q(),i=De(),o=Cr(),p=ze(),s=Ve(),f=Ae(),a=fS();let n=class extends f.Recognizer{constructor(u,h){const d=u;s.Contracts.throwIfNull(u,"dialogConfig"),super(h,d.properties,new r.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=d.properties.clone();const y=this.buildAgentConfig();this.privReco.agentConfig.set(y)}connect(u,h){(0,p.marshalPromiseToCallbacks)(this.privReco.connect(),u,h)}disconnect(u,h){(0,p.marshalPromiseToCallbacks)(this.privReco.disconnect(),u,h)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){s.Contracts.throwIfNullOrWhitespace(u,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,u)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(u){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,u)}listenOnceAsync(u,h){if(this.isTurnComplete){s.Contracts.throwIfDisposed(this.privIsDisposed);const y=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const g=new p.Deferred;await this.privReco.recognize(o.RecognitionMode.Conversation,g.resolve,g.reject);const m=await g.promise;return await this.implRecognizerStop(),m})();y.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,p.marshalPromiseToCallbacks)(y.finally(()=>{this.isTurnComplete=!0}),u,h)}}sendActivityAsync(u,h,d){(0,p.marshalPromiseToCallbacks)(this.privReco.sendMessage(u),h,d)}close(u,h){s.Contracts.throwIfDisposed(this.privIsDisposed),(0,p.marshalPromiseToCallbacks)(this.dispose(!0),u,h)}async dispose(u){this.privIsDisposed||u&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(u))}createRecognizerConfig(u){return new i.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,h,d,y){const g=d;return new i.DialogServiceAdapter(u,h,g,y,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Wa.DialogServiceConnector=n,Wa}var Ja={},Q1;function Qq(){if(Q1)return Ja;Q1=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.ActivityReceivedEventArgs=void 0;let r=class{constructor(o,p){this.privActivity=o,this.privAudioStream=p}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return Ja.ActivityReceivedEventArgs=r,Ja}var Qa={},Ya={},Y1;function Yq(){if(Y1)return Ya;Y1=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.TurnStatusResponsePayload=void 0;class r{constructor(o){this.privMessageStatusResponse=JSON.parse(o)}static fromJSON(o){return new r(o)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return Ya.TurnStatusResponsePayload=r,Ya}var X1;function Xq(){if(X1)return Qa;X1=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.TurnStatusReceivedEventArgs=void 0;const r=Yq();let i=class{constructor(p){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(p)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return Qa.TurnStatusReceivedEventArgs=i,Qa}var Qd={},Z1;function Zq(){return Z1||(Z1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ServicePropertyChannel=void 0,function(i){i[i.UriQueryParameter=0]="UriQueryParameter"}(r.ServicePropertyChannel||(r.ServicePropertyChannel={}))}(Qd)),Qd}var Yd={},eE;function ez(){return eE||(eE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ProfanityOption=void 0,function(i){i[i.Masked=0]="Masked",i[i.Removed=1]="Removed",i[i.Raw=2]="Raw"}(r.ProfanityOption||(r.ProfanityOption={}))}(Yd)),Yd}var Xa={},tE;function tz(){if(tE)return Xa;tE=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.BaseAudioPlayer=void 0;const r=zr(),i=Ae(),o=ji();let p=class{constructor(f){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,f===void 0&&(f=i.AudioStreamFormat.getDefaultInputFormat()),this.init(f)}playAudioSample(f,a,n){try{this.ensureInitializedContext();const l=this.formatAudioData(f),u=new Float32Array(this.samples.length+l.length);u.set(this.samples,0),u.set(l,this.samples.length),this.samples=u,a&&a()}catch(l){n&&n(l)}}stopAudio(f,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{f&&f()},n=>{a&&a(n)}),this.audioContext=null)}init(f){this.audioFormat=f,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const f=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},f)}}createAudioContext(){this.audioContext=o.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(f){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(f),128);case 16:return this.formatArrayBuffer(new Int16Array(f),32768);case 32:return this.formatArrayBuffer(new Int32Array(f),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(f,a){const n=new Float32Array(f.length);for(let l=0;l<f.length;l++)n[l]=f[l]/a;return n}updateAudioBuffer(){if(this.samples.length===0)return;const f=this.audioFormat.channels,a=this.audioContext.createBufferSource(),n=this.samples.length/f,l=this.audioContext.createBuffer(f,n,this.audioFormat.samplesPerSec);for(let u=0;u<f;u++){let h=u;const d=l.getChannelData(u);for(let y=0;y<this.samples.length;y++,h+=f)d[y]=this.samples[h]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=l,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=l.duration,this.samples=new Float32Array}async playAudio(f){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),n=this.audioContext.destination;await this.audioContext.decodeAudioData(f,l=>{a.buffer=l,a.connect(n),a.start(0)})}};return Xa.BaseAudioPlayer=p,Xa}var Za={},rE;function rz(){if(rE)return Za;rE=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.ConnectionMessageEventArgs=void 0;let r=class{constructor(o){this.privConnectionMessage=o}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return Za.ConnectionMessageEventArgs=r,Za}var ec={},nE;function nz(){if(nE)return ec;nE=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.VoiceProfile=void 0;let r=class{constructor(o,p){this.privId=o,this.privProfileType=p}get profileId(){return this.privId}get profileType(){return this.privProfileType}};return ec.VoiceProfile=r,ec}var di={},iE;function iz(){if(iE)return di;iE=1,Object.defineProperty(di,"__esModule",{value:!0}),di.VoiceProfileEnrollmentCancellationDetails=di.VoiceProfileEnrollmentResult=void 0;const r=De(),i=Ae();let o=class rS{constructor(f,a,n){this.privReason=f,this.privProperties=new i.PropertyCollection,this.privReason!==i.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=i.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(f){const a=[];for(const n of f.value){const l=n.enrollmentStatus.toLowerCase()==="enrolling"?i.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,u=new rS(l,null,null);u.privDetails=this.getIdentificationDetails(n),a.push(u)}return a}static FromVerificationProfileList(f){const a=[];for(const n of f.value){const l=n.enrollmentStatus.toLowerCase()==="enrolling"?i.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,u=new rS(l,null,null);u.privDetails=this.getVerificationDetails(n),a.push(u)}return a}static getIdentificationDetails(f){return{audioLength:f.audioLength?parseFloat(f.audioLength):0,audioSpeechLength:f.audioSpeechLength?parseFloat(f.audioSpeechLength):0,enrollmentStatus:f.enrollmentStatus,enrollmentsCount:f.enrollmentsCount||0,enrollmentsLength:f.enrollmentsLength?parseFloat(f.enrollmentsLength):0,enrollmentsSpeechLength:f.enrollmentsSpeechLength?parseFloat(f.enrollmentsSpeechLength):0,profileId:f.profileId||f.identificationProfileId,remainingEnrollmentsSpeechLength:f.remainingEnrollmentsSpeechLength?parseFloat(f.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(f){return{audioLength:f.audioLength?parseFloat(f.audioLength):0,audioSpeechLength:f.audioSpeechLength?parseFloat(f.audioSpeechLength):0,enrollmentStatus:f.enrollmentStatus,enrollmentsCount:f.enrollmentsCount,enrollmentsLength:f.enrollmentsLength?parseFloat(f.enrollmentsLength):0,enrollmentsSpeechLength:f.enrollmentsSpeechLength?parseFloat(f.enrollmentsSpeechLength):0,profileId:f.profileId||f.verificationProfileId,remainingEnrollmentsCount:f.remainingEnrollments||f.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:f.remainingEnrollmentsSpeechLength?parseFloat(f.remainingEnrollmentsSpeechLength):0}}};di.VoiceProfileEnrollmentResult=o;class p extends i.CancellationDetailsBase{constructor(f,a,n){super(f,a,n)}static fromResult(f){const a=i.CancellationReason.Error;let n=i.CancellationErrorCode.NoError;return f.properties&&(n=i.CancellationErrorCode[f.properties.getProperty(r.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.NoError])]),new p(a,f.errorDetails,n)}}return di.VoiceProfileEnrollmentCancellationDetails=p,di}var vi={},oE;function oz(){if(oE)return vi;oE=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.VoiceProfileCancellationDetails=vi.VoiceProfileResult=void 0;const r=De(),i=Ve(),o=Ae();let p=class{constructor(a,n){this.privReason=a,this.privProperties=new o.PropertyCollection,a===o.ResultReason.Canceled&&(i.Contracts.throwIfNullOrUndefined(n,"statusText"),this.privErrorDetails=n,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};vi.VoiceProfileResult=p;class s extends o.CancellationDetailsBase{constructor(a,n,l){super(a,n,l)}static fromResult(a){const n=o.CancellationReason.Error;let l=o.CancellationErrorCode.NoError;return a.properties&&(l=o.CancellationErrorCode[a.properties.getProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(n,a.errorDetails,l)}}return vi.VoiceProfileCancellationDetails=s,vi}var tc={},sE;function sz(){if(sE)return tc;sE=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.VoiceProfilePhraseResult=void 0;const r=Ve(),i=Ae();let o=class extends i.VoiceProfileResult{constructor(s,f,a,n){super(s,f),this.privPhrases=[],r.Contracts.throwIfNullOrUndefined(n,"phrase array"),this.privType=a,n&&n[0]&&(this.privPhrases=n)}get phrases(){return this.privPhrases}get type(){return this.privType}};return tc.VoiceProfilePhraseResult=o,tc}var rc={},aE;function az(){if(aE)return rc;aE=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.VoiceProfileClient=void 0;const r=De(),i=yD(),o=Ve(),p=Ae();let s=class extends p.Recognizer{constructor(a){o.Contracts.throwIfNullOrUndefined(a,"speechConfig");const n=a;o.Contracts.throwIfNull(n,"speechConfig"),super(i.AudioConfig.fromStreamInput(p.AudioInputStream.createPushStream()),n.properties,new r.VoiceProfileConnectionFactory),this.privProperties=n.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){o.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,n){const l=await this.privVoiceAdapter.createProfile(a,n);return new p.VoiceProfile(l[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,n){return this.privVoiceAdapter.getActivationPhrases(a,n)}async enrollProfileAsync(a,n){const l=n;return o.Contracts.throwIfNullOrUndefined(l,"audioConfig"),this.audioConfig=n,this.privVoiceAdapter.SpeakerAudioSource=l,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,n,l,u){const h=l;return new r.VoiceServiceRecognizer(a,n,h,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new r.RecognizerConfig(a,this.properties)}getResult(a,n){return new p.VoiceProfileResult(a.ok?n:p.ResultReason.Canceled,a.statusText)}};return rc.VoiceProfileClient=s,rc}var nc={},cE;function cz(){if(cE)return nc;cE=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.SpeakerRecognizer=void 0;const r=De(),i=Ve(),o=Ae();let p=class extends o.Recognizer{constructor(f,a){i.Contracts.throwIfNullOrUndefined(f,"speechConfig");const n=f;i.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(a,n.properties,new r.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,i.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=n.properties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(f){i.Contracts.throwIfNullOrWhitespace(f,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,f)}get properties(){return this.privProperties}async recognizeOnceAsync(f){return i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(f)}async close(){i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(f){i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(f);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(f){return new r.RecognizerConfig(f,this.privProperties)}createServiceRecognizer(f,a,n,l){const u=n;return new r.SpeakerServiceRecognizer(f,a,u,l,this)}async dispose(f){this.privDisposedSpeakerRecognizer||f&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(f))}};return nc.SpeakerRecognizer=p,nc}var ic={},uE;function uz(){if(uE)return ic;uE=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.SpeakerIdentificationModel=void 0;const r=Ve(),i=Ae();let o=class MD{constructor(s){if(this.privVoiceProfiles=[],this.privProfileIds=[],r.Contracts.throwIfNullOrUndefined(s,"VoiceProfiles"),s.length===0)throw new Error("Empty Voice Profiles array");for(const f of s){if(f.profileType!==i.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+f.profileId);this.privVoiceProfiles.push(f),this.privProfileIds.push(f.profileId)}}static fromProfiles(s){return new MD(s)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return ic.SpeakerIdentificationModel=o,ic}var oc={},lE;function lz(){if(lE)return oc;lE=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.SpeakerVerificationModel=void 0;const r=Ve(),i=Ae();let o=class DD{constructor(s){if(r.Contracts.throwIfNullOrUndefined(s,"VoiceProfile"),s.profileType===i.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=s}static fromProfile(s){return new DD(s)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===i.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return oc.SpeakerVerificationModel=o,oc}var sc={},Xd={},fE;function jD(){return fE||(fE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdMode=void 0,function(i){i[i.AtStart=0]="AtStart",i[i.Continuous=1]="Continuous"}(r.LanguageIdMode||(r.LanguageIdMode={}))}(Xd)),Xd}var hE;function fz(){if(hE)return sc;hE=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.AutoDetectSourceLanguageConfig=void 0;const r=De(),i=Ve(),o=Ae(),p=jD();let s=class Ff{constructor(){this.privProperties=new o.PropertyCollection,this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=p.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Ff;return a.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){i.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const n=new Ff;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),n}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const n=new Ff,l=[];return a.forEach(u=>{if(l.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const h=u.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();n.properties.setProperty(h,u.endpointId)}}),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,l.join()),n}get properties(){return this.privProperties}set mode(a){a===p.LanguageIdMode.Continuous?(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return sc.AutoDetectSourceLanguageConfig=s,sc}var ac={},pE;function hz(){if(pE)return ac;pE=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.AutoDetectSourceLanguageResult=void 0;const r=Ve();let i=class nS{constructor(p,s){r.Contracts.throwIfNullOrUndefined(p,"language"),r.Contracts.throwIfNullOrUndefined(s,"languageDetectionConfidence"),this.privLanguage=p,this.privLanguageDetectionConfidence=s}static fromResult(p){return new nS(p.language,p.languageDetectionConfidence)}static fromConversationTranscriptionResult(p){return new nS(p.language,p.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return ac.AutoDetectSourceLanguageResult=i,ac}var cc={},dE;function pz(){if(dE)return cc;dE=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.SourceLanguageConfig=void 0;const r=Ve();let i=class kD{constructor(p,s){r.Contracts.throwIfNullOrUndefined(p,"language"),this.privLanguage=p,this.privEndpointId=s}static fromLanguage(p,s){return new kD(p,s)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return cc.SourceLanguageConfig=i,cc}var Zd={},vE;function dz(){return vE||(vE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeakerRecognitionCancellationDetails=r.SpeakerRecognitionResult=r.SpeakerRecognitionResultType=void 0;const i=De(),o=Ae();var p;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(p=r.SpeakerRecognitionResultType||(r.SpeakerRecognitionResultType={}));class s{constructor(n,l=o.ResultReason.RecognizedSpeaker,u=o.CancellationErrorCode.NoError,h=""){this.privProperties=new o.PropertyCollection;const d=n.scenario==="TextIndependentIdentification"?p.Identify:p.Verify;this.privReason=l,this.privReason!==o.ResultReason.Canceled?d===p.Identify?(this.privProfileId=n.identificationResult.identifiedProfile.profileId,this.privScore=n.identificationResult.identifiedProfile.score,this.privReason=o.ResultReason.RecognizedSpeakers):(this.privScore=n.verificationResult.score,n.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=o.ResultReason.NoMatch),n.verificationResult.profileId!==void 0&&n.verificationResult.profileId!==""&&(this.privProfileId=n.verificationResult.profileId)):(this.privErrorDetails=h,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[u])),this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(n))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}r.SpeakerRecognitionResult=s;class f extends o.CancellationDetailsBase{constructor(n,l,u){super(n,l,u)}static fromResult(n){const l=o.CancellationReason.Error;let u=o.CancellationErrorCode.NoError;return n.properties&&(u=o.CancellationErrorCode[n.properties.getProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new f(l,n.errorDetails,u)}}r.SpeakerRecognitionCancellationDetails=f}(Zd)),Zd}var ev={},gi={},gE;function ND(){if(gE)return gi;gE=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.ConversationImpl=gi.Conversation=void 0;const r=De(),i=ze(),o=Ve(),p=Ae();let s=class{constructor(){}static createConversationAsync(n,l,u,h){o.Contracts.throwIfNullOrUndefined(n,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),o.Contracts.throwIfNullOrUndefined(n.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!n.subscriptionKey&&!n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceAuthorization_Token])&&o.Contracts.throwIfNullOrUndefined(n.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let d,y,g;return typeof l=="string"?(d=new f(n,l),(0,i.marshalPromiseToCallbacks)((async()=>{})(),u,h)):(d=new f(n),y=l,g=u,d.createConversationAsync(()=>{y&&y()},m=>{g&&g(m)})),d}};gi.Conversation=s;class f extends s{constructor(n,l){if(super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=d=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,d)}catch{}},this.onDisconnected=d=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,d)}catch{}finally{this.close(!1)}},this.onCanceled=(d,y)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,y)}catch{}},this.onParticipantUpdateCommandReceived=(d,y)=>{try{const g=this.privParticipants.getParticipant(y.id);if(g!==void 0){switch(y.key){case r.ConversationTranslatorCommandTypes.changeNickname:g.displayName=y.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:g.isUsingTts=y.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:g.profanity=y.value;break;case r.ConversationTranslatorCommandTypes.setMute:g.isMuted=y.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:g.translateToLanguages=y.value;break}this.privParticipants.addOrUpdateParticipant(g),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,[this.toParticipant(g)],y.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(d,y)=>{try{this.privParticipants.participants.forEach(g=>g.isMuted=g.isHost?!1:y.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,this.toParticipants(!1),y.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(d,y)=>{try{const g=this.privParticipants.addOrUpdateParticipant(y.participant);g!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,[this.toParticipant(g)],y.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(d,y)=>{try{const g=this.privParticipants.getParticipant(y.participant.id);g!==void 0&&(this.privParticipants.deleteParticipant(y.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.LeftConversation,[this.toParticipant(g)],y.sessionId)))}catch{}},this.onTranslationReceived=(d,y)=>{try{switch(y.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break}}catch{}},this.onParticipantsListReceived=(d,y)=>{try{if(y.sessionToken!==void 0&&y.sessionToken!==null&&(this.privRoom.token=y.sessionToken),this.privParticipants.participants=[...y.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),y.sessionId)),this.me.isHost){const g=this.privConversationTranslator?.properties.getProperty(p.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(d,y)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,y)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new p.PropertyCollection,this.privManager=new r.ConversationManager,n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage])||n.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),l)this.privConversationId=l;else{n.targetLanguages.length===0&&n.addTargetLanguage(this.privLanguage),n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceResponse_ProfanityOption])||n.setProfanity(p.ProfanityOption.Masked);let y=n.getProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name]);y==null&&(y="Host"),o.Contracts.throwIfNullOrTooLong(y,"nickname",50),o.Contracts.throwIfNullOrTooShort(y,"nickname",2),n.setProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name],y)}this.privConfig=n;const h=n;o.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const n=this.conversationId,l=this.participants.map(d=>({id:d.id,preferredLanguage:d.preferredLanguage,voice:d.voice})),u={};for(const d of r.ConversationConnectionConfig.transcriptionEventKeys){const y=this.properties.getProperty(d,"");y!==""&&(u[d]=y)}return{id:n,participants:l,conversationProperties:u}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(n){o.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),this.privToken=n}set conversationTranslator(n){this.privConversationTranslator=n}onToken(n){this.privConversationTranslator.onToken(n)}createConversationAsync(n,l){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),l),this.privRoom=u,this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}startConversationAsync(n,l){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=r.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}addParticipantAsync(n,l,u){o.Contracts.throwIfNullOrUndefined(n,"Participant"),(0,i.marshalPromiseToCallbacks)(this.addParticipantImplAsync(n),l,u)}joinConversationAsync(n,l,u,h,d){try{o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","conversationId")),o.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,n,y=>{o.Contracts.throwIfNullOrUndefined(y,this.privErrors.permissionDeniedConnect),this.privRoom=y,this.privConfig.authorizationToken=y.cognitiveSpeechAuthToken,h&&h(y.cognitiveSpeechAuthToken)},y=>{this.handleError(y,d)})}catch(y){this.handleError(y,d)}}deleteConversationAsync(n,l){(0,i.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),n,l)}async deleteConversationImplAsync(){o.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(n,l){(0,i.marshalPromiseToCallbacks)(this.endConversationImplAsync(),n,l)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}muteAllParticipantsAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}muteParticipantAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!0),()=>{this.handleCallback(l,u)},d=>{this.handleError(d,u)})}catch(h){this.handleError(h,u)}}removeParticipantAsync(n,l,u){try{if(o.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&n.hasOwnProperty("id"))(0,i.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(n),l,u);else{o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let h="";typeof n=="string"?h=n:n.hasOwnProperty("id")?h=n.id:n.hasOwnProperty("userId")&&(h=n.userId),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(y=>y.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),()=>{this.handleCallback(l,u)},y=>{this.handleError(y,u)})}}catch(h){this.handleError(h,u)}}unlockConversationAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}unmuteAllParticipantsAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}unmuteParticipantAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!1),()=>{this.handleCallback(l,u)},d=>{this.handleError(d,u)})}catch(h){this.handleError(h,u)}}sendTextMessageAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","message")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),n.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}setTranslatedLanguagesAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfArrayEmptyOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","languages")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}changeNicknameAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(n){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await n.enforceAudioGating(),this.privTranscriberRecognizer=n,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const n=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:n,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(n){if(this.privParticipants.addOrUpdateParticipant(n)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[n],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(n){this.privParticipants.deleteParticipant(n.id);const l=this.conversationInfo;return l.participants=[n],this.privTranscriberRecognizer.pushConversationEvent(l,"leave")}async close(n){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}n&&this.dispose()}handleCallback(n,l){if(n){try{n()}catch(u){l&&l(u)}n=void 0}}handleError(n,l){if(l)if(n instanceof Error){const u=n;l(u.name+": "+u.message)}else l(n)}toParticipants(n){const l=this.privParticipants.participants.map(u=>this.toParticipant(u));return n?l:l.filter(u=>u.isHost===!1)}toParticipant(n){return new p.Participant(n.id,n.avatar,n.displayName,n.isHost,n.isMuted,n.isUsingTts,n.preferredLanguage,n.voice)}getMuteAllCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMuteCommand(n,l){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:l})}getLockCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getEjectCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getChangeNicknameCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(n,"nickname"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:n,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMessageCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),o.Contracts.throwIfNullOrWhitespace(n,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:n,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return gi.ConversationImpl=f,gi}var uc={},yE;function vz(){if(yE)return uc;yE=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.ConversationCommon=void 0;let r=class{constructor(o){this.privAudioConfig=o}handleCallback(o,p){if(o){try{o()}catch(s){p&&p(s)}o=void 0}}handleError(o,p){if(p)if(o instanceof Error){const s=o;p(s.name+": "+s.message)}else p(o)}};return uc.ConversationCommon=r,uc}var lc={},mE;function gz(){if(mE)return lc;mE=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.ConversationExpirationEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{constructor(p,s){super(s),this.privExpirationTime=p}get expirationTime(){return this.privExpirationTime}};return lc.ConversationExpirationEventArgs=i,lc}var fc={},SE;function yz(){if(SE)return fc;SE=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.ConversationParticipantsChangedEventArgs=void 0;const r=Ae();let i=class extends r.SessionEventArgs{constructor(p,s,f){super(f),this.privReason=p,this.privParticipant=s}get reason(){return this.privReason}get participants(){return this.privParticipant}};return fc.ConversationParticipantsChangedEventArgs=i,fc}var hc={},CE;function mz(){if(CE)return hc;CE=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.ConversationTranslationCanceledEventArgs=void 0;const r=gl();let i=class extends r.CancellationEventArgsBase{};return hc.ConversationTranslationCanceledEventArgs=i,hc}var pc={},bE;function Sz(){if(bE)return pc;bE=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.ConversationTranslationEventArgs=void 0;const r=Ae();let i=class extends r.RecognitionEventArgs{constructor(p,s,f){super(s,f),this.privResult=p}get result(){return this.privResult}};return pc.ConversationTranslationEventArgs=i,pc}var dc={},RE;function Cz(){if(RE)return dc;RE=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.ConversationTranslationResult=void 0;const r=SD();let i=class extends r.TranslationRecognitionResult{constructor(p,s,f,a,n,l,u,h,d,y,g){super(s,a,n,l,u,h,void 0,void 0,d,y,g),this.privId=p,this.privOrigLang=f}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return dc.ConversationTranslationResult=i,dc}var tv={},vc={},gc={},_E;function qD(){if(_E)return gc;_E=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.StringUtils=void 0;let r=class{static formatString(o,p){if(!o)return"";if(!p)return o;let s="",f="";const a=u=>{s+=u},n=u=>{f+=u};let l=a;for(let u=0;u<o.length;u++){const h=o[u],d=u+1<o.length?o[u+1]:"";switch(h){case"{":d==="{"?(l("{"),u++):l=n;break;case"}":d==="}"?(l("}"),u++):(p.hasOwnProperty(f)&&(s+=p[f]),l=a,f="");break;default:l(h);break}}return s}};return gc.StringUtils=r,gc}var EE;function bz(){if(EE)return vc;EE=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.ConversationTranslatorConnectionFactory=void 0;const r=Mt(),i=qD(),o=Ve(),p=Ae(),s=Gt(),f=zn(),a=Or(),n=De();let l=class zD extends a.ConnectionFactoryBase{constructor(h){super(),o.Contracts.throwIfNullOrUndefined(h,"convGetter"),this.privConvGetter=h}create(h,d,y){const g=h.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",m=this.privConvGetter().room,C=m.cognitiveSpeechRegion||h.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Region,""),_={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(C),path:zD.CTS_VIRT_MIC_PATH,region:encodeURIComponent(C)};_[f.QueryParameterNames.Language]=encodeURIComponent(h.parameters.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage,"")),_[f.QueryParameterNames.CtsMeetingId]=encodeURIComponent(m.roomId),_[f.QueryParameterNames.CtsDeviceId]=encodeURIComponent(m.participantId),_[f.QueryParameterNames.CtsIsParticipant]=m.isHost?"":"&"+f.QueryParameterNames.CtsIsParticipant;let b="";const R={},A={};if(g){b=h.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Endpoint),b||(b="wss://"+h.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),b=i.StringUtils.formatString(b,_);const O=new URL(b);O.searchParams.forEach((D,N)=>{R[N]=D}),new n.TranscriberConnectionFactory().setQueryParams(R,h,b),R[f.QueryParameterNames.CtsMeetingId]=_[f.QueryParameterNames.CtsMeetingId],R[f.QueryParameterNames.CtsDeviceId]=_[f.QueryParameterNames.CtsDeviceId],m.isHost||(R[f.QueryParameterNames.CtsIsParticipant]=""),f.QueryParameterNames.Format in R||(R[f.QueryParameterNames.Format]="simple"),O.searchParams.forEach((D,N)=>{O.searchParams.set(N,R[N]),delete R[N]}),b=O.toString()}else{const O=new n.TranslationConnectionFactory;b=O.getEndpointUrl(h,!0),b=i.StringUtils.formatString(b,_),O.setQueryParams(R,h,b)}A[s.HeaderNames.ConnectionId]=y,A[r.RestConfigBase.configParams.token]=m.token,d.token&&(A[d.headerName]=d.token);const w=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new r.WebsocketConnection(b,R,A,new n.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(h),w,y))}};return vc.ConversationTranslatorConnectionFactory=l,l.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",vc}var wE;function Rz(){return wE||(wE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranslator=r.SpeechState=void 0;const i=De(),o=bz(),p=ze(),s=Ve(),f=Ae(),a=ND(),n=pS();var l;(function(d){d[d.Inactive=0]="Inactive",d[d.Connecting=1]="Connecting",d[d.Connected=2]="Connected"})(l=r.SpeechState||(r.SpeechState={}));class u extends f.TranslationRecognizer{constructor(y,g,m,C){super(y,g,new o.ConversationTranslatorConnectionFactory(C)),this.privSpeechState=l.Inactive,m&&(this.privTranslator=m,this.sessionStarted=()=>{this.privSpeechState=l.Connected},this.sessionStopped=()=>{this.privSpeechState=l.Inactive},this.recognizing=(_,b)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,b)},this.recognized=async(_,b)=>{b.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(b.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,b)},this.canceled=async()=>{if(this.privSpeechState!==l.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=l.Inactive}})}get state(){return this.privSpeechState}set state(y){this.privSpeechState=y}set authentication(y){this.privReco.authentication=y}onConnection(){this.privSpeechState=l.Connected}async onCancelSpeech(){this.privSpeechState=l.Inactive,await this.cancelSpeech()}fireCancelEvent(y){try{if(this.privTranslator.canceled){const g=new n.ConversationTranslationCanceledEventArgs(f.CancellationReason.Error,y,f.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,g)}}catch{}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=l.Inactive}catch{}}}class h extends n.ConversationCommon{constructor(y){super(y),this.privErrors=i.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new f.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===l.Connected||this.privCTRecognizer.state===l.Connecting||this.privConversation.isMutedByHost)}onToken(y){this.privCTRecognizer.authentication=y}setServiceProperty(y,g){const m=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));m[y]=g,this.privProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(m))}joinConversationAsync(y,g,m,C,_){try{if(typeof y=="string"){s.Contracts.throwIfNullOrUndefined(y,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(g,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),_);let b=m;(b==null||b==="")&&(b=i.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=f.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(f.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(b),this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_RecoLanguage],b),this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.ConversationTranslator_Name],g);const R=[f.PropertyId.SpeechServiceConnection_Host,f.PropertyId.ConversationTranslator_Host,f.PropertyId.SpeechServiceConnection_Endpoint,f.PropertyId.SpeechServiceConnection_ProxyHostName,f.PropertyId.SpeechServiceConnection_ProxyPassword,f.PropertyId.SpeechServiceConnection_ProxyPort,f.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const w of R){const O=this.privProperties.getProperty(w);if(O){const P=typeof w=="string"?w:f.PropertyId[w];this.privSpeechTranslationConfig.setProperty(P,O)}}const A=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));for(const w of Object.keys(A))this.privSpeechTranslationConfig.setServiceProperty(w,A[w],f.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(y,g,b,w=>{w||this.handleError(new Error(this.privErrors.permissionDeniedConnect),_),this.privSpeechTranslationConfig.authorizationToken=w,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(C,_)},O=>{this.handleError(O,_)})},w=>{this.handleError(w,_)})}else typeof y=="object"?(s.Contracts.throwIfNullOrUndefined(y,this.privErrors.invalidArgs.replace("{arg}","conversation id")),s.Contracts.throwIfNullOrWhitespace(g,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(f.PropertyId.ConversationTranslator_Name,g),this.privConversation=y,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=y.config,this.handleCallback(m,C)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),C)}catch(b){this.handleError(b,typeof m=="string"?_:C)}}leaveConversationAsync(y,g){(0,p.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),y,g)}sendTextMessageAsync(y,g,m){try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}",y)),this.privConversation.sendTextMessageAsync(y,g,m)}catch(C){this.handleError(C,m)}}startTranscribingAsync(y,g){(0,p.marshalPromiseToCallbacks)((async()=>{try{s.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),s.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),g),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(m){throw this.privIsSpeaking=!1,await this.cancelSpeech(),m}})(),y,g)}stopTranscribingAsync(y,g){(0,p.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((m,C)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(m,C)})}catch{await this.cancelSpeech()}})(),y,g)}isDisposed(){return this.privIsDisposed}dispose(y,g,m){(0,p.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),g,m)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=f.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_Key],"");const y=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,y)}catch(y){throw await this.cancelSpeech(),y}}startContinuousRecognition(){return new Promise((y,g)=>{this.privCTRecognizer.startContinuousRecognitionAsync(y,g)})}}r.ConversationTranslator=h}(tv)),tv}var yc={},AE;function _z(){if(AE)return yc;AE=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.ConversationTranscriber=void 0;const r=De(),i=Cr(),o=ze(),p=Ve(),s=Ae();let f=class LD extends s.Recognizer{constructor(n,l){const u=n;p.Contracts.throwIfNull(u,"speechConfig"),p.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,u.properties,new r.ConversationTranscriberConnectionFactory,n.tokenCredential),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(n,l,u){const h=n;return l.properties.mergeTo(h.properties),new LD(n,u)}get endpointId(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){p.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,n)}get speechRecognitionLanguage(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return p.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple]?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),n,l)}stopTranscribingAsync(n,l){(0,o.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),n,l)}close(n,l){p.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,o.marshalPromiseToCallbacks)(this.dispose(!0),n,l)}async dispose(n){this.privDisposedRecognizer||(n&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(n))}createRecognizerConfig(n){return new r.RecognizerConfig(n,this.privProperties)}createServiceRecognizer(n,l,u,h){const d=u;return h.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(n,l,d,h,this)}};return yc.ConversationTranscriber=f,yc}var yi={},TE;function Ez(){if(TE)return yi;TE=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Participant=yi.User=void 0;const r=Ae();class i{constructor(s){this.privUserId=s}get userId(){return this.privUserId}}yi.User=i;class o{constructor(s,f,a,n,l,u,h,d){this.privId=s,this.privAvatar=f,this.privDisplayName=a,this.privIsHost=n,this.privIsMuted=l,this.privIsUsingTts=u,this.privPreferredLanguage=h,this.privVoice=d,this.privProperties=new r.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(s,f,a){return new o(s,"",s,!1,!1,!1,f,a)}}return yi.Participant=o,yi}var rv={},PE;function wz(){return PE||(PE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParticipantChangedReason=void 0,function(i){i[i.JoinedConversation=0]="JoinedConversation",i[i.LeftConversation=1]="LeftConversation",i[i.Updated=2]="Updated"}(r.ParticipantChangedReason||(r.ParticipantChangedReason={}))}(rv)),rv}var mi={},OE;function Az(){if(OE)return mi;OE=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.MeetingImpl=mi.Meeting=void 0;const r=De(),i=ze(),o=Ve(),p=Ae();let s=class{constructor(){}static createMeetingAsync(n,l,u,h){if(o.Contracts.throwIfNullOrUndefined(n,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),o.Contracts.throwIfNullOrUndefined(n.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),o.Contracts.throwIfNull(l,"meetingId"),l.length===0)throw new Error("meetingId cannot be empty");!n.subscriptionKey&&!n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceAuthorization_Token])&&o.Contracts.throwIfNullOrUndefined(n.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const d=new f(n,l);return(0,i.marshalPromiseToCallbacks)((async()=>{})(),u,h),d}};mi.Meeting=s;class f extends s{constructor(n,l){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=d=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,d)}catch{}},this.onDisconnected=d=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,d)}catch{}finally{this.close(!1)}},this.onCanceled=(d,y)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,y)}catch{}},this.onParticipantUpdateCommandReceived=(d,y)=>{try{const g=this.privParticipants.getParticipant(y.id);if(g!==void 0){switch(y.key){case r.ConversationTranslatorCommandTypes.changeNickname:g.displayName=y.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:g.isUsingTts=y.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:g.profanity=y.value;break;case r.ConversationTranslatorCommandTypes.setMute:g.isMuted=y.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:g.translateToLanguages=y.value;break}this.privParticipants.addOrUpdateParticipant(g),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,[this.toParticipant(g)],y.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(d,y)=>{try{this.privParticipants.participants.forEach(g=>g.isMuted=g.isHost?!1:y.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,this.toParticipants(!1),y.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(d,y)=>{try{const g=this.privParticipants.addOrUpdateParticipant(y.participant);g!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,[this.toParticipant(g)],y.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(d,y)=>{try{const g=this.privParticipants.getParticipant(y.participant.id);g!==void 0&&(this.privParticipants.deleteParticipant(y.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.LeftConversation,[this.toParticipant(g)],y.sessionId)))}catch{}},this.onTranslationReceived=(d,y)=>{try{switch(y.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new p.ConversationTranslationEventArgs(y.payload,void 0,y.sessionId));break}}catch{}},this.onParticipantsListReceived=(d,y)=>{try{if(y.sessionToken!==void 0&&y.sessionToken!==null&&(this.privRoom.token=y.sessionToken),this.privParticipants.participants=[...y.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),y.sessionId)),this.me.isHost){const g=this.privConversationTranslator?.properties.getProperty(p.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(d,y)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,y)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new p.PropertyCollection,this.privManager=new r.ConversationManager,n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage])||n.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=n.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=l,this.privConfig=n;const h=n;o.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const n=this.meetingId,l=this.participants.map(d=>({id:d.id,preferredLanguage:d.preferredLanguage,voice:d.voice})),u={};for(const d of r.ConversationConnectionConfig.transcriptionEventKeys){const y=this.properties.getProperty(d,"");y!==""&&(u[d]=y)}return{id:n,participants:l,meetingProperties:u}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(n){o.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),this.privToken=n}createMeetingAsync(n,l){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),l),this.privRoom=u,this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}startMeetingAsync(n,l){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}addParticipantAsync(n,l,u){o.Contracts.throwIfNullOrUndefined(n,"Participant"),(0,i.marshalPromiseToCallbacks)(this.addParticipantImplAsync(n),l,u)}joinMeetingAsync(n,l,u,h,d){try{o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","conversationId")),o.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,n,y=>{o.Contracts.throwIfNullOrUndefined(y,this.privErrors.permissionDeniedConnect),this.privRoom=y,this.privConfig.authorizationToken=y.cognitiveSpeechAuthToken,h&&h(y.cognitiveSpeechAuthToken)},y=>{this.handleError(y,d)})}catch(y){this.handleError(y,d)}}deleteMeetingAsync(n,l){(0,i.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),n,l)}async deleteMeetingImplAsync(){o.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(n,l){(0,i.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),n,l)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}muteAllParticipantsAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}muteParticipantAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!0),()=>{this.handleCallback(l,u)},d=>{this.handleError(d,u)})}catch(h){this.handleError(h,u)}}removeParticipantAsync(n,l,u){try{if(o.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&n.hasOwnProperty("id"))(0,i.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(n),l,u);else{o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let h="";typeof n=="string"?h=n:n.hasOwnProperty("id")?h=n.id:n.hasOwnProperty("userId")&&(h=n.userId),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(y=>y.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),()=>{this.handleCallback(l,u)},y=>{this.handleError(y,u)})}}catch(h){this.handleError(h,u)}}unlockMeetingAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}unmuteAllParticipantsAsync(n,l){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(n,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}unmuteParticipantAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==n&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(n,!1),()=>{this.handleCallback(l,u)},d=>{this.handleError(d,u)})}catch(h){this.handleError(h,u)}}sendTextMessageAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","message")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),n.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}setTranslatedLanguagesAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfArrayEmptyOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","languages")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}changeNicknameAsync(n,l,u){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),o.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),o.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(n),()=>{this.handleCallback(l,u)},h=>{this.handleError(h,u)})}catch(h){this.handleError(h,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(n){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await n.enforceAudioGating(),this.privTranscriberRecognizer=n,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const n=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:n,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(n){if(this.privParticipants.addOrUpdateParticipant(n)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[n],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(n){this.privParticipants.deleteParticipant(n.id);const l=this.meetingInfo;return l.participants=[n],this.privTranscriberRecognizer.pushMeetingEvent(l,"leave")}async close(n){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}n&&this.dispose()}handleCallback(n,l){if(n){try{n()}catch(u){l&&l(u)}n=void 0}}handleError(n,l){if(l)if(n instanceof Error){const u=n;l(u.name+": "+u.message)}else l(n)}toParticipants(n){const l=this.privParticipants.participants.map(u=>this.toParticipant(u));return n?l:l.filter(u=>u.isHost===!1)}toParticipant(n){return new p.Participant(n.id,n.avatar,n.displayName,n.isHost,n.isMuted,n.isUsingTts,n.preferredLanguage,n.voice)}getMuteAllCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMuteCommand(n,l){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),o.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:l})}getLockCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getEjectCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(n,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:n,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getChangeNicknameCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(n,"nickname"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:n,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:n})}getMessageCommand(n){return o.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),o.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),o.Contracts.throwIfNullOrWhitespace(n,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:n,type:r.ConversationTranslatorMessageTypes.instantMessage})}}return mi.MeetingImpl=f,mi}var mc={},IE;function Tz(){if(IE)return mc;IE=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.MeetingTranscriptionCanceledEventArgs=void 0;const r=gl();class i extends r.CancellationEventArgsBase{}return mc.MeetingTranscriptionCanceledEventArgs=i,mc}var Sc={},ME;function Pz(){if(ME)return Sc;ME=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.MeetingTranscriber=void 0;const r=De(),i=ze(),o=Ve(),p=Ae(),s=pS();let f=class{constructor(n){this.privAudioConfig=n,this.privProperties=new p.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return p.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){o.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,n)}joinMeetingAsync(n,l,u){const h=n;o.Contracts.throwIfNullOrUndefined(s.MeetingImpl,"Meeting"),this.privRecognizer=new r.TranscriberRecognizer(n.config,this.privAudioConfig),o.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,i.marshalPromiseToCallbacks)(h.connectTranscriberRecognizer(this.privRecognizer),l,u)}startTranscribingAsync(n,l){this.privRecognizer.startContinuousRecognitionAsync(n,l)}stopTranscribingAsync(n,l){this.privRecognizer.stopContinuousRecognitionAsync(n,l)}leaveMeetingAsync(n,l){this.privRecognizer.disconnectCallbacks(),(0,i.marshalPromiseToCallbacks)((async()=>{})(),n,l)}close(n,l){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),n,l)}async dispose(n){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),n&&(this.privDisposedRecognizer=!0))}};return Sc.MeetingTranscriber=f,Sc}var Cc={},DE;function Oz(){if(DE)return Cc;DE=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.ConversationTranscriptionResult=void 0;const r=Ae();let i=class extends r.RecognitionResult{constructor(p,s,f,a,n,l,u,h,d,y,g){super(p,s,f,a,n,l,u,d,y,g),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Cc.ConversationTranscriptionResult=i,Cc}var jE;function pS(){return jE||(jE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationTranscriptionResult=r.MeetingTranscriber=r.MeetingTranscriptionCanceledEventArgs=r.MeetingImpl=r.Meeting=r.ParticipantChangedReason=r.User=r.Participant=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.ConversationCommon=r.ConversationImpl=r.Conversation=void 0;var i=ND();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return i.Conversation}}),Object.defineProperty(r,"ConversationImpl",{enumerable:!0,get:function(){return i.ConversationImpl}});var o=vz();Object.defineProperty(r,"ConversationCommon",{enumerable:!0,get:function(){return o.ConversationCommon}});var p=gz();Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return p.ConversationExpirationEventArgs}});var s=yz();Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return s.ConversationParticipantsChangedEventArgs}});var f=mz();Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return f.ConversationTranslationCanceledEventArgs}});var a=Sz();Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var n=Cz();Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return n.ConversationTranslationResult}});var l=Rz();Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return l.ConversationTranslator}});var u=_z();Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var h=Ez();Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return h.Participant}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return h.User}});var d=wz();Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var y=Az();Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return y.Meeting}}),Object.defineProperty(r,"MeetingImpl",{enumerable:!0,get:function(){return y.MeetingImpl}});var g=Tz();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return g.MeetingTranscriptionCanceledEventArgs}});var m=Pz();Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var C=Oz();Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return C.ConversationTranscriptionResult}})}(ev)),ev}var Si={},kE;function dS(){if(kE)return Si;kE=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.SynthesisRequest=Si.Synthesizer=void 0;const r=De(),i=ze(),o=Ve(),p=Ae();let s=class xD{constructor(n){const l=n;o.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new i.Queue,this.tokenCredential=n.tokenCredential}get authorizationToken(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){o.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,n)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(p.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===r.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(n){const l={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),h=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthVoice,""),d=xD.XMLEncode(n);return this.autoDetectSourceLanguage?u="en-US":h=h||l[u],h&&(d=`<voice name='${h}'>${d}</voice>`),d=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${d}</speak>`,d}async dispose(n){this.privDisposed||(n&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const n=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(n.text,n.isSSML,n.requestId,n.cb,n.err,n.dataStream)}}createSynthesizerConfig(n){return new r.SynthesizerConfig(n,this.privProperties)}implCommonSynthesizeSetup(){let n=typeof window<"u"?"Browser":"Node",l="unknown",u="unknown";typeof navigator<"u"&&(n=n+"/"+navigator.platform,l=navigator.userAgent,u=navigator.appVersion);const h=this.createSynthesizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(n,l,u)))),d=this.privProperties.getProperty(p.PropertyId.SpeechServiceConnection_Key,void 0),y=d&&d!==""?new r.CognitiveSubscriptionKeyAuthentication(d):this.tokenCredential?new r.CognitiveTokenAuthentication(async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(g){throw g}},async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(g){throw g}}):new r.CognitiveTokenAuthentication(()=>{const g=this.privProperties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(g)},()=>{const g=this.privProperties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(g)});this.privAdapter=this.createSynthesisAdapter(y,this.privConnectionFactory,h),this.privRestAdapter=this.createRestSynthesisAdapter(y,h)}static XMLEncode(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Si.Synthesizer=s;class f{constructor(n,l,u,h,d,y){this.requestId=n,this.text=l,this.isSSML=u,this.cb=h,this.err=d,this.dataStream=y}}return Si.SynthesisRequest=f,Si}var bc={},NE;function Iz(){if(NE)return bc;NE=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.SpeechSynthesizer=void 0;const r=De(),i=ze(),o=pD(),p=vl(),s=wo(),f=Ve(),a=Ae(),n=dS();let l=class BD extends a.Synthesizer{constructor(h,d){super(h),d!==null&&(d===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=d),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(h,d,y){const g=h;return d.properties.mergeTo(g.properties),new BD(h,y)}speakTextAsync(h,d,y,g){this.speakImpl(h,!1,d,y,g)}speakSsmlAsync(h,d,y,g){this.speakImpl(h,!0,d,y,g)}async getVoicesAsync(h=""){return this.getVoices(h)}close(h,d){f.Contracts.throwIfDisposed(this.privDisposed),(0,i.marshalPromiseToCallbacks)(this.dispose(!0),h,d)}get internalData(){return this.privAdapter}createSynthesisAdapter(h,d,y){return new r.SpeechSynthesisAdapter(h,d,y,this,this.audioConfig)}createRestSynthesisAdapter(h,d){return new r.SynthesisRestAdapter(d,h)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=p.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(h,d,y,g,m){try{f.Contracts.throwIfDisposed(this.privDisposed);const C=(0,i.createNoDashGuid)();let _;m instanceof a.PushAudioOutputStreamCallback?_=new s.PushAudioOutputStreamImpl(m):m instanceof a.PullAudioOutputStream?_=m:m!==void 0?_=new o.AudioFileWriter(m):_=void 0,this.synthesisRequestQueue.enqueue(new n.SynthesisRequest(C,h,d,b=>{if(this.privSynthesizing=!1,y)try{y(b)}catch(R){g&&g(R)}y=void 0,this.adapterSpeak().catch(()=>{})},b=>{g&&g(b)},_)),this.adapterSpeak().catch(()=>{})}catch(C){if(g)if(C instanceof Error){const _=C;g(_.name+": "+_.message)}else g(C);this.dispose(!0).catch(()=>{})}}async getVoices(h){const d=(0,i.createNoDashGuid)(),y=await this.privRestAdapter.getVoicesList(d);if(y.ok&&Array.isArray(y.json)){let g=y.json;return h&&h.length>0&&(g=g.filter(m=>!!m.Locale&&m.Locale.toLowerCase()===h.toLowerCase())),new a.SynthesisVoicesResult(d,g,void 0)}else return new a.SynthesisVoicesResult(d,void 0,`Error: ${y.status}: ${y.statusText}`)}};return bc.SpeechSynthesizer=l,bc}var Rc={},qE;function Mz(){if(qE)return Rc;qE=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.SynthesisResult=void 0;let r=class{constructor(o,p,s,f){this.privResultId=o,this.privReason=p,this.privErrorDetails=s,this.privProperties=f}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return Rc.SynthesisResult=r,Rc}var _c={},zE;function Dz(){if(zE)return _c;zE=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.SpeechSynthesisResult=void 0;const r=Ae();let i=class extends r.SynthesisResult{constructor(p,s,f,a,n,l){super(p,s,a,n),this.privAudioData=f,this.privAudioDuration=l}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return _c.SpeechSynthesisResult=i,_c}var Ec={},LE;function jz(){if(LE)return Ec;LE=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.SpeechSynthesisEventArgs=void 0;let r=class{constructor(o){this.privResult=o}get result(){return this.privResult}};return Ec.SpeechSynthesisEventArgs=r,Ec}var wc={},xE;function kz(){if(xE)return wc;xE=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.SpeechSynthesisWordBoundaryEventArgs=void 0;let r=class{constructor(o,p,s,f,a,n){this.privAudioOffset=o,this.privDuration=p,this.privText=s,this.privWordLength=f,this.privTextOffset=a,this.privBoundaryType=n}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return wc.SpeechSynthesisWordBoundaryEventArgs=r,wc}var Ac={},BE;function Nz(){if(BE)return Ac;BE=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.SpeechSynthesisBookmarkEventArgs=void 0;let r=class{constructor(o,p){this.privAudioOffset=o,this.privText=p}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return Ac.SpeechSynthesisBookmarkEventArgs=r,Ac}var Tc={},UE;function qz(){if(UE)return Tc;UE=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.SpeechSynthesisVisemeEventArgs=void 0;let r=class{constructor(o,p,s){this.privAudioOffset=o,this.privVisemeId=p,this.privAnimation=s}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Tc.SpeechSynthesisVisemeEventArgs=r,Tc}var nv={},FE;function zz(){return FE||(FE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SpeechSynthesisBoundaryType=void 0,function(i){i.Word="WordBoundary",i.Punctuation="PunctuationBoundary",i.Sentence="SentenceBoundary"}(r.SpeechSynthesisBoundaryType||(r.SpeechSynthesisBoundaryType={}))}(nv)),nv}var Pc={},HE;function Lz(){if(HE)return Pc;HE=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.SynthesisVoicesResult=void 0;const r=Ae();let i=class extends r.SynthesisResult{constructor(p,s,f){if(Array.isArray(s)){super(p,r.ResultReason.VoicesListRetrieved,void 0,new r.PropertyCollection),this.privVoices=[];for(const a of s)this.privVoices.push(new r.VoiceInfo(a))}else super(p,r.ResultReason.Canceled,f||"Error information unavailable",new r.PropertyCollection)}get voices(){return this.privVoices}};return Pc.SynthesisVoicesResult=i,Pc}var iv={},VE;function xz(){return VE||(VE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=void 0;var i;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(i=r.SynthesisVoiceGender||(r.SynthesisVoiceGender={}));var o;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(o=r.SynthesisVoiceType||(r.SynthesisVoiceType={}));const p={[i[i.Neutral]]:i.Neutral,[i[i.Male]]:i.Male,[i[i.Female]]:i.Female},s={Neural:o.OnlineNeural,NeuralHD:o.OnlineNeuralHD};class f{constructor(n){if(this.privStyleList=[],n){if(this.privName=n.Name,this.privLocale=n.Locale,this.privShortName=n.ShortName,this.privLocaleName=n.LocaleName,this.privDisplayName=n.DisplayName,this.privLocalName=n.LocalName,this.privVoiceType=s[n.VoiceType]||o.Unknown,this.privGender=p[n.Gender]||i.Unknown,n.StyleList&&Array.isArray(n.StyleList))for(const l of n.StyleList)this.privStyleList.push(l);this.privSampleRateHertz=n.SampleRateHertz,this.privStatus=n.Status,n.ExtendedPropertyMap&&(this.privExtendedPropertyMap=n.ExtendedPropertyMap),this.privWordsPerMinute=n.WordsPerMinute,Array.isArray(n.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...n.SecondaryLocaleList]),Array.isArray(n.RolePlayList)&&(this.privRolePlayList=[...n.RolePlayList]),n.VoiceTag&&(this.privVoiceTag=n.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}r.VoiceInfo=f}(iv)),iv}var Oc={},WE;function Bz(){if(WE)return Oc;WE=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.SpeakerAudioDestination=void 0;const r=ze(),i=wo(),o=ji(),p=60*30,s={[o.AudioFormatTag.PCM]:"audio/wav",[o.AudioFormatTag.MuLaw]:"audio/x-wav",[o.AudioFormatTag.MP3]:"audio/mpeg",[o.AudioFormatTag.OGG_OPUS]:"audio/ogg",[o.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[o.AudioFormatTag.ALaw]:"audio/x-wav",[o.AudioFormatTag.FLAC]:"audio/flac",[o.AudioFormatTag.AMR_WB]:"audio/amr-wb",[o.AudioFormatTag.G722]:"audio/G722"};let f=class{constructor(n){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=n||(0,r.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(n,l,u){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(n),this.updateSourceBuffer().then(()=>{l&&l()},h=>{u&&u(h)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(n),this.privBytesReceived+=n.byteLength)}close(n,l){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{n&&n()},u=>{l&&l(u)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===o.AudioFormatTag.PCM||this.privFormat.formatTag===o.AudioFormatTag.MuLaw||this.privFormat.formatTag===o.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let u=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(u).then(()=>{u=this.privFormat.addHeader(u);const h=new Blob([u],{type:s[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(h),this.notifyPlayback().then(()=>{n&&n()},d=>{l&&l(d)})},h=>{l&&l(h)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(n){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=n;const l=s[this.privFormat.formatTag];l===void 0?console.warn(`Unknown mimeType for format ${o.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(l)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=p,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(l),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(u=>{r.Events.instance.onEvent(new r.BackgroundEvent(u))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(u=>{r.Events.instance.onEvent(new r.BackgroundEvent(u))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(u=>{r.Events.instance.onEvent(new r.BackgroundEvent(u))})):(console.warn(`Format ${o.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(n){this.privAudio&&(this.privAudio.volume=n)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(n,l){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{n&&n()},u=>{l&&l(u)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const n=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(n)}catch{this.privAudioBuffer.unshift(n),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return Oc.SpeakerAudioDestination=f,Oc}var Ic={},GE;function Uz(){if(GE)return Ic;GE=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.ConversationTranscriptionCanceledEventArgs=void 0;const r=gl();let i=class extends r.CancellationEventArgsBase{};return Ic.ConversationTranscriptionCanceledEventArgs=i,Ic}var Mc={},KE;function Fz(){if(KE)return Mc;KE=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.MeetingTranscriptionCanceledEventArgs=void 0;const r=gl();let i=class extends r.CancellationEventArgsBase{};return Mc.MeetingTranscriptionCanceledEventArgs=i,Mc}var ov={},$E;function Hz(){return $E||($E=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGradingSystem=void 0,function(i){i[i.FivePoint=1]="FivePoint",i[i.HundredMark=2]="HundredMark"}(r.PronunciationAssessmentGradingSystem||(r.PronunciationAssessmentGradingSystem={}))}(ov)),ov}var sv={},JE;function Vz(){return JE||(JE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PronunciationAssessmentGranularity=void 0,function(i){i[i.Phoneme=1]="Phoneme",i[i.Word=2]="Word",i[i.FullText=3]="FullText"}(r.PronunciationAssessmentGranularity||(r.PronunciationAssessmentGranularity={}))}(sv)),sv}var Dc={},QE;function Wz(){if(QE)return Dc;QE=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.PronunciationAssessmentConfig=void 0;const r=Ve(),i=Ae();let o=class UD{constructor(s,f=i.PronunciationAssessmentGradingSystem.FivePoint,a=i.PronunciationAssessmentGranularity.Phoneme,n=!1){r.Contracts.throwIfNullOrUndefined(s,"referenceText"),this.privProperties=new i.PropertyCollection,this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,s),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_GradingSystem,i.PronunciationAssessmentGradingSystem[f]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Granularity,i.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,String(n))}static fromJSON(s){r.Contracts.throwIfNullOrUndefined(s,"json");const f=new UD("");return f.privProperties=new i.PropertyCollection,f.properties.setProperty(i.PropertyId.PronunciationAssessment_Json,s),f}toJSON(){return this.updateJson(),this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Params)}applyTo(s){this.updateJson();const f=s.internalData;f.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,f.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(i.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,f.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(s){r.Contracts.throwIfNullOrWhitespace(s,"referenceText"),this.properties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,s)}set phonemeAlphabet(s){r.Contracts.throwIfNullOrWhitespace(s,"phonemeAlphabet"),this.privPhonemeAlphabet=s}set enableMiscue(s){const f=s?"true":"false";this.properties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,f)}get enableMiscue(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(s){this.privNBestPhonemeCount=s}set enableProsodyAssessment(s){this.privEnableProsodyAssessment=s}enableContentAssessmentWithTopic(s){this.privContentAssessmentTopic=s}get properties(){return this.privProperties}updateJson(){const s=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Json,"{}"),f=JSON.parse(s),a=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText);a&&(f.referenceText=a);const n=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_GradingSystem);n&&(f.gradingSystem=n);const l=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Granularity);l&&(f.granularity=l),this.privPhonemeAlphabet&&(f.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(f.nbestPhonemeCount=this.privNBestPhonemeCount),f.enableProsodyAssessment=this.privEnableProsodyAssessment,f.dimension="Comprehensive",this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue)&&(f.enableMiscue=this.enableMiscue),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Params,JSON.stringify(f))}};return Dc.PronunciationAssessmentConfig=o,Dc}var Ci={},YE;function Gz(){if(YE)return Ci;YE=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.PronunciationAssessmentResult=Ci.ContentAssessmentResult=void 0;const r=Ve(),i=Ae();class o{constructor(f){this.privPronJson=f}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Ci.ContentAssessmentResult=o;let p=class FD{constructor(f){const a=JSON.parse(f);r.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(f){r.Contracts.throwIfNullOrUndefined(f,"result");const a=f.properties.getProperty(i.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(a,"json"),new FD(a)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new o(this.detailResult)}};return Ci.PronunciationAssessmentResult=p,Ci}var jc={},XE;function Kz(){if(XE)return jc;XE=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.AvatarConfig=void 0;const r=Ve(),i=Ae();let o=class{constructor(s,f,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,r.Contracts.throwIfNullOrWhitespace(s,"character"),this.character=s,this.style=f,a===void 0&&(a=new i.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(s){this.privCustomized=s}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(s){this.privUseBuiltInVoice=s}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(s){this.privBackgroundColor=s}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(s){this.privBackgroundImage=s}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(s){this.privRemoteIceServers=s}};return jc.AvatarConfig=o,jc}var av={},ZE;function $z(){return ZE||(ZE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarEventArgs=r.AvatarEventTypes=void 0,function(o){o.SwitchedToSpeaking="SwitchedToSpeaking",o.SwitchedToIdle="SwitchedToIdle",o.SessionClosed="SessionClosed"}(r.AvatarEventTypes||(r.AvatarEventTypes={}));class i{constructor(p,s){this.privOffset=p,this.privDescription=s}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}r.AvatarEventArgs=i}(av)),av}var kc={},Nc={},ew;function HD(){if(ew)return Nc;ew=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.SpeechSynthesisConnectionFactory=void 0;const r=Mt(),i=Ae(),o=Or(),p=De(),s=Gt(),f=zn();let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(l,u,h){let d=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),g=o.ConnectionFactoryBase.getHostSuffix(y),m=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),C=m===void 0?"tts":"voice",_=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+y+"."+C+".speech"+g),b={},R={};if(u.token!==void 0&&u.token!==""&&(R[u.headerName]=u.token),R[s.HeaderNames.ConnectionId]=h,m!==void 0&&m!==""&&(!d||d.search(f.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(b[f.QueryParameterNames.CustomVoiceDeploymentId]=m),l.avatarEnabled&&(!d||d.search(f.QueryParameterNames.EnableAvatar)===-1)&&(b[f.QueryParameterNames.EnableAvatar]="true"),d){const w=new URL(d),O=w.pathname;(O===""||O==="/")&&(w.pathname=this.synthesisUri,d=await o.ConnectionFactoryBase.getRedirectUrlFromEndpoint(w.toString()))}d||(d=_+this.synthesisUri),l.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,d);const A=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(d,b,R,new p.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(l.parameters),A,h)}};return Nc.SpeechSynthesisConnectionFactory=a,Nc}var tw;function Jz(){if(tw)return kc;tw=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.AvatarSynthesizer=void 0;const r=HD(),i=De(),o=ze(),p=vl(),s=Ae(),f=Ve(),a=dS();let n=class extends s.Synthesizer{constructor(u,h){super(u),f.Contracts.throwIfNullOrUndefined(h,"avatarConfig"),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.privAvatarConfig=h,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=p.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(s.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){f.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,f.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const h=new o.Deferred;u.onicegatheringstatechange=()=>{o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,o.EventType.Debug)),u.iceGatheringState==="complete"&&(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering complete.",o.EventType.Info)),h.resolve())},u.onicecandidate=C=>{C.candidate?o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice candidate: "+C.candidate.candidate,o.EventType.Debug)):(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice candidate: complete",o.EventType.Debug)),h.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(o.Events.instance.onEvent(new o.PlatformEvent("peer connection: ice gathering timeout.",o.EventType.Warning)),h.resolve())},2e3);const d=await u.createOffer();await u.setLocalDescription(d),await h.promise,o.Events.instance.onEvent(new o.PlatformEvent("peer connection: got local SDP.",o.EventType.Info)),this.privProperties.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const y=await this.speak("",!1);if(y.reason!==s.ResultReason.SynthesizingAudioCompleted)return new s.SynthesisResult(y.resultId,y.reason,y.errorDetails,y.properties);const g=atob(y.properties.getProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP)),m=new RTCSessionDescription(JSON.parse(g));return await u.setRemoteDescription(m),new s.SynthesisResult(y.resultId,y.reason,void 0,y.properties)}async speakTextAsync(u){const h=await this.speak(u,!1);return new s.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async speakSsmlAsync(u){const h=await this.speak(u,!0);return new s.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return f.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,h,d){return new i.AvatarSynthesisAdapter(u,h,d,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,h){}createSynthesizerConfig(u){const h=super.createSynthesizerConfig(u);return h.avatarEnabled=!0,h}async speak(u,h){const d=(0,o.createNoDashGuid)(),y=new o.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(d,u,h,g=>{y.resolve(g),this.privSynthesizing=!1,this.adapterSpeak()},g=>{y.reject(g),this.privSynthesizing=!1})),this.adapterSpeak(),y.promise}};return kc.AvatarSynthesizer=n,kc}var bi={},rw;function Qz(){if(rw)return bi;rw=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.AvatarVideoFormat=bi.Coordinate=void 0;class r{constructor(p,s){this.x=p,this.y=s}}bi.Coordinate=r;let i=class{constructor(p="H264",s=2e6,f=1920,a=1080){this.codec=p,this.bitrate=s,this.width=f,this.height=a}setCropRange(p,s){this.cropRange={bottomRight:s,topLeft:p}}};return bi.AvatarVideoFormat=i,bi}var qc={},nw;function Yz(){if(nw)return qc;nw=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.AvatarWebRTCConnectionResult=void 0;const r=Ae();let i=class extends r.SynthesisResult{constructor(p,s,f,a,n){super(s,f,a,n),this.privSDPAnswer=p}get SDPAnswer(){return this.privSDPAnswer}};return qc.AvatarWebRTCConnectionResult=i,qc}var zc={},iw;function Xz(){if(iw)return zc;iw=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.Diagnostics=void 0;const r=Mt(),i=ze();let o=class{static SetLoggingLevel(s){this.privListener=new r.ConsoleLoggingListener(s),i.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(s){if(typeof window>"u")this.privListener&&(this.privListener.logPath=s);else throw new Error("File system logging not available in browser.")}static set onLogOutput(s){this.privListener&&(this.privListener.logCallback=s)}};return zc.Diagnostics=o,o.privListener=void 0,zc}var ow;function Ae(){return ow||(ow=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionEventArgs=r.CancellationErrorCode=r.CancellationDetails=r.CancellationDetailsBase=r.IntentRecognitionCanceledEventArgs=r.TranslationRecognitionCanceledEventArgs=r.NoMatchDetails=r.NoMatchReason=r.Translations=r.TranslationRecognizer=r.VoiceProfileType=r.IntentRecognizer=r.SpeechRecognizer=r.Recognizer=r.PropertyId=r.PropertyCollection=r.SpeechTranslationConfigImpl=r.SpeechTranslationConfig=r.SpeechConfigImpl=r.SpeechConfig=r.ResultReason=r.TranslationSynthesisResult=r.TranslationRecognitionResult=r.TranslationSynthesisEventArgs=r.TranslationRecognitionEventArgs=r.SpeechRecognitionCanceledEventArgs=r.MeetingTranscriptionEventArgs=r.ConversationTranscriptionEventArgs=r.SpeechRecognitionEventArgs=r.LanguageUnderstandingModel=r.IntentRecognitionResult=r.SpeechRecognitionResult=r.RecognitionResult=r.IntentRecognitionEventArgs=r.OutputFormat=r.RecognitionEventArgs=r.SessionEventArgs=r.KeywordRecognitionModel=r.PushAudioOutputStreamCallback=r.PullAudioInputStreamCallback=r.CancellationReason=r.PushAudioOutputStream=r.PullAudioOutputStream=r.AudioOutputStream=r.PushAudioInputStream=r.PullAudioInputStream=r.AudioInputStream=r.AudioFormatTag=r.AudioStreamFormat=r.AudioConfig=void 0,r.SpeechSynthesisEventArgs=r.SpeechSynthesisResult=r.SynthesisResult=r.SpeechSynthesizer=r.SpeechSynthesisOutputFormat=r.Synthesizer=r.User=r.ParticipantChangedReason=r.Participant=r.MeetingTranscriber=r.Meeting=r.ConversationTranscriptionResult=r.ConversationTranscriber=r.ConversationTranslator=r.ConversationTranslationResult=r.ConversationTranslationEventArgs=r.ConversationTranslationCanceledEventArgs=r.ConversationParticipantsChangedEventArgs=r.ConversationExpirationEventArgs=r.Conversation=r.SpeakerRecognitionCancellationDetails=r.SpeakerRecognitionResultType=r.SpeakerRecognitionResult=r.SourceLanguageConfig=r.AutoDetectSourceLanguageResult=r.AutoDetectSourceLanguageConfig=r.SpeakerVerificationModel=r.SpeakerIdentificationModel=r.SpeakerRecognizer=r.VoiceProfileClient=r.VoiceProfilePhraseResult=r.VoiceProfileCancellationDetails=r.VoiceProfileResult=r.VoiceProfileEnrollmentCancellationDetails=r.VoiceProfileEnrollmentResult=r.VoiceProfile=r.ConnectionMessage=r.ConnectionMessageEventArgs=r.BaseAudioPlayer=r.ProfanityOption=r.ServicePropertyChannel=r.TurnStatusReceivedEventArgs=r.ActivityReceivedEventArgs=r.DialogServiceConnector=r.CustomCommandsConfig=r.BotFrameworkConfig=r.DialogServiceConfig=r.PhraseListGrammar=r.Connection=r.ServiceEventArgs=void 0,r.LogLevel=r.Diagnostics=r.AvatarWebRTCConnectionResult=r.Coordinate=r.AvatarVideoFormat=r.AvatarSynthesizer=r.AvatarEventArgs=r.AvatarConfig=r.LanguageIdMode=r.PronunciationAssessmentResult=r.PronunciationAssessmentConfig=r.PronunciationAssessmentGranularity=r.PronunciationAssessmentGradingSystem=r.MeetingTranscriptionCanceledEventArgs=r.ConversationTranscriptionCanceledEventArgs=r.SpeakerAudioDestination=r.VoiceInfo=r.SynthesisVoiceType=r.SynthesisVoiceGender=r.SynthesisVoicesResult=r.SpeechSynthesisBoundaryType=r.SpeechSynthesisVisemeEventArgs=r.SpeechSynthesisBookmarkEventArgs=r.SpeechSynthesisWordBoundaryEventArgs=void 0;var i=yD();Object.defineProperty(r,"AudioConfig",{enumerable:!0,get:function(){return i.AudioConfig}});var o=ji();Object.defineProperty(r,"AudioStreamFormat",{enumerable:!0,get:function(){return o.AudioStreamFormat}}),Object.defineProperty(r,"AudioFormatTag",{enumerable:!0,get:function(){return o.AudioFormatTag}});var p=dD();Object.defineProperty(r,"AudioInputStream",{enumerable:!0,get:function(){return p.AudioInputStream}}),Object.defineProperty(r,"PullAudioInputStream",{enumerable:!0,get:function(){return p.PullAudioInputStream}}),Object.defineProperty(r,"PushAudioInputStream",{enumerable:!0,get:function(){return p.PushAudioInputStream}});var s=wo();Object.defineProperty(r,"AudioOutputStream",{enumerable:!0,get:function(){return s.AudioOutputStream}}),Object.defineProperty(r,"PullAudioOutputStream",{enumerable:!0,get:function(){return s.PullAudioOutputStream}}),Object.defineProperty(r,"PushAudioOutputStream",{enumerable:!0,get:function(){return s.PushAudioOutputStream}});var f=fq();Object.defineProperty(r,"CancellationReason",{enumerable:!0,get:function(){return f.CancellationReason}});var a=hq();Object.defineProperty(r,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var n=pq();Object.defineProperty(r,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return n.PushAudioOutputStreamCallback}});var l=dq();Object.defineProperty(r,"KeywordRecognitionModel",{enumerable:!0,get:function(){return l.KeywordRecognitionModel}});var u=vq();Object.defineProperty(r,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var h=gq();Object.defineProperty(r,"RecognitionEventArgs",{enumerable:!0,get:function(){return h.RecognitionEventArgs}});var d=yq();Object.defineProperty(r,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var y=mq();Object.defineProperty(r,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return y.IntentRecognitionEventArgs}});var g=Sq();Object.defineProperty(r,"RecognitionResult",{enumerable:!0,get:function(){return g.RecognitionResult}});var m=Cq();Object.defineProperty(r,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var C=bq();Object.defineProperty(r,"IntentRecognitionResult",{enumerable:!0,get:function(){return C.IntentRecognitionResult}});var _=Rq();Object.defineProperty(r,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return _.LanguageUnderstandingModel}});var b=_q();Object.defineProperty(r,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionEventArgs}}),Object.defineProperty(r,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return b.ConversationTranscriptionEventArgs}}),Object.defineProperty(r,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return b.MeetingTranscriptionEventArgs}});var R=Eq();Object.defineProperty(r,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return R.SpeechRecognitionCanceledEventArgs}});var A=wq();Object.defineProperty(r,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return A.TranslationRecognitionEventArgs}});var w=Aq();Object.defineProperty(r,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return w.TranslationSynthesisEventArgs}});var O=SD();Object.defineProperty(r,"TranslationRecognitionResult",{enumerable:!0,get:function(){return O.TranslationRecognitionResult}});var P=Tq();Object.defineProperty(r,"TranslationSynthesisResult",{enumerable:!0,get:function(){return P.TranslationSynthesisResult}});var D=Pq();Object.defineProperty(r,"ResultReason",{enumerable:!0,get:function(){return D.ResultReason}});var N=Oq();Object.defineProperty(r,"SpeechConfig",{enumerable:!0,get:function(){return N.SpeechConfig}}),Object.defineProperty(r,"SpeechConfigImpl",{enumerable:!0,get:function(){return N.SpeechConfigImpl}});var $=Iq();Object.defineProperty(r,"SpeechTranslationConfig",{enumerable:!0,get:function(){return $.SpeechTranslationConfig}}),Object.defineProperty(r,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return $.SpeechTranslationConfigImpl}});var Y=bD();Object.defineProperty(r,"PropertyCollection",{enumerable:!0,get:function(){return Y.PropertyCollection}});var oe=fS();Object.defineProperty(r,"PropertyId",{enumerable:!0,get:function(){return oe.PropertyId}});var ae=Mq();Object.defineProperty(r,"Recognizer",{enumerable:!0,get:function(){return ae.Recognizer}});var fe=Dq();Object.defineProperty(r,"SpeechRecognizer",{enumerable:!0,get:function(){return fe.SpeechRecognizer}});var se=jq();Object.defineProperty(r,"IntentRecognizer",{enumerable:!0,get:function(){return se.IntentRecognizer}});var B=kq();Object.defineProperty(r,"VoiceProfileType",{enumerable:!0,get:function(){return B.VoiceProfileType}});var j=Nq();Object.defineProperty(r,"TranslationRecognizer",{enumerable:!0,get:function(){return j.TranslationRecognizer}});var J=qq();Object.defineProperty(r,"Translations",{enumerable:!0,get:function(){return J.Translations}});var Z=zq();Object.defineProperty(r,"NoMatchReason",{enumerable:!0,get:function(){return Z.NoMatchReason}});var G=Lq();Object.defineProperty(r,"NoMatchDetails",{enumerable:!0,get:function(){return G.NoMatchDetails}});var z=xq();Object.defineProperty(r,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return z.TranslationRecognitionCanceledEventArgs}});var F=Bq();Object.defineProperty(r,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.IntentRecognitionCanceledEventArgs}});var te=PD();Object.defineProperty(r,"CancellationDetailsBase",{enumerable:!0,get:function(){return te.CancellationDetailsBase}});var le=Uq();Object.defineProperty(r,"CancellationDetails",{enumerable:!0,get:function(){return le.CancellationDetails}});var pe=Fq();Object.defineProperty(r,"CancellationErrorCode",{enumerable:!0,get:function(){return pe.CancellationErrorCode}});var _e=Hq();Object.defineProperty(r,"ConnectionEventArgs",{enumerable:!0,get:function(){return _e.ConnectionEventArgs}});var Ee=Vq();Object.defineProperty(r,"ServiceEventArgs",{enumerable:!0,get:function(){return Ee.ServiceEventArgs}});var Ne=wD();Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return Ne.Connection}});var Pe=Wq();Object.defineProperty(r,"PhraseListGrammar",{enumerable:!0,get:function(){return Pe.PhraseListGrammar}});var Le=hS();Object.defineProperty(r,"DialogServiceConfig",{enumerable:!0,get:function(){return Le.DialogServiceConfig}});var qe=Gq();Object.defineProperty(r,"BotFrameworkConfig",{enumerable:!0,get:function(){return qe.BotFrameworkConfig}});var lt=Kq();Object.defineProperty(r,"CustomCommandsConfig",{enumerable:!0,get:function(){return lt.CustomCommandsConfig}});var pt=Jq();Object.defineProperty(r,"DialogServiceConnector",{enumerable:!0,get:function(){return pt.DialogServiceConnector}});var de=Qq();Object.defineProperty(r,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return de.ActivityReceivedEventArgs}});var ie=Xq();Object.defineProperty(r,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return ie.TurnStatusReceivedEventArgs}});var we=Zq();Object.defineProperty(r,"ServicePropertyChannel",{enumerable:!0,get:function(){return we.ServicePropertyChannel}});var Me=ez();Object.defineProperty(r,"ProfanityOption",{enumerable:!0,get:function(){return Me.ProfanityOption}});var Oe=tz();Object.defineProperty(r,"BaseAudioPlayer",{enumerable:!0,get:function(){return Oe.BaseAudioPlayer}});var K=rz();Object.defineProperty(r,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return K.ConnectionMessageEventArgs}});var Q=ED();Object.defineProperty(r,"ConnectionMessage",{enumerable:!0,get:function(){return Q.ConnectionMessage}});var x=nz();Object.defineProperty(r,"VoiceProfile",{enumerable:!0,get:function(){return x.VoiceProfile}});var M=iz();Object.defineProperty(r,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return M.VoiceProfileEnrollmentResult}}),Object.defineProperty(r,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return M.VoiceProfileEnrollmentCancellationDetails}});var k=oz();Object.defineProperty(r,"VoiceProfileResult",{enumerable:!0,get:function(){return k.VoiceProfileResult}}),Object.defineProperty(r,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return k.VoiceProfileCancellationDetails}});var H=sz();Object.defineProperty(r,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return H.VoiceProfilePhraseResult}});var ne=az();Object.defineProperty(r,"VoiceProfileClient",{enumerable:!0,get:function(){return ne.VoiceProfileClient}});var Se=cz();Object.defineProperty(r,"SpeakerRecognizer",{enumerable:!0,get:function(){return Se.SpeakerRecognizer}});var Re=uz();Object.defineProperty(r,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Re.SpeakerIdentificationModel}});var L=lz();Object.defineProperty(r,"SpeakerVerificationModel",{enumerable:!0,get:function(){return L.SpeakerVerificationModel}});var T=fz();Object.defineProperty(r,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return T.AutoDetectSourceLanguageConfig}});var I=hz();Object.defineProperty(r,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return I.AutoDetectSourceLanguageResult}});var V=pz();Object.defineProperty(r,"SourceLanguageConfig",{enumerable:!0,get:function(){return V.SourceLanguageConfig}});var W=dz();Object.defineProperty(r,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return W.SpeakerRecognitionResult}}),Object.defineProperty(r,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return W.SpeakerRecognitionResultType}}),Object.defineProperty(r,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return W.SpeakerRecognitionCancellationDetails}});var ee=pS();Object.defineProperty(r,"Conversation",{enumerable:!0,get:function(){return ee.Conversation}}),Object.defineProperty(r,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ee.ConversationExpirationEventArgs}}),Object.defineProperty(r,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ee.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(r,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ee.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(r,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ee.ConversationTranslationEventArgs}}),Object.defineProperty(r,"ConversationTranslationResult",{enumerable:!0,get:function(){return ee.ConversationTranslationResult}}),Object.defineProperty(r,"ConversationTranslator",{enumerable:!0,get:function(){return ee.ConversationTranslator}}),Object.defineProperty(r,"ConversationTranscriber",{enumerable:!0,get:function(){return ee.ConversationTranscriber}}),Object.defineProperty(r,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ee.ConversationTranscriptionResult}}),Object.defineProperty(r,"Meeting",{enumerable:!0,get:function(){return ee.Meeting}}),Object.defineProperty(r,"MeetingTranscriber",{enumerable:!0,get:function(){return ee.MeetingTranscriber}}),Object.defineProperty(r,"Participant",{enumerable:!0,get:function(){return ee.Participant}}),Object.defineProperty(r,"ParticipantChangedReason",{enumerable:!0,get:function(){return ee.ParticipantChangedReason}}),Object.defineProperty(r,"User",{enumerable:!0,get:function(){return ee.User}});var ue=dS();Object.defineProperty(r,"Synthesizer",{enumerable:!0,get:function(){return ue.Synthesizer}});var Te=vD();Object.defineProperty(r,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Te.SpeechSynthesisOutputFormat}});var Ie=Iz();Object.defineProperty(r,"SpeechSynthesizer",{enumerable:!0,get:function(){return Ie.SpeechSynthesizer}});var Fe=Mz();Object.defineProperty(r,"SynthesisResult",{enumerable:!0,get:function(){return Fe.SynthesisResult}});var We=Dz();Object.defineProperty(r,"SpeechSynthesisResult",{enumerable:!0,get:function(){return We.SpeechSynthesisResult}});var Ke=jz();Object.defineProperty(r,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Ke.SpeechSynthesisEventArgs}});var ur=kz();Object.defineProperty(r,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return ur.SpeechSynthesisWordBoundaryEventArgs}});var br=Nz();Object.defineProperty(r,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return br.SpeechSynthesisBookmarkEventArgs}});var zt=qz();Object.defineProperty(r,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return zt.SpeechSynthesisVisemeEventArgs}});var Lt=zz();Object.defineProperty(r,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Lt.SpeechSynthesisBoundaryType}});var cn=Lz();Object.defineProperty(r,"SynthesisVoicesResult",{enumerable:!0,get:function(){return cn.SynthesisVoicesResult}});var lr=xz();Object.defineProperty(r,"SynthesisVoiceGender",{enumerable:!0,get:function(){return lr.SynthesisVoiceGender}}),Object.defineProperty(r,"SynthesisVoiceType",{enumerable:!0,get:function(){return lr.SynthesisVoiceType}}),Object.defineProperty(r,"VoiceInfo",{enumerable:!0,get:function(){return lr.VoiceInfo}});var un=Bz();Object.defineProperty(r,"SpeakerAudioDestination",{enumerable:!0,get:function(){return un.SpeakerAudioDestination}});var Do=Uz();Object.defineProperty(r,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Do.ConversationTranscriptionCanceledEventArgs}});var jo=Fz();Object.defineProperty(r,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return jo.MeetingTranscriptionCanceledEventArgs}});var Rl=Hz();Object.defineProperty(r,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Rl.PronunciationAssessmentGradingSystem}});var ih=Vz();Object.defineProperty(r,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ih.PronunciationAssessmentGranularity}});var Ir=Wz();Object.defineProperty(r,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Ir.PronunciationAssessmentConfig}});var At=Gz();Object.defineProperty(r,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return At.PronunciationAssessmentResult}});var xt=jD();Object.defineProperty(r,"LanguageIdMode",{enumerable:!0,get:function(){return xt.LanguageIdMode}});var ln=Kz();Object.defineProperty(r,"AvatarConfig",{enumerable:!0,get:function(){return ln.AvatarConfig}});var ko=$z();Object.defineProperty(r,"AvatarEventArgs",{enumerable:!0,get:function(){return ko.AvatarEventArgs}});var oh=Jz();Object.defineProperty(r,"AvatarSynthesizer",{enumerable:!0,get:function(){return oh.AvatarSynthesizer}});var _l=Qz();Object.defineProperty(r,"AvatarVideoFormat",{enumerable:!0,get:function(){return _l.AvatarVideoFormat}}),Object.defineProperty(r,"Coordinate",{enumerable:!0,get:function(){return _l.Coordinate}});var El=Yz();Object.defineProperty(r,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return El.AvatarWebRTCConnectionResult}});var xn=Xz();Object.defineProperty(r,"Diagnostics",{enumerable:!0,get:function(){return xn.Diagnostics}});var No=fD();Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return No.LogLevel}})}(Bd)),Bd}var sw;function Zz(){if(sw)return fa;sw=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.ProxyInfo=void 0;const r=Ae();let i=class VD{constructor(p,s,f,a){this.privProxyHostName=p,this.privProxyPort=s,this.privProxyUserName=f,this.privProxyPassword=a}static fromParameters(p){return new VD(p.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(p.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),p.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),p.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(p){return this.fromParameters(p.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return fa.ProxyInfo=i,fa}var Lc={},cv,aw;function eL(){if(aw)return cv;aw=1;const r=new Set(["json","buffer","string"]);return cv=i=>(...o)=>{const p=new Set;let s,f,a,n="";return o.forEach(l=>{if(typeof l=="string")if(l.toUpperCase()===l)if(s){const u=`Can't set method to ${l}, already set to ${s}.`;throw new Error(u)}else s=l;else if(l.startsWith("http:")||l.startsWith("https:"))n=l;else if(r.has(l))f=l;else throw new Error(`Unknown encoding, ${l}`);else if(typeof l=="number")p.add(l);else if(typeof l=="object")if(Array.isArray(l)||l instanceof Set)l.forEach(u=>p.add(u));else{if(a)throw new Error("Cannot set headers twice.");a=l}else throw new Error(`Unknown type: ${typeof l}`)}),s||(s="GET"),p.size===0&&p.add(200),i(p,s,f,a,n)},cv}var uv,cw;function tL(){if(cw)return uv;cw=1;const r=eL();class i extends Error{constructor(s,...f){super(...f),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="StatusError",this.message=s.statusMessage,this.statusCode=s.status,this.res=s,this.json=s.json.bind(s),this.text=s.text.bind(s),this.arrayBuffer=s.arrayBuffer.bind(s);let a;Object.defineProperty(this,"responseBody",{get:()=>(a||(a=this.arrayBuffer()),a)}),this.headers={};for(const[l,u]of s.headers.entries())this.headers[l.toLowerCase()]=u}}return uv=r((p,s,f,a,n)=>async(l,u,h={})=>{l=n+(l||"");let d=new URL(l);if(a||(a={}),d.username&&(a.Authorization="Basic "+btoa(d.username+":"+d.password),d=new URL(d.protocol+"//"+d.host+d.pathname+d.search)),d.protocol!=="https:"&&d.protocol!=="http:")throw new Error(`Unknown protocol, ${d.protocol}`);if(u&&!(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="string"))if(typeof u=="object")u=JSON.stringify(u),a["Content-Type"]="application/json";else throw new Error("Unknown body type.");h=new Headers({...a||{},...h});const y=await fetch(d,{method:s,headers:h,body:u});if(y.statusCode=y.status,!p.has(y.status))throw new i(y);return f==="json"?y.json():f==="buffer"?y.arrayBuffer():f==="string"?y.text():y}),uv}var uw;function rL(){return uw||(uw=1,function(r){var i=Lc&&Lc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.RestMessageAdapter=r.RestRequestType=void 0;const o=i(tL()),p=ze();var s;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(s=r.RestRequestType||(r.RestRequestType={}));let f=class{constructor(n){if(!n)throw new p.ArgumentNullError("configParams");this.privHeaders=n.headers,this.privIgnoreCache=n.ignoreCache}static extractHeaderValue(n,l){let u="";try{const h=l.trim().split(/[\r\n]+/),d={};h.forEach(y=>{const g=y.split(": "),m=g.shift().toLowerCase(),C=g.join(": ");d[m]=C}),u=d[n.toLowerCase()]}catch{}return u}set options(n){this.privHeaders=n.headers,this.privIgnoreCache=n.ignoreCache}setHeaders(n,l){this.privHeaders[n]=l}request(n,l,u={},h=null){const d=new p.Deferred,y=n===s.File?"POST":n,g=(C,_={})=>{const b=C;return{data:JSON.stringify(_),headers:JSON.stringify(C.headers),json:_,ok:C.statusCode>=200&&C.statusCode<300,status:C.statusCode,statusText:_.error?_.error.message:b.statusText?b.statusText:b.statusMessage}},m=C=>{const _=(0,o.default)(l,y,this.privHeaders,200,201,202,204,400,401,402,403,404),b=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;_(b,C).then(async R=>{if(n===s.Delete||R.statusCode===204)d.resolve(g(R));else try{const A=await R.json();d.resolve(g(R,A))}catch{d.resolve(g(R))}}).catch(R=>{d.reject(R)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),n===s.Post&&h&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),m(h),d.promise}queryParams(n={}){return Object.keys(n).map(l=>encodeURIComponent(l)+"="+encodeURIComponent(n[l])).join("&")}};r.RestMessageAdapter=f}(Lc)),Lc}var xc={},lw;function WD(){if(lw)return xc;lw=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.RestConfigBase=void 0;let r=class Hf{static get requestOptions(){return Hf.privDefaultRequestOptions}static get configParams(){return Hf.privDefaultParams}static get restErrors(){return Hf.privRestErrors}};return xc.RestConfigBase=r,r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},xc}var fw;function Mt(){return fw||(fw=1,function(r){var i=ci&&ci.__createBinding||(Object.create?function(p,s,f,a){a===void 0&&(a=f),Object.defineProperty(p,a,{enumerable:!0,get:function(){return s[f]}})}:function(p,s,f,a){a===void 0&&(a=f),p[a]=s[f]}),o=ci&&ci.__exportStar||function(p,s){for(var f in p)f!=="default"&&!Object.prototype.hasOwnProperty.call(s,f)&&i(s,p,f)};Object.defineProperty(r,"__esModule",{value:!0}),o(iq(),r),o(oq(),r),o(sq(),r),o(aq(),r),o(cq(),r),o(uq(),r),o(hD(),r),o(lq(),r),o(Zz(),r),o(rL(),r),o(WD(),r)}(ci)),ci}var hw;function nL(){if(hw)return oa;hw=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.IntentConnectionFactory=void 0;const r=Mt(),i=Ae(),o=Or(),p=De(),s=Gt();let f=class extends o.ConnectionFactoryBase{create(n,l,u){let h=n.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const m=n.parameters.getProperty(i.PropertyId.SpeechServiceConnection_IntentRegion),C=o.ConnectionFactoryBase.getHostSuffix(m);h=n.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".sr.speech"+C)+"/speech/recognition/interactive/cognitiveservices/v1"}const d={format:"simple",language:n.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(n,d,h);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[s.HeaderNames.ConnectionId]=u,n.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,h);const g=n.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(h,d,y,new p.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(n),g,u))}getSpeechRegionFromIntentRegion(n){switch(n){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return n}}};return oa.IntentConnectionFactory=f,oa}var Ri={},pw;function iL(){if(pw)return Ri;pw=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.VoiceProfileConnectionFactory=Ri.SpeakerRecognitionConnectionFactory=void 0;const r=Mt(),i=Ae(),o=Or(),p=De(),s=Gt();class f extends o.ConnectionFactoryBase{create(u,h,d,y){let g=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!g){const b=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region),R=o.ConnectionFactoryBase.getHostSuffix(b),A=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,`wss://${b}.spr-frontend.speech${R}`),w=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");g=`${A}/speaker/ws/${this.scenarioToPath(w)}/${d}`}const m={format:"simple",language:u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,m,g);const C={};h.token!==void 0&&h.token!==""&&(C[h.headerName]=h.token),C[s.HeaderNames.ConnectionId]=y,C[s.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,g);const _=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(g,m,C,new p.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),_,y))}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends f{create(u,h,d){return super.create(u,h,"recognition",d)}};Ri.SpeakerRecognitionConnectionFactory=a;class n extends f{create(u,h,d){return super.create(u,h,"profile",d)}}return Ri.VoiceProfileConnectionFactory=n,Ri}var lv={},dw;function vS(){return dw||(dw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionEndedEvent=r.RecognitionCompletionStatus=r.RecognitionStartedEvent=r.ConnectingToServiceEvent=r.ListeningStartedEvent=r.RecognitionTriggeredEvent=r.SpeechRecognitionEvent=void 0;const i=ze();class o extends i.PlatformEvent{constructor(h,d,y,g=i.EventType.Info){super(h,g),this.privRequestId=d,this.privSessionId=y}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}r.SpeechRecognitionEvent=o;class p extends o{constructor(h,d,y,g){super("RecognitionTriggeredEvent",h,d),this.privAudioSourceId=y,this.privAudioNodeId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.RecognitionTriggeredEvent=p;class s extends o{constructor(h,d,y,g){super("ListeningStartedEvent",h,d),this.privAudioSourceId=y,this.privAudioNodeId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}r.ListeningStartedEvent=s;class f extends o{constructor(h,d,y){super("ConnectingToServiceEvent",h,y),this.privAuthFetchEventid=d}get authFetchEventid(){return this.privAuthFetchEventid}}r.ConnectingToServiceEvent=f;class a extends o{constructor(h,d,y,g,m){super("RecognitionStartedEvent",h,m),this.privAudioSourceId=d,this.privAudioNodeId=y,this.privAuthFetchEventId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}r.RecognitionStartedEvent=a;var n;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(n=r.RecognitionCompletionStatus||(r.RecognitionCompletionStatus={}));class l extends o{constructor(h,d,y,g,m,C,_,b){super("RecognitionEndedEvent",h,m,_===n.Success?i.EventType.Info:i.EventType.Error),this.privAudioSourceId=d,this.privAudioNodeId=y,this.privAuthFetchEventId=g,this.privStatus=_,this.privError=b,this.privServiceTag=C}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}r.RecognitionEndedEvent=l}(lv)),lv}var Bc={},Uc={},vw;function Ao(){if(vw)return Uc;vw=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.SpeechConnectionMessage=void 0;const r=ze(),i=Gt();class o extends r.ConnectionMessage{constructor(s,f,a,n,l,u,h,d){if(!f)throw new r.ArgumentNullError("path");if(!a)throw new r.ArgumentNullError("requestId");const y={};if(y[i.HeaderNames.Path]=f,y[i.HeaderNames.RequestId]=a,y[i.HeaderNames.RequestTimestamp]=new Date().toISOString(),n&&(y[i.HeaderNames.ContentType]=n),u&&(y[i.HeaderNames.RequestStreamId]=u),h)for(const g in h)g&&(y[g]=h[g]);d?super(s,l,y,d):super(s,l,y),this.privPath=f,this.privRequestId=a,this.privContentType=n,this.privStreamId=u,this.privAdditionalHeaders=h}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(s){let f=null,a=null,n=null,l=null;const u={};if(s.headers)for(const h in s.headers)h&&(h.toLowerCase()===i.HeaderNames.Path.toLowerCase()?f=s.headers[h]:h.toLowerCase()===i.HeaderNames.RequestId.toLowerCase()?a=s.headers[h]:h.toLowerCase()===i.HeaderNames.ContentType.toLowerCase()?n=s.headers[h]:h.toLowerCase()===i.HeaderNames.RequestStreamId.toLowerCase()?l=s.headers[h]:u[h]=s.headers[h]);return new o(s.messageType,f,a,n,s.body,l,u,s.id)}}return Uc.SpeechConnectionMessage=o,Uc}var fv={},gw;function oL(){return gw||(gw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SegmentationMode=void 0,function(i){i.Normal="Normal",i.Disabled="Disabled",i.Custom="Custom",i.Semantic="Semantic"}(r.SegmentationMode||(r.SegmentationMode={}))}(fv)),fv}var hv={},yw;function sL(){return yw||(yw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,function(i){i.None="None",i.Synthesize="Synthesize"}(r.NextAction||(r.NextAction={}))}(hv)),hv}var pv={},mw;function aL(){return mw||(mw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Mode=void 0,function(i){i.None="None",i.Always="Always"}(r.Mode||(r.Mode={}))}(pv)),pv}var dv={},Sw;function cL(){return Sw||(Sw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageIdDetectionPriority=r.LanguageIdDetectionMode=void 0,function(i){i.DetectAtAudioStart="DetectAtAudioStart",i.DetectContinuous="DetectContinuous",i.DetectSegments="DetectSegments"}(r.LanguageIdDetectionMode||(r.LanguageIdDetectionMode={})),function(i){i.Auto="Auto",i.PrioritizeLatency="PrioritizeLatency",i.PrioritizeAccuracy="PrioritizeAccuracy"}(r.LanguageIdDetectionPriority||(r.LanguageIdDetectionPriority={}))}(dv)),dv}var vv={},Cw;function uL(){return Cw||(Cw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,function(i){i.Recognize="Recognize",i.None="None"}(r.NextAction||(r.NextAction={}))}(vv)),vv}var gv={},bw;function lL(){return bw||(bw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnUnknownAction=void 0,function(i){i.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",i.None="None"}(r.OnUnknownAction||(r.OnUnknownAction={}))}(gv)),gv}var yv={},Rw;function fL(){return Rw||(Rw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ResultType=void 0,function(i){i.Auto="Auto",i.StableFragment="StableFragment",i.Hypothesis="Hypothesis",i.None="None"}(r.ResultType||(r.ResultType={}))}(yv)),yv}var mv={},_w;function hL(){return _w||(_w=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PhraseResultOutputType=void 0,function(i){i.Always="Always",i.None="None"}(r.PhraseResultOutputType||(r.PhraseResultOutputType={}))}(mv)),mv}var Sv={},Ew;function pL(){return Ew||(Ew=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.NextAction=void 0,function(i){i.None="None",i.Translate="Translate"}(r.NextAction||(r.NextAction={}))}(Sv)),Sv}var ww;function dL(){if(ww)return Bc;ww=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.ServiceRecognizerBase=void 0;const r=Mt(),i=ze(),o=Ae(),p=De(),s=Ao(),f=oL(),a=Cr(),n=sL(),l=aL(),u=cL(),h=uL(),d=lL(),y=fL(),g=hL(),m=pL();let C=class hl{constructor(b,R,A,w,O){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!b)throw new i.ArgumentNullError("authentication");if(!R)throw new i.ArgumentNullError("connectionFactory");if(!A)throw new i.ArgumentNullError("audioSource");if(!w)throw new i.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=w.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=b,this.privConnectionFactory=R,this.privAudioSource=A,this.privRecognizerConfig=w,this.privIsDisposed=!1,this.privRecognizer=O,this.privRequestSession=new p.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new i.EventSource,this.privServiceEvents=new i.EventSource,this.privDynamicGrammar=new p.DynamicGrammarBuilder,this.privSpeechContext=new p.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new p.AgentConfig,this.privRecognizerConfig.parameters.getProperty(o.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=i.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(D=>{if(D.name==="ConnectionClosedEvent"){const N=D;(N.statusCode===1003||N.statusCode===1007||N.statusCode===1002||N.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(o.CancellationReason.Error,N.statusCode===1007?o.CancellationErrorCode.BadRequestParameters:o.CancellationErrorCode.ConnectionFailure,`${N.reason} websocket error code: ${N.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,i.createNoDashGuid)())}setTranslationJson(){const b=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(b!==void 0){const R=b.split(","),A=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),w=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),O=A!==void 0?n.NextAction.Synthesize:n.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:O},onSuccess:{action:O},output:{includePassThroughResults:!0,interimResults:{mode:l.Mode.Always}},targetLanguages:R},w!==void 0&&(this.privSpeechContext.getContext().translation.category=w),A!==void 0){const D={};for(const N of R)D[N]=A;this.privSpeechContext.getContext().synthesis={defaultVoices:D}}const P=this.privSpeechContext.getContext().phraseDetection||{};P.onSuccess={action:m.NextAction.Translate},P.onInterim={action:m.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=P}}setSpeechSegmentationTimeoutJson(){const b=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),R=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),A=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Speech_SegmentationStrategy,void 0),w={mode:f.SegmentationMode.Normal};let O=!1;if(A!==void 0){O=!0;let P=f.SegmentationMode.Normal;switch(A.toLowerCase()){case"default":break;case"time":P=f.SegmentationMode.Custom;break;case"semantic":P=f.SegmentationMode.Semantic;break}w.mode=P}if(b!==void 0){O=!0;const P=parseInt(b,10);w.mode=f.SegmentationMode.Custom,w.segmentationSilenceTimeoutMs=P}if(R!==void 0){O=!0;const P=parseInt(R,10);w.mode=f.SegmentationMode.Custom,w.segmentationForcedTimeoutMs=P}if(O){const P=this.privSpeechContext.getContext().phraseDetection||{};switch(P.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:P.conversation=P.conversation??{segmentation:{}},P.conversation.segmentation=w;break;case a.RecognitionMode.Interactive:P.interactive=P.interactive??{segmentation:{}},P.interactive.segmentation=w;break;case a.RecognitionMode.Dictation:P.dictation=P.dictation??{},P.dictation.segmentation=w;break}this.privSpeechContext.getContext().phraseDetection=P}}setLanguageIdJson(){const b=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const R=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");R.length===1&&R[0]===p.AutoDetectSourceLanguagesOpenRangeOptionName&&(R[0]="UND");let A;this.privRecognizerConfig.languageIdMode==="Continuous"?A=u.LanguageIdDetectionMode.DetectContinuous:A=u.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:R,mode:A,onSuccess:{action:h.NextAction.Recognize},onUnknown:{action:d.OnUnknownAction.None},priority:u.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:y.ResultType.Auto},phraseResults:{resultType:g.PhraseResultOutputType.Always}};const w=this.privRecognizerConfig.sourceLanguageModels;w!==void 0&&(b.customModels=w,b.onInterim={action:m.NextAction.None},b.onSuccess={action:m.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=b}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(p.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()===o.OutputFormat[o.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(b){this.privRecognizerConfig.parameters.setProperty(o.PropertyId.ConversationTranslator_Token,b)}set voiceProfileType(b){this.privRecognizerConfig.parameters.setProperty(o.PropertyId.SpeechServiceConnection_SpeakerIdMode,b)}set authentication(b){this.privAuthentication=b}isDisposed(){return this.privIsDisposed}async dispose(b){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(b)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(b,R,A){if(this.recognizeOverride!==void 0){await this.recognizeOverride(b,R,A);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=b,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const N=this.privSpeechContext.getContext().phraseDetection||{};N.mode=b,this.privSpeechContext.getContext().phraseDetection=N}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=R,this.privErrorCallback=A,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const w=this.connectImpl();let O;try{const N=await this.audioSource.attach(this.privRequestSession.audioNodeId),$=await this.audioSource.format,Y=await this.audioSource.deviceInfo;this.privIsLiveAudio=Y.type&&Y.type===p.type.Microphones,O=new r.ReplayableAudioNode(N,$.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(O,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:Y}}catch(N){throw await this.privRequestSession.onStopRecognizing(),N}try{await w}catch(N){await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,N);return}const P=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,P),this.receiveMessage(),this.sendAudio(O).catch(async N=>{await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,N)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(b,R){this.connectImpl().then(()=>{try{b&&b()}catch(A){R&&R(A)}},A=>{try{R&&R(A)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(b){}async sendNetworkMessage(b,R){const A=typeof R=="string"?i.MessageType.Text:i.MessageType.Binary,w=typeof R=="string"?"application/json":"";return(await this.fetchConnection()).send(new s.SpeechConnectionMessage(A,b,this.privRequestSession.requestId,w,R))}set activityTemplate(b){this.privActivityTemplate=b}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(b){this.privExpectContentAssessmentResponse=b}async sendTelemetryData(){const b=this.privRequestSession.getTelemetry();if(hl.telemetryDataEnabled!==!0||this.privIsDisposed||b===null)return;if(hl.telemetryData)try{hl.telemetryData(b)}catch{}await(await this.fetchConnection()).send(new s.SpeechConnectionMessage(i.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",b))}async cancelRecognitionLocal(b,R,A){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,b,R,A))}async receiveMessage(){try{if(this.privIsDisposed)return;let b=await this.fetchConnection();const R=await b.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!R)return this.receiveMessage();this.privServiceHasSentMessage=!0;const A=s.SpeechConnectionMessage.fromConnectionMessage(R);if(A.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(A.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const w=p.SpeechDetected.fromJSON(A.textBody,this.privRequestSession.currentTurnAudioOffset),O=new o.RecognitionEventArgs(w.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,O);break;case"speech.enddetected":let P;A.textBody.length>0?P=A.textBody:P="{ Offset: 0 }";const D=p.SpeechDetected.fromJSON(P,this.privRequestSession.currentTurnAudioOffset),N=new o.RecognitionEventArgs(D.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,N);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(o.CancellationReason.EndOfStream,o.CancellationErrorCode.NoError,void 0));const $=new o.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,$);return}else b=await this.fetchConnection(),await this.sendPrePayloadJSON(b);break;default:await this.processTypeSpecificMessages(A)||this.privServiceEvents&&this.serviceEvents.onEvent(new i.ServiceEvent(A.path.toLowerCase(),A.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const b=this.privRequestSession.recognitionBytesSent,R=this.privAverageBytesPerMs!==0?b/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(R)}sendSpeechContext(b,R){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const A=this.speechContext.toJSON();if(R&&this.privRequestSession.onSpeechContext(),A)return b.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",A))}setupTranslationWithLanguageId(){const b=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),R=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(b!==void 0&&R){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:y.ResultType.None},phraseResults:{resultType:g.PhraseResultOutputType.None}};const A=this.privSpeechContext.getContext().translation;if(A){const w=this.privRecognizerConfig.sourceLanguageModels;if(w!==void 0&&w.length>0){const P=this.privSpeechContext.getContext().phraseDetection||{};P.customModels=w,this.privSpeechContext.getContext().phraseDetection=P}this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(A.onSuccess={action:n.NextAction.Synthesize},A.onPassthrough={action:n.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(b,R=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(b);await this.sendSpeechContext(b,R),await this.sendWaveHeader(b)}async sendWaveHeader(b){const R=await this.audioSource.format;return b.send(new s.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",R.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(b=>b.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(b,R,A){if(R.onSpeechContext(),hl.telemetryDataEnabled!==!0){const O={context:{system:JSON.parse(A).context.system}};A=JSON.stringify(O)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const w=JSON.parse(A);w.context.DisableReferenceChannel="True",w.context.MicSpec="1_0_0",A=JSON.stringify(w)}if(A)return b.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speech.config",R.requestId,"application/json",A))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(b=>b.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(b){const R=await this.audioSource.format;this.privAverageBytesPerMs=R.avgBytesPerSec/1e3;let A=Date.now();const w=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),O=R.avgBytesPerSec/1e3*parseInt(w,10),P=this.privRequestSession.recogNumber,D=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===P){const N=await this.fetchConnection(),$=await b.read();if(this.privRequestSession.isSpeechEnded)return;let Y,oe;if(!$||$.isEnd?(Y=null,oe=0):(Y=$.buffer,this.privRequestSession.onAudioSent(Y.byteLength),O>=this.privRequestSession.bytesSent?oe=0:oe=Math.max(0,A-Date.now())),oe!==0&&await this.delay(oe),Y!==null&&(A=Date.now()+Y.byteLength*1e3/(R.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===P)if(N.send(new s.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,Y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),$?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return D()}};return D()}async retryableConnect(){let b=!1;this.privAuthFetchEventId=(0,i.createNoDashGuid)();const R=this.privRequestSession.sessionId;this.privConnectionId=R!==void 0?R:(0,i.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let A=0,w="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const P=await(b?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const D=await this.privConnectionFactory.create(this.privRecognizerConfig,P,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(D.events),D.events.attach($=>{this.connectionEvents.onEvent($)});const N=await D.open();if(N.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(N.statusCode),Promise.resolve(D);N.statusCode===1006&&(b=!0),A=N.statusCode,w=N.reason}return await this.privRequestSession.onConnectionEstablishCompleted(A,w),Promise.reject(`Unable to contact server. StatusCode: ${A}, ${this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${w}`)}delay(b){return new Promise(R=>this.privSetTimeout(R,b))}writeBufferToConsole(b){let R="Buffer Size: ";if(b===null)R+="null";else{const A=new Uint8Array(b);R+=`${b.byteLength}\r
`;for(let w=0;w<b.byteLength;w++)R+=A[w].toString(16).padStart(2,"0")+" ",(w+1)%16===0&&(console.info(R),R="")}console.info(R)}async sendFinalAudio(){await(await this.fetchConnection()).send(new s.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const b=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(b):(await this.sendSpeechServiceConfig(b,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(b,!1),b)}};return Bc.ServiceRecognizerBase=C,C.telemetryDataEnabled=!0,Bc}var Fc={},Aw;function vL(){if(Aw)return Fc;Aw=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.ConversationServiceRecognizer=void 0;const r=Ae(),i=De();let o=class extends i.ServiceRecognizerBase{constructor(s,f,a,n,l){super(s,f,a,n,l),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(s){}handleRecognizedCallback(s,f,a){}handleRecognizingCallback(s,f,a){}async processSpeechMessages(s){let f=!1;switch(s.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(s.textBody),f=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(s.textBody),f=!0;break}return f}cancelRecognition(s,f,a,n,l){}async handleSpeechPhrase(s){const f=i.SimpleSpeechPhrase.fromJSON(s,this.privRequestSession.currentTurnAudioOffset),a=i.EnumTranslation.implTranslateRecognitionResult(f.RecognitionStatus);let n;const l=new r.PropertyCollection;if(l.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,s),this.privRequestSession.onPhraseRecognized(f.Offset+f.Duration),r.ResultReason.Canceled===a){const u=i.EnumTranslation.implTranslateCancelResult(f.RecognitionStatus),h=i.EnumTranslation.implTranslateCancelErrorCode(f.RecognitionStatus);await this.cancelRecognitionLocal(u,h,i.EnumTranslation.implTranslateErrorDetails(h))}else if(f.RecognitionStatus!==i.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])n=new r.SpeechRecognitionResult(this.privRequestSession.requestId,a,f.DisplayText,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,f.SpeakerId,void 0,f.asJson(),l);else{const u=i.DetailedSpeechPhrase.fromJSON(s,this.privRequestSession.currentTurnAudioOffset);n=new r.SpeechRecognitionResult(this.privRequestSession.requestId,a,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,u.asJson(),l)}this.handleRecognizedCallback(n,n.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(s){const f=i.SpeechHypothesis.fromJSON(s,this.privRequestSession.currentTurnAudioOffset),a=new r.PropertyCollection;a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,s);const n=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,f.Text,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,f.SpeakerId,void 0,f.asJson(),a);this.privRequestSession.onHypothesis(f.Offset),this.handleRecognizingCallback(n,f.Duration,this.privRequestSession.sessionId)}};return Fc.ConversationServiceRecognizer=o,Fc}var Cv={},Tw;function gL(){return Tw||(Tw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognizerConfig=r.SpeechResultFormat=void 0;const i=Ae(),o=De(),p=Cr();(function(f){f[f.Simple=0]="Simple",f[f.Detailed=1]="Detailed"})(r.SpeechResultFormat||(r.SpeechResultFormat={}));class s{constructor(a,n){this.privSpeechServiceConfig=a||new o.SpeechServiceConfig(new o.Context(null)),this.privParameters=n,this.privMaxRetryCount=parseInt(n.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=n.getProperty(i.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===p.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=p.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==p.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let n=!1;if(this.autoDetectSourceLanguages!==void 0)for(const l of this.autoDetectSourceLanguages.split(",")){const u=l+i.PropertyId.SpeechServiceConnection_EndpointId.toString(),h=this.parameters.getProperty(u,void 0);h!==void 0?(a.push({language:l,endpoint:h}),n=!0):a.push({language:l,endpoint:""})}return n?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}r.RecognizerConfig=s}(Cv)),Cv}var bv={},Pw;function yL(){return Pw||(Pw=1,Object.defineProperty(bv,"__esModule",{value:!0})),bv}var Hc={},Ow;function mL(){if(Ow)return Hc;Ow=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.WebsocketMessageFormatter=void 0;const r=ze(),i=`\r
`;let o=class{toConnectionMessage(s){const f=new r.Deferred;try{if(s.messageType===r.MessageType.Text){const a=s.textContent;let n={},l=null;if(a){const u=a.split(`\r
\r
`);u&&u.length>0&&(n=this.parseHeaders(u[0]),u.length>1&&(l=u[1]))}f.resolve(new r.ConnectionMessage(s.messageType,l,n,s.id))}else if(s.messageType===r.MessageType.Binary){const a=s.binaryContent;let n={},l=null;if(!a||a.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const u=new DataView(a),h=u.getInt16(0);if(a.byteLength<h+2)throw new Error("Invalid binary message format. Header content missing.");let d="";for(let y=0;y<h;y++)d+=String.fromCharCode(u.getInt8(y+2));n=this.parseHeaders(d),a.byteLength>h+2&&(l=a.slice(2+h)),f.resolve(new r.ConnectionMessage(s.messageType,l,n,s.id))}}catch(a){f.reject(`Error formatting the message. Error: ${a}`)}return f.promise}fromConnectionMessage(s){const f=new r.Deferred;try{if(s.messageType===r.MessageType.Text){const a=`${this.makeHeaders(s)}${i}${s.textBody?s.textBody:""}`;f.resolve(new r.RawWebsocketMessage(r.MessageType.Text,a,s.id))}else if(s.messageType===r.MessageType.Binary){const a=this.makeHeaders(s),n=s.binaryBody,l=this.stringToArrayBuffer(a),u=new Int8Array(l),h=u.byteLength,d=new Int8Array(2+h+(n?n.byteLength:0));if(d[0]=h>>8&255,d[1]=h&255,d.set(u,2),n){const g=new Int8Array(n);d.set(g,2+h)}const y=d.buffer;f.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,y,s.id))}}catch(a){f.reject(`Error formatting the message. ${a}`)}return f.promise}makeHeaders(s){let f="";if(s.headers)for(const a in s.headers)a&&(f+=`${a}: ${s.headers[a]}${i}`);return f}parseHeaders(s){const f={};if(s){const a=s.match(/[^\r\n]+/g);if(f){for(const n of a)if(n){const l=n.indexOf(":"),u=l>0?n.substr(0,l).trim().toLowerCase():n,h=l>0&&n.length>l+1?n.substr(l+1).trim():"";f[u]=h}}}return f}stringToArrayBuffer(s){const f=new ArrayBuffer(s.length),a=new DataView(f);for(let n=0;n<s.length;n++)a.setUint8(n,s.charCodeAt(n));return f}};return Hc.WebsocketMessageFormatter=o,Hc}var Vc={},Iw;function SL(){if(Iw)return Vc;Iw=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.SpeechConnectionFactory=void 0;const r=Mt(),i=De(),o=Ae(),p=Or(),s=De(),f=Gt(),a=zn(),n=Cr();let l=class extends p.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(h,d,y){let g=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region,void 0),C=p.ConnectionFactoryBase.getHostSuffix(m),_=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".stt.speech"+C),b={},R=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,void 0),A=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(R?(!g||g.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(b[a.QueryParameterNames.CustomSpeechDeploymentId]=R):A&&(!g||g.search(a.QueryParameterNames.Language)===-1)&&(b[a.QueryParameterNames.Language]=A),(!g||g.search(a.QueryParameterNames.Format)===-1)&&(b[a.QueryParameterNames.Format]=h.parameters.getProperty(i.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()),h.autoDetectSourceLanguages!==void 0&&(b[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(h,b,g),g){const N=new URL(g),$=N.pathname;($===""||$==="/")&&(N.pathname=this.universalUri+h.recognitionEndpointVersion,g=await p.ConnectionFactoryBase.getRedirectUrlFromEndpoint(N.toString()))}if(!g)switch(h.recognitionMode){case n.RecognitionMode.Conversation:h.parameters.getProperty(i.ForceDictationPropertyName,"false")==="true"?g=_+this.dictationRelativeUri:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?g=`${_}${this.universalUri}${h.recognitionEndpointVersion}`:g=_+this.conversationRelativeUri;break;case n.RecognitionMode.Dictation:g=_+this.dictationRelativeUri;break;default:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?g=`${_}${this.universalUri}${h.recognitionEndpointVersion}`:g=_+this.interactiveRelativeUri;break}const w={};d.token!==void 0&&d.token!==""&&(w[d.headerName]=d.token),w[f.HeaderNames.ConnectionId]=y,w.connectionId=y;const O=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new r.WebsocketConnection(g,b,w,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(h),O,y),D=P.uri;return h.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,D),P}};return Vc.SpeechConnectionFactory=l,Vc}var Wc={},Mw;function CL(){if(Mw)return Wc;Mw=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.ConversationTranscriberConnectionFactory=void 0;const r=Mt(),i=Ae(),o=De(),p=Or(),s=De(),f=Gt(),a=zn();let n=class extends p.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(u,h,d){let y=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const g=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),m=p.ConnectionFactoryBase.getHostSuffix(g),C=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+g+".stt.speech"+m),_={},b=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),R=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(b?(!y||y.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(_[a.QueryParameterNames.CustomSpeechDeploymentId]=b):R&&(!y||y.search(a.QueryParameterNames.Language)===-1)&&(_[a.QueryParameterNames.Language]=R),u.autoDetectSourceLanguages!==void 0&&(_[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,_,y),y){const D=new URL(y),N=D.pathname;(N===""||N==="/")&&(D.pathname=this.universalUri,y=await p.ConnectionFactoryBase.getRedirectUrlFromEndpoint(D.toString()))}y||(y=`${C}${this.universalUri}`);const A={};h.token!==void 0&&h.token!==""&&(A[h.headerName]=h.token),A[f.HeaderNames.ConnectionId]=d;const w=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",O=new r.WebsocketConnection(y,_,A,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),w,d),P=O.uri;return u.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,P),O}setV2UrlParams(u,h,d){new Map([[i.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[i.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[i.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((m,C)=>{this.setUrlParameter(C,m,u,h,d)});const g=JSON.parse(u.parameters.getProperty(o.ServicePropertiesPropertyName,"{}"));Object.keys(g).forEach(m=>{h[m]=g[m]})}};return Wc.ConversationTranscriberConnectionFactory=n,Wc}var Gc={},Dw;function bL(){if(Dw)return Gc;Dw=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.TranscriberConnectionFactory=void 0;const r=Mt(),i=Ae(),o=Or(),p=De(),s=Gt(),f=zn();let a=class extends o.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(l,u,h){let d=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"centralus"),g=o.ConnectionFactoryBase.getHostSuffix(y),m="wss://transcribe."+y+".cts.speech"+g+this.multiaudioRelativeUri,C=l.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,m),_={};this.setQueryParams(_,l,d),d||(d=C);const b={};u.token!==void 0&&u.token!==""&&(b[u.headerName]=u.token),b[s.HeaderNames.ConnectionId]=h,l.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,d);const R=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(d,_,b,new p.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(l),R,h))}setQueryParams(l,u,h){const d=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),y=u.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);d&&!(f.QueryParameterNames.CustomSpeechDeploymentId in l)&&(l[f.QueryParameterNames.CustomSpeechDeploymentId]=d),y&&!(f.QueryParameterNames.Language in l)&&(l[f.QueryParameterNames.Language]=y);const g=u.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",m=u.parameters.getProperty(p.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])!==i.OutputFormat[i.OutputFormat.Simple];(g||m)&&(l[f.QueryParameterNames.Format]=i.OutputFormat[i.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,l,h)}};return Gc.TranscriberConnectionFactory=a,Gc}var Kc={},jw;function RL(){if(jw)return Kc;jw=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.TranslationConnectionFactory=void 0;const r=Mt(),i=qD(),o=Ae(),p=Or(),s=De(),f=Gt(),a=zn(),n=Cr();let l=class extends p.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(h,d,y){let g=this.getEndpointUrl(h);const m={};if(this.setQueryParams(m,h,g),g){const R=new URL(g),A=R.pathname;(A===""||A==="/")&&(R.pathname=this.universalUri,g=await p.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}const C={};d.token!==void 0&&d.token!==""&&(C[d.headerName]=d.token),C[f.HeaderNames.ConnectionId]=y,h.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,g);const _=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new r.WebsocketConnection(g,m,C,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(h),_,y)}getEndpointUrl(h,d){const y=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),g=p.ConnectionFactoryBase.getHostSuffix(y);let m=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);return m?d===!0?m:i.StringUtils.formatString(m,{region:y}):(h.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?m=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+g)+this.translationV1Uri:m=h.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+g)+this.universalUri,d===!0?m:i.StringUtils.formatString(m,{region:y}))}setQueryParams(h,d,y){h.from=d.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),h.to=d.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),h.scenario=d.recognitionMode===n.RecognitionMode.Interactive?"interactive":d.recognitionMode===n.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(d,h,y),this.setUrlParameter(o.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,d,h,y);const g=d.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);g!==void 0&&(h.voice=g,h.features="requireVoice")}};return Kc.TranslationConnectionFactory=l,Kc}var $c={},kw;function _L(){if(kw)return $c;kw=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.EnumTranslation=void 0;const r=Ae(),i=De();let o=class{static implTranslateRecognitionResult(s,f=!1){let a=r.ResultReason.Canceled;switch(s){case i.RecognitionStatus.Success:a=r.ResultReason.RecognizedSpeech;break;case i.RecognitionStatus.EndOfDictation:a=f?r.ResultReason.RecognizedSpeech:r.ResultReason.NoMatch;break;case i.RecognitionStatus.NoMatch:case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:a=r.ResultReason.NoMatch;break;case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:a=r.ResultReason.Canceled;break}return a}static implTranslateCancelResult(s){let f=r.CancellationReason.EndOfStream;switch(s){case i.RecognitionStatus.Success:case i.RecognitionStatus.EndOfDictation:case i.RecognitionStatus.NoMatch:f=r.CancellationReason.EndOfStream;break;case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:f=r.CancellationReason.Error;break}return f}static implTranslateCancelErrorCode(s){let f=r.CancellationErrorCode.NoError;switch(s){case i.RecognitionStatus.Error:f=r.CancellationErrorCode.ServiceError;break;case i.RecognitionStatus.TooManyRequests:f=r.CancellationErrorCode.TooManyRequests;break;case i.RecognitionStatus.BadRequest:f=r.CancellationErrorCode.BadRequestParameters;break;case i.RecognitionStatus.Forbidden:f=r.CancellationErrorCode.Forbidden;break;default:f=r.CancellationErrorCode.NoError;break}return f}static implTranslateErrorDetails(s){let f="The speech service encountered an internal error and could not continue.";switch(s){case r.CancellationErrorCode.Forbidden:f="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:f="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:f="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return f}};return $c.EnumTranslation=o,$c}var Rv={},Nw;function EL(){return Nw||(Nw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RecognitionStatus=r.SynthesisStatus=void 0,function(i){i[i.Success=0]="Success",i[i.SynthesisEnd=1]="SynthesisEnd",i[i.Error=2]="Error"}(r.SynthesisStatus||(r.SynthesisStatus={})),function(i){i[i.Success=0]="Success",i[i.NoMatch=1]="NoMatch",i[i.InitialSilenceTimeout=2]="InitialSilenceTimeout",i[i.BabbleTimeout=3]="BabbleTimeout",i[i.Error=4]="Error",i[i.EndOfDictation=5]="EndOfDictation",i[i.TooManyRequests=6]="TooManyRequests",i[i.BadRequest=7]="BadRequest",i[i.Forbidden=8]="Forbidden"}(r.RecognitionStatus||(r.RecognitionStatus={}))}(Rv)),Rv}var Jc={},qw;function wL(){if(qw)return Jc;qw=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.TranslationSynthesisEnd=void 0;const r=De();let i=class GD{constructor(p){this.privSynthesisEnd=JSON.parse(p),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(p){return new GD(p)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Jc.TranslationSynthesisEnd=i,Jc}var Qc={},zw;function AL(){if(zw)return Qc;zw=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.TranslationHypothesis=void 0;const r=Ve(),i=uS();let o=class iS{constructor(s,f){this.privTranslationHypothesis=s,this.privTranslationHypothesis.Offset+=f,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(s,f){return new iS(JSON.parse(s),f)}static fromTranslationResponse(s,f){r.Contracts.throwIfNullOrUndefined(s,"translationHypothesis");const a=s.SpeechHypothesis;return s.SpeechHypothesis=void 0,a.Translation=s,new iS(a,f)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){const s={...this.privTranslationHypothesis};return s.Translation!==void 0?JSON.stringify({...s,TranslationStatus:i.TranslationStatus[s.Translation.TranslationStatus]}):JSON.stringify(s)}mapTranslationStatus(s){if(typeof s=="string")return i.TranslationStatus[s];if(typeof s=="number")return s}};return Qc.TranslationHypothesis=o,Qc}var Yc={},Lw;function TL(){if(Lw)return Yc;Lw=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.TranslationPhrase=void 0;const r=Ve(),i=De(),o=uS();let p=class oS{constructor(f,a){this.privTranslationPhrase=f,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(f,a){return new oS(JSON.parse(f),a)}static fromTranslationResponse(f,a){r.Contracts.throwIfNullOrUndefined(f,"translationResponse");const n=f.SpeechPhrase;return f.SpeechPhrase=void 0,n.Translation=f,n.Text=n.DisplayText,new oS(n,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const f={...this.privTranslationPhrase},a={...f,RecognitionStatus:i.RecognitionStatus[f.RecognitionStatus]};return f.Translation&&(a.Translation={...f.Translation,TranslationStatus:o.TranslationStatus[f.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(f){if(typeof f=="string")return i.RecognitionStatus[f];if(typeof f=="number")return f}mapTranslationStatus(f){if(typeof f=="string")return o.TranslationStatus[f];if(typeof f=="number")return f}};return Yc.TranslationPhrase=p,Yc}var Xc={},xw;function PL(){if(xw)return Xc;xw=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.TranslationServiceRecognizer=void 0;const r=ze(),i=Ae(),o=De();let p=class extends o.ConversationServiceRecognizer{constructor(f,a,n,l,u){super(f,a,n,l,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(h=>{h.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(f){const a=new i.PropertyCollection;let n=await this.processSpeechMessages(f);if(n)return!0;const l=async h=>{if(a.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),h.RecognitionStatus===o.RecognitionStatus.Success){const d=this.fireEventForResult(h,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,d)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(d.result)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const d=o.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),y=new i.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,d,h.Text,h.Duration,h.Offset,h.Language,h.Confidence,void 0,h.asJson(),a);if(d===i.ResultReason.Canceled){const g=o.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),m=o.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(g,m,o.EnumTranslation.implTranslateErrorDetails(m))}else if(h.RecognitionStatus!==o.RecognitionStatus.EndOfDictation){const g=new i.TranslationRecognitionEventArgs(y,y.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,g)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(y)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}},u=h=>{a.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const d=this.fireEventForResult(h,a);if(this.privRequestSession.onHypothesis(d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}n=!0};switch(f.messageType===r.MessageType.Text&&a.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,f.textBody),f.path.toLowerCase()){case"translation.hypothesis":u(o.TranslationHypothesis.fromJSON(f.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const h=JSON.parse(f.textBody);if(h.SpeechPhrase)await l(o.TranslationPhrase.fromTranslationResponse(h,this.privRequestSession.currentTurnAudioOffset));else{const y=JSON.parse(f.textBody);y.SpeechHypothesis&&u(o.TranslationHypothesis.fromTranslationResponse(y,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await l(o.TranslationPhrase.fromJSON(f.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(f.binaryBody,this.privRequestSession.sessionId),n=!0;break;case"audio.end":case"translation.synthesis.end":const d=o.TranslationSynthesisEnd.fromJSON(f.textBody);switch(d.SynthesisStatus){case o.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const y=new i.TranslationSynthesisResult(i.ResultReason.Canceled,void 0),g=new i.TranslationSynthesisEventArgs(y,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,g)}catch{}}if(this.privTranslationRecognizer.canceled){const y=new i.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,i.CancellationReason.Error,d.FailureReason,i.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,y)}catch{}}break;case o.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}n=!0;break}return n}cancelRecognition(f,a,n,l,u){const h=new i.PropertyCollection;if(h.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[l]),this.privTranslationRecognizer.canceled){const d=new i.TranslationRecognitionCanceledEventArgs(f,n,u,l,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new i.TranslationRecognitionResult(void 0,a,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,h);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(f,a,n){try{const l=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(f),a,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,l)}catch{}}handleRecognizedCallback(f,a,n){try{const l=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(f),a,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,l)}catch{}}fireEventForResult(f,a){let n;if(f.Translation.Translations!==void 0){n=new i.Translations;for(const g of f.Translation.Translations)n.set(g.Language,g.Text||g.DisplayText)}let l,u;f instanceof o.TranslationPhrase?(f.Translation&&f.Translation.TranslationStatus===r.TranslationStatus.Success?l=i.ResultReason.TranslatedSpeech:l=i.ResultReason.RecognizedSpeech,u=f.Confidence):l=i.ResultReason.TranslatingSpeech;const h=f.Language,d=new i.TranslationRecognitionResult(n,this.privRequestSession.requestId,l,f.Text,f.Duration,f.Offset,h,u,f.Translation.FailureReason,f.asJson(),a);return new i.TranslationRecognitionEventArgs(d,f.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(f,a){const n=f===void 0?i.ResultReason.SynthesizingAudioCompleted:i.ResultReason.SynthesizingAudio,l=new i.TranslationSynthesisResult(n,f),u=new i.TranslationSynthesisEventArgs(l,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return Xc.TranslationServiceRecognizer=p,Xc}var Zc={},Bw;function OL(){if(Bw)return Zc;Bw=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.SpeechDetected=void 0;let r=class KD{constructor(o,p){this.privSpeechStartDetected=JSON.parse(o),this.privSpeechStartDetected.Offset+=p}static fromJSON(o,p){return new KD(o,p)}get Offset(){return this.privSpeechStartDetected.Offset}};return Zc.SpeechDetected=r,Zc}var eu={},Uw;function IL(){if(Uw)return eu;Uw=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.SpeechHypothesis=void 0;let r=class $D{constructor(o,p){this.privSpeechHypothesis=JSON.parse(o),this.updateOffset(p)}static fromJSON(o,p){return new $D(o,p)}updateOffset(o){this.privSpeechHypothesis.Offset+=o}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return eu.SpeechHypothesis=r,eu}var tu={},Fw;function ML(){if(Fw)return tu;Fw=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.SpeechKeyword=void 0;let r=class JD{constructor(o,p){this.privSpeechKeyword=JSON.parse(o),this.privSpeechKeyword.Offset+=p}static fromJSON(o,p){return new JD(o,p)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return tu.SpeechKeyword=r,tu}var ru={},Hw;function DL(){if(Hw)return ru;Hw=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.SpeechServiceRecognizer=void 0;const r=Ae(),i=De();let o=class extends i.ServiceRecognizerBase{constructor(s,f,a,n,l){super(s,f,a,n,l),this.privSpeechRecognizer=l}async processTypeSpecificMessages(s){let f;const a=new r.PropertyCollection;let n=!1;switch(s.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const l=i.SpeechHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,l.asJson()),f=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,void 0,void 0,l.asJson(),a),this.privRequestSession.onHypothesis(l.Offset);const u=new r.SpeechRecognitionEventArgs(f,l.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u)}catch{}n=!0;break;case"speech.phrase":const h=i.SimpleSpeechPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const d=i.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),r.ResultReason.Canceled===d){const y=i.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),g=i.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(y,g,i.EnumTranslation.implTranslateErrorDetails(g))}else{if(h.RecognitionStatus===i.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])f=new r.SpeechRecognitionResult(this.privRequestSession.requestId,d,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a);else{const g=i.DetailedSpeechPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,g.asJson()),f=new r.SpeechRecognitionResult(this.privRequestSession.requestId,d,g.RecognitionStatus===i.RecognitionStatus.Success?g.NBest[0].Display:"",g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),a)}const y=new r.SpeechRecognitionEventArgs(f,f.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,y)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(f)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0;break}return n}cancelRecognition(s,f,a,n,l){const u=new r.PropertyCollection;if(u.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){const h=new r.SpeechRecognitionCanceledEventArgs(a,l,n,void 0,s);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new r.SpeechRecognitionResult(f,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}};return ru.SpeechServiceRecognizer=o,ru}var nu={},_v={},Vw;function jL(){return Vw||(Vw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityProvider=r.SpeakerDiarizationMode=void 0,function(i){i.None="None",i.Identity="Identity",i.Anonymous="Anonymous"}(r.SpeakerDiarizationMode||(r.SpeakerDiarizationMode={})),function(i){i.CallCenter="CallCenter"}(r.IdentityProvider||(r.IdentityProvider={}))}(_v)),_v}var Ww;function kL(){if(Ww)return nu;Ww=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.ConversationTranscriptionServiceRecognizer=void 0;const r=Ae(),i=De(),o=jL(),p=Cr();let s=class extends i.ServiceRecognizerBase{constructor(a,n,l,u,h){super(a,n,l,u,h),this.privConversationTranscriber=h,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=p.RecognitionMode.Conversation;const n={};n.mode=o.SpeakerDiarizationMode.Anonymous,n.audioSessionId=this.privDiarizationSessionId,n.audioOffsetMs=0,n.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=n,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let n;const l=new r.PropertyCollection;l.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let u=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const h=i.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);n=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,h.Text,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,h.asJson(),l),this.privRequestSession.onHypothesis(h.Offset);const d=new r.ConversationTranscriptionEventArgs(n,h.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,d)}catch{}u=!0;break;case"speech.phrase":const y=i.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),g=i.EnumTranslation.implTranslateRecognitionResult(y.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(y.Offset+y.Duration),r.ResultReason.Canceled===g){const m=i.EnumTranslation.implTranslateCancelResult(y.RecognitionStatus),C=i.EnumTranslation.implTranslateCancelErrorCode(y.RecognitionStatus);await this.cancelRecognitionLocal(m,C,i.EnumTranslation.implTranslateErrorDetails(C))}else if(!(this.privRequestSession.isSpeechEnded&&g===r.ResultReason.NoMatch&&y.RecognitionStatus!==i.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])n=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,g,y.DisplayText,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,y.SpeakerId,void 0,y.asJson(),l);else{const C=i.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);n=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,g,C.RecognitionStatus===i.RecognitionStatus.Success?C.NBest[0].Display:void 0,C.Duration,C.Offset,C.Language,C.LanguageDetectionConfidence,y.SpeakerId,void 0,C.asJson(),l)}const m=new r.ConversationTranscriptionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,m)}catch{}}u=!0;break}return u}cancelRecognition(a,n,l,u,h){if(new r.PropertyCollection().setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[u]),this.privConversationTranscriber.canceled){const y=new r.ConversationTranscriptionCanceledEventArgs(l,h,u,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,y)}catch{}}}};return nu.ConversationTranscriptionServiceRecognizer=s,nu}var iu={},Gw;function NL(){if(Gw)return iu;Gw=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.TranscriptionServiceRecognizer=void 0;const r=ze(),i=Ae(),o=De(),p=Ao();let s=class extends o.ConversationServiceRecognizer{constructor(a,n,l,u,h){super(a,n,l,u,h),this.privTranscriberRecognizer=h,this.sendPrePayloadJSONOverride=d=>this.sendTranscriptionStartJSON(d),this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,n){if(this.privRequestSession.isRecognizing){const l=await this.fetchConnection();await this.sendSpeechEvent(l,this.createSpeechEventPayload(a,n))}}async sendMeetingSpeechEventAsync(a,n){if(this.privRequestSession.isRecognizing){const l=await this.fetchConnection();await this.sendSpeechEvent(l,this.createMeetingSpeechEventPayload(a,n))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,n,l){try{const u=new i.SpeechRecognitionEventArgs(a,n,l);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,n,l){try{const u=new i.SpeechRecognitionEventArgs(a,n,l);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,n,l,u,h){const d=new i.PropertyCollection;if(d.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const y=new i.MeetingTranscriptionCanceledEventArgs(l,h,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,y)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const y=new i.ConversationTranscriptionCanceledEventArgs(l,h,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,y)}catch{}}if(this.privSuccessCallback){const y=new i.SpeechRecognitionResult(n,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,d);try{this.privSuccessCallback(y),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const n=this.privTranscriberRecognizer.getMeetingInfo(),l=this.createMeetingSpeechEventPayload(n,"start");await this.sendSpeechEvent(a,l)}else{const n=this.privTranscriberRecognizer.getConversationInfo(),l=this.createSpeechEventPayload(n,"start");await this.sendSpeechEvent(a,l)}await this.sendWaveHeader(a)}sendSpeechEvent(a,n){const l=JSON.stringify(n);if(l)return a.send(new p.SpeechConnectionMessage(r.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",l))}createSpeechEventPayload(a,n){const l={id:"meeting",name:n,meeting:a.conversationProperties};return l.meeting.id=a.id,l.meeting.attendees=a.participants,l}createMeetingSpeechEventPayload(a,n){const l={id:"meeting",name:n,meeting:a.meetingProperties};return l.meeting.id=a.id,l.meeting.attendees=a.participants,l}};return iu.TranscriptionServiceRecognizer=s,iu}var ou={},Kw;function qL(){if(Kw)return ou;Kw=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.DetailedSpeechPhrase=void 0;const r=De();let i=class QD{constructor(p,s){this.privDetailedSpeechPhrase=JSON.parse(p),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(s)}static fromJSON(p,s){return new QD(p,s)}updateOffsets(p){if(this.privDetailedSpeechPhrase.Offset+=p,this.privDetailedSpeechPhrase.NBest)for(const s of this.privDetailedSpeechPhrase.NBest){if(s.Words)for(const f of s.Words)f.Offset+=p;if(s.DisplayWords)for(const f of s.DisplayWords)f.Offset+=p}}asJson(){const p={...this.privDetailedSpeechPhrase};return JSON.stringify({...p,RecognitionStatus:r.RecognitionStatus[p.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(p){if(typeof p=="string")return r.RecognitionStatus[p];if(typeof p=="number")return p}};return ou.DetailedSpeechPhrase=i,ou}var su={},$w;function zL(){if($w)return su;$w=1,Object.defineProperty(su,"__esModule",{value:!0}),su.SimpleSpeechPhrase=void 0;const r=De();let i=class YD{constructor(p,s=0){this.privSimpleSpeechPhrase=JSON.parse(p),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(s)}static fromJSON(p,s){return new YD(p,s)}updateOffset(p){this.privSimpleSpeechPhrase.Offset+=p}asJson(){const p={...this.privSimpleSpeechPhrase};return JSON.stringify({...p,RecognitionStatus:r.RecognitionStatus[p.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(p){if(typeof p=="string")return r.RecognitionStatus[p];if(typeof p=="number")return p}};return su.SimpleSpeechPhrase=i,su}var au={},Jw;function LL(){if(Jw)return au;Jw=1,Object.defineProperty(au,"__esModule",{value:!0}),au.AddedLmIntent=void 0;let r=class{constructor(o,p){this.modelImpl=o,this.intentName=p}};return au.AddedLmIntent=r,au}var cu={},Qw;function xL(){if(Qw)return cu;Qw=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.IntentServiceRecognizer=void 0;const r=ze(),i=Ae(),o=De();let p=class extends o.ServiceRecognizerBase{constructor(f,a,n,l,u){super(f,a,n,l,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1,l.recognitionEndpointVersion="1"}setIntents(f,a){this.privAddedLmIntents=f,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(f){let a,n,l=!1;const u=new i.PropertyCollection;switch(f.messageType===r.MessageType.Text&&u.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,f.textBody),f.path.toLowerCase()){case"speech.hypothesis":const d=o.SpeechHypothesis.fromJSON(f.textBody,this.privRequestSession.currentTurnAudioOffset);if(a=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,i.ResultReason.RecognizingIntent,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,d.asJson(),u),this.privRequestSession.onHypothesis(a.offset),n=new i.IntentRecognitionEventArgs(a,d.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch{}l=!0;break;case"speech.phrase":const y=o.SimpleSpeechPhrase.fromJSON(f.textBody,this.privRequestSession.currentTurnAudioOffset);a=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,o.EnumTranslation.implTranslateRecognitionResult(y.RecognitionStatus),y.DisplayText,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,y.asJson(),u),n=new i.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const g=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(C){this.privErrorCallback&&this.privErrorCallback(C)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||i.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),g()):this.privPendingIntentArgs=n,l=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,n===void 0){if(f.textBody==="")return;n=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const m=o.IntentResponse.fromJSON(f.textBody);if(m!==null&&m.topScoringIntent&&m.topScoringIntent.intent){let C=this.privAddedLmIntents[m.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(C=this.privUmbrellaIntent),C){const _=C===void 0||C.intentName===void 0?m.topScoringIntent.intent:C.intentName;let b=n.result.reason;_!==void 0&&(b=i.ResultReason.RecognizedIntent);const R=n.result.properties!==void 0?n.result.properties:new i.PropertyCollection;R.setProperty(i.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,f.textBody),n=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult(_,n.result.resultId,b,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,R),n.offset,n.sessionId)}}if(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(C){this.privErrorCallback&&this.privErrorCallback(C)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}l=!0;break}const h=new r.Deferred;return h.resolve(l),h.promise}cancelRecognition(f,a,n,l,u){const h=new i.PropertyCollection;if(h.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[l]),this.privIntentRecognizer.canceled){const d=new i.IntentRecognitionCanceledEventArgs(n,u,l,void 0,void 0,f);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new i.IntentRecognitionResult(void 0,a,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,h);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}};return cu.IntentServiceRecognizer=p,cu}var uu={},Yw;function BL(){if(Yw)return uu;Yw=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.IntentResponse=void 0;let r=class XD{constructor(o){o===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(o)}static fromJSON(o){return new XD(o)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};return uu.IntentResponse=r,uu}var Ev={},Xw;function UL(){return Xw||(Xw=1,Object.defineProperty(Ev,"__esModule",{value:!0})),Ev}var lu={},fu={},Zw;function FL(){if(Zw)return fu;Zw=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.ServiceTelemetryListener=void 0;const r=ze(),i=vS();class o{constructor(s,f,a){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=s,this.privAudioSourceId=f,this.privAudioNodeId=a,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(s){s>0&&this.privPhraseLatencies.push(Date.now()-s)}hypothesisReceived(s){s>0&&this.privHypothesisLatencies.push(Date.now()-s)}onEvent(s){this.privIsDisposed||(s instanceof i.RecognitionTriggeredEvent&&s.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:s.eventTime,Name:"ListeningTrigger",Start:s.eventTime}),s instanceof r.AudioStreamNodeAttachingEvent&&s.audioSourceId===this.privAudioSourceId&&s.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=s.eventTime),s instanceof r.AudioStreamNodeAttachedEvent&&s.audioSourceId===this.privAudioSourceId&&s.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=s.eventTime),s instanceof r.AudioSourceErrorEvent&&s.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:s.eventTime,Error:s.error,Name:"Microphone",Start:this.privMicStartTime})),s instanceof r.AudioStreamNodeErrorEvent&&s.audioSourceId===this.privAudioSourceId&&s.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:s.eventTime,Error:s.error,Name:"Microphone",Start:this.privMicStartTime})),s instanceof r.AudioStreamNodeDetachedEvent&&s.audioSourceId===this.privAudioSourceId&&s.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:s.eventTime,Name:"Microphone",Start:this.privMicStartTime})),s instanceof i.ConnectingToServiceEvent&&s.requestId===this.privRequestId&&(this.privConnectionId=s.sessionId),s instanceof r.ConnectionStartEvent&&s.connectionId===this.privConnectionId&&(this.privConnectionStartTime=s.eventTime),s instanceof r.ConnectionEstablishedEvent&&s.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:s.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),s instanceof r.ConnectionEstablishErrorEvent&&s.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:s.eventTime,Error:this.getConnectionError(s.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),s instanceof r.ConnectionMessageReceivedEvent&&s.connectionId===this.privConnectionId&&s.message&&s.message.headers&&s.message.headers.path&&(this.privReceivedMessages[s.message.headers.path]||(this.privReceivedMessages[s.message.headers.path]=new Array),this.privReceivedMessages[s.message.headers.path].length<50&&this.privReceivedMessages[s.message.headers.path].push(s.networkReceivedTime)))}getTelemetry(){const s=new Array;this.privListeningTriggerMetric&&s.push(this.privListeningTriggerMetric),this.privMicMetric&&s.push(this.privMicMetric),this.privConnectionEstablishMetric&&s.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&s.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&s.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const f={Metrics:s,ReceivedMessages:this.privReceivedMessages},a=JSON.stringify(f);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],a}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(s){switch(s){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+s.toString()}}}return fu.ServiceTelemetryListener=o,fu}var eA;function HL(){if(eA)return lu;eA=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.RequestSession=void 0;const r=ze(),i=vS(),o=FL();let p=class{constructor(f){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=f,this.privRequestId=(0,r.createNoDashGuid)(),this.privAudioNodeId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(f){this.privServiceTelemetryListener&&this.privDetachables.push(f.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new o.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new i.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(f,a){this.privAudioNode=f,this.privIsAudioNodeDetached=!1,a?await this.onComplete():this.onEvent(new i.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(f,a){this.privAuthFetchEventId=f,this.privSessionId=a,this.onEvent(new i.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(f){f&&await this.onComplete()}async onConnectionEstablishCompleted(f,a){if(f===200){this.onEvent(new i.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else f===403&&await this.onComplete()}async onServiceTurnEndResponse(f){this.privTurnDeferral.resolve(),!f||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,r.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred}onHypothesis(f){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(f)))}onPhraseRecognized(f){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(f)),this.onServiceRecognized(f)}onServiceRecognized(f){this.privLastRecoOffset=f,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(f),this.privConnectionAttempts=0}onAudioSent(f){this.privBytesSent+=f,this.privRecognitionBytesSent+=f}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const f of this.privDetachables)await f.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(f){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(f),r.Events.instance.onEvent(f)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return lu.RequestSession=p,lu}var hu={},wv={},tA;function VL(){return tA||(tA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TentativePhraseResultsOption=r.OutputFormat=r.PhraseExtension=r.PhraseOption=void 0,function(i){i.WordTimings="WordTimings",i.SNR="SNR",i.Pronunciation="Pronunciation",i.WordPronunciation="WordPronunciation",i.WordConfidence="WordConfidence",i.Words="Words",i.Sentiment="Sentiment",i.PronunciationAssessment="PronunciationAssessment",i.ContentAssessment="ContentAssessment",i.PhraseAMScore="PhraseAMScore",i.PhraseLMScore="PhraseLMScore",i.WordAMScore="WordAMScore",i.WordLMScore="WordLMScore",i.RuleTree="RuleTree",i.NBestTimings="NBestTimings",i.DecoderDiagnostics="DecoderDiagnostics",i.DisplayWordTimings="DisplayWordTimings",i.DisplayWords="DisplayWords"}(r.PhraseOption||(r.PhraseOption={})),function(i){i.Graph="Graph",i.Corrections="Corrections",i.Sentiment="Sentiment"}(r.PhraseExtension||(r.PhraseExtension={})),function(i){i.Simple="Simple",i.Detailed="Detailed"}(r.OutputFormat||(r.OutputFormat={})),function(i){i.None="None",i.Always="Always"}(r.TentativePhraseResultsOption||(r.TentativePhraseResultsOption={}))}(wv)),wv}var rA;function WL(){if(rA)return hu;rA=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.SpeechContext=void 0;const r=Cr(),i=VL();let o=class{constructor(s){this.privContext={},this.privDynamicGrammar=s}getContext(){return this.privContext}setPronunciationAssessmentParams(s,f,a=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(s)||{},a&&(this.privContext.phraseDetection.mode=r.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(i.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.SNR),f&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:f},this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=i.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=i.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(i.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(i.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(s){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=s}toJSON(){const s=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=s,JSON.stringify(this.privContext)}};return hu.SpeechContext=o,hu}var pu={},Av={},nA;function GL(){return nA||(nA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubstringMatchType=r.GroupType=void 0,function(i){i.IntentText="IntentText",i.IntentEntity="IntentEntity",i.Generic="Generic",i.People="People",i.Place="Place",i.DynamicEntity="DynamicEntity"}(r.GroupType||(r.GroupType={})),function(i){i.None="None",i.LeftRooted="LeftRooted",i.PartialName="PartialName",i.MiddleOfSentence="MiddleOfSentence"}(r.SubstringMatchType||(r.SubstringMatchType={}))}(Av)),Av}var iA;function KL(){if(iA)return pu;iA=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.DynamicGrammarBuilder=void 0;const r=GL();let i=class{addPhrase(p){this.privPhrases||(this.privPhrases=[]),p instanceof Array?this.privPhrases=this.privPhrases.concat(p):this.privPhrases.push(p)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(p){this.privGrammars||(this.privGrammars=[]),p instanceof Array?this.privGrammars=this.privGrammars.concat(p):this.privGrammars.push(p)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const p={};if(p.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const s=[];this.privPhrases.forEach(f=>{s.push({text:f})}),p.groups=[{type:r.GroupType.Generic,items:s}]}return p}};return pu.DynamicGrammarBuilder=i,pu}var du={},vu={},gu={},Tv={},oA;function ZD(){return oA||(oA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageDataStreamType=r.ActivityPayloadResponse=void 0;class i{constructor(p){this.privActivityResponse=JSON.parse(p)}static fromJSON(p){return new i(p)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}r.ActivityPayloadResponse=i,function(o){o[o.None=0]="None",o[o.TextToSpeechAudio=1]="TextToSpeechAudio"}(r.MessageDataStreamType||(r.MessageDataStreamType={}))}(Tv)),Tv}var sA;function $L(){if(sA)return gu;sA=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.DialogServiceTurnState=void 0;const r=vl(),i=wo(),o=ZD();let p=class{constructor(f,a){this.privRequestId=a,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=f,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(f,a){return f.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=i.AudioOutputStream.createPullStream(),this.privAudioStream.format=a!==void 0?a:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return gu.DialogServiceTurnState=p,gu}var aA;function JL(){if(aA)return vu;aA=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.DialogServiceTurnStateManager=void 0;const r=zr(),i=$L();let o=class{constructor(){this.privTurnMap=new Map}StartTurn(s){if(this.privTurnMap.has(s))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+s);const f=new i.DialogServiceTurnState(this,s);return this.privTurnMap.set(s,f),this.privTurnMap.get(s)}GetTurn(s){return this.privTurnMap.get(s)}CompleteTurn(s){if(!this.privTurnMap.has(s))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+s);const f=this.privTurnMap.get(s);return f.complete(),this.privTurnMap.delete(s),f}};return vu.DialogServiceTurnStateManager=o,vu}var Pv={},cA;function QL(){return cA||(cA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InvocationSource=void 0,function(i){i.None="None",i.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(r.InvocationSource||(r.InvocationSource={}))}(Pv)),Pv}var Ov={},uA;function YL(){return uA||(uA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.OnRejectAction=r.KeywordDetectionType=void 0,function(i){i.StartTrigger="StartTrigger"}(r.KeywordDetectionType||(r.KeywordDetectionType={})),function(i){i.EndOfTurn="EndOfTurn",i.Continue="Continue"}(r.OnRejectAction||(r.OnRejectAction={}))}(Ov)),Ov}var lA;function XL(){if(lA)return du;lA=1,Object.defineProperty(du,"__esModule",{value:!0}),du.DialogServiceAdapter=void 0;const r=Mt(),i=sD(),o=ze(),p=vl(),s=Ae(),f=JL(),a=De(),n=ZD(),l=QL(),u=YL(),h=Ao();let d=class extends a.ServiceRecognizerBase{constructor(g,m,C,_,b){super(g,m,C,_,b),this.privEvents=new o.EventSource,this.privDialogServiceConnector=b,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new f.DialogServiceTurnStateManager,this.recognizeOverride=(R,A,w)=>this.listenOnce(R,A,w),this.postConnectImplOverride=R=>this.dialogConnectImpl(R),this.configConnectionOverride=R=>this.configConnection(R),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=C,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(R=>{R.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(g){const m=(0,o.createGuid)(),C=(0,o.createNoDashGuid)(),_={context:{interactionId:m},messagePayload:JSON.parse(g),version:.5},b=JSON.stringify(_);await(await this.fetchConnection()).send(new h.SpeechConnectionMessage(o.MessageType.Text,"agent",C,"application/json",b))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(g){const m=new s.PropertyCollection;g.messageType===o.MessageType.Text&&m.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,g.textBody);let C,_;switch(g.path.toLowerCase()){case"speech.phrase":const R=a.SimpleSpeechPhrase.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(R.Offset+R.Duration),R.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&R.RecognitionStatus!==a.RecognitionStatus.Error){const D=this.fireEventForResult(R,m);if(this.privLastResult=D.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,D)}catch{}}_=!0;break;case"speech.hypothesis":const A=a.SpeechHypothesis.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);C=new s.SpeechRecognitionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,A.Text,A.Duration,A.Offset,A.Language,A.LanguageDetectionConfidence,void 0,void 0,A.asJson(),m),this.privRequestSession.onHypothesis(A.Offset);const w=new s.SpeechRecognitionEventArgs(C,A.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,w)}catch{}_=!0;break;case"speech.keyword":const O=a.SpeechKeyword.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);C=new s.SpeechRecognitionResult(this.privRequestSession.requestId,O.Status==="Accepted"?s.ResultReason.RecognizedKeyword:s.ResultReason.NoMatch,O.Text,O.Duration,O.Offset,void 0,void 0,void 0,void 0,O.asJson(),m),O.Status!=="Accepted"&&(this.privLastResult=C);const P=new s.SpeechRecognitionEventArgs(C,C.duration,C.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}_=!0;break;case"audio":{const D=g.requestId.toUpperCase(),N=this.privTurnStateManager.GetTurn(D);try{g.binaryBody?N.audioStream.write(g.binaryBody):N.endAudioStream()}catch{}}_=!0;break;case"response":this.handleResponseMessage(g),_=!0;break}const b=new o.Deferred;return b.resolve(_),b.promise}async cancelRecognition(g,m,C,_,b){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const R=new s.PropertyCollection;R.setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[_]);const A=new s.SpeechRecognitionCanceledEventArgs(C,b,_,void 0,g);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,A)}catch{}if(this.privSuccessCallback){const w=new s.SpeechRecognitionResult(void 0,s.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,b,void 0,R);try{this.privSuccessCallback(w),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(g,m,C){this.privRecognizerConfig.recognitionMode=g,this.privSuccessCallback=m,this.privErrorCallback=C,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const _=this.connectImpl(),b=this.sendPreAudioMessages(),R=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),A=await this.privDialogAudioSource.format,w=await this.privDialogAudioSource.deviceInfo,O=new r.ReplayableAudioNode(R,A.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(O,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:w};try{await _,await b}catch(N){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,N),Promise.resolve()}const P=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,P),this.sendAudio(O).then(()=>{},async N=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,N)})}dialogConnectImpl(g){return this.privConnectionLoop=this.startMessageLoop(),g}receiveDialogMessageOverride(){const g=new o.Deferred,m=async()=>{try{const C=this.isDisposed(),_=!this.isDisposed()&&this.terminateMessageLoop;if(C||_){g.resolve(void 0);return}const R=await(await this.fetchConnection()).read();if(!R)return m();const A=h.SpeechConnectionMessage.fromConnectionMessage(R);switch(A.path.toLowerCase()){case"turn.start":{const Y=A.requestId.toUpperCase(),oe=this.privRequestSession.requestId.toUpperCase();Y!==oe?this.privTurnStateManager.StartTurn(Y):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const O=a.SpeechDetected.fromJSON(A.textBody,this.privRequestSession.currentTurnAudioOffset),P=new s.RecognitionEventArgs(O.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,P);break;case"speech.enddetected":let D;A.textBody.length>0?D=A.textBody:D="{ Offset: 0 }";const N=a.SpeechDetected.fromJSON(D,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(N.Offset);const $=new s.RecognitionEventArgs(N.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,$);break;case"turn.end":{const Y=A.requestId.toUpperCase(),oe=this.privRequestSession.requestId.toUpperCase();if(Y!==oe)this.privTurnStateManager.CompleteTurn(Y);else{const ae=new s.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,ae),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(fe){this.privErrorCallback&&this.privErrorCallback(fe)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(A)||this.serviceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(A.path.toLowerCase(),A.textBody))}catch{}}return m()}catch{this.terminateMessageLoop=!0,g.resolve()}};return m().catch(C=>{o.Events.instance.onEvent(new o.BackgroundEvent(C))}),g.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(g){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,g)}return Promise.resolve()}async configConnection(g){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(g,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(g),g)}async sendPreAudioMessages(){const g=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(g,!0),await this.sendAgentContext(g),await this.sendWaveHeader(g)}sendAgentConfig(g){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Conversation_DialogType)===s.DialogServiceConfig.DialogTypes.CustomCommands){const C=this.agentConfig.get();C.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(C)}this.onEvent(new i.SendingAgentContextMessageEvent(this.agentConfig));const m=this.agentConfig.toJsonString();return this.agentConfigSent=!0,g.send(new h.SpeechConnectionMessage(o.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",m))}}sendAgentContext(g){const m=(0,o.createGuid)(),C=this.privDialogServiceConnector.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template),b=JSON.stringify({channelData:"",context:{interactionId:m},messagePayload:typeof C===void 0?void 0:C,version:.5});return g.send(new h.SpeechConnectionMessage(o.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",b))}fireEventForResult(g,m){const C=a.EnumTranslation.implTranslateRecognitionResult(g.RecognitionStatus),_=new s.SpeechRecognitionResult(this.privRequestSession.requestId,C,g.DisplayText,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),m);return new s.SpeechRecognitionEventArgs(_,g.Offset,this.privRequestSession.sessionId)}handleResponseMessage(g){const m=JSON.parse(g.textBody);switch(m.messageType.toLowerCase()){case"message":const C=g.requestId.toUpperCase(),_=n.ActivityPayloadResponse.fromJSON(g.textBody),b=this.privTurnStateManager.GetTurn(C);if(_.conversationId){const w=this.agentConfig.get();w.botInfo.conversationId=_.conversationId,this.agentConfig.set(w)}const R=b.processActivityPayload(_,p.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),A=new s.ActivityReceivedEventArgs(_.messagePayload,R);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,A)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new s.TurnStatusReceivedEventArgs(g.textBody))}catch{}break;default:o.Events.instance.onEvent(new o.BackgroundEvent(`Unexpected response of type ${m.messageType}. Ignoring.`));break}}onEvent(g){this.privEvents.onEvent(g),o.Events.instance.onEvent(g)}addKeywordContextData(){const g=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(g===void 0)return;const m=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),C=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),_=g.split(";"),b=m===void 0?[]:m.split(";"),R=C===void 0?[]:C.split(";"),A=[];for(let w=0;w<_.length;w++){const O={text:_[w]};w<b.length&&(O.startOffset=Number(b[w])),w<R.length&&(O.duration=Number(R[w])),A.push(O)}this.speechContext.getContext().invocationSource=l.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:A,onReject:{action:u.OnRejectAction.EndOfTurn},type:u.KeywordDetectionType.StartTrigger}]}};return du.DialogServiceAdapter=d,du}var yu={},fA;function ZL(){if(fA)return yu;fA=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.AgentConfig=void 0;let r=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(o){this.iPrivConfig=o}};return yu.AgentConfig=r,yu}var Iv={},mu={},Su={},hA;function gS(){if(hA)return Su;hA=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.ConversationConnectionConfig=void 0;const r=WD();let i=class qn extends r.RestConfigBase{static get host(){return qn.privHost}static get apiVersion(){return qn.privApiVersion}static get clientAppId(){return qn.privClientAppId}static get defaultLanguageCode(){return qn.privDefaultLanguageCode}static get restPath(){return qn.privRestPath}static get webSocketPath(){return qn.privWebSocketPath}static get transcriptionEventKeys(){return qn.privTranscriptionEventKeys}};return Su.ConversationConnectionConfig=i,i.privHost="dev.microsofttranslator.com",i.privRestPath="/capito/room",i.privApiVersion="2.0",i.privDefaultLanguageCode="en-US",i.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",i.privWebSocketPath="/capito/translate",i.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],Su}var pA;function ex(){if(pA)return mu;pA=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.ConversationManager=void 0;const r=Mt(),i=Ve(),o=Ae(),p=gS();let s=class{constructor(){this.privRequestParams=p.ConversationConnectionConfig.configParams,this.privErrors=p.ConversationConnectionConfig.restErrors,this.privHost=p.ConversationConnectionConfig.host,this.privApiVersion=p.ConversationConnectionConfig.apiVersion,this.privRestPath=p.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}createOrJoin(a,n,l,u){try{i.Contracts.throwIfNullOrUndefined(a,"args");const h=a.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,p.ConversationConnectionConfig.defaultLanguageCode),d=a.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),y=a.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),g=a.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),m=a.getProperty(o.PropertyId.SpeechServiceConnection_Key),C=a.getProperty(o.PropertyId.SpeechServiceConnection_Region),_=a.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);i.Contracts.throwIfNullOrWhitespace(h,"languageCode"),i.Contracts.throwIfNullOrWhitespace(d,"nickname"),i.Contracts.throwIfNullOrWhitespace(y,"endpointHost");const b={};b[this.privRequestParams.apiVersion]=this.privApiVersion,b[this.privRequestParams.languageCode]=h,b[this.privRequestParams.nickname]=d;const R={};g&&(R[this.privRequestParams.correlationId]=g),R[this.privRequestParams.clientAppId]=p.ConversationConnectionConfig.clientAppId,n!==void 0?b[this.privRequestParams.roomId]=n:(i.Contracts.throwIfNullOrUndefined(C,this.privErrors.authInvalidSubscriptionRegion),R[this.privRequestParams.subscriptionRegion]=C,m?R[this.privRequestParams.subscriptionKey]=m:_?R[this.privRequestParams.authorization]=`Bearer ${_}`:i.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionKey));const A={};A.headers=R,this.privRestAdapter.options=A;const w=`https://${y}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Post,w,b,null).then(O=>{const P=r.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,O.headers);if(!O.ok){if(u){let N=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",O.status.toString()),$;try{$=JSON.parse(O.data),N+=` [${$.error.code}: ${$.error.message}]`}catch{N+=` [${O.data}]`}P&&(N+=` ${P}`),u(N)}return}const D=JSON.parse(O.data);if(D&&(D.requestId=P),l){try{l(D)}catch(N){u&&u(N)}l=void 0}}).catch(()=>{})}catch(h){if(u)if(h instanceof Error){const d=h;u(d.name+": "+d.message)}else u(h)}}leave(a,n){return new Promise((l,u)=>{try{i.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),i.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","token"));const h=a.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),d=a.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),y={};y[this.privRequestParams.apiVersion]=this.privApiVersion,y[this.privRequestParams.sessionToken]=n;const g={};d&&(g[this.privRequestParams.correlationId]=d);const m={};m.headers=g,this.privRestAdapter.options=m;const C=`https://${h}${this.privRestPath}`;this.privRestAdapter.request(r.RestRequestType.Delete,C,y,null).then(_=>{_.ok,l()}).catch(()=>{})}catch(h){if(h instanceof Error){const d=h;u(d.name+": "+d.message)}else u(h)}})}};return mu.ConversationManager=s,mu}var _i={},Cu={},bu={},Ru={},dA;function e2(){if(dA)return Ru;dA=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.ConversationConnectionMessage=void 0;const r=ze();let i=class extends r.ConnectionMessage{constructor(p,s,f,a){super(p,s,f,a);const n=JSON.parse(this.textBody);n.type!==void 0&&(this.privConversationMessageType=n.type)}get conversationMessageType(){return this.privConversationMessageType}};return Ru.ConversationConnectionMessage=i,Ru}var vA;function tx(){if(vA)return bu;vA=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.ConversationWebsocketMessageFormatter=void 0;const r=ze(),i=e2();let o=class{toConnectionMessage(s){const f=new r.Deferred;try{if(s.messageType===r.MessageType.Text){const a=new i.ConversationConnectionMessage(s.messageType,s.textContent,{},s.id);f.resolve(a)}else s.messageType===r.MessageType.Binary&&f.resolve(new i.ConversationConnectionMessage(s.messageType,s.binaryContent,void 0,s.id))}catch(a){f.reject(`Error formatting the message. Error: ${a}`)}return f.promise}fromConnectionMessage(s){const f=new r.Deferred;try{if(s.messageType===r.MessageType.Text){const a=`${s.textBody?s.textBody:""}`;f.resolve(new r.RawWebsocketMessage(r.MessageType.Text,a,s.id))}}catch(a){f.reject(`Error formatting the message. ${a}`)}return f.promise}};return bu.ConversationWebsocketMessageFormatter=o,bu}var gA;function rx(){if(gA)return Cu;gA=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.ConversationConnectionFactory=void 0;const r=Mt(),i=ze(),o=Ve(),p=Ae(),s=Or(),f=gS(),a=tx();let n=class extends s.ConnectionFactoryBase{create(u,h,d){const y=u.parameters.getProperty(p.PropertyId.ConversationTranslator_Host,f.ConversationConnectionConfig.host),g=u.parameters.getProperty(p.PropertyId.ConversationTranslator_CorrelationId,(0,i.createGuid)()),m=`wss://${y}${f.ConversationConnectionConfig.webSocketPath}`,C=u.parameters.getProperty(p.PropertyId.ConversationTranslator_Token,void 0);o.Contracts.throwIfNullOrUndefined(C,"token");const _={};_[f.ConversationConnectionConfig.configParams.apiVersion]=f.ConversationConnectionConfig.apiVersion,_[f.ConversationConnectionConfig.configParams.token]=C,_[f.ConversationConnectionConfig.configParams.correlationId]=g;const b=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new r.WebsocketConnection(m,_,{},new a.ConversationWebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(u),b,d))}};return Cu.ConversationConnectionFactory=n,Cu}var _u={},Eu={},yA;function nx(){if(yA)return Eu;yA=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.ConversationRequestSession=void 0;const r=ze();let i=class{constructor(p){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=p,this.privRequestId=(0,r.createNoDashGuid)(),this.privRequestCompletionDeferral=new r.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(p,s){this.privSessionId=s}onAuthCompleted(p){p&&this.onComplete()}onConnectionEstablishCompleted(p){p!==200&&p===403&&this.onComplete()}onServiceTurnEndResponse(p){p?this.privRequestId=(0,r.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const p of this.privDetachables)await p.detach()}}onComplete(){}};return Eu.ConversationRequestSession=i,Eu}var Vt={},mA;function t2(){if(mA)return Vt;mA=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.ConversationReceivedTranslationEventArgs=Vt.ParticipantsListEventArgs=Vt.ParticipantAttributeEventArgs=Vt.ParticipantEventArgs=Vt.LockRoomEventArgs=Vt.MuteAllEventArgs=void 0;const r=Ae();class i extends r.SessionEventArgs{constructor(l,u){super(u),this.privIsMuted=l}get isMuted(){return this.privIsMuted}}Vt.MuteAllEventArgs=i;class o extends r.SessionEventArgs{constructor(l,u){super(u),this.privIsLocked=l}get isMuted(){return this.privIsLocked}}Vt.LockRoomEventArgs=o;class p extends r.SessionEventArgs{constructor(l,u){super(u),this.privParticipant=l}get participant(){return this.privParticipant}}Vt.ParticipantEventArgs=p;class s extends r.SessionEventArgs{constructor(l,u,h,d){super(d),this.privKey=u,this.privValue=h,this.privParticipantId=l}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Vt.ParticipantAttributeEventArgs=s;class f extends r.SessionEventArgs{constructor(l,u,h,d,y,g,m,C,_){super(_),this.privRoomId=l,this.privSessionToken=u,this.privTranslateTo=h,this.privProfanityFilter=d,this.privRoomProfanityFilter=y,this.privIsRoomLocked=g,this.privIsRoomLocked=m,this.privParticipants=C}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Vt.ParticipantsListEventArgs=f;class a{constructor(l,u,h){this.privPayload=u,this.privCommand=l,this.privSessionId=h}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Vt.ConversationReceivedTranslationEventArgs=a,Vt}var rn={},SA;function r2(){if(SA)return rn;SA=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.ConversationTranslatorCommandTypes=rn.ConversationTranslatorMessageTypes=rn.InternalParticipants=void 0;class r{constructor(o=[],p){this.participants=o,this.meId=p}addOrUpdateParticipant(o){if(o===void 0)return;const p=this.getParticipantIndex(o.id);return p>-1?this.participants.splice(p,1,o):this.participants.push(o),this.getParticipant(o.id)}getParticipantIndex(o){return this.participants.findIndex(p=>p.id===o)}getParticipant(o){return this.participants.find(p=>p.id===o)}deleteParticipant(o){this.participants=this.participants.filter(p=>p.id!==o)}get host(){return this.participants.find(o=>o.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return rn.InternalParticipants=r,rn.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},rn.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},rn}var Mv={},wu={},CA;function ix(){if(CA)return wu;CA=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.CommandResponsePayload=void 0;const r=o=>JSON.parse(o);let i=class n2{constructor(p){this.privCommandResponse=r(p)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(p){return new n2(p)}};return wu.CommandResponsePayload=i,wu}var Ei={},bA;function ox(){if(bA)return Ei;bA=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.ParticipantPayloadResponse=Ei.ParticipantsListPayloadResponse=void 0;const r=s=>JSON.parse(s),i=s=>JSON.parse(s);class o{constructor(f){this.privParticipantsPayloadResponse=r(f)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(f){return new o(f)}}Ei.ParticipantsListPayloadResponse=o;class p{constructor(f){this.privParticipantPayloadResponse=i(f)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(f){return new p(f)}}return Ei.ParticipantPayloadResponse=p,Ei}var wi={},RA;function sx(){if(RA)return wi;RA=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.TextResponsePayload=wi.SpeechResponsePayload=void 0;const r=s=>JSON.parse(s),i=s=>JSON.parse(s);class o{constructor(f){this.privSpeechResponse=r(f)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(f){return new o(f)}}wi.SpeechResponsePayload=o;class p{constructor(f){this.privTextResponse=i(f)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(f){return new p(f)}}return wi.TextResponsePayload=p,wi}var _A;function ax(){return _A||(_A=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextResponsePayload=r.SpeechResponsePayload=r.ParticipantPayloadResponse=r.ParticipantsListPayloadResponse=r.CommandResponsePayload=void 0;var i=ix();Object.defineProperty(r,"CommandResponsePayload",{enumerable:!0,get:function(){return i.CommandResponsePayload}});var o=ox();Object.defineProperty(r,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return o.ParticipantsListPayloadResponse}}),Object.defineProperty(r,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return o.ParticipantPayloadResponse}});var p=sx();Object.defineProperty(r,"SpeechResponsePayload",{enumerable:!0,get:function(){return p.SpeechResponsePayload}}),Object.defineProperty(r,"TextResponsePayload",{enumerable:!0,get:function(){return p.TextResponsePayload}})}(Mv)),Mv}var EA;function cx(){if(EA)return _u;EA=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.ConversationServiceAdapter=void 0;const r=ze(),i=Ae(),o=De(),p=e2(),s=nx(),f=t2(),a=r2(),n=ax();let l=class extends o.ServiceRecognizerBase{constructor(h,d,y,g,m){super(h,d,y,g,m),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=m,this.privConversationAuthentication=h,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=C=>this.conversationConnectImpl(C),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new s.ConversationRequestSession((0,r.createNoDashGuid)()),this.privConversationConnectionFactory=d,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(h){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(h),await super.dispose(h)}async sendMessage(h){return(await this.fetchConnection()).send(new p.ConversationConnectionMessage(r.MessageType.Text,h))}async sendMessageAsync(h){await(await this.fetchConnection()).send(new p.ConversationConnectionMessage(r.MessageType.Text,h))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(h,d,y,g,m){this.terminateMessageLoop=!0;const C=new i.ConversationTranslationCanceledEventArgs(y,m,g,void 0,h);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,C)}catch{}}async conversationConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const h=new r.Deferred;try{const y=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return h.resolve(),Promise.resolve();if(!y)return this.receiveConversationMessageOverride();const g=this.privConversationRequestSession.sessionId,m=y.conversationMessageType.toLowerCase();let C=!1;try{switch(m){case"info":case"participant_command":case"command":const _=n.CommandResponsePayload.fromJSON(y.textBody);switch(_.command.toLowerCase()){case"participantlist":const P=n.ParticipantsListPayloadResponse.fromJSON(y.textBody),D=P.participants.map(fe=>({avatar:fe.avatar,displayName:fe.nickname,id:fe.participantId,isHost:fe.ishost,isMuted:fe.ismuted,isUsingTts:fe.usetts,preferredLanguage:fe.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new f.ParticipantsListEventArgs(P.roomid,P.token,P.translateTo,P.profanityFilter,P.roomProfanityFilter,P.roomLocked,P.muteAll,D,g));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new f.ParticipantAttributeEventArgs(_.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,_.value,g));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new f.ParticipantAttributeEventArgs(_.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,_.value,g));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new f.ParticipantAttributeEventArgs(_.participantId,a.ConversationTranslatorCommandTypes.setMute,_.value,g));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new f.MuteAllEventArgs(_.value,g));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new i.ConversationExpirationEventArgs(_.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new f.ParticipantAttributeEventArgs(_.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,_.value,g));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new f.LockRoomEventArgs(_.value,g));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new f.ParticipantAttributeEventArgs(_.participantId,a.ConversationTranslatorCommandTypes.changeNickname,_.value,g));break;case"joinsession":const N=n.ParticipantPayloadResponse.fromJSON(y.textBody),$={avatar:N.avatar,displayName:N.nickname,id:N.participantId,isHost:N.ishost,isMuted:N.ismuted,isUsingTts:N.usetts,preferredLanguage:N.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new f.ParticipantEventArgs($,g));break;case"leavesession":const Y={id:_.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new f.ParticipantEventArgs(Y,g));break;case"disconnectsession":const oe={id:_.participantId};break;case"token":const ae=new o.CognitiveTokenAuthentication(()=>{const fe=_.token;return Promise.resolve(fe)},()=>{const fe=_.token;return Promise.resolve(fe)});this.authentication=ae,this.privConversationServiceConnector.onToken(ae);break;default:break}break;case"partial":case"final":const b=n.SpeechResponsePayload.fromJSON(y.textBody),R=m==="final"?i.ResultReason.TranslatedParticipantSpeech:i.ResultReason.TranslatingParticipantSpeech,A=new i.ConversationTranslationResult(b.participantId,this.getTranslations(b.translations),b.language,b.id,R,b.recognition,void 0,void 0,y.textBody,void 0);b.isFinal?((A.text!==void 0&&A.text.length>0||b.id===this.privLastPartialUtteranceId)&&(C=!0),C&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new f.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,A,g))):A.text!==void 0&&(this.privLastPartialUtteranceId=b.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new f.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,A,g)));break;case"translated_message":const w=n.TextResponsePayload.fromJSON(y.textBody),O=new i.ConversationTranslationResult(w.participantId,this.getTranslations(w.translations),w.language,void 0,void 0,w.originalText,void 0,void 0,void 0,y.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new f.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,O,g));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return h.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const h=this.receiveConversationMessageOverride();try{return await h}catch(d){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,d),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(h=>h.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(h=>h),this.privConnectionConfigPromise)}getTranslations(h){let d;if(h!==void 0){d=new i.Translations;for(const y of h)d.set(y.lang,y.translation)}return d}};return _u.ConversationServiceAdapter=l,_u}var wA;function ux(){if(wA)return _i;wA=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.ConversationTranslatorRecognizer=_i.ConversationRecognizerFactory=void 0;const r=De(),i=ze(),o=Ve(),p=Ae(),s=rx(),f=cx();class a{static fromConfig(u,h,d){return new n(u,h,d)}}_i.ConversationRecognizerFactory=a;let n=class extends p.Recognizer{constructor(u,h,d){const y=h;o.Contracts.throwIfNull(y,"speechConfig");const g=u;o.Contracts.throwIfNull(g,"conversationImpl"),super(d,y.properties,new s.ConversationConnectionFactory),this.privConversation=g,this.privIsDisposed=!1,this.privProperties=y.properties.clone(),this.privConnection=p.Connection.fromRecognizer(this),this.privProperties.getProperty(p.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=i.Timeout.setTimeout,this.privClearTimeout=i.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,h,d){try{o.Contracts.throwIfDisposed(this.privIsDisposed),o.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(h,d)}catch(y){if(d)if(y instanceof Error){const g=y;d(g.name+": "+g.message)}else d(y)}}disconnect(u,h){try{o.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},d=>{h&&h(d)})}catch(d){if(h)if(d instanceof Error){const y=d;h(y.name+": "+y.message)}else h(d);this.dispose(!0).catch(y=>{i.Events.instance.onEvent(new i.BackgroundEvent(y))})}}sendRequest(u,h,d){try{o.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,h,d)}catch(y){if(d)if(y instanceof Error){const g=y;d(g.name+": "+g.message)}else d(y);this.dispose(!0).catch(g=>{i.Events.instance.onEvent(new i.BackgroundEvent(g))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new r.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,h,d,y){const g=d;return new f.ConversationServiceAdapter(u,h,g,y,this)}sendMessage(u,h,d){const y=this.privReco;((m,C,_)=>{m!==void 0?m.then(()=>{try{C&&C()}catch(b){_&&_(`'Unhandled error on promise callback: ${b}'`)}},b=>{try{_&&_(b)}catch{}}):_&&_("Null promise")})(y.sendMessageAsync(u),h,d),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return _i.ConversationTranslatorRecognizer=n,_i}var Au={},AA;function lx(){if(AA)return Au;AA=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.TranscriberRecognizer=void 0;const r=ze(),i=Ve(),o=Ae(),p=De(),s=Cr();let f=class extends o.Recognizer{constructor(n,l){const u=n;i.Contracts.throwIfNull(u,"speechTranslationConfig");const h=l;i.Contracts.throwIfNull(h,"audioConfigImpl"),i.Contracts.throwIfNullOrWhitespace(u.speechRecognitionLanguage,o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(l,u.properties,new p.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(n){i.Contracts.throwIfNullOrWhitespace(n,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,n)}set conversation(n){i.Contracts.throwIfNullOrUndefined(n,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=n}getConversationInfo(){return i.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(n){i.Contracts.throwIfNullOrUndefined(n,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=n}getMeetingInfo(){return i.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(n,l){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),n,l)}stopContinuousRecognitionAsync(n,l){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),n,l)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(n,l){const u=this.privReco;i.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendSpeechEventAsync(n,l)}async pushMeetingEvent(n,l){const u=this.privReco;i.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendMeetingSpeechEventAsync(n,l)}async enforceAudioGating(){const u=(await this.audioConfig.format).channels;if(u===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(u!==8)throw new Error(`Unsupported audio configuration: Detected ${u}-channel audio`)}connectMeetingCallbacks(n){this.isMeetingRecognizer=!0,this.canceled=(l,u)=>{n.canceled&&n.canceled(n,u)},this.recognizing=(l,u)=>{n.transcribing&&n.transcribing(n,u)},this.recognized=(l,u)=>{n.transcribed&&n.transcribed(n,u)},this.sessionStarted=(l,u)=>{n.sessionStarted&&n.sessionStarted(n,u)},this.sessionStopped=(l,u)=>{n.sessionStopped&&n.sessionStopped(n,u)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(n){this.privDisposedRecognizer||(n&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(n))}createRecognizerConfig(n){return new p.RecognizerConfig(n,this.properties)}createServiceRecognizer(n,l,u,h){const d=u;return new p.TranscriptionServiceRecognizer(n,l,d,h,this)}};return Au.TranscriberRecognizer=f,Au}var TA;function fx(){return TA||(TA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalParticipants=r.ConversationTranslatorMessageTypes=r.ConversationTranslatorCommandTypes=r.ParticipantsListEventArgs=r.ParticipantEventArgs=r.ParticipantAttributeEventArgs=r.MuteAllEventArgs=r.LockRoomEventArgs=r.ConversationReceivedTranslationEventArgs=r.TranscriberRecognizer=r.ConversationRecognizerFactory=r.ConversationConnectionConfig=r.ConversationManager=void 0;var i=ex();Object.defineProperty(r,"ConversationManager",{enumerable:!0,get:function(){return i.ConversationManager}});var o=gS();Object.defineProperty(r,"ConversationConnectionConfig",{enumerable:!0,get:function(){return o.ConversationConnectionConfig}});var p=ux();Object.defineProperty(r,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return p.ConversationRecognizerFactory}});var s=lx();Object.defineProperty(r,"TranscriberRecognizer",{enumerable:!0,get:function(){return s.TranscriberRecognizer}});var f=t2();Object.defineProperty(r,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return f.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(r,"LockRoomEventArgs",{enumerable:!0,get:function(){return f.LockRoomEventArgs}}),Object.defineProperty(r,"MuteAllEventArgs",{enumerable:!0,get:function(){return f.MuteAllEventArgs}}),Object.defineProperty(r,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return f.ParticipantAttributeEventArgs}}),Object.defineProperty(r,"ParticipantEventArgs",{enumerable:!0,get:function(){return f.ParticipantEventArgs}}),Object.defineProperty(r,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return f.ParticipantsListEventArgs}});var a=r2();Object.defineProperty(r,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(r,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(r,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Iv)),Iv}var Dv={},PA;function i2(){return PA||(PA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesisAudioMetadata=r.MetadataType=void 0,function(o){o.WordBoundary="WordBoundary",o.Bookmark="Bookmark",o.Viseme="Viseme",o.SentenceBoundary="SentenceBoundary",o.SessionEnd="SessionEnd",o.AvatarSignal="TalkingAvatarSignal"}(r.MetadataType||(r.MetadataType={}));class i{constructor(p){this.privSynthesisAudioMetadata=JSON.parse(p)}static fromJSON(p){return new i(p)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}r.SynthesisAudioMetadata=i}(Dv)),Dv}var Tu={},Tr={},OA;function hx(){if(OA)return Tr;OA=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.SynthesisStartedEvent=Tr.ConnectingToSynthesisServiceEvent=Tr.SynthesisTriggeredEvent=Tr.SpeechSynthesisEvent=void 0;const r=ze();class i extends r.PlatformEvent{constructor(a,n,l=r.EventType.Info){super(a,l),this.privRequestId=n}get requestId(){return this.privRequestId}}Tr.SpeechSynthesisEvent=i;class o extends i{constructor(a,n,l){super("SynthesisTriggeredEvent",a),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=l}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Tr.SynthesisTriggeredEvent=o;class p extends i{constructor(a,n){super("ConnectingToSynthesisServiceEvent",a),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}Tr.ConnectingToSynthesisServiceEvent=p;class s extends i{constructor(a,n){super("SynthesisStartedEvent",a),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}return Tr.SynthesisStartedEvent=s,Tr}var IA;function px(){if(IA)return Tu;IA=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.SynthesisTurn=void 0;const r=ze(),i=wo(),o=Ae(),p=i2(),s=hx();let f=class sS{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,r.createNoDashGuid)(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(n){this.privStreamId=n}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(n){this.privAudioOutputFormat=n}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const n=new o.PropertyCollection;return n.setProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),n}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const n=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(n),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(n,l,u,h){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=n,this.privRawText=l,this.privIsSSML=u,this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",h!==void 0&&(this.privTurnAudioDestination=h,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new s.SynthesisTriggeredEvent(this.requestId,void 0,h===void 0?void 0:h.id()))}onPreConnectionStart(n){this.privAuthFetchEventId=n,this.onEvent(new s.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(n){n&&this.onComplete()}onConnectionEstablishCompleted(n){if(n===200){this.onEvent(new s.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else n===403&&this.onComplete()}onServiceResponseMessage(n){const l=JSON.parse(n);this.streamId=l.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(n){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred;const l=JSON.parse(n);l.webrtc&&(this.privWebRTCSDP=l.webrtc.connectionString)}onAudioChunkReceived(n){this.isSynthesizing&&(this.privAudioOutputStream.write(n),this.privBytesReceived+=n.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(n))}onTextBoundaryEvent(n){this.updateTextOffset(n.Data.text.Text,n.Type)}onVisemeMetadataReceived(n){n.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=n.Data.AnimationChunk)}onSessionEnd(n){this.privAudioDuration=n.Data.Offset}async constructSynthesisResult(){const n=await this.getAllReceivedAudioWithHeader();return new o.SpeechSynthesisResult(this.requestId,o.ResultReason.SynthesizingAudioCompleted,n,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const n=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",n}onEvent(n){r.Events.instance.onEvent(n)}static isXmlTag(n){return n.length>=2&&n[0]==="<"&&n[n.length-1]===">"}updateTextOffset(n,l){l===p.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(n,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+n.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!sS.isXmlTag(n)&&this.updateTextOffset(n,l))):(this.privSentenceOffset=this.privRawText.indexOf(n,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+n.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!sS.isXmlTag(n)&&this.updateTextOffset(n,l)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(n){return this.privRawText.indexOf("<",n+1)>this.privRawText.indexOf(">",n+1)}};return Tu.SynthesisTurn=f,Tu}var Pu={},MA;function dx(){if(MA)return Pu;MA=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.SynthesisAdapterBase=void 0;const r=ze(),i=Ae(),o=De(),p=Ao();let s=class{constructor(a,n,l,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new r.ArgumentNullError("authentication");if(!n)throw new r.ArgumentNullError("connectionFactory");if(!l)throw new r.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=n,this.privSynthesizerConfig=l,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new o.SynthesisTurn,this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privSynthesisContext=new o.SynthesisContext,this.privAgentConfig=new o.AgentConfig,this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const d=h;d.statusCode!==1e3&&this.cancelSynthesisLocal(i.CancellationReason.Error,d.statusCode===1007?i.CancellationErrorCode.BadRequestParameters:i.CancellationErrorCode.ConnectionFailure,`${d.reason} websocket error code: ${d.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,n){const l=typeof n=="string"?r.MessageType.Text:r.MessageType.Binary,u=typeof n=="string"?"application/json":"";return(await this.fetchConnection()).send(new p.SpeechConnectionMessage(l,a,this.privSynthesisTurn.requestId,u,n))}async Speak(a,n,l,u,h,d){let y;if(n?y=a:y=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(y,l,u,h);this.privSuccessCallback=u,this.privErrorCallback=h,this.privSynthesisTurn.startNewSynthesis(l,a,n,d);try{await this.connectImpl();const g=await this.fetchConnection();await this.sendSynthesisContext(g),await this.sendSsmlMessage(g,y,l),this.onSynthesisStarted(l),this.receiveMessage()}catch(g){return this.cancelSynthesisLocal(i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,g),Promise.reject(g)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new p.SpeechConnectionMessage(r.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,n,l,u){const h=new i.PropertyCollection;h.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[l]);const d=new i.SpeechSynthesisResult(a,i.ResultReason.Canceled,void 0,u,h);if(this.onSynthesisCancelled(d),this.privSuccessCallback)try{this.privSuccessCallback(d)}catch{}}cancelSynthesisLocal(a,n,l){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,n,l))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const n=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const l=p.SpeechConnectionMessage.fromConnectionMessage(n);if(l.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(l.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(l.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(l.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===l.streamId.toLowerCase()&&l.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(l.binaryBody),this.onSynthesizing(l.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(l.binaryBody));break;case"audio.metadata":const u=o.SynthesisAudioMetadata.fromJSON(l.textBody).Metadata;for(const d of u)switch(d.Type){case o.MetadataType.WordBoundary:case o.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(d);const y=new i.SpeechSynthesisWordBoundaryEventArgs(d.Data.Offset,d.Data.Duration,d.Data.text.Text,d.Data.text.Length,d.Type===o.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,d.Data.text.BoundaryType);this.onWordBoundary(y);break;case o.MetadataType.Bookmark:const g=new i.SpeechSynthesisBookmarkEventArgs(d.Data.Offset,d.Data.Bookmark);this.onBookmarkReached(g);break;case o.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(d),d.Data.IsLastAnimation){const m=new i.SpeechSynthesisVisemeEventArgs(d.Data.Offset,d.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(m)}break;case o.MetadataType.AvatarSignal:this.onAvatarEvent(d);break;case o.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(d);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let h;try{h=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(h)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.onSynthesisCompleted(h);break;default:this.processTypeSpecificMessages(l)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(l.path.toLowerCase(),l.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const n=this.synthesisContext.toJSON();if(n)return a.send(new p.SpeechConnectionMessage(r.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",n))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(l=>l.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,r.createNoDashGuid)(),this.privConnectionId=(0,r.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const n=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(async l=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=await this.privConnectionFactory.create(this.privSynthesizerConfig,l,this.privConnectionId);u.events.attach(d=>{this.connectionEvents.onEvent(d)});const h=await u.open();return h.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.resolve(u)):h.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${h.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Url)} Reason: ${h.reason}`))},l=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(l)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,n){if(n)return a.send(new p.SpeechConnectionMessage(r.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",n))}sendSsmlMessage(a,n,l){return a.send(new p.SpeechConnectionMessage(r.MessageType.Text,"ssml",l,"application/ssml+xml",n))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Pu.SynthesisAdapterBase=s,s.telemetryDataEnabled=!0,Pu}var Ou={},DA;function vx(){if(DA)return Ou;DA=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.AvatarSynthesisAdapter=void 0;const r=Ae(),i=De();let o=class extends i.SynthesisAdapterBase{constructor(s,f,a,n,l){super(s,f,a,void 0),this.privAvatarSynthesizer=n,this.privSynthesizer=n,this.privAvatarConfig=l}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(s){if(this.privAvatarSynthesizer.avatarEventReceived){const f=new r.AvatarEventArgs(s.Data.Offset,s.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,f)}catch{}}}};return Ou.AvatarSynthesisAdapter=o,Ou}var Iu={},jA;function gx(){if(jA)return Iu;jA=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.SpeechSynthesisAdapter=void 0;const r=Ae(),i=De();let o=class extends i.SynthesisAdapterBase{constructor(s,f,a,n,l){super(s,f,a,l),this.privSpeechSynthesizer=n,this.privSynthesizer=n}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(s){const f=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(s,r.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,f)}onSynthesizing(s){if(this.privSpeechSynthesizer.synthesizing)try{const f=this.privSynthesisTurn.audioOutputFormat.addHeader(s),a=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(this.privSynthesisTurn.requestId,r.ResultReason.SynthesizingAudio,f));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(s){if(this.privSpeechSynthesizer.SynthesisCanceled){const f=new r.SpeechSynthesisEventArgs(s);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,f)}catch{}}}onSynthesisCompleted(s){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new r.SpeechSynthesisEventArgs(s))}catch{}}onWordBoundary(s){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,s)}catch{}}onVisemeReceived(s){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,s)}catch{}}onBookmarkReached(s){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,s)}catch{}}};return Iu.SpeechSynthesisAdapter=o,Iu}var Mu={},kA;function yx(){if(kA)return Mu;kA=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.SynthesisRestAdapter=void 0;const r=Mt(),i=Ae(),o=Or(),p=Gt();let s=class{constructor(a,n){let l=a.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!l){const h=a.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"westus"),d=o.ConnectionFactoryBase.getHostSuffix(h);l=a.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,`https://${h}.tts.speech${d}`)}this.privUri=`${l}/cognitiveservices/voices/list`;const u=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(u),this.privAuthentication=n}getVoicesList(a){return this.privRestAdapter.setHeaders(p.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(n=>(this.privRestAdapter.setHeaders(n.headerName,n.token),this.privRestAdapter.request(r.RestRequestType.Get,this.privUri)))}};return Mu.SynthesisRestAdapter=s,Mu}var jv={},NA;function mx(){return NA||(NA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SynthesizerConfig=r.SynthesisServiceType=void 0;const i=De();var o;(function(s){s[s.Standard=0]="Standard",s[s.Custom=1]="Custom"})(o=r.SynthesisServiceType||(r.SynthesisServiceType={}));class p{constructor(f,a){this.privSynthesisServiceType=o.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=f||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(f){this.privSynthesisServiceType=f}set synthesisVideoSection(f){this.privSpeechServiceConfig.Context.synthesis={video:f}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}r.SynthesizerConfig=p}(jv)),jv}var Du={},qA;function Sx(){if(qA)return Du;qA=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.SynthesisContext=void 0;const r=Ae();let i=class{constructor(){this.privContext={}}setSection(p,s){this.privContext[p]=s}set audioOutputFormat(p){this.privAudioOutputFormat=p}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(p){const s=this.buildSynthesisContext(p);this.setSection("synthesis",s)}buildSynthesisContext(p){return{audio:{metadataOptions:{bookmarkEnabled:!!p?.bookmarkReached,punctuationBoundaryEnabled:p?.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!p?.wordBoundary),sentenceBoundaryEnabled:p?.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!p?.visemeReceived,wordBoundaryEnabled:p?.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!p?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:p?.autoDetectSourceLanguage}}}};return Du.SynthesisContext=i,Du}var ju={},zA;function Cx(){if(zA)return ju;zA=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.SpeakerRecognitionConfig=void 0;const r=De();let i=class{constructor(p,s){this.privContext=p||new r.Context(null),this.privParameters=s}get parameters(){return this.privParameters}get Context(){return this.privContext}};return ju.SpeakerRecognitionConfig=i,ju}var ku={},LA;function bx(){if(LA)return ku;LA=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.SpeakerServiceRecognizer=void 0;const r=Mt(),i=ze(),o=Ae(),p=De(),s=Ao();let f=class extends p.ServiceRecognizerBase{constructor(n,l,u,h,d){super(n,l,u,h,d),this.privSpeakerRecognizer=d,this.privSpeakerAudioSource=u,this.recognizeSpeaker=y=>this.recognizeSpeakerOnce(y),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(n){let l=!1;const u=new o.PropertyCollection;switch(n.messageType===i.MessageType.Text&&u.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"speaker.response":const d=JSON.parse(n.textBody);let y;d.status.statusCode.toLowerCase()!=="success"?y=new o.SpeakerRecognitionResult(d,o.ResultReason.Canceled,o.CancellationErrorCode.ServiceError,d.status.reason):y=new o.SpeakerRecognitionResult(d,o.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(y),l=!0;break}const h=new i.Deferred;return h.resolve(l),h.promise}cancelRecognition(n,l,u,h,d){if(new o.PropertyCollection().setProperty(p.CancellationErrorCodePropertyName,o.CancellationErrorCode[h]),this.privResultDeferral){const g=new o.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:d,reason:d}},o.ResultReason.Canceled,h,d);try{this.privResultDeferral.resolve(g)}catch(m){this.privResultDeferral.reject(m)}}}async recognizeSpeakerOnce(n){this.privSpeakerModel=n,this.voiceProfileType=n.scenario,this.privResultDeferral||(this.privResultDeferral=new i.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const l=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(n)),h=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,y=await this.privSpeakerAudioSource.deviceInfo,g=new r.ReplayableAudioNode(h,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(g,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y};try{await l,await u}catch(_){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,_)}const m=new o.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(g).then(()=>{},_=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,_)}),this.privResultDeferral.promise}async sendPreAudioMessages(n){const l=await this.fetchConnection();await this.sendSpeakerRecognition(l,n)}async sendSpeakerRecognition(n,l){const u=JSON.stringify(l);return n.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(n){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:n.profileIds,scenario:n.scenario}}};return ku.SpeakerServiceRecognizer=f,ku}var Nu={},xA;function Rx(){if(xA)return Nu;xA=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.VoiceServiceRecognizer=void 0;const r=Mt(),i=ze(),o=Ae(),p=De(),s=Ao();let f=class extends p.ServiceRecognizerBase{constructor(n,l,u,h,d){super(n,l,u,h,d),this.privDeferralMap=new i.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(n){this.privSpeakerAudioSource=n}processTypeSpecificMessages(n){let l=!1;const u=new o.PropertyCollection;switch(n.messageType===i.MessageType.Text&&u.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"speaker.profiles":const d=JSON.parse(n.textBody);switch(d.operation.toLowerCase()){case"create":this.handleCreateResponse(d,n.requestId);break;case"delete":case"reset":this.handleResultResponse(d,n.requestId);break;case"fetch":const C=JSON.parse(n.textBody);this.handleFetchResponse(C,n.requestId);break}l=!0;break;case"speaker.phrases":const y=JSON.parse(n.textBody);this.handlePhrasesResponse(y,n.requestId),l=!0;break;case"speaker.profile.enrollment":const g=JSON.parse(n.textBody),m=new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(g.enrollment?g.enrollment.enrollmentStatus:g.status.statusCode),g.enrollment?JSON.stringify(g.enrollment):void 0,g.status.reason);this.privDeferralMap.getId(n.requestId)&&this.privDeferralMap.complete(n.requestId,m),this.privRequestSession.onSpeechEnded(),l=!0;break}const h=new i.Deferred;return h.resolve(l),h.promise}cancelRecognition(n,l,u,h,d){new o.PropertyCollection().setProperty(p.CancellationErrorCodePropertyName,o.CancellationErrorCode[h]);const g=new o.VoiceProfileEnrollmentResult(o.ResultReason.Canceled,d,d);this.privDeferralMap.getId(l)&&this.privDeferralMap.complete(l,g)}async createProfile(n,l){this.voiceProfileType=n.toString();const u=this.connectImpl();try{const h=new i.Deferred;return await u,await this.sendCreateProfile(h,n,l),this.receiveMessage(),h.promise}catch(h){throw h}}async resetProfile(n){return this.voiceProfileType=n.profileType.toString(),this.sendCommonRequest("reset",n.profileType,n)}async deleteProfile(n){return this.voiceProfileType=n.profileType.toString(),this.sendCommonRequest("delete",n.profileType,n)}async retrieveEnrollmentResult(n){return this.voiceProfileType=n.profileType.toString(),this.privExpectedProfileId=n.profileId,this.sendCommonRequest("fetch",n.profileType,n)}async getAllProfiles(n){return this.voiceProfileType=n.toString(),this.sendCommonRequest("fetch",n)}async getActivationPhrases(n,l){this.voiceProfileType=n.toString();const u=this.connectImpl();try{const h=new i.Deferred;return await u,await this.sendPhrasesRequest(h,n,l),this.receiveMessage(),h.promise}catch(h){throw h}}async enrollProfile(n){this.voiceProfileType=n.profileType.toString();const l=new i.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),h=this.sendPreAudioMessages(n,l),d=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),y=await this.privSpeakerAudioSource.format,g=await this.privSpeakerAudioSource.deviceInfo,m=new r.ReplayableAudioNode(d,y.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(m,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:g};try{await u,await h}catch(b){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,b)}const C=new o.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.receiveMessage(),this.sendAudio(m).then(()=>{},b=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,b)}),l.promise}async sendPreAudioMessages(n,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,l),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(n.profileType),n)}async sendPhrasesRequest(n,l,u){const h=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n);const d=this.scenarioFrom(l),y={locale:u,scenario:d};return h.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(y)))}async sendCreateProfile(n,l,u){const h=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,n);const d=l===o.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":l===o.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",y={locale:u,number:"1",scenario:d};return h.send(new s.SpeechConnectionMessage(i.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(y)))}async sendCommonRequest(n,l,u=void 0){const h=this.connectImpl();try{const d=new i.Deferred;this.privRequestSession.onSpeechContext(),await h;const y=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,d),await this.sendBaseRequest(y,n,this.scenarioFrom(l),u),this.receiveMessage(),d.promise}catch(d){throw d}}async sendBaseRequest(n,l,u,h){const d={scenario:u};return h?d.profileIds=[h.profileId]:d.maxPageSize=-1,n.send(new s.SpeechConnectionMessage(i.MessageType.Text,`speaker.profile.${l}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}extractSpeakerContext(n){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:n.profileIds,scenario:n.scenario}}handlePhrasesResponse(n,l){if(this.privDeferralMap.getId(l))if(n.status.statusCode.toLowerCase()!=="success"){const u=o.ResultReason.Canceled,h=new o.VoiceProfilePhraseResult(u,n.status.statusCode,n.passPhraseType,[]);this.privDeferralMap.complete(l,h)}else if(n.phrases&&n.phrases.length>0){const u=o.ResultReason.EnrollingVoiceProfile,h=new o.VoiceProfilePhraseResult(u,n.status.statusCode,n.passPhraseType,n.phrases);this.privDeferralMap.complete(l,h)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${l} not found`)}handleCreateResponse(n,l){if(n.profiles&&n.profiles.length>0)if(this.privDeferralMap.getId(l)){const u=n.profiles.map(h=>h.profileId);this.privDeferralMap.complete(l,u)}else throw new Error(`Voice Profile create request for requestID ${l} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(n,l){if(this.privDeferralMap.getId(l)){const u=n.operation.toLowerCase()==="delete"?o.ResultReason.DeletedVoiceProfile:o.ResultReason.ResetVoiceProfile,h=n.status.statusCode.toLowerCase()==="success"?u:o.ResultReason.Canceled,d=new o.VoiceProfileResult(h,`statusCode: ${n.status.statusCode}, errorDetails: ${n.status.reason}`);this.privDeferralMap.complete(l,d)}else throw new Error(`Voice Profile create request for requestID ${l} not found`)}handleFetchResponse(n,l){if(this.privDeferralMap.getId(l)&&n.profiles[0]){if(this.privExpectedProfileId&&n.profiles.length===1&&n.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=n.profiles[0],h=new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),n.status.reason);this.privDeferralMap.complete(l,h)}else if(n.profiles.length>0){const u=n.profiles,h=[];for(const d of u)h.push(new o.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(d.enrollmentStatus),JSON.stringify(d),n.status.reason));this.privDeferralMap.complete(l,h)}}else throw new Error(`Voice Profile fetch request for requestID ${l} not found`)}enrollmentReasonFrom(n){switch(n.toLowerCase()){case"enrolled":return o.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return o.ResultReason.Canceled;default:return o.ResultReason.EnrollingVoiceProfile}}scenarioFrom(n){return n===o.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":n===o.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Nu.VoiceServiceRecognizer=f,Nu}var kv={},BA;function _x(){return BA||(BA=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.type=r.connectivity=r.Device=r.OS=r.System=r.Context=r.SpeechServiceConfig=void 0;class i{constructor(n){this.context=n}serialize(){return JSON.stringify(this,(n,l)=>{if(l&&typeof l=="object"&&!Array.isArray(l)){const u={};for(const h in l)Object.hasOwnProperty.call(l,h)&&(u[h&&h.charAt(0).toLowerCase()+h.substring(1)]=l[h]);return u}return l})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(n){this.recognition=n.toLowerCase()}}r.SpeechServiceConfig=i;class o{constructor(n){this.system=new p,this.os=n}}r.Context=o;class p{constructor(){const n="1.44.1";this.name="SpeechSDK",this.version=n,this.build="JavaScript",this.lang="JavaScript"}}r.System=p;class s{constructor(n,l,u){this.platform=n,this.name=l,this.version=u}}r.OS=s;class f{constructor(n,l,u){this.manufacturer=n,this.model=l,this.version=u}}r.Device=f,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(r.connectivity||(r.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(r.type||(r.type={}))}(kv)),kv}var UA;function De(){return UA||(UA=1,function(r){var i=ii&&ii.__createBinding||(Object.create?function(f,a,n,l){l===void 0&&(l=n),Object.defineProperty(f,l,{enumerable:!0,get:function(){return a[n]}})}:function(f,a,n,l){l===void 0&&(l=n),f[l]=a[n]}),o=ii&&ii.__exportStar||function(f,a){for(var n in f)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&i(a,f,n)};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoDetectSourceLanguagesOpenRangeOptionName=r.ForceDictationPropertyName=r.ServicePropertiesPropertyName=r.CancellationErrorCodePropertyName=r.OutputFormatPropertyName=r.SpeechSynthesisAdapter=r.AvatarSynthesisAdapter=void 0,o(XN(),r),o(ZN(),r),o(lS(),r),o(eq(),r),o(tq(),r),o(nL(),r),o(iL(),r),o(vS(),r),o(dL(),r),o(vL(),r),o(gL(),r),o(yL(),r),o(mL(),r),o(SL(),r),o(CL(),r),o(bL(),r),o(RL(),r),o(HD(),r),o(_L(),r),o(EL(),r),o(wL(),r),o(AL(),r),o(TL(),r),o(PL(),r),o(OL(),r),o(IL(),r),o(ML(),r),o(DL(),r),o(kL(),r),o(NL(),r),o(qL(),r),o(zL(),r),o(LL(),r),o(xL(),r),o(BL(),r),o(UL(),r),o(HL(),r),o(WL(),r),o(KL(),r),o(XL(),r),o(ZL(),r),o(fx(),r),o(i2(),r),o(px(),r),o(dx(),r);var p=vx();Object.defineProperty(r,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return p.AvatarSynthesisAdapter}});var s=gx();Object.defineProperty(r,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return s.SpeechSynthesisAdapter}}),o(yx(),r),o(mx(),r),o(Sx(),r),o(Cx(),r),o(bx(),r),o(Rx(),r),o(_x(),r),r.OutputFormatPropertyName="OutputFormat",r.CancellationErrorCodePropertyName="CancellationErrorCode",r.ServicePropertiesPropertyName="ServiceProperties",r.ForceDictationPropertyName="ForceDictation",r.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(ii)),ii}var FA;function Ex(){return FA||(FA=1,function(r){var i=ni&&ni.__createBinding||(Object.create?function(s,f,a,n){n===void 0&&(n=a),Object.defineProperty(s,n,{enumerable:!0,get:function(){return f[a]}})}:function(s,f,a,n){n===void 0&&(n=a),s[n]=f[a]}),o=ni&&ni.__exportStar||function(s,f){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(f,a)&&i(f,s,a)};Object.defineProperty(r,"__esModule",{value:!0});const p=De();new p.AgentConfig,o(Ae(),r)}(ni)),ni}var rt=Ex();class qr{static instance;dynamicConfig={};constructor(){this.loadSettings()}static getInstance(){return qr.instance||(qr.instance=new qr),qr.instance}loadSettings(){try{const i=localStorage.getItem("app-settings");i&&(this.dynamicConfig=JSON.parse(i))}catch(i){console.error("Failed to load settings from localStorage:",i)}}updateSettings(i){this.dynamicConfig={...this.dynamicConfig,...i};try{localStorage.setItem("app-settings",JSON.stringify(this.dynamicConfig))}catch(o){console.error("Failed to save settings to localStorage:",o)}}getSpeechConfig(){const i=this.dynamicConfig.speechKey||"7C5ifVqCQyJu0RxDJnR6osx9IPmFRaJYlOekp8bipgdFglyKn8GnJQQJ99BBAC5RqLJXJ3w3AAAYACOG2ZKp",o=this.dynamicConfig.speechRegion||"westeurope",p=this.dynamicConfig.speechEndpoint||"https://westeurope.cognitiveservices.azure.com/";return{speechKey:i,speechRegion:o,speechEndpoint:p,recognitionLanguage:this.dynamicConfig.recognitionLanguage||"en-US",synthesisLanguage:this.dynamicConfig.synthesisLanguage||"en-US",synthesisVoice:this.dynamicConfig.synthesisVoice||"en-US-JennyNeural"}}getAvailableLanguages(){return[{code:"en-US",name:"English (US)",voice:"en-US-JennyNeural",region:"us"},{code:"en-GB",name:"English (UK)",voice:"en-GB-SoniaNeural",region:"gb"}]}getBotConfig(){return{directLineSecret:this.dynamicConfig.directLineSecret||"JFLeUP3YSAXPq0pPtOn5wBfe5vQfNoD9rISkcgY9V6Insrhg9vN1JQQJ99BFACYeBjFAArohAAABAZBS18eR.9EyafBq3qnaQKlCAG1V9bIbCBJPUMbKLCtDsSfl00gsOWnJa42TrJQQJ99BFACYeBjFAArohAAABAZBSVi4w"}}getAvatarConfig(){return{character:this.dynamicConfig.avatarCharacter||"lisa",style:this.dynamicConfig.avatarStyle||"casual-sitting",voice:this.dynamicConfig.avatarVoice||"en-US-AvaMultilingualNeural"}}getAvatarApiConfig(){const i=this.dynamicConfig.avatarSubscriptionKey||"7C5ifVqCQyJu0RxDJnR6osx9IPmFRaJYlOekp8bipgdFglyKn8GnJQQJ99BBAC5RqLJXJ3w3AAAYACOG2ZKp",o=this.dynamicConfig.avatarRegion||"westeurope",p=this.dynamicConfig.avatarEndpoint||"https://westeurope.cognitiveservices.azure.com/";return{subscriptionKey:i,region:o,endpoint:p}}validateConfiguration(){const i=[];try{this.getSpeechConfig()}catch{i.push("Speech Service configuration is invalid")}try{this.getBotConfig()}catch{i.push("Bot configuration is invalid")}try{this.getAvatarApiConfig()}catch{i.push("Avatar API configuration is invalid")}return{isValid:i.length===0,errors:i}}}class wx{speechConfig;audioConfig=null;speechRecognizer=null;speechSynthesizer=null;currentLanguage="en-US";detectedLanguage=null;microphoneKeepAliveInterval=null;constructor(){const i=qr.getInstance().getSpeechConfig();this.speechConfig=rt.SpeechConfig.fromSubscription(i.speechKey,i.speechRegion),this.currentLanguage=i.recognitionLanguage||"en-US",console.log(" Azure Speech SDK: English-only mode enabled"),this.speechConfig.setProperty(rt.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,"3000"),this.speechConfig.setProperty(rt.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,"1500"),this.speechConfig.setProperty(rt.PropertyId.Speech_SegmentationSilenceTimeoutMs,"1000"),this.speechConfig.setProperty(rt.PropertyId.SpeechServiceConnection_RecoMode,"CONVERSATION"),this.speechConfig.setProperty(rt.PropertyId.SpeechServiceConnection_EnableAudioLogging,"false"),this.speechConfig.setProperty(rt.PropertyId.SpeechServiceResponse_ProfanityOption,"Raw"),this.speechConfig.outputFormat=rt.OutputFormat.Simple,this.speechConfig.speechSynthesisLanguage=i.synthesisLanguage||"en-US",this.speechConfig.speechSynthesisVoiceName=i.synthesisVoice||"en-US-JennyNeural",this.configureOptimizedMicrophone()}configureOptimizedMicrophone(){this.audioConfig=rt.AudioConfig.fromDefaultMicrophoneInput(),console.log(" Microphone configured for English-only instant voice capture")}startRecognition(i,o,p){return new Promise((s,f)=>{try{console.log(" Setting up ENGLISH-ONLY speech recognizer"),this.speechConfig.speechRecognitionLanguage="en-US",this.speechRecognizer=new rt.SpeechRecognizer(this.speechConfig,this.audioConfig),console.log(" English-only speech recognizer ready"),this.speechRecognizer.recognizing=(a,n)=>{if(console.log(" Recognizing event:",{reason:n.result.reason,text:n.result.text,length:n.result.text.length}),n.result.reason===rt.ResultReason.RecognizingSpeech&&n.result.text.length>0&&(i(n.result.text,this.detectedLanguage||this.currentLanguage),n.result.text.length>2)){const l=this.getDetectedLanguage(n.result);l&&l!==this.detectedLanguage&&(this.detectedLanguage=l,console.log(" Language detected:",l))}},this.speechRecognizer.recognized=(a,n)=>{switch(console.log(" Recognized event:",{reason:n.result.reason,reasonString:this.getReasonString(n.result.reason),text:n.result.text,hasText:!!n.result.text.trim(),duration:n.result.duration,offset:n.result.offset}),n.result.reason){case rt.ResultReason.RecognizedSpeech:if(n.result.text.trim()){const l=this.getDetectedLanguage(n.result);l&&l!==this.detectedLanguage&&(this.detectedLanguage=l,this.updateSynthesisVoiceForLanguage(l)),o(n.result.text,l||this.currentLanguage)}else console.log(" Empty speech recognized - microphone detects sound but no clear speech");break;case rt.ResultReason.NoMatch:console.log(" No speech match detected - check microphone and speak clearly");break;default:console.log(" Recognition result:",this.getReasonString(n.result.reason));break}},this.speechRecognizer.canceled=(a,n)=>{console.error(" Speech recognition cancelled:",{reason:n.reason,errorDetails:n.errorDetails,errorCode:n.errorCode}),n.reason===rt.CancellationReason.Error?(console.log(`CANCELED: ErrorCode=${n.errorCode}`),console.log(`CANCELED: ErrorDetails=${n.errorDetails}`),console.log("CANCELED: Did you set the speech resource key and region values?"),p(`Speech recognition error: ${n.errorDetails}`)):console.log(`CANCELED: Reason=${n.reason}`)},this.speechRecognizer.sessionStarted=(a,n)=>{console.log(" Speech recognition session started:",n.sessionId)},this.speechRecognizer.sessionStopped=(a,n)=>{console.log(" Speech recognition session stopped:",n.sessionId)},this.speechRecognizer.startContinuousRecognitionAsync(()=>{console.log(" Azure Speech SDK English-only continuous recognition started - optimized for real-time speech detection"),this.keepMicrophoneAlive(),this.microphoneKeepAliveInterval=setInterval(()=>{this.keepMicrophoneAlive()},3e4),s()},a=>{console.error(" Failed to start always-on speech recognition:",a),p(`Failed to start speech recognition: ${a}`),f(a)})}catch(a){const n=a instanceof Error?a.message:String(a);p(`Speech recognition initialization error: ${n}`),f(a)}})}stopRecognition(){return new Promise((i,o)=>{if(this.microphoneKeepAliveInterval&&(clearInterval(this.microphoneKeepAliveInterval),this.microphoneKeepAliveInterval=null),!this.speechRecognizer){i();return}this.speechRecognizer.stopContinuousRecognitionAsync(()=>{console.log("Speech recognition stopped."),this.speechRecognizer?.close(),this.speechRecognizer=null,i()},p=>{console.error("Failed to stop speech recognition:",p),o(p)})})}synthesizeSpeech(i){return new Promise((o,p)=>{try{this.speechSynthesizer=new rt.SpeechSynthesizer(this.speechConfig),this.speechSynthesizer.speakTextAsync(i,s=>{if(s.reason===rt.ResultReason.SynthesizingAudioCompleted)console.log("Speech synthesis completed."),o(s.audioData);else{const f=`Speech synthesis failed: ${s.errorDetails}`;console.error(f),p(new Error(f))}this.speechSynthesizer?.close(),this.speechSynthesizer=null},s=>{console.error("Speech synthesis error:",s),p(new Error(`Speech synthesis error: ${s}`)),this.speechSynthesizer?.close(),this.speechSynthesizer=null})}catch(s){const f=s instanceof Error?s.message:String(s);p(new Error(`Speech synthesis initialization error: ${f}`))}})}async checkMicrophonePermission(){try{return console.log(" Checking microphone permission..."),(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(o=>o.stop()),console.log(" Microphone permission granted"),!0}catch(i){return console.error(" Microphone permission denied:",i),!1}}dispose(){this.microphoneKeepAliveInterval&&(clearInterval(this.microphoneKeepAliveInterval),this.microphoneKeepAliveInterval=null),this.speechRecognizer&&(this.speechRecognizer.close(),this.speechRecognizer=null),this.speechSynthesizer&&(this.speechSynthesizer.close(),this.speechSynthesizer=null)}getDetectedLanguage(i){try{const o=rt.AutoDetectSourceLanguageResult.fromResult(i);if(o&&o.language)return console.log(" Auto-detected language (Azure SDK method):",o.language),o.language;const p=i.properties.getProperty(rt.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages);if(p)return console.log(" Language from continuous LID properties:",p),p;const s=i.properties.getProperty(rt.PropertyId.SpeechServiceResponse_JsonResult);if(s)try{const f=JSON.parse(s);if(f.Language)return console.log(" Language from JSON result:",f.Language),f.Language;if(f.NBest&&f.NBest.length>0&&f.NBest[0].Language)return console.log(" Language from NBest results:",f.NBest[0].Language),f.NBest[0].Language}catch(f){console.warn("Failed to parse language from JSON result:",f)}if(i.text&&i.text.trim())return console.log(" Using current language as fallback:",this.currentLanguage),this.currentLanguage}catch(o){console.warn("Failed to get detected language:",o)}return null}updateSynthesisVoiceForLanguage(i){const p=qr.getInstance().getAvailableLanguages().find(s=>s.code===i);p?(console.log(` Updating synthesis voice to: ${p.voice} for language: ${i}`),this.speechConfig.speechSynthesisVoiceName=p.voice,this.speechConfig.speechSynthesisLanguage=i):console.warn(` No voice found for detected language: ${i}, keeping current voice`)}setRecognitionLanguage(i){console.log(" Manual language selection disabled - using auto-detection for optimal experience"),console.log(" Attempted to set language:",i,"- ignoring in favor of auto-detection")}getDetectedLanguageInfo(){return{current:"en-US",detected:"en-US"}}setAutoDetectionEnabled(i){console.log(" Auto-detection disabled in English-only mode")}keepMicrophoneAlive(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then(i=>{console.log(" Microphone connection verified"),setTimeout(()=>{i.getTracks().forEach(o=>o.stop())},100)}).catch(i=>{console.warn("Microphone keep-alive check failed (non-critical):",i)})}getReasonString(i){switch(i){case rt.ResultReason.RecognizedSpeech:return"RecognizedSpeech";case rt.ResultReason.NoMatch:return"NoMatch";case rt.ResultReason.RecognizingSpeech:return"RecognizingSpeech";case rt.ResultReason.Canceled:return"Canceled";default:return`Unknown(${i})`}}}var Nv={},qv={exports:{}},HA;function yl(){return HA||(HA=1,function(r){function i(o){return o&&o.__esModule?o:{default:o}}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(qv)),qv.exports}var zv={exports:{}},VA;function To(){return VA||(VA=1,function(r){function i(o){"@babel/helpers - typeof";return r.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},r.exports.__esModule=!0,r.exports.default=r.exports,i(o)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(zv)),zv.exports}var Lv={exports:{}},xv={exports:{}},WA;function Ax(){return WA||(WA=1,function(r){function i(o,p){if(o==null)return{};var s={};for(var f in o)if({}.hasOwnProperty.call(o,f)){if(p.indexOf(f)!==-1)continue;s[f]=o[f]}return s}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(xv)),xv.exports}var GA;function o2(){return GA||(GA=1,function(r){var i=Ax();function o(p,s){if(p==null)return{};var f,a,n=i(p,s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(p);for(a=0;a<l.length;a++)f=l[a],s.indexOf(f)===-1&&{}.propertyIsEnumerable.call(p,f)&&(n[f]=p[f])}return n}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Lv)),Lv.exports}var Bv={exports:{}},KA;function yS(){return KA||(KA=1,function(r){function i(o,p){if(!(o instanceof p))throw new TypeError("Cannot call a class as a function")}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Bv)),Bv.exports}var Uv={exports:{}},Fv={exports:{}},Hv={exports:{}},$A;function Tx(){return $A||($A=1,function(r){var i=To().default;function o(p,s){if(i(p)!="object"||!p)return p;var f=p[Symbol.toPrimitive];if(f!==void 0){var a=f.call(p,s||"default");if(i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(p)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Hv)),Hv.exports}var JA;function s2(){return JA||(JA=1,function(r){var i=To().default,o=Tx();function p(s){var f=o(s,"string");return i(f)=="symbol"?f:f+""}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}(Fv)),Fv.exports}var QA;function mS(){return QA||(QA=1,function(r){var i=s2();function o(s,f){for(var a=0;a<f.length;a++){var n=f[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,i(n.key),n)}}function p(s,f,a){return f&&o(s.prototype,f),a&&o(s,a),Object.defineProperty(s,"prototype",{writable:!1}),s}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}(Uv)),Uv.exports}var Vv={exports:{}},YA;function a2(){return YA||(YA=1,function(r){var i=s2();function o(p,s,f){return(s=i(s))in p?Object.defineProperty(p,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[s]=f,p}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Vv)),Vv.exports}var XA={},Wv,ZA;function Dt(){if(ZA)return Wv;ZA=1;var r=function(i){return i&&i.Math==Math&&i};return Wv=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof Ft=="object"&&Ft)||function(){return this}()||Function("return this")(),Wv}var Gv={},Kv,eT;function nn(){return eT||(eT=1,Kv=function(r){try{return!!r()}catch{return!0}}),Kv}var $v,tT;function Po(){if(tT)return $v;tT=1;var r=nn();return $v=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),$v}var Jv={},rT;function Px(){if(rT)return Jv;rT=1;var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);return Jv.f=o?function(s){var f=i(this,s);return!!f&&f.enumerable}:r,Jv}var Qv,nT;function Gf(){return nT||(nT=1,Qv=function(r,i){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:i}}),Qv}var Yv,iT;function SS(){if(iT)return Yv;iT=1;var r={}.toString;return Yv=function(i){return r.call(i).slice(8,-1)},Yv}var Xv,oT;function Ox(){if(oT)return Xv;oT=1;var r=nn(),i=SS(),o="".split;return Xv=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(p){return i(p)=="String"?o.call(p,""):Object(p)}:Object,Xv}var Zv,sT;function CS(){return sT||(sT=1,Zv=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}),Zv}var eg,aT;function Kf(){if(aT)return eg;aT=1;var r=Ox(),i=CS();return eg=function(o){return r(i(o))},eg}var tg,cT;function ki(){return cT||(cT=1,tg=function(r){return typeof r=="object"?r!==null:typeof r=="function"}),tg}var rg,uT;function c2(){if(uT)return rg;uT=1;var r=ki();return rg=function(i,o){if(!r(i))return i;var p,s;if(o&&typeof(p=i.toString)=="function"&&!r(s=p.call(i))||typeof(p=i.valueOf)=="function"&&!r(s=p.call(i))||!o&&typeof(p=i.toString)=="function"&&!r(s=p.call(i)))return s;throw TypeError("Can't convert object to primitive value")},rg}var ng,lT;function u2(){if(lT)return ng;lT=1;var r=CS();return ng=function(i){return Object(r(i))},ng}var ig,fT;function on(){if(fT)return ig;fT=1;var r=u2(),i={}.hasOwnProperty;return ig=Object.hasOwn||function(p,s){return i.call(r(p),s)},ig}var og,hT;function bS(){if(hT)return og;hT=1;var r=Dt(),i=ki(),o=r.document,p=i(o)&&i(o.createElement);return og=function(s){return p?o.createElement(s):{}},og}var sg,pT;function l2(){if(pT)return sg;pT=1;var r=Po(),i=nn(),o=bS();return sg=!r&&!i(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7}),sg}var dT;function RS(){if(dT)return Gv;dT=1;var r=Po(),i=Px(),o=Gf(),p=Kf(),s=c2(),f=on(),a=l2(),n=Object.getOwnPropertyDescriptor;return Gv.f=r?n:function(u,h){if(u=p(u),h=s(h,!0),a)try{return n(u,h)}catch{}if(f(u,h))return o(!i.f.call(u,h),u[h])},Gv}var ag={},cg,vT;function sn(){if(vT)return cg;vT=1;var r=ki();return cg=function(i){if(!r(i))throw TypeError(String(i)+" is not an object");return i},cg}var gT;function Oo(){if(gT)return ag;gT=1;var r=Po(),i=l2(),o=sn(),p=c2(),s=Object.defineProperty;return ag.f=r?s:function(a,n,l){if(o(a),n=p(n,!0),o(l),i)try{return s(a,n,l)}catch{}if("get"in l||"set"in l)throw TypeError("Accessors not supported");return"value"in l&&(a[n]=l.value),a},ag}var ug,yT;function Ln(){if(yT)return ug;yT=1;var r=Po(),i=Oo(),o=Gf();return ug=r?function(p,s,f){return i.f(p,s,o(1,f))}:function(p,s,f){return p[s]=f,p},ug}var lg={exports:{}},fg,mT;function _S(){if(mT)return fg;mT=1;var r=Dt(),i=Ln();return fg=function(o,p){try{i(r,o,p)}catch{r[o]=p}return p},fg}var hg,ST;function ES(){if(ST)return hg;ST=1;var r=Dt(),i=_S(),o="__core-js_shared__",p=r[o]||i(o,{});return hg=p,hg}var pg,CT;function wS(){if(CT)return pg;CT=1;var r=ES(),i=Function.toString;return typeof r.inspectSource!="function"&&(r.inspectSource=function(o){return i.call(o)}),pg=r.inspectSource,pg}var dg,bT;function Ix(){if(bT)return dg;bT=1;var r=Dt(),i=wS(),o=r.WeakMap;return dg=typeof o=="function"&&/native code/.test(i(o)),dg}var vg={exports:{}},gg,RT;function ml(){return RT||(RT=1,gg=!1),gg}var _T;function f2(){if(_T)return vg.exports;_T=1;var r=ml(),i=ES();return(vg.exports=function(o,p){return i[o]||(i[o]=p!==void 0?p:{})})("versions",[]).push({version:"3.15.2",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"}),vg.exports}var yg,ET;function h2(){if(ET)return yg;ET=1;var r=0,i=Math.random();return yg=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++r+i).toString(36)},yg}var mg,wT;function AS(){if(wT)return mg;wT=1;var r=f2(),i=h2(),o=r("keys");return mg=function(p){return o[p]||(o[p]=i(p))},mg}var Sg,AT;function TS(){return AT||(AT=1,Sg={}),Sg}var Cg,TT;function $f(){if(TT)return Cg;TT=1;var r=Ix(),i=Dt(),o=ki(),p=Ln(),s=on(),f=ES(),a=AS(),n=TS(),l="Object already initialized",u=i.WeakMap,h,d,y,g=function(w){return y(w)?d(w):h(w,{})},m=function(w){return function(O){var P;if(!o(O)||(P=d(O)).type!==w)throw TypeError("Incompatible receiver, "+w+" required");return P}};if(r||f.state){var C=f.state||(f.state=new u),_=C.get,b=C.has,R=C.set;h=function(w,O){if(b.call(C,w))throw new TypeError(l);return O.facade=w,R.call(C,w,O),O},d=function(w){return _.call(C,w)||{}},y=function(w){return b.call(C,w)}}else{var A=a("state");n[A]=!0,h=function(w,O){if(s(w,A))throw new TypeError(l);return O.facade=w,p(w,A,O),O},d=function(w){return s(w,A)?w[A]:{}},y=function(w){return s(w,A)}}return Cg={set:h,get:d,has:y,enforce:g,getterFor:m},Cg}var PT;function Io(){if(PT)return lg.exports;PT=1;var r=Dt(),i=Ln(),o=on(),p=_S(),s=wS(),f=$f(),a=f.get,n=f.enforce,l=String(String).split("String");return(lg.exports=function(u,h,d,y){var g=y?!!y.unsafe:!1,m=y?!!y.enumerable:!1,C=y?!!y.noTargetGet:!1,_;if(typeof d=="function"&&(typeof h=="string"&&!o(d,"name")&&i(d,"name",h),_=n(d),_.source||(_.source=l.join(typeof h=="string"?h:""))),u===r){m?u[h]=d:p(h,d);return}else g?!C&&u[h]&&(m=!0):delete u[h];m?u[h]=d:i(u,h,d)})(Function.prototype,"toString",function(){return typeof this=="function"&&a(this).source||s(this)}),lg.exports}var bg,OT;function p2(){if(OT)return bg;OT=1;var r=Dt();return bg=r,bg}var Rg,IT;function Ni(){if(IT)return Rg;IT=1;var r=p2(),i=Dt(),o=function(p){return typeof p=="function"?p:void 0};return Rg=function(p,s){return arguments.length<2?o(r[p])||o(i[p]):r[p]&&r[p][s]||i[p]&&i[p][s]},Rg}var _g={},Eg,MT;function PS(){if(MT)return Eg;MT=1;var r=Math.ceil,i=Math.floor;return Eg=function(o){return isNaN(o=+o)?0:(o>0?i:r)(o)},Eg}var wg,DT;function d2(){if(DT)return wg;DT=1;var r=PS(),i=Math.min;return wg=function(o){return o>0?i(r(o),9007199254740991):0},wg}var Ag,jT;function Mx(){if(jT)return Ag;jT=1;var r=PS(),i=Math.max,o=Math.min;return Ag=function(p,s){var f=r(p);return f<0?i(f+s,0):o(f,s)},Ag}var Tg,kT;function Dx(){if(kT)return Tg;kT=1;var r=Kf(),i=d2(),o=Mx(),p=function(s){return function(f,a,n){var l=r(f),u=i(l.length),h=o(n,u),d;if(s&&a!=a){for(;u>h;)if(d=l[h++],d!=d)return!0}else for(;u>h;h++)if((s||h in l)&&l[h]===a)return s||h||0;return!s&&-1}};return Tg={includes:p(!0),indexOf:p(!1)},Tg}var Pg,NT;function v2(){if(NT)return Pg;NT=1;var r=on(),i=Kf(),o=Dx().indexOf,p=TS();return Pg=function(s,f){var a=i(s),n=0,l=[],u;for(u in a)!r(p,u)&&r(a,u)&&l.push(u);for(;f.length>n;)r(a,u=f[n++])&&(~o(l,u)||l.push(u));return l},Pg}var Og,qT;function OS(){return qT||(qT=1,Og=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Og}var zT;function jx(){if(zT)return _g;zT=1;var r=v2(),i=OS(),o=i.concat("length","prototype");return _g.f=Object.getOwnPropertyNames||function(s){return r(s,o)},_g}var Ig={},LT;function kx(){return LT||(LT=1,Ig.f=Object.getOwnPropertySymbols),Ig}var Mg,xT;function Nx(){if(xT)return Mg;xT=1;var r=Ni(),i=jx(),o=kx(),p=sn();return Mg=r("Reflect","ownKeys")||function(f){var a=i.f(p(f)),n=o.f;return n?a.concat(n(f)):a},Mg}var Dg,BT;function qx(){if(BT)return Dg;BT=1;var r=on(),i=Nx(),o=RS(),p=Oo();return Dg=function(s,f){for(var a=i(f),n=p.f,l=o.f,u=0;u<a.length;u++){var h=a[u];r(s,h)||n(s,h,l(f,h))}},Dg}var jg,UT;function g2(){if(UT)return jg;UT=1;var r=nn(),i=/#|\.prototype\./,o=function(n,l){var u=s[p(n)];return u==a?!0:u==f?!1:typeof l=="function"?r(l):!!l},p=o.normalize=function(n){return String(n).replace(i,".").toLowerCase()},s=o.data={},f=o.NATIVE="N",a=o.POLYFILL="P";return jg=o,jg}var kg,FT;function qi(){if(FT)return kg;FT=1;var r=Dt(),i=RS().f,o=Ln(),p=Io(),s=_S(),f=qx(),a=g2();return kg=function(n,l){var u=n.target,h=n.global,d=n.stat,y,g,m,C,_,b;if(h?g=r:d?g=r[u]||s(u,{}):g=(r[u]||{}).prototype,g)for(m in l){if(_=l[m],n.noTargetGet?(b=i(g,m),C=b&&b.value):C=g[m],y=a(h?m:u+(d?".":"#")+m,n.forced),!y&&C!==void 0){if(typeof _==typeof C)continue;f(_,C)}(n.sham||C&&C.sham)&&o(_,"sham",!0),p(g,m,_,n)}},kg}var Ng,HT;function zx(){if(HT)return Ng;HT=1;var r=nn();return Ng=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),Ng}var qg,VT;function IS(){if(VT)return qg;VT=1;var r=on(),i=u2(),o=AS(),p=zx(),s=o("IE_PROTO"),f=Object.prototype;return qg=p?Object.getPrototypeOf:function(a){return a=i(a),r(a,s)?a[s]:typeof a.constructor=="function"&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?f:null},qg}var zg,WT;function Lx(){if(WT)return zg;WT=1;var r=ki();return zg=function(i){if(!r(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i},zg}var Lg,GT;function MS(){if(GT)return Lg;GT=1;var r=sn(),i=Lx();return Lg=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,p={},s;try{s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,s.call(p,[]),o=p instanceof Array}catch{}return function(a,n){return r(a),i(n),o?s.call(a,n):a.__proto__=n,a}}():void 0),Lg}var xg,KT;function xx(){if(KT)return xg;KT=1;var r=v2(),i=OS();return xg=Object.keys||function(p){return r(p,i)},xg}var Bg,$T;function Bx(){if($T)return Bg;$T=1;var r=Po(),i=Oo(),o=sn(),p=xx();return Bg=r?Object.defineProperties:function(f,a){o(f);for(var n=p(a),l=n.length,u=0,h;l>u;)i.f(f,h=n[u++],a[h]);return f},Bg}var Ug,JT;function y2(){if(JT)return Ug;JT=1;var r=Ni();return Ug=r("document","documentElement"),Ug}var Fg,QT;function DS(){if(QT)return Fg;QT=1;var r=sn(),i=Bx(),o=OS(),p=TS(),s=y2(),f=bS(),a=AS(),n=">",l="<",u="prototype",h="script",d=a("IE_PROTO"),y=function(){},g=function(R){return l+h+n+R+l+"/"+h+n},m=function(R){R.write(g("")),R.close();var A=R.parentWindow.Object;return R=null,A},C=function(){var R=f("iframe"),A="java"+h+":",w;return R.style.display="none",s.appendChild(R),R.src=String(A),w=R.contentWindow.document,w.open(),w.write(g("document.F=Object")),w.close(),w.F},_,b=function(){try{_=document.domain&&new ActiveXObject("htmlfile")}catch{}b=_?m(_):C();for(var R=o.length;R--;)delete b[u][o[R]];return b()};return p[d]=!0,Fg=Object.create||function(A,w){var O;return A!==null?(y[u]=r(A),O=new y,y[u]=null,O[d]=A):O=b(),w===void 0?O:i(O,w)},Fg}var Hg,YT;function jS(){if(YT)return Hg;YT=1;var r=Ni();return Hg=r("navigator","userAgent")||"",Hg}var Vg,XT;function m2(){if(XT)return Vg;XT=1;var r=Dt(),i=jS(),o=r.process,p=o&&o.versions,s=p&&p.v8,f,a;return s?(f=s.split("."),a=f[0]<4?1:f[0]+f[1]):i&&(f=i.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=i.match(/Chrome\/(\d+)/),f&&(a=f[1]))),Vg=a&&+a,Vg}var Wg,ZT;function S2(){if(ZT)return Wg;ZT=1;var r=m2(),i=nn();return Wg=!!Object.getOwnPropertySymbols&&!i(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&r&&r<41}),Wg}var Gg,eP;function Ux(){if(eP)return Gg;eP=1;var r=S2();return Gg=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Gg}var Kg,tP;function cr(){if(tP)return Kg;tP=1;var r=Dt(),i=f2(),o=on(),p=h2(),s=S2(),f=Ux(),a=i("wks"),n=r.Symbol,l=f?n:n&&n.withoutSetter||p;return Kg=function(u){return(!o(a,u)||!(s||typeof a[u]=="string"))&&(s&&o(n,u)?a[u]=n[u]:a[u]=l("Symbol."+u)),a[u]},Kg}var $g,rP;function Sl(){return rP||(rP=1,$g={}),$g}var Jg,nP;function Fx(){if(nP)return Jg;nP=1;var r=cr(),i=Sl(),o=r("iterator"),p=Array.prototype;return Jg=function(s){return s!==void 0&&(i.Array===s||p[o]===s)},Jg}var Qg,iP;function Mo(){return iP||(iP=1,Qg=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}),Qg}var Yg,oP;function C2(){if(oP)return Yg;oP=1;var r=Mo();return Yg=function(i,o,p){if(r(i),o===void 0)return i;switch(p){case 0:return function(){return i.call(o)};case 1:return function(s){return i.call(o,s)};case 2:return function(s,f){return i.call(o,s,f)};case 3:return function(s,f,a){return i.call(o,s,f,a)}}return function(){return i.apply(o,arguments)}},Yg}var Xg,sP;function kS(){if(sP)return Xg;sP=1;var r=cr(),i=r("toStringTag"),o={};return o[i]="z",Xg=String(o)==="[object z]",Xg}var Zg,aP;function b2(){if(aP)return Zg;aP=1;var r=kS(),i=SS(),o=cr(),p=o("toStringTag"),s=i(function(){return arguments}())=="Arguments",f=function(a,n){try{return a[n]}catch{}};return Zg=r?i:function(a){var n,l,u;return a===void 0?"Undefined":a===null?"Null":typeof(l=f(n=Object(a),p))=="string"?l:s?i(n):(u=i(n))=="Object"&&typeof n.callee=="function"?"Arguments":u},Zg}var ey,cP;function Hx(){if(cP)return ey;cP=1;var r=b2(),i=Sl(),o=cr(),p=o("iterator");return ey=function(s){if(s!=null)return s[p]||s["@@iterator"]||i[r(s)]},ey}var ty,uP;function Vx(){if(uP)return ty;uP=1;var r=sn();return ty=function(i){var o=i.return;if(o!==void 0)return r(o.call(i)).value},ty}var ry,lP;function Jf(){if(lP)return ry;lP=1;var r=sn(),i=Fx(),o=d2(),p=C2(),s=Hx(),f=Vx(),a=function(n,l){this.stopped=n,this.result=l};return ry=function(n,l,u){var h=u&&u.that,d=!!(u&&u.AS_ENTRIES),y=!!(u&&u.IS_ITERATOR),g=!!(u&&u.INTERRUPTED),m=p(l,h,1+d+g),C,_,b,R,A,w,O,P=function(N){return C&&f(C),new a(!0,N)},D=function(N){return d?(r(N),g?m(N[0],N[1],P):m(N[0],N[1])):g?m(N,P):m(N)};if(y)C=n;else{if(_=s(n),typeof _!="function")throw TypeError("Target is not iterable");if(i(_)){for(b=0,R=o(n.length);R>b;b++)if(A=D(n[b]),A&&A instanceof a)return A;return new a(!1)}C=_.call(n)}for(w=C.next;!(O=w.call(C)).done;){try{A=D(O.value)}catch(N){throw f(C),N}if(typeof A=="object"&&A&&A instanceof a)return A}return new a(!1)},ry}var fP;function R2(){if(fP)return XA;fP=1;var r=qi(),i=IS(),o=MS(),p=DS(),s=Ln(),f=Gf(),a=Jf(),n=function(u,h){var d=this;if(!(d instanceof n))return new n(u,h);o&&(d=o(new Error(void 0),i(d))),h!==void 0&&s(d,"message",String(h));var y=[];return a(u,y.push,{that:y}),s(d,"errors",y),d};return n.prototype=p(Error.prototype,{constructor:f(5,n),message:f(5,""),name:f(5,"AggregateError")}),r({global:!0},{AggregateError:n}),XA}var hP={},ny,pP;function Wx(){if(pP)return ny;pP=1;var r=kS(),i=b2();return ny=r?{}.toString:function(){return"[object "+i(this)+"]"},ny}var dP;function Gx(){if(dP)return hP;dP=1;var r=kS(),i=Io(),o=Wx();return r||i(Object.prototype,"toString",o,{unsafe:!0}),hP}var vP={},iy,gP;function _2(){if(gP)return iy;gP=1;var r=Dt();return iy=r.Promise,iy}var oy,yP;function Kx(){if(yP)return oy;yP=1;var r=Io();return oy=function(i,o,p){for(var s in o)r(i,s,o[s],p);return i},oy}var sy,mP;function NS(){if(mP)return sy;mP=1;var r=Oo().f,i=on(),o=cr(),p=o("toStringTag");return sy=function(s,f,a){s&&!i(s=a?s:s.prototype,p)&&r(s,p,{configurable:!0,value:f})},sy}var ay,SP;function $x(){if(SP)return ay;SP=1;var r=Ni(),i=Oo(),o=cr(),p=Po(),s=o("species");return ay=function(f){var a=r(f),n=i.f;p&&a&&!a[s]&&n(a,s,{configurable:!0,get:function(){return this}})},ay}var cy,CP;function Jx(){return CP||(CP=1,cy=function(r,i,o){if(!(r instanceof i))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return r}),cy}var uy,bP;function Qx(){if(bP)return uy;bP=1;var r=cr(),i=r("iterator"),o=!1;try{var p=0,s={next:function(){return{done:!!p++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch{}return uy=function(f,a){if(!a&&!o)return!1;var n=!1;try{var l={};l[i]=function(){return{next:function(){return{done:n=!0}}}},f(l)}catch{}return n},uy}var ly,RP;function E2(){if(RP)return ly;RP=1;var r=sn(),i=Mo(),o=cr(),p=o("species");return ly=function(s,f){var a=r(s).constructor,n;return a===void 0||(n=r(a)[p])==null?f:i(n)},ly}var fy,_P;function w2(){if(_P)return fy;_P=1;var r=jS();return fy=/(?:iphone|ipod|ipad).*applewebkit/i.test(r),fy}var hy,EP;function qS(){if(EP)return hy;EP=1;var r=SS(),i=Dt();return hy=r(i.process)=="process",hy}var py,wP;function A2(){if(wP)return py;wP=1;var r=Dt(),i=nn(),o=C2(),p=y2(),s=bS(),f=w2(),a=qS(),n=r.location,l=r.setImmediate,u=r.clearImmediate,h=r.process,d=r.MessageChannel,y=r.Dispatch,g=0,m={},C="onreadystatechange",_,b,R,A=function(D){if(m.hasOwnProperty(D)){var N=m[D];delete m[D],N()}},w=function(D){return function(){A(D)}},O=function(D){A(D.data)},P=function(D){r.postMessage(D+"",n.protocol+"//"+n.host)};return(!l||!u)&&(l=function(N){for(var $=[],Y=1;arguments.length>Y;)$.push(arguments[Y++]);return m[++g]=function(){(typeof N=="function"?N:Function(N)).apply(void 0,$)},_(g),g},u=function(N){delete m[N]},a?_=function(D){h.nextTick(w(D))}:y&&y.now?_=function(D){y.now(w(D))}:d&&!f?(b=new d,R=b.port2,b.port1.onmessage=O,_=o(R.postMessage,R,1)):r.addEventListener&&typeof postMessage=="function"&&!r.importScripts&&n&&n.protocol!=="file:"&&!i(P)?(_=P,r.addEventListener("message",O,!1)):C in s("script")?_=function(D){p.appendChild(s("script"))[C]=function(){p.removeChild(this),A(D)}}:_=function(D){setTimeout(w(D),0)}),py={set:l,clear:u},py}var dy,AP;function Yx(){if(AP)return dy;AP=1;var r=jS();return dy=/web0s(?!.*chrome)/i.test(r),dy}var vy,TP;function Xx(){if(TP)return vy;TP=1;var r=Dt(),i=RS().f,o=A2().set,p=w2(),s=Yx(),f=qS(),a=r.MutationObserver||r.WebKitMutationObserver,n=r.document,l=r.process,u=r.Promise,h=i(r,"queueMicrotask"),d=h&&h.value,y,g,m,C,_,b,R,A;return d||(y=function(){var w,O;for(f&&(w=l.domain)&&w.exit();g;){O=g.fn,g=g.next;try{O()}catch(P){throw g?C():m=void 0,P}}m=void 0,w&&w.enter()},!p&&!f&&!s&&a&&n?(_=!0,b=n.createTextNode(""),new a(y).observe(b,{characterData:!0}),C=function(){b.data=_=!_}):u&&u.resolve?(R=u.resolve(void 0),R.constructor=u,A=R.then,C=function(){A.call(R,y)}):f?C=function(){l.nextTick(y)}:C=function(){o.call(r,y)}),vy=d||function(w){var O={fn:w,next:void 0};m&&(m.next=O),g||(g=O,C()),m=O},vy}var gy={},PP;function Cl(){if(PP)return gy;PP=1;var r=Mo(),i=function(o){var p,s;this.promise=new o(function(f,a){if(p!==void 0||s!==void 0)throw TypeError("Bad Promise constructor");p=f,s=a}),this.resolve=r(p),this.reject=r(s)};return gy.f=function(o){return new i(o)},gy}var yy,OP;function T2(){if(OP)return yy;OP=1;var r=sn(),i=ki(),o=Cl();return yy=function(p,s){if(r(p),i(s)&&s.constructor===p)return s;var f=o.f(p),a=f.resolve;return a(s),f.promise},yy}var my,IP;function Zx(){if(IP)return my;IP=1;var r=Dt();return my=function(i,o){var p=r.console;p&&p.error&&(arguments.length===1?p.error(i):p.error(i,o))},my}var Sy,MP;function Qf(){return MP||(MP=1,Sy=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}}),Sy}var Cy,DP;function eB(){return DP||(DP=1,Cy=typeof window=="object"),Cy}var jP;function tB(){if(jP)return vP;jP=1;var r=qi(),i=ml(),o=Dt(),p=Ni(),s=_2(),f=Io(),a=Kx(),n=MS(),l=NS(),u=$x(),h=ki(),d=Mo(),y=Jx(),g=wS(),m=Jf(),C=Qx(),_=E2(),b=A2().set,R=Xx(),A=T2(),w=Zx(),O=Cl(),P=Qf(),D=$f(),N=g2(),$=cr(),Y=eB(),oe=qS(),ae=m2(),fe=$("species"),se="Promise",B=D.get,j=D.set,J=D.getterFor(se),Z=s&&s.prototype,G=s,z=Z,F=o.TypeError,te=o.document,le=o.process,pe=O.f,_e=pe,Ee=!!(te&&te.createEvent&&o.dispatchEvent),Ne=typeof PromiseRejectionEvent=="function",Pe="unhandledrejection",Le="rejectionhandled",qe=0,lt=1,pt=2,de=1,ie=2,we=!1,Me,Oe,K,Q,x=N(se,function(){var W=g(G),ee=W!==String(G);if(!ee&&ae===66||i&&!z.finally)return!0;if(ae>=51&&/native code/.test(W))return!1;var ue=new G(function(Fe){Fe(1)}),Te=function(Fe){Fe(function(){},function(){})},Ie=ue.constructor={};return Ie[fe]=Te,we=ue.then(function(){})instanceof Te,we?!ee&&Y&&!Ne:!0}),M=x||!C(function(W){G.all(W).catch(function(){})}),k=function(W){var ee;return h(W)&&typeof(ee=W.then)=="function"?ee:!1},H=function(W,ee){if(!W.notified){W.notified=!0;var ue=W.reactions;R(function(){for(var Te=W.value,Ie=W.state==lt,Fe=0;ue.length>Fe;){var We=ue[Fe++],Ke=Ie?We.ok:We.fail,ur=We.resolve,br=We.reject,zt=We.domain,Lt,cn,lr;try{Ke?(Ie||(W.rejection===ie&&L(W),W.rejection=de),Ke===!0?Lt=Te:(zt&&zt.enter(),Lt=Ke(Te),zt&&(zt.exit(),lr=!0)),Lt===We.promise?br(F("Promise-chain cycle")):(cn=k(Lt))?cn.call(Lt,ur,br):ur(Lt)):br(Te)}catch(un){zt&&!lr&&zt.exit(),br(un)}}W.reactions=[],W.notified=!1,ee&&!W.rejection&&Se(W)})}},ne=function(W,ee,ue){var Te,Ie;Ee?(Te=te.createEvent("Event"),Te.promise=ee,Te.reason=ue,Te.initEvent(W,!1,!0),o.dispatchEvent(Te)):Te={promise:ee,reason:ue},!Ne&&(Ie=o["on"+W])?Ie(Te):W===Pe&&w("Unhandled promise rejection",ue)},Se=function(W){b.call(o,function(){var ee=W.facade,ue=W.value,Te=Re(W),Ie;if(Te&&(Ie=P(function(){oe?le.emit("unhandledRejection",ue,ee):ne(Pe,ee,ue)}),W.rejection=oe||Re(W)?ie:de,Ie.error))throw Ie.value})},Re=function(W){return W.rejection!==de&&!W.parent},L=function(W){b.call(o,function(){var ee=W.facade;oe?le.emit("rejectionHandled",ee):ne(Le,ee,W.value)})},T=function(W,ee,ue){return function(Te){W(ee,Te,ue)}},I=function(W,ee,ue){W.done||(W.done=!0,ue&&(W=ue),W.value=ee,W.state=pt,H(W,!0))},V=function(W,ee,ue){if(!W.done){W.done=!0,ue&&(W=ue);try{if(W.facade===ee)throw F("Promise can't be resolved itself");var Te=k(ee);Te?R(function(){var Ie={done:!1};try{Te.call(ee,T(V,Ie,W),T(I,Ie,W))}catch(Fe){I(Ie,Fe,W)}}):(W.value=ee,W.state=lt,H(W,!1))}catch(Ie){I({done:!1},Ie,W)}}};if(x&&(G=function(ee){y(this,G,se),d(ee),Me.call(this);var ue=B(this);try{ee(T(V,ue),T(I,ue))}catch(Te){I(ue,Te)}},z=G.prototype,Me=function(ee){j(this,{type:se,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:qe,value:void 0})},Me.prototype=a(z,{then:function(ee,ue){var Te=J(this),Ie=pe(_(this,G));return Ie.ok=typeof ee=="function"?ee:!0,Ie.fail=typeof ue=="function"&&ue,Ie.domain=oe?le.domain:void 0,Te.parent=!0,Te.reactions.push(Ie),Te.state!=qe&&H(Te,!1),Ie.promise},catch:function(W){return this.then(void 0,W)}}),Oe=function(){var W=new Me,ee=B(W);this.promise=W,this.resolve=T(V,ee),this.reject=T(I,ee)},O.f=pe=function(W){return W===G||W===K?new Oe(W):_e(W)},!i&&typeof s=="function"&&Z!==Object.prototype)){Q=Z.then,we||(f(Z,"then",function(ee,ue){var Te=this;return new G(function(Ie,Fe){Q.call(Te,Ie,Fe)}).then(ee,ue)},{unsafe:!0}),f(Z,"catch",z.catch,{unsafe:!0}));try{delete Z.constructor}catch{}n&&n(Z,z)}return r({global:!0,wrap:!0,forced:x},{Promise:G}),l(G,se,!1,!0),u(se),K=p(se),r({target:se,stat:!0,forced:x},{reject:function(ee){var ue=pe(this);return ue.reject.call(void 0,ee),ue.promise}}),r({target:se,stat:!0,forced:i||x},{resolve:function(ee){return A(i&&this===K?G:this,ee)}}),r({target:se,stat:!0,forced:M},{all:function(ee){var ue=this,Te=pe(ue),Ie=Te.resolve,Fe=Te.reject,We=P(function(){var Ke=d(ue.resolve),ur=[],br=0,zt=1;m(ee,function(Lt){var cn=br++,lr=!1;ur.push(void 0),zt++,Ke.call(ue,Lt).then(function(un){lr||(lr=!0,ur[cn]=un,--zt||Ie(ur))},Fe)}),--zt||Ie(ur)});return We.error&&Fe(We.value),Te.promise},race:function(ee){var ue=this,Te=pe(ue),Ie=Te.reject,Fe=P(function(){var We=d(ue.resolve);m(ee,function(Ke){We.call(ue,Ke).then(Te.resolve,Ie)})});return Fe.error&&Ie(Fe.value),Te.promise}}),vP}var kP={},NP;function P2(){if(NP)return kP;NP=1;var r=qi(),i=Mo(),o=Cl(),p=Qf(),s=Jf();return r({target:"Promise",stat:!0},{allSettled:function(a){var n=this,l=o.f(n),u=l.resolve,h=l.reject,d=p(function(){var y=i(n.resolve),g=[],m=0,C=1;s(a,function(_){var b=m++,R=!1;g.push(void 0),C++,y.call(n,_).then(function(A){R||(R=!0,g[b]={status:"fulfilled",value:A},--C||u(g))},function(A){R||(R=!0,g[b]={status:"rejected",reason:A},--C||u(g))})}),--C||u(g)});return d.error&&h(d.value),l.promise}}),kP}var qP={},zP;function O2(){if(zP)return qP;zP=1;var r=qi(),i=Mo(),o=Ni(),p=Cl(),s=Qf(),f=Jf(),a="No one promise resolved";return r({target:"Promise",stat:!0},{any:function(l){var u=this,h=p.f(u),d=h.resolve,y=h.reject,g=s(function(){var m=i(u.resolve),C=[],_=0,b=1,R=!1;f(l,function(A){var w=_++,O=!1;C.push(void 0),b++,m.call(u,A).then(function(P){O||R||(R=!0,d(P))},function(P){O||R||(O=!0,C[w]=P,--b||y(new(o("AggregateError"))(C,a)))})}),--b||y(new(o("AggregateError"))(C,a))});return g.error&&y(g.value),h.promise}}),qP}var LP={},xP;function rB(){if(xP)return LP;xP=1;var r=qi(),i=ml(),o=_2(),p=nn(),s=Ni(),f=E2(),a=T2(),n=Io(),l=!!o&&p(function(){o.prototype.finally.call({then:function(){}},function(){})});if(r({target:"Promise",proto:!0,real:!0,forced:l},{finally:function(h){var d=f(this,s("Promise")),y=typeof h=="function";return this.then(y?function(g){return a(d,h()).then(function(){return g})}:h,y?function(g){return a(d,h()).then(function(){throw g})}:h)}}),!i&&typeof o=="function"){var u=s("Promise").prototype.finally;o.prototype.finally!==u&&n(o.prototype,"finally",u,{unsafe:!0})}return LP}var BP={},by,UP;function nB(){if(UP)return by;UP=1;var r=PS(),i=CS(),o=function(p){return function(s,f){var a=String(i(s)),n=r(f),l=a.length,u,h;return n<0||n>=l?p?"":void 0:(u=a.charCodeAt(n),u<55296||u>56319||n+1===l||(h=a.charCodeAt(n+1))<56320||h>57343?p?a.charAt(n):u:p?a.slice(n,n+2):(u-55296<<10)+(h-56320)+65536)}};return by={codeAt:o(!1),charAt:o(!0)},by}var Ry,FP;function I2(){if(FP)return Ry;FP=1;var r=nn(),i=IS(),o=Ln(),p=on(),s=cr(),f=ml(),a=s("iterator"),n=!1,l=function(){return this},u,h,d;[].keys&&(d=[].keys(),"next"in d?(h=i(i(d)),h!==Object.prototype&&(u=h)):n=!0);var y=u==null||r(function(){var g={};return u[a].call(g)!==g});return y&&(u={}),(!f||y)&&!p(u,a)&&o(u,a,l),Ry={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:n},Ry}var _y,HP;function iB(){if(HP)return _y;HP=1;var r=I2().IteratorPrototype,i=DS(),o=Gf(),p=NS(),s=Sl(),f=function(){return this};return _y=function(a,n,l){var u=n+" Iterator";return a.prototype=i(r,{next:o(1,l)}),p(a,u,!1,!0),s[u]=f,a},_y}var Ey,VP;function M2(){if(VP)return Ey;VP=1;var r=qi(),i=iB(),o=IS(),p=MS(),s=NS(),f=Ln(),a=Io(),n=cr(),l=ml(),u=Sl(),h=I2(),d=h.IteratorPrototype,y=h.BUGGY_SAFARI_ITERATORS,g=n("iterator"),m="keys",C="values",_="entries",b=function(){return this};return Ey=function(R,A,w,O,P,D,N){i(w,A,O);var $=function(G){if(G===P&&se)return se;if(!y&&G in ae)return ae[G];switch(G){case m:return function(){return new w(this,G)};case C:return function(){return new w(this,G)};case _:return function(){return new w(this,G)}}return function(){return new w(this)}},Y=A+" Iterator",oe=!1,ae=R.prototype,fe=ae[g]||ae["@@iterator"]||P&&ae[P],se=!y&&fe||$(P),B=A=="Array"&&ae.entries||fe,j,J,Z;if(B&&(j=o(B.call(new R)),d!==Object.prototype&&j.next&&(!l&&o(j)!==d&&(p?p(j,d):typeof j[g]!="function"&&f(j,g,b)),s(j,Y,!0,!0),l&&(u[Y]=b))),P==C&&fe&&fe.name!==C&&(oe=!0,se=function(){return fe.call(this)}),(!l||N)&&ae[g]!==se&&f(ae,g,se),u[A]=se,P)if(J={values:$(C),keys:D?se:$(m),entries:$(_)},N)for(Z in J)(y||oe||!(Z in ae))&&a(ae,Z,J[Z]);else r({target:A,proto:!0,forced:y||oe},J);return J},Ey}var WP;function oB(){if(WP)return BP;WP=1;var r=nB().charAt,i=$f(),o=M2(),p="String Iterator",s=i.set,f=i.getterFor(p);return o(String,"String",function(a){s(this,{type:p,string:String(a),index:0})},function(){var n=f(this),l=n.string,u=n.index,h;return u>=l.length?{value:void 0,done:!0}:(h=r(l,u),n.index+=h.length,{value:h,done:!1})}),BP}var GP={},wy,KP;function sB(){return KP||(KP=1,wy={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),wy}var Ay,$P;function aB(){if($P)return Ay;$P=1;var r=cr(),i=DS(),o=Oo(),p=r("unscopables"),s=Array.prototype;return s[p]==null&&o.f(s,p,{configurable:!0,value:i(null)}),Ay=function(f){s[p][f]=!0},Ay}var Ty,JP;function cB(){if(JP)return Ty;JP=1;var r=Kf(),i=aB(),o=Sl(),p=$f(),s=M2(),f="Array Iterator",a=p.set,n=p.getterFor(f);return Ty=s(Array,"Array",function(l,u){a(this,{type:f,target:r(l),index:0,kind:u})},function(){var l=n(this),u=l.target,h=l.kind,d=l.index++;return!u||d>=u.length?(l.target=void 0,{value:void 0,done:!0}):h=="keys"?{value:d,done:!1}:h=="values"?{value:u[d],done:!1}:{value:[d,u[d]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries"),Ty}var QP;function uB(){if(QP)return GP;QP=1;var r=Dt(),i=sB(),o=cB(),p=Ln(),s=cr(),f=s("iterator"),a=s("toStringTag"),n=o.values;for(var l in i){var u=r[l],h=u&&u.prototype;if(h){if(h[f]!==n)try{p(h,f,n)}catch{h[f]=n}if(h[a]||p(h,a,l),i[l]){for(var d in o)if(h[d]!==o[d])try{p(h,d,o[d])}catch{h[d]=o[d]}}}}return GP}var Py,YP;function lB(){if(YP)return Py;YP=1,R2(),Gx(),tB(),P2(),O2(),rB(),oB(),uB();var r=p2();return Py=r.Promise,Py}var XP={},ZP;function fB(){return ZP||(ZP=1,R2()),XP}var eO={},tO;function hB(){return tO||(tO=1,P2()),eO}var rO={},nO;function pB(){if(nO)return rO;nO=1;var r=qi(),i=Cl(),o=Qf();return r({target:"Promise",stat:!0},{try:function(p){var s=i.f(this),f=o(p);return(f.error?s.reject:s.resolve)(f.value),s.promise}}),rO}var iO={},oO;function dB(){return oO||(oO=1,O2()),iO}var Oy,sO;function vB(){if(sO)return Oy;sO=1;var r=lB();return fB(),hB(),pB(),dB(),Oy=r,Oy}var Iy={},aO;function gB(){return aO||(aO=1,function(r){var i=function(){try{if(r.URLSearchParams&&new r.URLSearchParams("foo=bar").get("foo")==="bar")return r.URLSearchParams}catch{}return null}(),o=i&&new i({a:1}).toString()==="a=1",p=i&&new i("s=%2B").get("s")==="+",s="__URLSearchParams__",f=i?function(){var w=new i;return w.append("s"," &"),w.toString()==="s=+%26"}():!0,a=l.prototype,n=!!(r.Symbol&&r.Symbol.iterator);if(i&&o&&p&&f)return;function l(w){w=w||"",(w instanceof URLSearchParams||w instanceof l)&&(w=w.toString()),this[s]=_(w)}a.append=function(w,O){b(this[s],w,O)},a.delete=function(w){delete this[s][w]},a.get=function(w){var O=this[s];return this.has(w)?O[w][0]:null},a.getAll=function(w){var O=this[s];return this.has(w)?O[w].slice(0):[]},a.has=function(w){return A(this[s],w)},a.set=function(O,P){this[s][O]=[""+P]},a.toString=function(){var w=this[s],O=[],P,D,N,$;for(D in w)for(N=g(D),P=0,$=w[D];P<$.length;P++)O.push(N+"="+g($[P]));return O.join("&")};var u=!p,h=!u&&i&&!o&&r.Proxy,d;h?(d=new Proxy(i,{construct:function(w,O){return new w(new l(O[0]).toString())}}),d.toString=Function.prototype.toString.bind(l)):d=l,Object.defineProperty(r,"URLSearchParams",{value:d});var y=r.URLSearchParams.prototype;y.polyfill=!0,y.forEach=y.forEach||function(w,O){var P=_(this.toString());Object.getOwnPropertyNames(P).forEach(function(D){P[D].forEach(function(N){w.call(O,N,D,this)},this)},this)},y.sort=y.sort||function(){var w=_(this.toString()),O=[],P,D,N;for(P in w)O.push(P);for(O.sort(),D=0;D<O.length;D++)this.delete(O[D]);for(D=0;D<O.length;D++){var $=O[D],Y=w[$];for(N=0;N<Y.length;N++)this.append($,Y[N])}},y.keys=y.keys||function(){var w=[];return this.forEach(function(O,P){w.push(P)}),C(w)},y.values=y.values||function(){var w=[];return this.forEach(function(O){w.push(O)}),C(w)},y.entries=y.entries||function(){var w=[];return this.forEach(function(O,P){w.push([P,O])}),C(w)},n&&(y[r.Symbol.iterator]=y[r.Symbol.iterator]||y.entries);function g(w){var O={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(w).replace(/[!'\(\)~]|%20|%00/g,function(P){return O[P]})}function m(w){return w.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/ig,function(O){return decodeURIComponent(O)})}function C(w){var O={next:function(){var P=w.shift();return{done:P===void 0,value:P}}};return n&&(O[r.Symbol.iterator]=function(){return O}),O}function _(w){var O={};if(typeof w=="object")if(R(w))for(var P=0;P<w.length;P++){var D=w[P];if(R(D)&&D.length===2)b(O,D[0],D[1]);else throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements")}else for(var N in w)w.hasOwnProperty(N)&&b(O,N,w[N]);else{w.indexOf("?")===0&&(w=w.slice(1));for(var $=w.split("&"),Y=0;Y<$.length;Y++){var oe=$[Y],ae=oe.indexOf("=");-1<ae?b(O,m(oe.slice(0,ae)),m(oe.slice(ae+1))):oe&&b(O,m(oe),"")}}return O}function b(w,O,P){var D=typeof P=="string"?P:P!=null&&typeof P.toString=="function"?P.toString():JSON.stringify(P);A(w,O)?w[O].push(D):w[O]=[D]}function R(w){return!!w&&Object.prototype.toString.call(w)==="[object Array]"}function A(w,O){return Object.prototype.hasOwnProperty.call(w,O)}}(typeof Ft<"u"?Ft:typeof window<"u"?window:Iy)),Iy}var qu={},Ai={},My={},Dy={},cO;function an(){if(cO)return Dy;cO=1;var r=typeof window<"u"&&window,i=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,o=typeof Ft<"u"&&Ft,p=r||o||i;return Dy.root=p,function(){if(!p)throw new Error("RxJS could not find any global context (window, self, global)")}(),Dy}var jy={},zu={},ky={},uO;function D2(){if(uO)return ky;uO=1;function r(i){return typeof i=="function"}return ky.isFunction=r,ky}var Ny={},qy={},lO;function Yf(){return lO||(lO=1,qy.isArray=Array.isArray||function(r){return r&&typeof r.length=="number"}),qy}var zy={},fO;function j2(){if(fO)return zy;fO=1;function r(i){return i!=null&&typeof i=="object"}return zy.isObject=r,zy}var Ly={},xy={},hO;function Xf(){return hO||(hO=1,xy.errorObject={e:{}}),xy}var pO;function zS(){if(pO)return Ly;pO=1;var r=Xf(),i;function o(){try{return i.apply(this,arguments)}catch(s){return r.errorObject.e=s,r.errorObject}}function p(s){return i=s,o}return Ly.tryCatch=p,Ly}var Lu={},dO;function yB(){if(dO)return Lu;dO=1;var r=Lu&&Lu.__extends||function(o,p){for(var s in p)p.hasOwnProperty(s)&&(o[s]=p[s]);function f(){this.constructor=o}o.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)},i=function(o){r(p,o);function p(s){o.call(this),this.errors=s;var f=Error.call(this,s?s.length+` errors occurred during unsubscription:
  `+s.map(function(a,n){return n+1+") "+a.toString()}).join(`
  `):"");this.name=f.name="UnsubscriptionError",this.stack=f.stack,this.message=f.message}return p}(Error);return Lu.UnsubscriptionError=i,Lu}var vO;function bl(){if(vO)return Ny;vO=1;var r=Yf(),i=j2(),o=D2(),p=zS(),s=Xf(),f=yB(),a=function(){function l(u){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,u&&(this._unsubscribe=u)}return l.prototype.unsubscribe=function(){var u=!1,h;if(!this.closed){var d=this,y=d._parent,g=d._parents,m=d._unsubscribe,C=d._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var _=-1,b=g?g.length:0;y;)y.remove(this),y=++_<b&&g[_]||null;if(o.isFunction(m)){var R=p.tryCatch(m).call(this);R===s.errorObject&&(u=!0,h=h||(s.errorObject.e instanceof f.UnsubscriptionError?n(s.errorObject.e.errors):[s.errorObject.e]))}if(r.isArray(C))for(_=-1,b=C.length;++_<b;){var A=C[_];if(i.isObject(A)){var R=p.tryCatch(A.unsubscribe).call(A);if(R===s.errorObject){u=!0,h=h||[];var w=s.errorObject.e;w instanceof f.UnsubscriptionError?h=h.concat(n(w.errors)):h.push(w)}}}if(u)throw new f.UnsubscriptionError(h)}},l.prototype.add=function(u){if(!u||u===l.EMPTY)return l.EMPTY;if(u===this)return this;var h=u;switch(typeof u){case"function":h=new l(u);case"object":if(h.closed||typeof h.unsubscribe!="function")return h;if(this.closed)return h.unsubscribe(),h;if(typeof h._addParent!="function"){var d=h;h=new l,h._subscriptions=[d]}break;default:throw new Error("unrecognized teardown "+u+" added to Subscription.")}var y=this._subscriptions||(this._subscriptions=[]);return y.push(h),h._addParent(this),h},l.prototype.remove=function(u){var h=this._subscriptions;if(h){var d=h.indexOf(u);d!==-1&&h.splice(d,1)}},l.prototype._addParent=function(u){var h=this,d=h._parent,y=h._parents;!d||d===u?this._parent=u:y?y.indexOf(u)===-1&&y.push(u):this._parents=[u]},l.EMPTY=function(u){return u.closed=!0,u}(new l),l}();Ny.Subscription=a;function n(l){return l.reduce(function(u,h){return u.concat(h instanceof f.UnsubscriptionError?h.errors:h)},[])}return Ny}var By={},gO;function k2(){return gO||(gO=1,By.empty={closed:!0,next:function(r){},error:function(r){throw r},complete:function(){}}),By}var Uy={},yO;function LS(){return yO||(yO=1,function(r){var i=an(),o=i.root.Symbol;r.rxSubscriber=typeof o=="function"&&typeof o.for=="function"?o.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber}(Uy)),Uy}var mO;function Yt(){if(mO)return zu;mO=1;var r=zu&&zu.__extends||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h]);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)},i=D2(),o=bl(),p=k2(),s=LS(),f=function(l){r(u,l);function u(h,d,y){switch(l.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=p.empty;break;case 1:if(!h){this.destination=p.empty;break}if(typeof h=="object"){if(n(h)){var g=h[s.rxSubscriber]();this.syncErrorThrowable=g.syncErrorThrowable,this.destination=g,g.add(this)}else this.syncErrorThrowable=!0,this.destination=new a(this,h);break}default:this.syncErrorThrowable=!0,this.destination=new a(this,h,d,y);break}}return u.prototype[s.rxSubscriber]=function(){return this},u.create=function(h,d,y){var g=new u(h,d,y);return g.syncErrorThrowable=!1,g},u.prototype.next=function(h){this.isStopped||this._next(h)},u.prototype.error=function(h){this.isStopped||(this.isStopped=!0,this._error(h))},u.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},u.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,l.prototype.unsubscribe.call(this))},u.prototype._next=function(h){this.destination.next(h)},u.prototype._error=function(h){this.destination.error(h),this.unsubscribe()},u.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},u.prototype._unsubscribeAndRecycle=function(){var h=this,d=h._parent,y=h._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=d,this._parents=y,this},u}(o.Subscription);zu.Subscriber=f;var a=function(l){r(u,l);function u(h,d,y,g){l.call(this),this._parentSubscriber=h;var m,C=this;i.isFunction(d)?m=d:d&&(m=d.next,y=d.error,g=d.complete,d!==p.empty&&(C=Object.create(d),i.isFunction(C.unsubscribe)&&this.add(C.unsubscribe.bind(C)),C.unsubscribe=this.unsubscribe.bind(this))),this._context=C,this._next=m,this._error=y,this._complete=g}return u.prototype.next=function(h){if(!this.isStopped&&this._next){var d=this._parentSubscriber;d.syncErrorThrowable?this.__tryOrSetError(d,this._next,h)&&this.unsubscribe():this.__tryOrUnsub(this._next,h)}},u.prototype.error=function(h){if(!this.isStopped){var d=this._parentSubscriber;if(this._error)d.syncErrorThrowable?(this.__tryOrSetError(d,this._error,h),this.unsubscribe()):(this.__tryOrUnsub(this._error,h),this.unsubscribe());else if(d.syncErrorThrowable)d.syncErrorValue=h,d.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),h}},u.prototype.complete=function(){var h=this;if(!this.isStopped){var d=this._parentSubscriber;if(this._complete){var y=function(){return h._complete.call(h._context)};d.syncErrorThrowable?(this.__tryOrSetError(d,y),this.unsubscribe()):(this.__tryOrUnsub(y),this.unsubscribe())}else this.unsubscribe()}},u.prototype.__tryOrUnsub=function(h,d){try{h.call(this._context,d)}catch(y){throw this.unsubscribe(),y}},u.prototype.__tryOrSetError=function(h,d,y){try{d.call(this._context,y)}catch(g){return h.syncErrorValue=g,h.syncErrorThrown=!0,!0}return!1},u.prototype._unsubscribe=function(){var h=this._parentSubscriber;this._context=null,this._parentSubscriber=null,h.unsubscribe()},u}(f);function n(l){return l instanceof f||"syncErrorThrowable"in l&&l[s.rxSubscriber]}return zu}var SO;function mB(){if(SO)return jy;SO=1;var r=Yt(),i=LS(),o=k2();function p(s,f,a){if(s){if(s instanceof r.Subscriber)return s;if(s[i.rxSubscriber])return s[i.rxSubscriber]()}return!s&&!f&&!a?new r.Subscriber(o.empty):new r.Subscriber(s,f,a)}return jy.toSubscriber=p,jy}var Fy={},CO;function xS(){return CO||(CO=1,function(r){var i=an();function o(p){var s,f=p.Symbol;return typeof f=="function"?f.observable?s=f.observable:(s=f("observable"),f.observable=s):s="@@observable",s}r.getSymbolObservable=o,r.observable=o(i.root),r.$$observable=r.observable}(Fy)),Fy}var zf={},Hy={},bO;function SB(){if(bO)return Hy;bO=1;function r(){}return Hy.noop=r,Hy}var RO;function CB(){if(RO)return zf;RO=1;var r=SB();function i(){for(var p=[],s=0;s<arguments.length;s++)p[s-0]=arguments[s];return o(p)}zf.pipe=i;function o(p){return p?p.length===1?p[0]:function(f){return p.reduce(function(a,n){return n(a)},f)}:r.noop}return zf.pipeFromArray=o,zf}var _O;function et(){if(_O)return My;_O=1;var r=an(),i=mB(),o=xS(),p=CB(),s=function(){function f(a){this._isScalar=!1,a&&(this._subscribe=a)}return f.prototype.lift=function(a){var n=new f;return n.source=this,n.operator=a,n},f.prototype.subscribe=function(a,n,l){var u=this.operator,h=i.toSubscriber(a,n,l);if(u?u.call(h,this.source):h.add(this.source||!h.syncErrorThrowable?this._subscribe(h):this._trySubscribe(h)),h.syncErrorThrowable&&(h.syncErrorThrowable=!1,h.syncErrorThrown))throw h.syncErrorValue;return h},f.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(n){a.syncErrorThrown=!0,a.syncErrorValue=n,a.error(n)}},f.prototype.forEach=function(a,n){var l=this;if(n||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?n=r.root.Rx.config.Promise:r.root.Promise&&(n=r.root.Promise)),!n)throw new Error("no Promise impl found");return new n(function(u,h){var d;d=l.subscribe(function(y){if(d)try{a(y)}catch(g){h(g),d.unsubscribe()}else a(y)},h,u)})},f.prototype._subscribe=function(a){return this.source.subscribe(a)},f.prototype[o.observable]=function(){return this},f.prototype.pipe=function(){for(var a=[],n=0;n<arguments.length;n++)a[n-0]=arguments[n];return a.length===0?this:p.pipeFromArray(a)(this)},f.prototype.toPromise=function(a){var n=this;if(a||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?a=r.root.Rx.config.Promise:r.root.Promise&&(a=r.root.Promise)),!a)throw new Error("no Promise impl found");return new a(function(l,u){var h;n.subscribe(function(d){return h=d},function(d){return u(d)},function(){return l(h)})})},f.create=function(a){return new f(a)},f}();return My.Observable=s,My}var xu={},EO;function N2(){if(EO)return xu;EO=1;var r=xu&&xu.__extends||function(o,p){for(var s in p)p.hasOwnProperty(s)&&(o[s]=p[s]);function f(){this.constructor=o}o.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)},i=function(o){r(p,o);function p(){var s=o.call(this,"object unsubscribed");this.name=s.name="ObjectUnsubscribedError",this.stack=s.stack,this.message=s.message}return p}(Error);return xu.ObjectUnsubscribedError=i,xu}var Bu={},wO;function bB(){if(wO)return Bu;wO=1;var r=Bu&&Bu.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=bl(),o=function(p){r(s,p);function s(f,a){p.call(this),this.subject=f,this.subscriber=a,this.closed=!1}return s.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var f=this.subject,a=f.observers;if(this.subject=null,!(!a||a.length===0||f.isStopped||f.closed)){var n=a.indexOf(this.subscriber);n!==-1&&a.splice(n,1)}}},s}(i.Subscription);return Bu.SubjectSubscription=o,Bu}var AO;function Zf(){if(AO)return Ai;AO=1;var r=Ai&&Ai.__extends||function(h,d){for(var y in d)d.hasOwnProperty(y)&&(h[y]=d[y]);function g(){this.constructor=h}h.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)},i=et(),o=Yt(),p=bl(),s=N2(),f=bB(),a=LS(),n=function(h){r(d,h);function d(y){h.call(this,y),this.destination=y}return d}(o.Subscriber);Ai.SubjectSubscriber=n;var l=function(h){r(d,h);function d(){h.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return d.prototype[a.rxSubscriber]=function(){return new n(this)},d.prototype.lift=function(y){var g=new u(this,this);return g.operator=y,g},d.prototype.next=function(y){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var g=this.observers,m=g.length,C=g.slice(),_=0;_<m;_++)C[_].next(y)},d.prototype.error=function(y){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=y,this.isStopped=!0;for(var g=this.observers,m=g.length,C=g.slice(),_=0;_<m;_++)C[_].error(y);this.observers.length=0},d.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var y=this.observers,g=y.length,m=y.slice(),C=0;C<g;C++)m[C].complete();this.observers.length=0},d.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},d.prototype._trySubscribe=function(y){if(this.closed)throw new s.ObjectUnsubscribedError;return h.prototype._trySubscribe.call(this,y)},d.prototype._subscribe=function(y){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(y.error(this.thrownError),p.Subscription.EMPTY):this.isStopped?(y.complete(),p.Subscription.EMPTY):(this.observers.push(y),new f.SubjectSubscription(this,y))},d.prototype.asObservable=function(){var y=new i.Observable;return y.source=this,y},d.create=function(y,g){return new u(y,g)},d}(i.Observable);Ai.Subject=l;var u=function(h){r(d,h);function d(y,g){h.call(this),this.destination=y,this.source=g}return d.prototype.next=function(y){var g=this.destination;g&&g.next&&g.next(y)},d.prototype.error=function(y){var g=this.destination;g&&g.error&&this.destination.error(y)},d.prototype.complete=function(){var y=this.destination;y&&y.complete&&this.destination.complete()},d.prototype._subscribe=function(y){var g=this.source;return g?this.source.subscribe(y):p.Subscription.EMPTY},d}(l);return Ai.AnonymousSubject=u,Ai}var TO;function q2(){if(TO)return qu;TO=1;var r=qu&&qu.__extends||function(s,f){for(var a in f)f.hasOwnProperty(a)&&(s[a]=f[a]);function n(){this.constructor=s}s.prototype=f===null?Object.create(f):(n.prototype=f.prototype,new n)},i=Zf(),o=N2(),p=function(s){r(f,s);function f(a){s.call(this),this._value=a}return Object.defineProperty(f.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),f.prototype._subscribe=function(a){var n=s.prototype._subscribe.call(this,a);return n&&!n.closed&&a.next(this._value),n},f.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},f.prototype.next=function(a){s.prototype.next.call(this,this._value=a)},f}(i.Subject);return qu.BehaviorSubject=p,qu}var Vy={},Uu={},Fu={},PO;function RB(){if(PO)return Fu;PO=1;var r=Fu&&Fu.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=bl(),o=function(p){r(s,p);function s(f,a){p.call(this)}return s.prototype.schedule=function(f,a){return this},s}(i.Subscription);return Fu.Action=o,Fu}var OO;function _B(){if(OO)return Uu;OO=1;var r=Uu&&Uu.__extends||function(s,f){for(var a in f)f.hasOwnProperty(a)&&(s[a]=f[a]);function n(){this.constructor=s}s.prototype=f===null?Object.create(f):(n.prototype=f.prototype,new n)},i=an(),o=RB(),p=function(s){r(f,s);function f(a,n){s.call(this,a,n),this.scheduler=a,this.pending=!1,this.work=n}return f.prototype.schedule=function(a,n){if(n===void 0&&(n=0),this.closed)return this;this.state=a,this.pending=!0;var l=this.id,u=this.scheduler;return l!=null&&(this.id=this.recycleAsyncId(u,l,n)),this.delay=n,this.id=this.id||this.requestAsyncId(u,this.id,n),this},f.prototype.requestAsyncId=function(a,n,l){return l===void 0&&(l=0),i.root.setInterval(a.flush.bind(a,this),l)},f.prototype.recycleAsyncId=function(a,n,l){return l===void 0&&(l=0),l!==null&&this.delay===l&&this.pending===!1?n:i.root.clearInterval(n)&&void 0||void 0},f.prototype.execute=function(a,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(a,n);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},f.prototype._execute=function(a,n){var l=!1,u=void 0;try{this.work(a)}catch(h){l=!0,u=!!h&&h||new Error(h)}if(l)return this.unsubscribe(),u},f.prototype._unsubscribe=function(){var a=this.id,n=this.scheduler,l=n.actions,u=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,u!==-1&&l.splice(u,1),a!=null&&(this.id=this.recycleAsyncId(n,a,null)),this.delay=null},f}(o.Action);return Uu.AsyncAction=p,Uu}var Hu={},Wy={},IO;function EB(){if(IO)return Wy;IO=1;var r=function(){function i(o,p){p===void 0&&(p=i.now),this.SchedulerAction=o,this.now=p}return i.prototype.schedule=function(o,p,s){return p===void 0&&(p=0),new this.SchedulerAction(this,o).schedule(s,p)},i.now=Date.now?Date.now:function(){return+new Date},i}();return Wy.Scheduler=r,Wy}var MO;function wB(){if(MO)return Hu;MO=1;var r=Hu&&Hu.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=EB(),o=function(p){r(s,p);function s(){p.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return s.prototype.flush=function(f){var a=this.actions;if(this.active){a.push(f);return}var n;this.active=!0;do if(n=f.execute(f.state,f.delay))break;while(f=a.shift());if(this.active=!1,n){for(;f=a.shift();)f.unsubscribe();throw n}},s}(i.Scheduler);return Hu.AsyncScheduler=o,Hu}var DO;function eh(){if(DO)return Vy;DO=1;var r=_B(),i=wB();return Vy.async=new i.AsyncScheduler(r.AsyncAction),Vy}function aS(r){this.message=r}aS.prototype=new Error,aS.prototype.name="InvalidCharacterError";var jO=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(r){var i=String(r).replace(/=+$/,"");if(i.length%4==1)throw new aS("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,p,s=0,f=0,a="";p=i.charAt(f++);~p&&(o=s%4?64*o+p:p,s++%4)?a+=String.fromCharCode(255&o>>(-2*s&6)):0)p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(p);return a};function AB(r){var i=r.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return function(o){return decodeURIComponent(jO(o).replace(/(.)/g,function(p,s){var f=s.charCodeAt(0).toString(16).toUpperCase();return f.length<2&&(f="0"+f),"%"+f}))}(i)}catch{return jO(i)}}function pl(r){this.message=r}function TB(r,i){if(typeof r!="string")throw new pl("Invalid token specified");var o=(i=i||{}).header===!0?0:1;try{return JSON.parse(AB(r.split(".")[o]))}catch(p){throw new pl("Invalid token specified: "+p.message)}}pl.prototype=new Error,pl.prototype.name="InvalidTokenError";const PB=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:pl,default:TB},Symbol.toStringTag,{value:"Module"})),OB=tD(PB);var kO={},Gy={},Vu={},Wu={},NO;function th(){if(NO)return Wu;NO=1;var r=Wu&&Wu.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=Yt(),o=function(p){r(s,p);function s(){p.apply(this,arguments)}return s.prototype.notifyNext=function(f,a,n,l,u){this.destination.next(a)},s.prototype.notifyError=function(f,a){this.destination.error(f)},s.prototype.notifyComplete=function(f){this.destination.complete()},s}(i.Subscriber);return Wu.OuterSubscriber=o,Wu}var Ky={},$y={},qO;function z2(){return qO||(qO=1,$y.isArrayLike=function(r){return r&&typeof r.length=="number"}),$y}var Jy={},zO;function L2(){if(zO)return Jy;zO=1;function r(i){return i&&typeof i.subscribe!="function"&&typeof i.then=="function"}return Jy.isPromise=r,Jy}var Qy={},LO;function BS(){return LO||(LO=1,function(r){var i=an();function o(p){var s=p.Symbol;if(typeof s=="function")return s.iterator||(s.iterator=s("iterator polyfill")),s.iterator;var f=p.Set;if(f&&typeof new f()["@@iterator"]=="function")return"@@iterator";var a=p.Map;if(a)for(var n=Object.getOwnPropertyNames(a.prototype),l=0;l<n.length;++l){var u=n[l];if(u!=="entries"&&u!=="size"&&a.prototype[u]===a.prototype.entries)return u}return"@@iterator"}r.symbolIteratorPonyfill=o,r.iterator=o(i.root),r.$$iterator=r.iterator}(Qy)),Qy}var Gu={},xO;function IB(){if(xO)return Gu;xO=1;var r=Gu&&Gu.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=Yt(),o=function(p){r(s,p);function s(f,a,n){p.call(this),this.parent=f,this.outerValue=a,this.outerIndex=n,this.index=0}return s.prototype._next=function(f){this.parent.notifyNext(this.outerValue,f,this.outerIndex,this.index++,this)},s.prototype._error=function(f){this.parent.notifyError(f,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s}(i.Subscriber);return Gu.InnerSubscriber=o,Gu}var BO;function rh(){if(BO)return Ky;BO=1;var r=an(),i=z2(),o=L2(),p=j2(),s=et(),f=BS(),a=IB(),n=xS();function l(u,h,d,y){var g=new a.InnerSubscriber(u,d,y);if(g.closed)return null;if(h instanceof s.Observable)return h._isScalar?(g.next(h.value),g.complete(),null):(g.syncErrorThrowable=!0,h.subscribe(g));if(i.isArrayLike(h)){for(var m=0,C=h.length;m<C&&!g.closed;m++)g.next(h[m]);g.closed||g.complete()}else{if(o.isPromise(h))return h.then(function(O){g.closed||(g.next(O),g.complete())},function(O){return g.error(O)}).then(null,function(O){r.root.setTimeout(function(){throw O})}),g;if(h&&typeof h[f.iterator]=="function"){var _=h[f.iterator]();do{var b=_.next();if(b.done){g.complete();break}if(g.next(b.value),g.closed)break}while(!0)}else if(h&&typeof h[n.observable]=="function"){var R=h[n.observable]();if(typeof R.subscribe!="function")g.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return R.subscribe(new a.InnerSubscriber(u,d,y))}else{var A=p.isObject(h)?"an invalid object":"'"+h+"'",w="You provided "+A+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";g.error(new TypeError(w))}}return null}return Ky.subscribeToResult=l,Ky}var UO;function MB(){if(UO)return Vu;UO=1;var r=Vu&&Vu.__extends||function(a,n){for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);function u(){this.constructor=a}a.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)},i=th(),o=rh();function p(a){return function(l){var u=new s(a),h=l.lift(u);return u.caught=h}}Vu.catchError=p;var s=function(){function a(n){this.selector=n}return a.prototype.call=function(n,l){return l.subscribe(new f(n,this.selector,this.caught))},a}(),f=function(a){r(n,a);function n(l,u,h){a.call(this,l),this.selector=u,this.caught=h}return n.prototype.error=function(l){if(!this.isStopped){var u=void 0;try{u=this.selector(l,this.caught)}catch(h){a.prototype.error.call(this,h);return}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,u))}},n}(i.OuterSubscriber);return Vu}var FO;function DB(){if(FO)return Gy;FO=1;var r=MB();function i(o){return r.catchError(o)(this)}return Gy._catch=i,Gy}var HO;function jB(){if(HO)return kO;HO=1;var r=et(),i=DB();return r.Observable.prototype.catch=i._catch,r.Observable.prototype._catch=i._catch,kO}var VO={},Yy={},Ti={},Ku={},$u={},WO;function x2(){if(WO)return $u;WO=1;var r=$u&&$u.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=et(),o=function(p){r(s,p);function s(f,a){p.call(this),this.value=f,this.scheduler=a,this._isScalar=!0,a&&(this._isScalar=!1)}return s.create=function(f,a){return new s(f,a)},s.dispatch=function(f){var a=f.done,n=f.value,l=f.subscriber;if(a){l.complete();return}l.next(n),!l.closed&&(f.done=!0,this.schedule(f))},s.prototype._subscribe=function(f){var a=this.value,n=this.scheduler;if(n)return n.schedule(s.dispatch,0,{done:!1,value:a,subscriber:f});f.next(a),f.closed||f.complete()},s}(i.Observable);return $u.ScalarObservable=o,$u}var Ju={},GO;function nh(){if(GO)return Ju;GO=1;var r=Ju&&Ju.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=et(),o=function(p){r(s,p);function s(f){p.call(this),this.scheduler=f}return s.create=function(f){return new s(f)},s.dispatch=function(f){var a=f.subscriber;a.complete()},s.prototype._subscribe=function(f){var a=this.scheduler;if(a)return a.schedule(s.dispatch,0,{subscriber:f});f.complete()},s}(i.Observable);return Ju.EmptyObservable=o,Ju}var Xy={},KO;function kB(){if(KO)return Xy;KO=1;function r(i){return i&&typeof i.schedule=="function"}return Xy.isScheduler=r,Xy}var $O;function US(){if($O)return Ku;$O=1;var r=Ku&&Ku.__extends||function(a,n){for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);function u(){this.constructor=a}a.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)},i=et(),o=x2(),p=nh(),s=kB(),f=function(a){r(n,a);function n(l,u){a.call(this),this.array=l,this.scheduler=u,!u&&l.length===1&&(this._isScalar=!0,this.value=l[0])}return n.create=function(l,u){return new n(l,u)},n.of=function(){for(var l=[],u=0;u<arguments.length;u++)l[u-0]=arguments[u];var h=l[l.length-1];s.isScheduler(h)?l.pop():h=null;var d=l.length;return d>1?new n(l,h):d===1?new o.ScalarObservable(l[0],h):new p.EmptyObservable(h)},n.dispatch=function(l){var u=l.array,h=l.index,d=l.count,y=l.subscriber;if(h>=d){y.complete();return}y.next(u[h]),!y.closed&&(l.index=h+1,this.schedule(l))},n.prototype._subscribe=function(l){var u=0,h=this.array,d=h.length,y=this.scheduler;if(y)return y.schedule(n.dispatch,0,{array:h,index:u,count:d,subscriber:l});for(var g=0;g<d&&!l.closed;g++)l.next(h[g]);l.complete()},n}(i.Observable);return Ku.ArrayObservable=f,Ku}var JO;function NB(){if(JO)return Ti;JO=1;var r=Ti&&Ti.__extends||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d]);function y(){this.constructor=u}u.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)},i=US(),o=Yf(),p=th(),s=rh(),f={};function a(){for(var u=[],h=0;h<arguments.length;h++)u[h-0]=arguments[h];var d=null;return typeof u[u.length-1]=="function"&&(d=u.pop()),u.length===1&&o.isArray(u[0])&&(u=u[0].slice()),function(y){return y.lift.call(new i.ArrayObservable([y].concat(u)),new n(d))}}Ti.combineLatest=a;var n=function(){function u(h){this.project=h}return u.prototype.call=function(h,d){return d.subscribe(new l(h,this.project))},u}();Ti.CombineLatestOperator=n;var l=function(u){r(h,u);function h(d,y){u.call(this,d),this.project=y,this.active=0,this.values=[],this.observables=[]}return h.prototype._next=function(d){this.values.push(f),this.observables.push(d)},h.prototype._complete=function(){var d=this.observables,y=d.length;if(y===0)this.destination.complete();else{this.active=y,this.toRespond=y;for(var g=0;g<y;g++){var m=d[g];this.add(s.subscribeToResult(this,m,m,g))}}},h.prototype.notifyComplete=function(d){(this.active-=1)===0&&this.destination.complete()},h.prototype.notifyNext=function(d,y,g,m,C){var _=this.values,b=_[g],R=this.toRespond?b===f?--this.toRespond:this.toRespond:0;_[g]=y,R===0&&(this.project?this._tryProject(_):this.destination.next(_.slice()))},h.prototype._tryProject=function(d){var y;try{y=this.project.apply(this,d)}catch(g){this.destination.error(g);return}this.destination.next(y)},h}(p.OuterSubscriber);return Ti.CombineLatestSubscriber=l,Ti}var QO;function qB(){if(QO)return Yy;QO=1;var r=NB();function i(){for(var o=[],p=0;p<arguments.length;p++)o[p-0]=arguments[p];return r.combineLatest.apply(void 0,o)(this)}return Yy.combineLatest=i,Yy}var YO;function zB(){if(YO)return VO;YO=1;var r=et(),i=qB();return r.Observable.prototype.combineLatest=i.combineLatest,VO}var XO={},Zy={},Qu={},ZO;function LB(){if(ZO)return Qu;ZO=1;var r=Qu&&Qu.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=Yt();function o(f){return function(a){return a.lift(new p(f,a))}}Qu.count=o;var p=function(){function f(a,n){this.predicate=a,this.source=n}return f.prototype.call=function(a,n){return n.subscribe(new s(a,this.predicate,this.source))},f}(),s=function(f){r(a,f);function a(n,l,u){f.call(this,n),this.predicate=l,this.source=u,this.count=0,this.index=0}return a.prototype._next=function(n){this.predicate?this._tryPredicate(n):this.count++},a.prototype._tryPredicate=function(n){var l;try{l=this.predicate(n,this.index++,this.source)}catch(u){this.destination.error(u);return}l&&this.count++},a.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},a}(i.Subscriber);return Qu}var eI;function xB(){if(eI)return Zy;eI=1;var r=LB();function i(o){return r.count(o)(this)}return Zy.count=i,Zy}var tI;function BB(){if(tI)return XO;tI=1;var r=et(),i=xB();return r.Observable.prototype.count=i.count,XO}var rI={},em={},Yu={},tm={},nI;function UB(){if(nI)return tm;nI=1;function r(i){return i instanceof Date&&!isNaN(+i)}return tm.isDate=r,tm}var rm={},iI;function B2(){if(iI)return rm;iI=1;var r=et(),i=function(){function o(p,s,f){this.kind=p,this.value=s,this.error=f,this.hasValue=p==="N"}return o.prototype.observe=function(p){switch(this.kind){case"N":return p.next&&p.next(this.value);case"E":return p.error&&p.error(this.error);case"C":return p.complete&&p.complete()}},o.prototype.do=function(p,s,f){var a=this.kind;switch(a){case"N":return p&&p(this.value);case"E":return s&&s(this.error);case"C":return f&&f()}},o.prototype.accept=function(p,s,f){return p&&typeof p.next=="function"?this.observe(p):this.do(p,s,f)},o.prototype.toObservable=function(){var p=this.kind;switch(p){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},o.createNext=function(p){return typeof p<"u"?new o("N",p):o.undefinedValueNotification},o.createError=function(p){return new o("E",void 0,p)},o.createComplete=function(){return o.completeNotification},o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0),o}();return rm.Notification=i,rm}var oI;function FB(){if(oI)return Yu;oI=1;var r=Yu&&Yu.__extends||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d]);function y(){this.constructor=u}u.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)},i=eh(),o=UB(),p=Yt(),s=B2();function f(u,h){h===void 0&&(h=i.async);var d=o.isDate(u),y=d?+u-h.now():Math.abs(u);return function(g){return g.lift(new a(y,h))}}Yu.delay=f;var a=function(){function u(h,d){this.delay=h,this.scheduler=d}return u.prototype.call=function(h,d){return d.subscribe(new n(h,this.delay,this.scheduler))},u}(),n=function(u){r(h,u);function h(d,y,g){u.call(this,d),this.delay=y,this.scheduler=g,this.queue=[],this.active=!1,this.errored=!1}return h.dispatch=function(d){for(var y=d.source,g=y.queue,m=d.scheduler,C=d.destination;g.length>0&&g[0].time-m.now()<=0;)g.shift().notification.observe(C);if(g.length>0){var _=Math.max(0,g[0].time-m.now());this.schedule(d,_)}else this.unsubscribe(),y.active=!1},h.prototype._schedule=function(d){this.active=!0,this.add(d.schedule(h.dispatch,this.delay,{source:this,destination:this.destination,scheduler:d}))},h.prototype.scheduleNotification=function(d){if(this.errored!==!0){var y=this.scheduler,g=new l(y.now()+this.delay,d);this.queue.push(g),this.active===!1&&this._schedule(y)}},h.prototype._next=function(d){this.scheduleNotification(s.Notification.createNext(d))},h.prototype._error=function(d){this.errored=!0,this.queue=[],this.destination.error(d)},h.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},h}(p.Subscriber),l=function(){function u(h,d){this.time=h,this.notification=d}return u}();return Yu}var sI;function HB(){if(sI)return em;sI=1;var r=eh(),i=FB();function o(p,s){return s===void 0&&(s=r.async),i.delay(p,s)(this)}return em.delay=o,em}var aI;function VB(){if(aI)return rI;aI=1;var r=et(),i=HB();return r.Observable.prototype.delay=i.delay,rI}var cI={},nm={},Xu={},uI;function WB(){if(uI)return Xu;uI=1;var r=Xu&&Xu.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=Yt();function o(f,a,n){return function(u){return u.lift(new p(f,a,n))}}Xu.tap=o;var p=function(){function f(a,n,l){this.nextOrObserver=a,this.error=n,this.complete=l}return f.prototype.call=function(a,n){return n.subscribe(new s(a,this.nextOrObserver,this.error,this.complete))},f}(),s=function(f){r(a,f);function a(n,l,u,h){f.call(this,n);var d=new i.Subscriber(l,u,h);d.syncErrorThrowable=!0,this.add(d),this.safeSubscriber=d}return a.prototype._next=function(n){var l=this.safeSubscriber;l.next(n),l.syncErrorThrown?this.destination.error(l.syncErrorValue):this.destination.next(n)},a.prototype._error=function(n){var l=this.safeSubscriber;l.error(n),l.syncErrorThrown?this.destination.error(l.syncErrorValue):this.destination.error(n)},a.prototype._complete=function(){var n=this.safeSubscriber;n.complete(),n.syncErrorThrown?this.destination.error(n.syncErrorValue):this.destination.complete()},a}(i.Subscriber);return Xu}var lI;function GB(){if(lI)return nm;lI=1;var r=WB();function i(o,p,s){return r.tap(o,p,s)(this)}return nm._do=i,nm}var fI;function KB(){if(fI)return cI;fI=1;var r=et(),i=GB();return r.Observable.prototype.do=i._do,r.Observable.prototype._do=i._do,cI}var hI={},im={},Zu={},pI;function $B(){if(pI)return Zu;pI=1;var r=Zu&&Zu.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=Yt();function o(f,a){return function(l){return l.lift(new p(f,a))}}Zu.filter=o;var p=function(){function f(a,n){this.predicate=a,this.thisArg=n}return f.prototype.call=function(a,n){return n.subscribe(new s(a,this.predicate,this.thisArg))},f}(),s=function(f){r(a,f);function a(n,l,u){f.call(this,n),this.predicate=l,this.thisArg=u,this.count=0}return a.prototype._next=function(n){var l;try{l=this.predicate.call(this.thisArg,n,this.count++)}catch(u){this.destination.error(u);return}l&&this.destination.next(n)},a}(i.Subscriber);return Zu}var dI;function JB(){if(dI)return im;dI=1;var r=$B();function i(o,p){return r.filter(o,p)(this)}return im.filter=i,im}var vI;function QB(){if(vI)return hI;vI=1;var r=et(),i=JB();return r.Observable.prototype.filter=i.filter,hI}var gI={},om={},_o={},yI;function U2(){if(yI)return _o;yI=1;var r=_o&&_o.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=Yt();function o(f,a){return function(l){if(typeof f!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return l.lift(new p(f,a))}}_o.map=o;var p=function(){function f(a,n){this.project=a,this.thisArg=n}return f.prototype.call=function(a,n){return n.subscribe(new s(a,this.project,this.thisArg))},f}();_o.MapOperator=p;var s=function(f){r(a,f);function a(n,l,u){f.call(this,n),this.project=l,this.count=0,this.thisArg=u||this}return a.prototype._next=function(n){var l;try{l=this.project.call(this.thisArg,n,this.count++)}catch(u){this.destination.error(u);return}this.destination.next(l)},a}(i.Subscriber);return _o}var mI;function YB(){if(mI)return om;mI=1;var r=U2();function i(o,p){return r.map(o,p)(this)}return om.map=i,om}var SI;function XB(){if(SI)return gI;SI=1;var r=et(),i=YB();return r.Observable.prototype.map=i.map,gI}var CI={},sm={},Pi={},bI;function F2(){if(bI)return Pi;bI=1;var r=Pi&&Pi.__extends||function(a,n){for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);function u(){this.constructor=a}a.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)},i=rh(),o=th();function p(a,n,l){return l===void 0&&(l=Number.POSITIVE_INFINITY),function(h){return typeof n=="number"&&(l=n,n=null),h.lift(new s(a,n,l))}}Pi.mergeMap=p;var s=function(){function a(n,l,u){u===void 0&&(u=Number.POSITIVE_INFINITY),this.project=n,this.resultSelector=l,this.concurrent=u}return a.prototype.call=function(n,l){return l.subscribe(new f(n,this.project,this.resultSelector,this.concurrent))},a}();Pi.MergeMapOperator=s;var f=function(a){r(n,a);function n(l,u,h,d){d===void 0&&(d=Number.POSITIVE_INFINITY),a.call(this,l),this.project=u,this.resultSelector=h,this.concurrent=d,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n.prototype._next=function(l){this.active<this.concurrent?this._tryNext(l):this.buffer.push(l)},n.prototype._tryNext=function(l){var u,h=this.index++;try{u=this.project(l,h)}catch(d){this.destination.error(d);return}this.active++,this._innerSub(u,l,h)},n.prototype._innerSub=function(l,u,h){this.add(i.subscribeToResult(this,l,u,h))},n.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete()},n.prototype.notifyNext=function(l,u,h,d,y){this.resultSelector?this._notifyResultSelector(l,u,h,d):this.destination.next(u)},n.prototype._notifyResultSelector=function(l,u,h,d){var y;try{y=this.resultSelector(l,u,h,d)}catch(g){this.destination.error(g);return}this.destination.next(y)},n.prototype.notifyComplete=function(l){var u=this.buffer;this.remove(l),this.active--,u.length>0?this._next(u.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},n}(o.OuterSubscriber);return Pi.MergeMapSubscriber=f,Pi}var RI;function ZB(){if(RI)return sm;RI=1;var r=F2();function i(o,p,s){return s===void 0&&(s=Number.POSITIVE_INFINITY),r.mergeMap(o,p,s)(this)}return sm.mergeMap=i,sm}var _I;function e6(){if(_I)return CI;_I=1;var r=et(),i=ZB();return r.Observable.prototype.mergeMap=i.mergeMap,r.Observable.prototype.flatMap=i.mergeMap,CI}var EI={},am={},cm={},wI;function t6(){if(wI)return cm;wI=1;var r=F2();function i(o,p){return r.mergeMap(o,p,1)}return cm.concatMap=i,cm}var AI;function r6(){if(AI)return am;AI=1;var r=t6();function i(o,p){return r.concatMap(o,p)(this)}return am.concatMap=i,am}var TI;function n6(){if(TI)return EI;TI=1;var r=et(),i=r6();return r.Observable.prototype.concatMap=i.concatMap,EI}var PI={},um={},el={},OI;function i6(){if(OI)return el;OI=1;var r=el&&el.__extends||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d]);function y(){this.constructor=u}u.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)},i=Zf(),o=zS(),p=Xf(),s=th(),f=rh();function a(u){return function(h){return h.lift(new n(u,h))}}el.retryWhen=a;var n=function(){function u(h,d){this.notifier=h,this.source=d}return u.prototype.call=function(h,d){return d.subscribe(new l(h,this.notifier,this.source))},u}(),l=function(u){r(h,u);function h(d,y,g){u.call(this,d),this.notifier=y,this.source=g}return h.prototype.error=function(d){if(!this.isStopped){var y=this.errors,g=this.retries,m=this.retriesSubscription;if(g)this.errors=null,this.retriesSubscription=null;else{if(y=new i.Subject,g=o.tryCatch(this.notifier)(y),g===p.errorObject)return u.prototype.error.call(this,p.errorObject.e);m=f.subscribeToResult(this,g)}this._unsubscribeAndRecycle(),this.errors=y,this.retries=g,this.retriesSubscription=m,y.next(d)}},h.prototype._unsubscribe=function(){var d=this,y=d.errors,g=d.retriesSubscription;y&&(y.unsubscribe(),this.errors=null),g&&(g.unsubscribe(),this.retriesSubscription=null),this.retries=null},h.prototype.notifyNext=function(d,y,g,m,C){var _=this,b=_.errors,R=_.retries,A=_.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=b,this.retries=R,this.retriesSubscription=A,this.source.subscribe(this)},h}(s.OuterSubscriber);return el}var II;function o6(){if(II)return um;II=1;var r=i6();function i(o){return r.retryWhen(o)(this)}return um.retryWhen=i,um}var MI;function s6(){if(MI)return PI;MI=1;var r=et(),i=o6();return r.Observable.prototype.retryWhen=i.retryWhen,PI}var DI={},lm={},fm={},Lf={},Eo={},tl={},jI;function H2(){if(jI)return tl;jI=1;var r=tl&&tl.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=Yt();function o(){return function(a){return a.lift(new p(a))}}tl.refCount=o;var p=function(){function f(a){this.connectable=a}return f.prototype.call=function(a,n){var l=this.connectable;l._refCount++;var u=new s(a,l),h=n.subscribe(u);return u.closed||(u.connection=l.connect()),h},f}(),s=function(f){r(a,f);function a(n,l){f.call(this,n),this.connectable=l}return a.prototype._unsubscribe=function(){var n=this.connectable;if(!n){this.connection=null;return}this.connectable=null;var l=n._refCount;if(l<=0){this.connection=null;return}if(n._refCount=l-1,l>1){this.connection=null;return}var u=this.connection,h=n._connection;this.connection=null,h&&(!u||h===u)&&h.unsubscribe()},a}(i.Subscriber);return tl}var kI;function a6(){if(kI)return Eo;kI=1;var r=Eo&&Eo.__extends||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d]);function y(){this.constructor=u}u.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)},i=Zf(),o=et(),p=Yt(),s=bl(),f=H2(),a=function(u){r(h,u);function h(d,y){u.call(this),this.source=d,this.subjectFactory=y,this._refCount=0,this._isComplete=!1}return h.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},h.prototype.getSubject=function(){var d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject},h.prototype.connect=function(){var d=this._connection;return d||(this._isComplete=!1,d=this._connection=new s.Subscription,d.add(this.source.subscribe(new l(this.getSubject(),this))),d.closed?(this._connection=null,d=s.Subscription.EMPTY):this._connection=d),d},h.prototype.refCount=function(){return f.refCount()(this)},h}(o.Observable);Eo.ConnectableObservable=a;var n=a.prototype;Eo.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}};var l=function(u){r(h,u);function h(d,y){u.call(this,d),this.connectable=y}return h.prototype._error=function(d){this._unsubscribe(),u.prototype._error.call(this,d)},h.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),u.prototype._complete.call(this)},h.prototype._unsubscribe=function(){var d=this.connectable;if(d){this.connectable=null;var y=d._connection;d._refCount=0,d._subject=null,d._connection=null,y&&y.unsubscribe()}},h}(i.SubjectSubscriber);return function(u){r(h,u);function h(d,y){u.call(this,d),this.connectable=y}return h.prototype._unsubscribe=function(){var d=this.connectable;if(!d){this.connection=null;return}this.connectable=null;var y=d._refCount;if(y<=0){this.connection=null;return}if(d._refCount=y-1,y>1){this.connection=null;return}var g=this.connection,m=d._connection;this.connection=null,m&&(!g||m===g)&&m.unsubscribe()},h}(p.Subscriber),Eo}var NI;function c6(){if(NI)return Lf;NI=1;var r=a6();function i(p,s){return function(a){var n;if(typeof p=="function"?n=p:n=function(){return p},typeof s=="function")return a.lift(new o(n,s));var l=Object.create(a,r.connectableObservableDescriptor);return l.source=a,l.subjectFactory=n,l}}Lf.multicast=i;var o=function(){function p(s,f){this.subjectFactory=s,this.selector=f}return p.prototype.call=function(s,f){var a=this.selector,n=this.subjectFactory(),l=a(n).subscribe(s);return l.add(f.subscribe(n)),l},p}();return Lf.MulticastOperator=o,Lf}var qI;function u6(){if(qI)return fm;qI=1;var r=c6(),i=H2(),o=Zf();function p(){return new o.Subject}function s(){return function(f){return i.refCount()(r.multicast(p)(f))}}return fm.share=s,fm}var zI;function l6(){if(zI)return lm;zI=1;var r=u6();function i(){return r.share()(this)}return lm.share=i,lm}var LI;function f6(){if(LI)return DI;LI=1;var r=et(),i=l6();return r.Observable.prototype.share=i.share,DI}var xI={},hm={},rl={},nl={},BI;function h6(){if(BI)return nl;BI=1;var r=nl&&nl.__extends||function(o,p){for(var s in p)p.hasOwnProperty(s)&&(o[s]=p[s]);function f(){this.constructor=o}o.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)},i=function(o){r(p,o);function p(){var s=o.call(this,"argument out of range");this.name=s.name="ArgumentOutOfRangeError",this.stack=s.stack,this.message=s.message}return p}(Error);return nl.ArgumentOutOfRangeError=i,nl}var UI;function p6(){if(UI)return rl;UI=1;var r=rl&&rl.__extends||function(n,l){for(var u in l)l.hasOwnProperty(u)&&(n[u]=l[u]);function h(){this.constructor=n}n.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)},i=Yt(),o=h6(),p=nh();function s(n){return function(l){return n===0?new p.EmptyObservable:l.lift(new f(n))}}rl.take=s;var f=function(){function n(l){if(this.total=l,this.total<0)throw new o.ArgumentOutOfRangeError}return n.prototype.call=function(l,u){return u.subscribe(new a(l,this.total))},n}(),a=function(n){r(l,n);function l(u,h){n.call(this,u),this.total=h,this.count=0}return l.prototype._next=function(u){var h=this.total,d=++this.count;d<=h&&(this.destination.next(u),d===h&&(this.destination.complete(),this.unsubscribe()))},l}(i.Subscriber);return rl}var FI;function d6(){if(FI)return hm;FI=1;var r=p6();function i(o){return r.take(o)(this)}return hm.take=i,hm}var HI;function v6(){if(HI)return xI;HI=1;var r=et(),i=d6();return r.Observable.prototype.take=i.take,xI}var VI={},pm={},Wt={},WI;function g6(){if(WI)return Wt;WI=1;var r=Wt&&Wt.__extends||function(P,D){for(var N in D)D.hasOwnProperty(N)&&(P[N]=D[N]);function $(){this.constructor=P}P.prototype=D===null?Object.create(D):($.prototype=D.prototype,new $)},i=an(),o=zS(),p=Xf(),s=et(),f=Yt(),a=U2();function n(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;if(i.root.XDomainRequest)return new i.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function l(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;var P=void 0;try{for(var D=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],N=0;N<3;N++)try{if(P=D[N],new i.root.ActiveXObject(P))break}catch{}return new i.root.ActiveXObject(P)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}function u(P,D){return D===void 0&&(D=null),new _({method:"GET",url:P,headers:D})}Wt.ajaxGet=u;function h(P,D,N){return new _({method:"POST",url:P,body:D,headers:N})}Wt.ajaxPost=h;function d(P,D){return new _({method:"DELETE",url:P,headers:D})}Wt.ajaxDelete=d;function y(P,D,N){return new _({method:"PUT",url:P,body:D,headers:N})}Wt.ajaxPut=y;function g(P,D,N){return new _({method:"PATCH",url:P,body:D,headers:N})}Wt.ajaxPatch=g;var m=a.map(function(P,D){return P.response});function C(P,D){return m(new _({method:"GET",url:P,responseType:"json",headers:D}))}Wt.ajaxGetJSON=C;var _=function(P){r(D,P);function D(N){P.call(this);var $={async:!0,createXHR:function(){return this.crossDomain?n.call(this):l()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if(typeof N=="string")$.url=N;else for(var Y in N)N.hasOwnProperty(Y)&&($[Y]=N[Y]);this.request=$}return D.prototype._subscribe=function(N){return new b(N,this.request)},D.create=function(){var N=function($){return new D($)};return N.get=u,N.post=h,N.delete=d,N.put=y,N.patch=g,N.getJSON=C,N}(),D}(s.Observable);Wt.AjaxObservable=_;var b=function(P){r(D,P);function D(N,$){P.call(this,N),this.request=$,this.done=!1;var Y=$.headers=$.headers||{};!$.crossDomain&&!Y["X-Requested-With"]&&(Y["X-Requested-With"]="XMLHttpRequest"),!("Content-Type"in Y)&&!(i.root.FormData&&$.body instanceof i.root.FormData)&&typeof $.body<"u"&&(Y["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),$.body=this.serializeBody($.body,$.headers["Content-Type"]),this.send()}return D.prototype.next=function(N){this.done=!0;var $=this,Y=$.xhr,oe=$.request,ae=$.destination,fe=new R(N,Y,oe);ae.next(fe)},D.prototype.send=function(){var N=this,$=N.request,Y=N.request,oe=Y.user,ae=Y.method,fe=Y.url,se=Y.async,B=Y.password,j=Y.headers,J=Y.body,Z=$.createXHR,G=o.tryCatch(Z).call($);if(G===p.errorObject)this.error(p.errorObject.e);else{this.xhr=G,this.setupEvents(G,$);var z=void 0;if(oe?z=o.tryCatch(G.open).call(G,ae,fe,se,oe,B):z=o.tryCatch(G.open).call(G,ae,fe,se),z===p.errorObject)return this.error(p.errorObject.e),null;if(se&&(G.timeout=$.timeout,G.responseType=$.responseType),"withCredentials"in G&&(G.withCredentials=!!$.withCredentials),this.setHeaders(G,j),z=J?o.tryCatch(G.send).call(G,J):o.tryCatch(G.send).call(G),z===p.errorObject)return this.error(p.errorObject.e),null}return G},D.prototype.serializeBody=function(N,$){if(!N||typeof N=="string")return N;if(i.root.FormData&&N instanceof i.root.FormData)return N;if($){var Y=$.indexOf(";");Y!==-1&&($=$.substring(0,Y))}switch($){case"application/x-www-form-urlencoded":return Object.keys(N).map(function(oe){return encodeURIComponent(oe)+"="+encodeURIComponent(N[oe])}).join("&");case"application/json":return JSON.stringify(N);default:return N}},D.prototype.setHeaders=function(N,$){for(var Y in $)$.hasOwnProperty(Y)&&N.setRequestHeader(Y,$[Y])},D.prototype.setupEvents=function(N,$){var Y=$.progressSubscriber;function oe(B){var j=oe,J=j.subscriber,Z=j.progressSubscriber,G=j.request;Z&&Z.error(B),J.error(new O(this,G))}if(N.ontimeout=oe,oe.request=$,oe.subscriber=this,oe.progressSubscriber=Y,N.upload&&"withCredentials"in N){if(Y){var ae;ae=function(B){var j=ae.progressSubscriber;j.next(B)},i.root.XDomainRequest?N.onprogress=ae:N.upload.onprogress=ae,ae.progressSubscriber=Y}var fe;fe=function(B){var j=fe,J=j.progressSubscriber,Z=j.subscriber,G=j.request;J&&J.error(B),Z.error(new A("ajax error",this,G))},N.onerror=fe,fe.request=$,fe.subscriber=this,fe.progressSubscriber=Y}function se(B){var j=se,J=j.subscriber,Z=j.progressSubscriber,G=j.request;if(this.readyState===4){var z=this.status===1223?204:this.status,F=this.responseType==="text"?this.response||this.responseText:this.response;z===0&&(z=F?200:0),200<=z&&z<300?(Z&&Z.complete(),J.next(B),J.complete()):(Z&&Z.error(B),J.error(new A("ajax error "+z,this,G)))}}N.onreadystatechange=se,se.subscriber=this,se.progressSubscriber=Y,se.request=$},D.prototype.unsubscribe=function(){var N=this,$=N.done,Y=N.xhr;!$&&Y&&Y.readyState!==4&&typeof Y.abort=="function"&&Y.abort(),P.prototype.unsubscribe.call(this)},D}(f.Subscriber);Wt.AjaxSubscriber=b;var R=function(){function P(D,N,$){this.originalEvent=D,this.xhr=N,this.request=$,this.status=N.status,this.responseType=N.responseType||$.responseType,this.response=w(this.responseType,N)}return P}();Wt.AjaxResponse=R;var A=function(P){r(D,P);function D(N,$,Y){P.call(this,N),this.message=N,this.xhr=$,this.request=Y,this.status=$.status,this.responseType=$.responseType||Y.responseType,this.response=w(this.responseType,$)}return D}(Error);Wt.AjaxError=A;function w(P,D){switch(P){case"json":return"response"in D?D.responseType?D.response:JSON.parse(D.response||D.responseText||"null"):JSON.parse(D.responseText||"null");case"xml":return D.responseXML;case"text":default:return"response"in D?D.response:D.responseText}}var O=function(P){r(D,P);function D(N,$){P.call(this,"ajax timeout",N,$)}return D}(A);return Wt.AjaxTimeoutError=O,Wt}var GI;function y6(){if(GI)return pm;GI=1;var r=g6();return pm.ajax=r.AjaxObservable.create,pm}var KI;function m6(){if(KI)return VI;KI=1;var r=et(),i=y6();return r.Observable.ajax=i.ajax,VI}var $I={},dm={},JI;function S6(){if(JI)return dm;JI=1;var r=nh();return dm.empty=r.EmptyObservable.create,dm}var QI;function C6(){if(QI)return $I;QI=1;var r=et(),i=S6();return r.Observable.empty=i.empty,$I}var YI={},vm={},il={},ol={},XI;function b6(){if(XI)return ol;XI=1;var r=ol&&ol.__extends||function(a,n){for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);function u(){this.constructor=a}a.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)},i=an(),o=et(),p=function(a){r(n,a);function n(l,u){a.call(this),this.promise=l,this.scheduler=u}return n.create=function(l,u){return new n(l,u)},n.prototype._subscribe=function(l){var u=this,h=this.promise,d=this.scheduler;if(d==null)this._isScalar?l.closed||(l.next(this.value),l.complete()):h.then(function(y){u.value=y,u._isScalar=!0,l.closed||(l.next(y),l.complete())},function(y){l.closed||l.error(y)}).then(null,function(y){i.root.setTimeout(function(){throw y})});else if(this._isScalar){if(!l.closed)return d.schedule(s,0,{value:this.value,subscriber:l})}else h.then(function(y){u.value=y,u._isScalar=!0,l.closed||l.add(d.schedule(s,0,{value:y,subscriber:l}))},function(y){l.closed||l.add(d.schedule(f,0,{err:y,subscriber:l}))}).then(null,function(y){i.root.setTimeout(function(){throw y})})},n}(o.Observable);ol.PromiseObservable=p;function s(a){var n=a.value,l=a.subscriber;l.closed||(l.next(n),l.complete())}function f(a){var n=a.err,l=a.subscriber;l.closed||l.error(n)}return ol}var sl={},ZI;function R6(){if(ZI)return sl;ZI=1;var r=sl&&sl.__extends||function(y,g){for(var m in g)g.hasOwnProperty(m)&&(y[m]=g[m]);function C(){this.constructor=y}y.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)},i=an(),o=et(),p=BS(),s=function(y){r(g,y);function g(m,C){if(y.call(this),this.scheduler=C,m==null)throw new Error("iterator cannot be null.");this.iterator=n(m)}return g.create=function(m,C){return new g(m,C)},g.dispatch=function(m){var C=m.index,_=m.hasError,b=m.iterator,R=m.subscriber;if(_){R.error(m.error);return}var A=b.next();if(A.done){R.complete();return}if(R.next(A.value),m.index=C+1,R.closed){typeof b.return=="function"&&b.return();return}this.schedule(m)},g.prototype._subscribe=function(m){var C=0,_=this,b=_.iterator,R=_.scheduler;if(R)return R.schedule(g.dispatch,0,{index:C,iterator:b,subscriber:m});do{var A=b.next();if(A.done){m.complete();break}else m.next(A.value);if(m.closed){typeof b.return=="function"&&b.return();break}}while(!0)},g}(o.Observable);sl.IteratorObservable=s;var f=function(){function y(g,m,C){m===void 0&&(m=0),C===void 0&&(C=g.length),this.str=g,this.idx=m,this.len=C}return y.prototype[p.iterator]=function(){return this},y.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},y}(),a=function(){function y(g,m,C){m===void 0&&(m=0),C===void 0&&(C=u(g)),this.arr=g,this.idx=m,this.len=C}return y.prototype[p.iterator]=function(){return this},y.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},y}();function n(y){var g=y[p.iterator];if(!g&&typeof y=="string")return new f(y);if(!g&&y.length!==void 0)return new a(y);if(!g)throw new TypeError("object is not iterable");return y[p.iterator]()}var l=Math.pow(2,53)-1;function u(y){var g=+y.length;return isNaN(g)?0:g===0||!h(g)?g:(g=d(g)*Math.floor(Math.abs(g)),g<=0?0:g>l?l:g)}function h(y){return typeof y=="number"&&i.root.isFinite(y)}function d(y){var g=+y;return g===0||isNaN(g)?g:g<0?-1:1}return sl}var al={},eM;function _6(){if(eM)return al;eM=1;var r=al&&al.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=et(),o=x2(),p=nh(),s=function(f){r(a,f);function a(n,l){f.call(this),this.arrayLike=n,this.scheduler=l,!l&&n.length===1&&(this._isScalar=!0,this.value=n[0])}return a.create=function(n,l){var u=n.length;return u===0?new p.EmptyObservable:u===1?new o.ScalarObservable(n[0],l):new a(n,l)},a.dispatch=function(n){var l=n.arrayLike,u=n.index,h=n.length,d=n.subscriber;if(!d.closed){if(u>=h){d.complete();return}d.next(l[u]),n.index=u+1,this.schedule(n)}},a.prototype._subscribe=function(n){var l=0,u=this,h=u.arrayLike,d=u.scheduler,y=h.length;if(d)return d.schedule(a.dispatch,0,{arrayLike:h,index:l,length:y,subscriber:n});for(var g=0;g<y&&!n.closed;g++)n.next(h[g]);n.complete()},a}(i.Observable);return al.ArrayLikeObservable=s,al}var kn={},tM;function E6(){if(tM)return kn;tM=1;var r=kn&&kn.__extends||function(n,l){for(var u in l)l.hasOwnProperty(u)&&(n[u]=l[u]);function h(){this.constructor=n}n.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)},i=Yt(),o=B2();function p(n,l){return l===void 0&&(l=0),function(h){return h.lift(new s(n,l))}}kn.observeOn=p;var s=function(){function n(l,u){u===void 0&&(u=0),this.scheduler=l,this.delay=u}return n.prototype.call=function(l,u){return u.subscribe(new f(l,this.scheduler,this.delay))},n}();kn.ObserveOnOperator=s;var f=function(n){r(l,n);function l(u,h,d){d===void 0&&(d=0),n.call(this,u),this.scheduler=h,this.delay=d}return l.dispatch=function(u){var h=u.notification,d=u.destination;h.observe(d),this.unsubscribe()},l.prototype.scheduleMessage=function(u){this.add(this.scheduler.schedule(l.dispatch,this.delay,new a(u,this.destination)))},l.prototype._next=function(u){this.scheduleMessage(o.Notification.createNext(u))},l.prototype._error=function(u){this.scheduleMessage(o.Notification.createError(u))},l.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},l}(i.Subscriber);kn.ObserveOnSubscriber=f;var a=function(){function n(l,u){this.notification=l,this.destination=u}return n}();return kn.ObserveOnMessage=a,kn}var rM;function w6(){if(rM)return il;rM=1;var r=il&&il.__extends||function(g,m){for(var C in m)m.hasOwnProperty(C)&&(g[C]=m[C]);function _(){this.constructor=g}g.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)},i=Yf(),o=z2(),p=L2(),s=b6(),f=R6(),a=US(),n=_6(),l=BS(),u=et(),h=E6(),d=xS(),y=function(g){r(m,g);function m(C,_){g.call(this,null),this.ish=C,this.scheduler=_}return m.create=function(C,_){if(C!=null){if(typeof C[d.observable]=="function")return C instanceof u.Observable&&!_?C:new m(C,_);if(i.isArray(C))return new a.ArrayObservable(C,_);if(p.isPromise(C))return new s.PromiseObservable(C,_);if(typeof C[l.iterator]=="function"||typeof C=="string")return new f.IteratorObservable(C,_);if(o.isArrayLike(C))return new n.ArrayLikeObservable(C,_)}throw new TypeError((C!==null&&typeof C||C)+" is not observable")},m.prototype._subscribe=function(C){var _=this.ish,b=this.scheduler;return b==null?_[d.observable]().subscribe(C):_[d.observable]().subscribe(new h.ObserveOnSubscriber(C,b,0))},m}(u.Observable);return il.FromObservable=y,il}var nM;function A6(){if(nM)return vm;nM=1;var r=w6();return vm.from=r.FromObservable.create,vm}var iM;function T6(){if(iM)return YI;iM=1;var r=et(),i=A6();return r.Observable.from=i.from,YI}var oM={},gm={},cl={},ym={},sM;function P6(){if(sM)return ym;sM=1;var r=Yf();function i(o){return!r.isArray(o)&&o-parseFloat(o)+1>=0}return ym.isNumeric=i,ym}var aM;function O6(){if(aM)return cl;aM=1;var r=cl&&cl.__extends||function(f,a){for(var n in a)a.hasOwnProperty(n)&&(f[n]=a[n]);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)},i=P6(),o=et(),p=eh(),s=function(f){r(a,f);function a(n,l){n===void 0&&(n=0),l===void 0&&(l=p.async),f.call(this),this.period=n,this.scheduler=l,(!i.isNumeric(n)||n<0)&&(this.period=0),(!l||typeof l.schedule!="function")&&(this.scheduler=p.async)}return a.create=function(n,l){return n===void 0&&(n=0),l===void 0&&(l=p.async),new a(n,l)},a.dispatch=function(n){var l=n.index,u=n.subscriber,h=n.period;u.next(l),!u.closed&&(n.index+=1,this.schedule(n,h))},a.prototype._subscribe=function(n){var l=0,u=this.period,h=this.scheduler;n.add(h.schedule(a.dispatch,u,{index:l,subscriber:n,period:u}))},a}(o.Observable);return cl.IntervalObservable=s,cl}var cM;function I6(){if(cM)return gm;cM=1;var r=O6();return gm.interval=r.IntervalObservable.create,gm}var uM;function M6(){if(uM)return oM;uM=1;var r=et(),i=I6();return r.Observable.interval=i.interval,oM}var lM={},mm={},fM;function D6(){if(fM)return mm;fM=1;var r=US();return mm.of=r.ArrayObservable.of,mm}var hM;function j6(){if(hM)return lM;hM=1;var r=et(),i=D6();return r.Observable.of=i.of,lM}var pM={},Sm={},ul={},dM;function k6(){if(dM)return ul;dM=1;var r=ul&&ul.__extends||function(p,s){for(var f in s)s.hasOwnProperty(f)&&(p[f]=s[f]);function a(){this.constructor=p}p.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},i=et(),o=function(p){r(s,p);function s(f,a){p.call(this),this.error=f,this.scheduler=a}return s.create=function(f,a){return new s(f,a)},s.dispatch=function(f){var a=f.error,n=f.subscriber;n.error(a)},s.prototype._subscribe=function(f){var a=this.error,n=this.scheduler;if(f.syncErrorThrowable=!0,n)return n.schedule(s.dispatch,0,{error:a,subscriber:f});f.error(a)},s}(i.Observable);return ul.ErrorObservable=o,ul}var vM;function N6(){if(vM)return Sm;vM=1;var r=k6();return Sm._throw=r.ErrorObservable.create,Sm}var gM;function q6(){if(gM)return pM;gM=1;var r=et(),i=N6();return r.Observable.throw=i._throw,pM}var Cm={},bm={},Rm={exports:{}},_m={exports:{}},yM;function z6(){return yM||(yM=1,function(r){function i(o){if(Array.isArray(o))return o}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(_m)),_m.exports}var Em={exports:{}},mM;function V2(){return mM||(mM=1,function(r){function i(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Em)),Em.exports}var wm={exports:{}},Am={exports:{}},SM;function W2(){return SM||(SM=1,function(r){function i(o,p){(p==null||p>o.length)&&(p=o.length);for(var s=0,f=Array(p);s<p;s++)f[s]=o[s];return f}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Am)),Am.exports}var CM;function G2(){return CM||(CM=1,function(r){var i=W2();function o(p,s){if(p){if(typeof p=="string")return i(p,s);var f={}.toString.call(p).slice(8,-1);return f==="Object"&&p.constructor&&(f=p.constructor.name),f==="Map"||f==="Set"?Array.from(p):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?i(p,s):void 0}}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(wm)),wm.exports}var Tm={exports:{}},bM;function L6(){return bM||(bM=1,function(r){function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Tm)),Tm.exports}var RM;function x6(){return RM||(RM=1,function(r){var i=z6(),o=V2(),p=G2(),s=L6();function f(a){return i(a)||o(a)||p(a)||s()}r.exports=f,r.exports.__esModule=!0,r.exports.default=r.exports}(Rm)),Rm.exports}var _M;function B6(){return _M||(_M=1,function(r){var i=yl();Object.defineProperty(r,"__esModule",{value:!0}),r.default=p;var o=i(x6());function p(s){if(s)if(~s.indexOf(".")){var f=s.split(".").reverse(),a=(0,o.default)(f),n=a[0],l=a.slice(1);return{extname:"."+n,name:l.reverse().join(".")}}else return{extname:"",name:s};else return{extname:"",name:""}}}(bm)),bm}var EM;function U6(){return EM||(EM=1,function(r){var i=yl();Object.defineProperty(r,"__esModule",{value:!0}),r.default=p;var o=i(B6());function p(s){var f=[];return s.forEach(function(a){for(var n=(0,o.default)(a),l=n.extname,u=n.name,h=0,d=a;f.includes(d);)d=[u,"(".concat(++h,")")].filter(function(y){return y}).join(" ")+l;f.push(d)}),f}}(Cm)),Cm}var ll={},Pm={exports:{}},wM;function F6(){return wM||(wM=1,function(r){var i=To().default;function o(){r.exports=o=function(){return s},r.exports.__esModule=!0,r.exports.default=r.exports;var p,s={},f=Object.prototype,a=f.hasOwnProperty,n=Object.defineProperty||function(G,z,F){G[z]=F.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function y(G,z,F){return Object.defineProperty(G,z,{value:F,enumerable:!0,configurable:!0,writable:!0}),G[z]}try{y({},"")}catch{y=function(F,te,le){return F[te]=le}}function g(G,z,F,te){var le=z&&z.prototype instanceof w?z:w,pe=Object.create(le.prototype),_e=new J(te||[]);return n(pe,"_invoke",{value:fe(G,F,_e)}),pe}function m(G,z,F){try{return{type:"normal",arg:G.call(z,F)}}catch(te){return{type:"throw",arg:te}}}s.wrap=g;var C="suspendedStart",_="suspendedYield",b="executing",R="completed",A={};function w(){}function O(){}function P(){}var D={};y(D,u,function(){return this});var N=Object.getPrototypeOf,$=N&&N(N(Z([])));$&&$!==f&&a.call($,u)&&(D=$);var Y=P.prototype=w.prototype=Object.create(D);function oe(G){["next","throw","return"].forEach(function(z){y(G,z,function(F){return this._invoke(z,F)})})}function ae(G,z){function F(le,pe,_e,Ee){var Ne=m(G[le],G,pe);if(Ne.type!=="throw"){var Pe=Ne.arg,Le=Pe.value;return Le&&i(Le)=="object"&&a.call(Le,"__await")?z.resolve(Le.__await).then(function(qe){F("next",qe,_e,Ee)},function(qe){F("throw",qe,_e,Ee)}):z.resolve(Le).then(function(qe){Pe.value=qe,_e(Pe)},function(qe){return F("throw",qe,_e,Ee)})}Ee(Ne.arg)}var te;n(this,"_invoke",{value:function(pe,_e){function Ee(){return new z(function(Ne,Pe){F(pe,_e,Ne,Pe)})}return te=te?te.then(Ee,Ee):Ee()}})}function fe(G,z,F){var te=C;return function(le,pe){if(te===b)throw Error("Generator is already running");if(te===R){if(le==="throw")throw pe;return{value:p,done:!0}}for(F.method=le,F.arg=pe;;){var _e=F.delegate;if(_e){var Ee=se(_e,F);if(Ee){if(Ee===A)continue;return Ee}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(te===C)throw te=R,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);te=b;var Ne=m(G,z,F);if(Ne.type==="normal"){if(te=F.done?R:_,Ne.arg===A)continue;return{value:Ne.arg,done:F.done}}Ne.type==="throw"&&(te=R,F.method="throw",F.arg=Ne.arg)}}}function se(G,z){var F=z.method,te=G.iterator[F];if(te===p)return z.delegate=null,F==="throw"&&G.iterator.return&&(z.method="return",z.arg=p,se(G,z),z.method==="throw")||F!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+F+"' method")),A;var le=m(te,G.iterator,z.arg);if(le.type==="throw")return z.method="throw",z.arg=le.arg,z.delegate=null,A;var pe=le.arg;return pe?pe.done?(z[G.resultName]=pe.value,z.next=G.nextLoc,z.method!=="return"&&(z.method="next",z.arg=p),z.delegate=null,A):pe:(z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,A)}function B(G){var z={tryLoc:G[0]};1 in G&&(z.catchLoc=G[1]),2 in G&&(z.finallyLoc=G[2],z.afterLoc=G[3]),this.tryEntries.push(z)}function j(G){var z=G.completion||{};z.type="normal",delete z.arg,G.completion=z}function J(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(B,this),this.reset(!0)}function Z(G){if(G||G===""){var z=G[u];if(z)return z.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var F=-1,te=function le(){for(;++F<G.length;)if(a.call(G,F))return le.value=G[F],le.done=!1,le;return le.value=p,le.done=!0,le};return te.next=te}}throw new TypeError(i(G)+" is not iterable")}return O.prototype=P,n(Y,"constructor",{value:P,configurable:!0}),n(P,"constructor",{value:O,configurable:!0}),O.displayName=y(P,d,"GeneratorFunction"),s.isGeneratorFunction=function(G){var z=typeof G=="function"&&G.constructor;return!!z&&(z===O||(z.displayName||z.name)==="GeneratorFunction")},s.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,P):(G.__proto__=P,y(G,d,"GeneratorFunction")),G.prototype=Object.create(Y),G},s.awrap=function(G){return{__await:G}},oe(ae.prototype),y(ae.prototype,h,function(){return this}),s.AsyncIterator=ae,s.async=function(G,z,F,te,le){le===void 0&&(le=Promise);var pe=new ae(g(G,z,F,te),le);return s.isGeneratorFunction(z)?pe:pe.next().then(function(_e){return _e.done?_e.value:pe.next()})},oe(Y),y(Y,d,"Generator"),y(Y,u,function(){return this}),y(Y,"toString",function(){return"[object Generator]"}),s.keys=function(G){var z=Object(G),F=[];for(var te in z)F.push(te);return F.reverse(),function le(){for(;F.length;){var pe=F.pop();if(pe in z)return le.value=pe,le.done=!1,le}return le.done=!0,le}},s.values=Z,J.prototype={constructor:J,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(j),!z)for(var F in this)F.charAt(0)==="t"&&a.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=p)},stop:function(){this.done=!0;var z=this.tryEntries[0].completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var F=this;function te(Pe,Le){return _e.type="throw",_e.arg=z,F.next=Pe,Le&&(F.method="next",F.arg=p),!!Le}for(var le=this.tryEntries.length-1;le>=0;--le){var pe=this.tryEntries[le],_e=pe.completion;if(pe.tryLoc==="root")return te("end");if(pe.tryLoc<=this.prev){var Ee=a.call(pe,"catchLoc"),Ne=a.call(pe,"finallyLoc");if(Ee&&Ne){if(this.prev<pe.catchLoc)return te(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return te(pe.finallyLoc)}else if(Ee){if(this.prev<pe.catchLoc)return te(pe.catchLoc,!0)}else{if(!Ne)throw Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return te(pe.finallyLoc)}}}},abrupt:function(z,F){for(var te=this.tryEntries.length-1;te>=0;--te){var le=this.tryEntries[te];if(le.tryLoc<=this.prev&&a.call(le,"finallyLoc")&&this.prev<le.finallyLoc){var pe=le;break}}pe&&(z==="break"||z==="continue")&&pe.tryLoc<=F&&F<=pe.finallyLoc&&(pe=null);var _e=pe?pe.completion:{};return _e.type=z,_e.arg=F,pe?(this.method="next",this.next=pe.finallyLoc,A):this.complete(_e)},complete:function(z,F){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&F&&(this.next=F),A},finish:function(z){for(var F=this.tryEntries.length-1;F>=0;--F){var te=this.tryEntries[F];if(te.finallyLoc===z)return this.complete(te.completion,te.afterLoc),j(te),A}},catch:function(z){for(var F=this.tryEntries.length-1;F>=0;--F){var te=this.tryEntries[F];if(te.tryLoc===z){var le=te.completion;if(le.type==="throw"){var pe=le.arg;j(te)}return pe}}throw Error("illegal catch attempt")},delegateYield:function(z,F,te){return this.delegate={iterator:Z(z),resultName:F,nextLoc:te},this.method==="next"&&(this.arg=p),A}},s}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Pm)),Pm.exports}var Om,AM;function H6(){if(AM)return Om;AM=1;var r=F6()();Om=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}return Om}var Im={exports:{}},Mm={exports:{}},TM;function V6(){return TM||(TM=1,function(r){function i(o,p){return p.get?p.get.call(o):p.value}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Mm)),Mm.exports}var Dm={exports:{}},jm={exports:{}},PM;function W6(){return PM||(PM=1,function(r){function i(o,p,s){if(typeof o=="function"?o===p:o.has(p))return arguments.length<3?p:s;throw new TypeError("Private element is not present on this object")}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(jm)),jm.exports}var OM;function K2(){return OM||(OM=1,function(r){var i=W6();function o(p,s){return p.get(i(p,s))}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Dm)),Dm.exports}var IM;function $2(){return IM||(IM=1,function(r){var i=V6(),o=K2();function p(s,f){var a=o(f,s);return i(s,a)}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}(Im)),Im.exports}var km={exports:{}},Nm={exports:{}},MM;function G6(){return MM||(MM=1,function(r){function i(o,p,s){if(p.set)p.set.call(o,s);else{if(!p.writable)throw new TypeError("attempted to set read only private field");p.value=s}}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Nm)),Nm.exports}var DM;function J2(){return DM||(DM=1,function(r){var i=G6(),o=K2();function p(s,f,a){var n=o(f,s);return i(s,n,a),a}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}(km)),km.exports}var qm={exports:{}},zm={exports:{}},jM;function K6(){return jM||(jM=1,function(r){var i=W2();function o(p){if(Array.isArray(p))return i(p)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(zm)),zm.exports}var Lm={exports:{}},kM;function $6(){return kM||(kM=1,function(r){function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Lm)),Lm.exports}var NM;function J6(){return NM||(NM=1,function(r){var i=K6(),o=V2(),p=G2(),s=$6();function f(a){return i(a)||o(a)||p(a)||s()}r.exports=f,r.exports.__esModule=!0,r.exports.default=r.exports}(qm)),qm.exports}var xm={exports:{}},qM;function Q6(){return qM||(qM=1,function(r){function i(p,s,f,a,n,l,u){try{var h=p[l](u),d=h.value}catch(y){return void f(y)}h.done?s(d):Promise.resolve(d).then(a,n)}function o(p){return function(){var s=this,f=arguments;return new Promise(function(a,n){var l=p.apply(s,f);function u(d){i(l,a,n,u,h,"next",d)}function h(d){i(l,a,n,u,h,"throw",d)}u(void 0)})}}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(xm)),xm.exports}var Bm={},fl={},zM;function Y6(){if(zM)return fl;zM=1,fl.byteLength=n,fl.toByteArray=u,fl.fromByteArray=y;for(var r=[],i=[],o=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,f=p.length;s<f;++s)r[s]=p[s],i[p.charCodeAt(s)]=s;i[45]=62,i[95]=63;function a(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=g.indexOf("=");C===-1&&(C=m);var _=C===m?0:4-C%4;return[C,_]}function n(g){var m=a(g),C=m[0],_=m[1];return(C+_)*3/4-_}function l(g,m,C){return(m+C)*3/4-C}function u(g){var m,C=a(g),_=C[0],b=C[1],R=new o(l(g,_,b)),A=0,w=b>0?_-4:_,O;for(O=0;O<w;O+=4)m=i[g.charCodeAt(O)]<<18|i[g.charCodeAt(O+1)]<<12|i[g.charCodeAt(O+2)]<<6|i[g.charCodeAt(O+3)],R[A++]=m>>16&255,R[A++]=m>>8&255,R[A++]=m&255;return b===2&&(m=i[g.charCodeAt(O)]<<2|i[g.charCodeAt(O+1)]>>4,R[A++]=m&255),b===1&&(m=i[g.charCodeAt(O)]<<10|i[g.charCodeAt(O+1)]<<4|i[g.charCodeAt(O+2)]>>2,R[A++]=m>>8&255,R[A++]=m&255),R}function h(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function d(g,m,C){for(var _,b=[],R=m;R<C;R+=3)_=(g[R]<<16&16711680)+(g[R+1]<<8&65280)+(g[R+2]&255),b.push(h(_));return b.join("")}function y(g){for(var m,C=g.length,_=C%3,b=[],R=16383,A=0,w=C-_;A<w;A+=R)b.push(d(g,A,A+R>w?w:A+R));return _===1?(m=g[C-1],b.push(r[m>>2]+r[m<<4&63]+"==")):_===2&&(m=(g[C-2]<<8)+g[C-1],b.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),b.join("")}return fl}var xf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var LM;function X6(){return LM||(LM=1,xf.read=function(r,i,o,p,s){var f,a,n=s*8-p-1,l=(1<<n)-1,u=l>>1,h=-7,d=o?s-1:0,y=o?-1:1,g=r[i+d];for(d+=y,f=g&(1<<-h)-1,g>>=-h,h+=n;h>0;f=f*256+r[i+d],d+=y,h-=8);for(a=f&(1<<-h)-1,f>>=-h,h+=p;h>0;a=a*256+r[i+d],d+=y,h-=8);if(f===0)f=1-u;else{if(f===l)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,p),f=f-u}return(g?-1:1)*a*Math.pow(2,f-p)},xf.write=function(r,i,o,p,s,f){var a,n,l,u=f*8-s-1,h=(1<<u)-1,d=h>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=p?0:f-1,m=p?1:-1,C=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(n=isNaN(i)?1:0,a=h):(a=Math.floor(Math.log(i)/Math.LN2),i*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?i+=y/l:i+=y*Math.pow(2,1-d),i*l>=2&&(a++,l/=2),a+d>=h?(n=0,a=h):a+d>=1?(n=(i*l-1)*Math.pow(2,s),a=a+d):(n=i*Math.pow(2,d-1)*Math.pow(2,s),a=0));s>=8;r[o+g]=n&255,g+=m,n/=256,s-=8);for(a=a<<s|n,u+=s;u>0;r[o+g]=a&255,g+=m,a/=256,u-=8);r[o+g-m]|=C*128}),xf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xM;function Z6(){return xM||(xM=1,function(r){const i=Y6(),o=X6(),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=n,r.SlowBuffer=R,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,n.TYPED_ARRAY_SUPPORT=f(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const L=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(L,T),L.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});function a(L){if(L>s)throw new RangeError('The value "'+L+'" is invalid for option "size"');const T=new Uint8Array(L);return Object.setPrototypeOf(T,n.prototype),T}function n(L,T,I){if(typeof L=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(L)}return l(L,T,I)}n.poolSize=8192;function l(L,T,I){if(typeof L=="string")return y(L,T);if(ArrayBuffer.isView(L))return m(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(k(L,ArrayBuffer)||L&&k(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(k(L,SharedArrayBuffer)||L&&k(L.buffer,SharedArrayBuffer)))return C(L,T,I);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const V=L.valueOf&&L.valueOf();if(V!=null&&V!==L)return n.from(V,T,I);const W=_(L);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return n.from(L[Symbol.toPrimitive]("string"),T,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}n.from=function(L,T,I){return l(L,T,I)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function h(L,T,I){return u(L),L<=0?a(L):T!==void 0?typeof I=="string"?a(L).fill(T,I):a(L).fill(T):a(L)}n.alloc=function(L,T,I){return h(L,T,I)};function d(L){return u(L),a(L<0?0:b(L)|0)}n.allocUnsafe=function(L){return d(L)},n.allocUnsafeSlow=function(L){return d(L)};function y(L,T){if((typeof T!="string"||T==="")&&(T="utf8"),!n.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const I=A(L,T)|0;let V=a(I);const W=V.write(L,T);return W!==I&&(V=V.slice(0,W)),V}function g(L){const T=L.length<0?0:b(L.length)|0,I=a(T);for(let V=0;V<T;V+=1)I[V]=L[V]&255;return I}function m(L){if(k(L,Uint8Array)){const T=new Uint8Array(L);return C(T.buffer,T.byteOffset,T.byteLength)}return g(L)}function C(L,T,I){if(T<0||L.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<T+(I||0))throw new RangeError('"length" is outside of buffer bounds');let V;return T===void 0&&I===void 0?V=new Uint8Array(L):I===void 0?V=new Uint8Array(L,T):V=new Uint8Array(L,T,I),Object.setPrototypeOf(V,n.prototype),V}function _(L){if(n.isBuffer(L)){const T=b(L.length)|0,I=a(T);return I.length===0||L.copy(I,0,0,T),I}if(L.length!==void 0)return typeof L.length!="number"||H(L.length)?a(0):g(L);if(L.type==="Buffer"&&Array.isArray(L.data))return g(L.data)}function b(L){if(L>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return L|0}function R(L){return+L!=L&&(L=0),n.alloc(+L)}n.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==n.prototype},n.compare=function(T,I){if(k(T,Uint8Array)&&(T=n.from(T,T.offset,T.byteLength)),k(I,Uint8Array)&&(I=n.from(I,I.offset,I.byteLength)),!n.isBuffer(T)||!n.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===I)return 0;let V=T.length,W=I.length;for(let ee=0,ue=Math.min(V,W);ee<ue;++ee)if(T[ee]!==I[ee]){V=T[ee],W=I[ee];break}return V<W?-1:W<V?1:0},n.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(T,I){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return n.alloc(0);let V;if(I===void 0)for(I=0,V=0;V<T.length;++V)I+=T[V].length;const W=n.allocUnsafe(I);let ee=0;for(V=0;V<T.length;++V){let ue=T[V];if(k(ue,Uint8Array))ee+ue.length>W.length?(n.isBuffer(ue)||(ue=n.from(ue)),ue.copy(W,ee)):Uint8Array.prototype.set.call(W,ue,ee);else if(n.isBuffer(ue))ue.copy(W,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=ue.length}return W};function A(L,T){if(n.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||k(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const I=L.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&I===0)return 0;let W=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Oe(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return x(L).length;default:if(W)return V?-1:Oe(L).length;T=(""+T).toLowerCase(),W=!0}}n.byteLength=A;function w(L,T,I){let V=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,T>>>=0,I<=T))return"";for(L||(L="utf8");;)switch(L){case"hex":return G(this,T,I);case"utf8":case"utf-8":return se(this,T,I);case"ascii":return J(this,T,I);case"latin1":case"binary":return Z(this,T,I);case"base64":return fe(this,T,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,T,I);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),V=!0}}n.prototype._isBuffer=!0;function O(L,T,I){const V=L[T];L[T]=L[I],L[I]=V}n.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<T;I+=2)O(this,I,I+1);return this},n.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<T;I+=4)O(this,I,I+3),O(this,I+1,I+2);return this},n.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<T;I+=8)O(this,I,I+7),O(this,I+1,I+6),O(this,I+2,I+5),O(this,I+3,I+4);return this},n.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?se(this,0,T):w.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(T){if(!n.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:n.compare(this,T)===0},n.prototype.inspect=function(){let T="";const I=r.INSPECT_MAX_BYTES;return T=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(T+=" ... "),"<Buffer "+T+">"},p&&(n.prototype[p]=n.prototype.inspect),n.prototype.compare=function(T,I,V,W,ee){if(k(T,Uint8Array)&&(T=n.from(T,T.offset,T.byteLength)),!n.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(I===void 0&&(I=0),V===void 0&&(V=T?T.length:0),W===void 0&&(W=0),ee===void 0&&(ee=this.length),I<0||V>T.length||W<0||ee>this.length)throw new RangeError("out of range index");if(W>=ee&&I>=V)return 0;if(W>=ee)return-1;if(I>=V)return 1;if(I>>>=0,V>>>=0,W>>>=0,ee>>>=0,this===T)return 0;let ue=ee-W,Te=V-I;const Ie=Math.min(ue,Te),Fe=this.slice(W,ee),We=T.slice(I,V);for(let Ke=0;Ke<Ie;++Ke)if(Fe[Ke]!==We[Ke]){ue=Fe[Ke],Te=We[Ke];break}return ue<Te?-1:Te<ue?1:0};function P(L,T,I,V,W){if(L.length===0)return-1;if(typeof I=="string"?(V=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,H(I)&&(I=W?0:L.length-1),I<0&&(I=L.length+I),I>=L.length){if(W)return-1;I=L.length-1}else if(I<0)if(W)I=0;else return-1;if(typeof T=="string"&&(T=n.from(T,V)),n.isBuffer(T))return T.length===0?-1:D(L,T,I,V,W);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(L,T,I):Uint8Array.prototype.lastIndexOf.call(L,T,I):D(L,[T],I,V,W);throw new TypeError("val must be string, number or Buffer")}function D(L,T,I,V,W){let ee=1,ue=L.length,Te=T.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||T.length<2)return-1;ee=2,ue/=2,Te/=2,I/=2}function Ie(We,Ke){return ee===1?We[Ke]:We.readUInt16BE(Ke*ee)}let Fe;if(W){let We=-1;for(Fe=I;Fe<ue;Fe++)if(Ie(L,Fe)===Ie(T,We===-1?0:Fe-We)){if(We===-1&&(We=Fe),Fe-We+1===Te)return We*ee}else We!==-1&&(Fe-=Fe-We),We=-1}else for(I+Te>ue&&(I=ue-Te),Fe=I;Fe>=0;Fe--){let We=!0;for(let Ke=0;Ke<Te;Ke++)if(Ie(L,Fe+Ke)!==Ie(T,Ke)){We=!1;break}if(We)return Fe}return-1}n.prototype.includes=function(T,I,V){return this.indexOf(T,I,V)!==-1},n.prototype.indexOf=function(T,I,V){return P(this,T,I,V,!0)},n.prototype.lastIndexOf=function(T,I,V){return P(this,T,I,V,!1)};function N(L,T,I,V){I=Number(I)||0;const W=L.length-I;V?(V=Number(V),V>W&&(V=W)):V=W;const ee=T.length;V>ee/2&&(V=ee/2);let ue;for(ue=0;ue<V;++ue){const Te=parseInt(T.substr(ue*2,2),16);if(H(Te))return ue;L[I+ue]=Te}return ue}function $(L,T,I,V){return M(Oe(T,L.length-I),L,I,V)}function Y(L,T,I,V){return M(K(T),L,I,V)}function oe(L,T,I,V){return M(x(T),L,I,V)}function ae(L,T,I,V){return M(Q(T,L.length-I),L,I,V)}n.prototype.write=function(T,I,V,W){if(I===void 0)W="utf8",V=this.length,I=0;else if(V===void 0&&typeof I=="string")W=I,V=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(V)?(V=V>>>0,W===void 0&&(W="utf8")):(W=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-I;if((V===void 0||V>ee)&&(V=ee),T.length>0&&(V<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let ue=!1;for(;;)switch(W){case"hex":return N(this,T,I,V);case"utf8":case"utf-8":return $(this,T,I,V);case"ascii":case"latin1":case"binary":return Y(this,T,I,V);case"base64":return oe(this,T,I,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,T,I,V);default:if(ue)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ue=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(L,T,I){return T===0&&I===L.length?i.fromByteArray(L):i.fromByteArray(L.slice(T,I))}function se(L,T,I){I=Math.min(L.length,I);const V=[];let W=T;for(;W<I;){const ee=L[W];let ue=null,Te=ee>239?4:ee>223?3:ee>191?2:1;if(W+Te<=I){let Ie,Fe,We,Ke;switch(Te){case 1:ee<128&&(ue=ee);break;case 2:Ie=L[W+1],(Ie&192)===128&&(Ke=(ee&31)<<6|Ie&63,Ke>127&&(ue=Ke));break;case 3:Ie=L[W+1],Fe=L[W+2],(Ie&192)===128&&(Fe&192)===128&&(Ke=(ee&15)<<12|(Ie&63)<<6|Fe&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ue=Ke));break;case 4:Ie=L[W+1],Fe=L[W+2],We=L[W+3],(Ie&192)===128&&(Fe&192)===128&&(We&192)===128&&(Ke=(ee&15)<<18|(Ie&63)<<12|(Fe&63)<<6|We&63,Ke>65535&&Ke<1114112&&(ue=Ke))}}ue===null?(ue=65533,Te=1):ue>65535&&(ue-=65536,V.push(ue>>>10&1023|55296),ue=56320|ue&1023),V.push(ue),W+=Te}return j(V)}const B=4096;function j(L){const T=L.length;if(T<=B)return String.fromCharCode.apply(String,L);let I="",V=0;for(;V<T;)I+=String.fromCharCode.apply(String,L.slice(V,V+=B));return I}function J(L,T,I){let V="";I=Math.min(L.length,I);for(let W=T;W<I;++W)V+=String.fromCharCode(L[W]&127);return V}function Z(L,T,I){let V="";I=Math.min(L.length,I);for(let W=T;W<I;++W)V+=String.fromCharCode(L[W]);return V}function G(L,T,I){const V=L.length;(!T||T<0)&&(T=0),(!I||I<0||I>V)&&(I=V);let W="";for(let ee=T;ee<I;++ee)W+=ne[L[ee]];return W}function z(L,T,I){const V=L.slice(T,I);let W="";for(let ee=0;ee<V.length-1;ee+=2)W+=String.fromCharCode(V[ee]+V[ee+1]*256);return W}n.prototype.slice=function(T,I){const V=this.length;T=~~T,I=I===void 0?V:~~I,T<0?(T+=V,T<0&&(T=0)):T>V&&(T=V),I<0?(I+=V,I<0&&(I=0)):I>V&&(I=V),I<T&&(I=T);const W=this.subarray(T,I);return Object.setPrototypeOf(W,n.prototype),W};function F(L,T,I){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+T>I)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(T,I,V){T=T>>>0,I=I>>>0,V||F(T,I,this.length);let W=this[T],ee=1,ue=0;for(;++ue<I&&(ee*=256);)W+=this[T+ue]*ee;return W},n.prototype.readUintBE=n.prototype.readUIntBE=function(T,I,V){T=T>>>0,I=I>>>0,V||F(T,I,this.length);let W=this[T+--I],ee=1;for(;I>0&&(ee*=256);)W+=this[T+--I]*ee;return W},n.prototype.readUint8=n.prototype.readUInt8=function(T,I){return T=T>>>0,I||F(T,1,this.length),this[T]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(T,I){return T=T>>>0,I||F(T,2,this.length),this[T]|this[T+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(T,I){return T=T>>>0,I||F(T,2,this.length),this[T]<<8|this[T+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(T,I){return T=T>>>0,I||F(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(T,I){return T=T>>>0,I||F(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},n.prototype.readBigUInt64LE=Se(function(T){T=T>>>0,de(T,"offset");const I=this[T],V=this[T+7];(I===void 0||V===void 0)&&ie(T,this.length-8);const W=I+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,ee=this[++T]+this[++T]*2**8+this[++T]*2**16+V*2**24;return BigInt(W)+(BigInt(ee)<<BigInt(32))}),n.prototype.readBigUInt64BE=Se(function(T){T=T>>>0,de(T,"offset");const I=this[T],V=this[T+7];(I===void 0||V===void 0)&&ie(T,this.length-8);const W=I*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],ee=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+V;return(BigInt(W)<<BigInt(32))+BigInt(ee)}),n.prototype.readIntLE=function(T,I,V){T=T>>>0,I=I>>>0,V||F(T,I,this.length);let W=this[T],ee=1,ue=0;for(;++ue<I&&(ee*=256);)W+=this[T+ue]*ee;return ee*=128,W>=ee&&(W-=Math.pow(2,8*I)),W},n.prototype.readIntBE=function(T,I,V){T=T>>>0,I=I>>>0,V||F(T,I,this.length);let W=I,ee=1,ue=this[T+--W];for(;W>0&&(ee*=256);)ue+=this[T+--W]*ee;return ee*=128,ue>=ee&&(ue-=Math.pow(2,8*I)),ue},n.prototype.readInt8=function(T,I){return T=T>>>0,I||F(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},n.prototype.readInt16LE=function(T,I){T=T>>>0,I||F(T,2,this.length);const V=this[T]|this[T+1]<<8;return V&32768?V|4294901760:V},n.prototype.readInt16BE=function(T,I){T=T>>>0,I||F(T,2,this.length);const V=this[T+1]|this[T]<<8;return V&32768?V|4294901760:V},n.prototype.readInt32LE=function(T,I){return T=T>>>0,I||F(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},n.prototype.readInt32BE=function(T,I){return T=T>>>0,I||F(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},n.prototype.readBigInt64LE=Se(function(T){T=T>>>0,de(T,"offset");const I=this[T],V=this[T+7];(I===void 0||V===void 0)&&ie(T,this.length-8);const W=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(V<<24);return(BigInt(W)<<BigInt(32))+BigInt(I+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),n.prototype.readBigInt64BE=Se(function(T){T=T>>>0,de(T,"offset");const I=this[T],V=this[T+7];(I===void 0||V===void 0)&&ie(T,this.length-8);const W=(I<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(W)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+V)}),n.prototype.readFloatLE=function(T,I){return T=T>>>0,I||F(T,4,this.length),o.read(this,T,!0,23,4)},n.prototype.readFloatBE=function(T,I){return T=T>>>0,I||F(T,4,this.length),o.read(this,T,!1,23,4)},n.prototype.readDoubleLE=function(T,I){return T=T>>>0,I||F(T,8,this.length),o.read(this,T,!0,52,8)},n.prototype.readDoubleBE=function(T,I){return T=T>>>0,I||F(T,8,this.length),o.read(this,T,!1,52,8)};function te(L,T,I,V,W,ee){if(!n.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>W||T<ee)throw new RangeError('"value" argument is out of bounds');if(I+V>L.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(T,I,V,W){if(T=+T,I=I>>>0,V=V>>>0,!W){const Te=Math.pow(2,8*V)-1;te(this,T,I,V,Te,0)}let ee=1,ue=0;for(this[I]=T&255;++ue<V&&(ee*=256);)this[I+ue]=T/ee&255;return I+V},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(T,I,V,W){if(T=+T,I=I>>>0,V=V>>>0,!W){const Te=Math.pow(2,8*V)-1;te(this,T,I,V,Te,0)}let ee=V-1,ue=1;for(this[I+ee]=T&255;--ee>=0&&(ue*=256);)this[I+ee]=T/ue&255;return I+V},n.prototype.writeUint8=n.prototype.writeUInt8=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,1,255,0),this[I]=T&255,I+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,2,65535,0),this[I]=T&255,this[I+1]=T>>>8,I+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,2,65535,0),this[I]=T>>>8,this[I+1]=T&255,I+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,4,4294967295,0),this[I+3]=T>>>24,this[I+2]=T>>>16,this[I+1]=T>>>8,this[I]=T&255,I+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,4,4294967295,0),this[I]=T>>>24,this[I+1]=T>>>16,this[I+2]=T>>>8,this[I+3]=T&255,I+4};function le(L,T,I,V,W){pt(T,V,W,L,I,7);let ee=Number(T&BigInt(4294967295));L[I++]=ee,ee=ee>>8,L[I++]=ee,ee=ee>>8,L[I++]=ee,ee=ee>>8,L[I++]=ee;let ue=Number(T>>BigInt(32)&BigInt(4294967295));return L[I++]=ue,ue=ue>>8,L[I++]=ue,ue=ue>>8,L[I++]=ue,ue=ue>>8,L[I++]=ue,I}function pe(L,T,I,V,W){pt(T,V,W,L,I,7);let ee=Number(T&BigInt(4294967295));L[I+7]=ee,ee=ee>>8,L[I+6]=ee,ee=ee>>8,L[I+5]=ee,ee=ee>>8,L[I+4]=ee;let ue=Number(T>>BigInt(32)&BigInt(4294967295));return L[I+3]=ue,ue=ue>>8,L[I+2]=ue,ue=ue>>8,L[I+1]=ue,ue=ue>>8,L[I]=ue,I+8}n.prototype.writeBigUInt64LE=Se(function(T,I=0){return le(this,T,I,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Se(function(T,I=0){return pe(this,T,I,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(T,I,V,W){if(T=+T,I=I>>>0,!W){const Ie=Math.pow(2,8*V-1);te(this,T,I,V,Ie-1,-Ie)}let ee=0,ue=1,Te=0;for(this[I]=T&255;++ee<V&&(ue*=256);)T<0&&Te===0&&this[I+ee-1]!==0&&(Te=1),this[I+ee]=(T/ue>>0)-Te&255;return I+V},n.prototype.writeIntBE=function(T,I,V,W){if(T=+T,I=I>>>0,!W){const Ie=Math.pow(2,8*V-1);te(this,T,I,V,Ie-1,-Ie)}let ee=V-1,ue=1,Te=0;for(this[I+ee]=T&255;--ee>=0&&(ue*=256);)T<0&&Te===0&&this[I+ee+1]!==0&&(Te=1),this[I+ee]=(T/ue>>0)-Te&255;return I+V},n.prototype.writeInt8=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,1,127,-128),T<0&&(T=255+T+1),this[I]=T&255,I+1},n.prototype.writeInt16LE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,2,32767,-32768),this[I]=T&255,this[I+1]=T>>>8,I+2},n.prototype.writeInt16BE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,2,32767,-32768),this[I]=T>>>8,this[I+1]=T&255,I+2},n.prototype.writeInt32LE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,4,2147483647,-2147483648),this[I]=T&255,this[I+1]=T>>>8,this[I+2]=T>>>16,this[I+3]=T>>>24,I+4},n.prototype.writeInt32BE=function(T,I,V){return T=+T,I=I>>>0,V||te(this,T,I,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[I]=T>>>24,this[I+1]=T>>>16,this[I+2]=T>>>8,this[I+3]=T&255,I+4},n.prototype.writeBigInt64LE=Se(function(T,I=0){return le(this,T,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Se(function(T,I=0){return pe(this,T,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(L,T,I,V,W,ee){if(I+V>L.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Ee(L,T,I,V,W){return T=+T,I=I>>>0,W||_e(L,T,I,4),o.write(L,T,I,V,23,4),I+4}n.prototype.writeFloatLE=function(T,I,V){return Ee(this,T,I,!0,V)},n.prototype.writeFloatBE=function(T,I,V){return Ee(this,T,I,!1,V)};function Ne(L,T,I,V,W){return T=+T,I=I>>>0,W||_e(L,T,I,8),o.write(L,T,I,V,52,8),I+8}n.prototype.writeDoubleLE=function(T,I,V){return Ne(this,T,I,!0,V)},n.prototype.writeDoubleBE=function(T,I,V){return Ne(this,T,I,!1,V)},n.prototype.copy=function(T,I,V,W){if(!n.isBuffer(T))throw new TypeError("argument should be a Buffer");if(V||(V=0),!W&&W!==0&&(W=this.length),I>=T.length&&(I=T.length),I||(I=0),W>0&&W<V&&(W=V),W===V||T.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),T.length-I<W-V&&(W=T.length-I+V);const ee=W-V;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,V,W):Uint8Array.prototype.set.call(T,this.subarray(V,W),I),ee},n.prototype.fill=function(T,I,V,W){if(typeof T=="string"){if(typeof I=="string"?(W=I,I=0,V=this.length):typeof V=="string"&&(W=V,V=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!n.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(T.length===1){const ue=T.charCodeAt(0);(W==="utf8"&&ue<128||W==="latin1")&&(T=ue)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(I<0||this.length<I||this.length<V)throw new RangeError("Out of range index");if(V<=I)return this;I=I>>>0,V=V===void 0?this.length:V>>>0,T||(T=0);let ee;if(typeof T=="number")for(ee=I;ee<V;++ee)this[ee]=T;else{const ue=n.isBuffer(T)?T:n.from(T,W),Te=ue.length;if(Te===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(ee=0;ee<V-I;++ee)this[ee+I]=ue[ee%Te]}return this};const Pe={};function Le(L,T,I){Pe[L]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(L,T){return`The "${L}" argument must be of type number. Received type ${typeof T}`},TypeError),Le("ERR_OUT_OF_RANGE",function(L,T,I){let V=`The value of "${L}" is out of range.`,W=I;return Number.isInteger(I)&&Math.abs(I)>2**32?W=qe(String(I)):typeof I=="bigint"&&(W=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(W=qe(W)),W+="n"),V+=` It must be ${T}. Received ${W}`,V},RangeError);function qe(L){let T="",I=L.length;const V=L[0]==="-"?1:0;for(;I>=V+4;I-=3)T=`_${L.slice(I-3,I)}${T}`;return`${L.slice(0,I)}${T}`}function lt(L,T,I){de(T,"offset"),(L[T]===void 0||L[T+I]===void 0)&&ie(T,L.length-(I+1))}function pt(L,T,I,V,W,ee){if(L>I||L<T){const ue=typeof T=="bigint"?"n":"";let Te;throw T===0||T===BigInt(0)?Te=`>= 0${ue} and < 2${ue} ** ${(ee+1)*8}${ue}`:Te=`>= -(2${ue} ** ${(ee+1)*8-1}${ue}) and < 2 ** ${(ee+1)*8-1}${ue}`,new Pe.ERR_OUT_OF_RANGE("value",Te,L)}lt(V,W,ee)}function de(L,T){if(typeof L!="number")throw new Pe.ERR_INVALID_ARG_TYPE(T,"number",L)}function ie(L,T,I){throw Math.floor(L)!==L?(de(L,I),new Pe.ERR_OUT_OF_RANGE("offset","an integer",L)):T<0?new Pe.ERR_BUFFER_OUT_OF_BOUNDS:new Pe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,L)}const we=/[^+/0-9A-Za-z-_]/g;function Me(L){if(L=L.split("=")[0],L=L.trim().replace(we,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Oe(L,T){T=T||1/0;let I;const V=L.length;let W=null;const ee=[];for(let ue=0;ue<V;++ue){if(I=L.charCodeAt(ue),I>55295&&I<57344){if(!W){if(I>56319){(T-=3)>-1&&ee.push(239,191,189);continue}else if(ue+1===V){(T-=3)>-1&&ee.push(239,191,189);continue}W=I;continue}if(I<56320){(T-=3)>-1&&ee.push(239,191,189),W=I;continue}I=(W-55296<<10|I-56320)+65536}else W&&(T-=3)>-1&&ee.push(239,191,189);if(W=null,I<128){if((T-=1)<0)break;ee.push(I)}else if(I<2048){if((T-=2)<0)break;ee.push(I>>6|192,I&63|128)}else if(I<65536){if((T-=3)<0)break;ee.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((T-=4)<0)break;ee.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ee}function K(L){const T=[];for(let I=0;I<L.length;++I)T.push(L.charCodeAt(I)&255);return T}function Q(L,T){let I,V,W;const ee=[];for(let ue=0;ue<L.length&&!((T-=2)<0);++ue)I=L.charCodeAt(ue),V=I>>8,W=I%256,ee.push(W),ee.push(V);return ee}function x(L){return i.toByteArray(Me(L))}function M(L,T,I,V){let W;for(W=0;W<V&&!(W+I>=T.length||W>=L.length);++W)T[W+I]=L[W];return W}function k(L,T){return L instanceof T||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===T.name}function H(L){return L!==L}const ne=function(){const L="0123456789abcdef",T=new Array(256);for(let I=0;I<16;++I){const V=I*16;for(let W=0;W<16;++W)T[V+W]=L[I]+L[W]}return T}();function Se(L){return typeof BigInt>"u"?Re:L}function Re(){throw new Error("BigInt not supported")}}(Bm)),Bm}function Bf(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Um={exports:{}},BM;function Q2(){return BM||(BM=1,function(r,i){(function(o){r.exports=o()})(function(){return function(){function o(p,s,f){function a(u,h){if(!s[u]){if(!p[u]){var d=typeof Bf=="function"&&Bf;if(!h&&d)return d(u,!0);if(n)return n(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var g=s[u]={exports:{}};p[u][0].call(g.exports,function(m){var C=p[u][1][m];return a(C||m)},g,g.exports,o,p,s,f)}return s[u].exports}for(var n=typeof Bf=="function"&&Bf,l=0;l<f.length;l++)a(f[l]);return a}return o}()({1:[function(o,p,s){var f=this&&this.__awaiter||function(d,y,g,m){function C(_){return _ instanceof g?_:new g(function(b){b(_)})}return new(g||(g=Promise))(function(_,b){function R(O){try{w(m.next(O))}catch(P){b(P)}}function A(O){try{w(m.throw(O))}catch(P){b(P)}}function w(O){O.done?_(O.value):C(O.value).then(R,A)}w((m=m.apply(d,y||[])).next())})},a=this&&this.__generator||function(d,y){var g={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},m,C,_,b;return b={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function R(w){return function(O){return A([w,O])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(g=0)),g;)try{if(m=1,C&&(_=w[0]&2?C.return:w[0]?C.throw||((_=C.return)&&_.call(C),0):C.next)&&!(_=_.call(C,w[1])).done)return _;switch(C=0,_&&(w=[w[0]&2,_.value]),w[0]){case 0:case 1:_=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,C=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(_=g.trys,!(_=_.length>0&&_[_.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!_||w[1]>_[0]&&w[1]<_[3])){g.label=w[1];break}if(w[0]===6&&g.label<_[1]){g.label=_[1],_=w;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(w);break}_[2]&&g.ops.pop(),g.trys.pop();continue}w=y.call(d,g)}catch(O){w=[6,O],C=0}finally{m=_=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadAssembler=void 0;var n=o("../subscribableStream"),l=o("../payloads"),u=o("../contentStream"),h=function(){function d(y,g){if(this.streamManager=y,this._byteOrderMark=65279,this._utf="utf8",g.header?(this.id=g.header.id,this.payloadType=g.header.payloadType,this.contentLength=g.header.payloadLength,this.end=g.header.end):this.id=g.id,!this.id)throw Error("An ID must be supplied when creating an assembler.");this._onCompleted=g.onCompleted}return d.prototype.getPayloadStream=function(){return this.stream||(this.stream=this.createPayloadStream()),this.stream},d.prototype.onReceive=function(y,g,m){this.end=y.end,y.payloadType===l.PayloadTypes.response||y.payloadType===l.PayloadTypes.request?this.process(g).then().catch():y.end&&g.end()},d.prototype.close=function(){this.streamManager.closeStream(this.id)},d.prototype.createPayloadStream=function(){return new n.SubscribableStream},d.prototype.payloadFromJson=function(y){return JSON.parse(y.charCodeAt(0)===this._byteOrderMark?y.slice(1):y)},d.prototype.stripBOM=function(y){return y.charCodeAt(0)===this._byteOrderMark?y.slice(1):y},d.prototype.process=function(y){return f(this,void 0,void 0,function(){var g,m;return a(this,function(C){switch(C.label){case 0:return g=y.read(y.length),g?(m=g.toString(this._utf),this.payloadType!==l.PayloadTypes.request?[3,2]:[4,this.processRequest(m)]):[2];case 1:return C.sent(),[3,4];case 2:return this.payloadType!==l.PayloadTypes.response?[3,4]:[4,this.processResponse(m)];case 3:C.sent(),C.label=4;case 4:return[2]}})})},d.prototype.processResponse=function(y){return f(this,void 0,void 0,function(){var g,m;return a(this,function(C){switch(C.label){case 0:return g=this.payloadFromJson(this.stripBOM(y)),m={streams:[],statusCode:g.statusCode},[4,this.processStreams(g,m)];case 1:return C.sent(),[2]}})})},d.prototype.processRequest=function(y){return f(this,void 0,void 0,function(){var g,m;return a(this,function(C){switch(C.label){case 0:return g=this.payloadFromJson(y),m={streams:[],path:g.path,verb:g.verb},[4,this.processStreams(g,m)];case 1:return C.sent(),[2]}})})},d.prototype.processStreams=function(y,g){var m;return f(this,void 0,void 0,function(){var C=this;return a(this,function(_){switch(_.label){case 0:return(m=y.streams)===null||m===void 0||m.forEach(function(b){var R,A=(R=b.type)!==null&&R!==void 0?R:b.contentType,w=C.streamManager.getPayloadAssembler(b.id);w.payloadType=A,w.contentLength=b.length,g.streams.push(new u.ContentStream(b.id,w))}),[4,this._onCompleted(this.id,g)];case 1:return _.sent(),[2]}})})},d}();s.PayloadAssembler=h},{"../contentStream":2,"../payloads":16,"../subscribableStream":27}],2:[function(o,p,s){var f=this&&this.__awaiter||function(l,u,h,d){function y(g){return g instanceof h?g:new h(function(m){m(g)})}return new(h||(h=Promise))(function(g,m){function C(R){try{b(d.next(R))}catch(A){m(A)}}function _(R){try{b(d.throw(R))}catch(A){m(A)}}function b(R){R.done?g(R.value):y(R.value).then(C,_)}b((d=d.apply(l,u||[])).next())})},a=this&&this.__generator||function(l,u){var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,y,g,m;return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(b){return function(R){return _([b,R])}}function _(b){if(d)throw new TypeError("Generator is already executing.");for(;m&&(m=0,b[0]&&(h=0)),h;)try{if(d=1,y&&(g=b[0]&2?y.return:b[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,b[1])).done)return g;switch(y=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return h.label++,{value:b[1],done:!1};case 5:h.label++,y=b[1],b=[0];continue;case 7:b=h.ops.pop(),h.trys.pop();continue;default:if(g=h.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){h=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){h.label=b[1];break}if(b[0]===6&&h.label<g[1]){h.label=g[1],g=b;break}if(g&&h.label<g[2]){h.label=g[2],h.ops.push(b);break}g[2]&&h.ops.pop(),h.trys.pop();continue}b=u.call(l,h)}catch(R){b=[6,R],y=0}finally{d=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.ContentStream=void 0;var n=function(){function l(u,h){if(!h)throw Error("Null Argument Exception");this.id=u,this.assembler=h}return Object.defineProperty(l.prototype,"contentType",{get:function(){return this.assembler.payloadType},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this.assembler.contentLength},enumerable:!1,configurable:!0}),l.prototype.getStream=function(){return this.stream||(this.stream=this.assembler.getPayloadStream()),this.stream},l.prototype.cancel=function(){this.assembler.close()},l.prototype.readAsString=function(){return f(this,void 0,void 0,function(){var u;return a(this,function(h){switch(h.label){case 0:return[4,this.readAll()];case 1:return u=h.sent().bufferArray,[2,(u||[]).map(function(d){return d.toString("utf8")}).join("")]}})})},l.prototype.readAsJson=function(){return f(this,void 0,void 0,function(){var u;return a(this,function(h){switch(h.label){case 0:return[4,this.readAsString()];case 1:return u=h.sent(),[2,JSON.parse(u)]}})})},l.prototype.readAll=function(){return f(this,void 0,void 0,function(){var u,h,d,y,g,m=this;return a(this,function(C){switch(C.label){case 0:for(u=[],h=0,d=this.getStream();h<d.length;)y=d.read(d.length),u.push(y),h+=y.length;return h<this.length?(g=new Promise(function(_){var b=function(R){return function(A){u.push(A),h+=A.length,h===R.length&&_(!0)}};d.subscribe(b(m))}),[4,g]):[3,2];case 1:C.sent(),C.label=2;case 2:return[2,{bufferArray:u,size:h}]}})})},l}();s.ContentStream=n},{}],3:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.CancelDisassembler=void 0;var f=function(){function a(n,l,u){this.sender=n,this.id=l,this.payloadType=u}return a.prototype.disassemble=function(){var n={payloadType:this.payloadType,payloadLength:0,id:this.id,end:!0};this.sender.sendPayload(n)},a}();s.CancelDisassembler=f},{}],4:[function(o,p,s){var f=this&&this.__extends||function(){var d=function(y,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(m[_]=C[_])},d(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(y,g);function m(){this.constructor=y}y.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),a=this&&this.__awaiter||function(d,y,g,m){function C(_){return _ instanceof g?_:new g(function(b){b(_)})}return new(g||(g=Promise))(function(_,b){function R(O){try{w(m.next(O))}catch(P){b(P)}}function A(O){try{w(m.throw(O))}catch(P){b(P)}}function w(O){O.done?_(O.value):C(O.value).then(R,A)}w((m=m.apply(d,y||[])).next())})},n=this&&this.__generator||function(d,y){var g={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},m,C,_,b;return b={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function R(w){return function(O){return A([w,O])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(g=0)),g;)try{if(m=1,C&&(_=w[0]&2?C.return:w[0]?C.throw||((_=C.return)&&_.call(C),0):C.next)&&!(_=_.call(C,w[1])).done)return _;switch(C=0,_&&(w=[w[0]&2,_.value]),w[0]){case 0:case 1:_=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,C=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(_=g.trys,!(_=_.length>0&&_[_.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!_||w[1]>_[0]&&w[1]<_[3])){g.label=w[1];break}if(w[0]===6&&g.label<_[1]){g.label=_[1],_=w;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(w);break}_[2]&&g.ops.pop(),g.trys.pop();continue}w=y.call(d,g)}catch(O){w=[6,O],C=0}finally{m=_=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.HttpContentStreamDisassembler=void 0;var l=o("./payloadDisassembler"),u=o("../payloads"),h=function(d){f(y,d);function y(g,m){var C=d.call(this,g,m.id)||this;return C.payloadType=u.PayloadTypes.stream,C.contentStream=m,C}return y.prototype.getStream=function(){return a(this,void 0,void 0,function(){var g;return n(this,function(m){return g=this.contentStream.content.getStream(),[2,{stream:g,streamLength:g.length}]})})},y}(l.PayloadDisassembler);s.HttpContentStreamDisassembler=h},{"../payloads":16,"./payloadDisassembler":5}],5:[function(o,p,s){var f=this&&this.__awaiter||function(u,h,d,y){function g(m){return m instanceof d?m:new d(function(C){C(m)})}return new(d||(d=Promise))(function(m,C){function _(A){try{R(y.next(A))}catch(w){C(w)}}function b(A){try{R(y.throw(A))}catch(w){C(w)}}function R(A){A.done?m(A.value):g(A.value).then(_,b)}R((y=y.apply(u,h||[])).next())})},a=this&&this.__generator||function(u,h){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},y,g,m,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(R){return function(A){return b([R,A])}}function b(R){if(y)throw new TypeError("Generator is already executing.");for(;C&&(C=0,R[0]&&(d=0)),d;)try{if(y=1,g&&(m=R[0]&2?g.return:R[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,R[1])).done)return m;switch(g=0,m&&(R=[R[0]&2,m.value]),R[0]){case 0:case 1:m=R;break;case 4:return d.label++,{value:R[1],done:!1};case 5:d.label++,g=R[1],R=[0];continue;case 7:R=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(R[0]===6||R[0]===2)){d=0;continue}if(R[0]===3&&(!m||R[1]>m[0]&&R[1]<m[3])){d.label=R[1];break}if(R[0]===6&&d.label<m[1]){d.label=m[1],m=R;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(R);break}m[2]&&d.ops.pop(),d.trys.pop();continue}R=h.call(u,d)}catch(A){R=[6,A],g=0}finally{y=m=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadDisassembler=void 0;var n=o("../subscribableStream"),l=function(){function u(h,d){this.sender=h,this.id=d}return u.serialize=function(h){var d=new n.SubscribableStream;return d.write(JSON.stringify(h)),d.end(),{stream:d,streamLength:d.length}},u.prototype.disassemble=function(){return f(this,void 0,void 0,function(){var h,d,y;return a(this,function(g){switch(g.label){case 0:return[4,this.getStream()];case 1:return h=g.sent(),d=h.stream,y=h.streamLength,this.stream=d,this.streamLength=y,[2,this.send()]}})})},u.prototype.send=function(){return f(this,void 0,void 0,function(){var h;return a(this,function(d){return h={payloadType:this.payloadType,payloadLength:this.streamLength,id:this.id,end:!0},this.sender.sendPayload(h,this.stream),[2]})})},u}();s.PayloadDisassembler=l},{"../subscribableStream":27}],6:[function(o,p,s){var f=this&&this.__extends||function(){var d=function(y,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(m[_]=C[_])},d(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(y,g);function m(){this.constructor=y}y.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),a=this&&this.__awaiter||function(d,y,g,m){function C(_){return _ instanceof g?_:new g(function(b){b(_)})}return new(g||(g=Promise))(function(_,b){function R(O){try{w(m.next(O))}catch(P){b(P)}}function A(O){try{w(m.throw(O))}catch(P){b(P)}}function w(O){O.done?_(O.value):C(O.value).then(R,A)}w((m=m.apply(d,y||[])).next())})},n=this&&this.__generator||function(d,y){var g={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},m,C,_,b;return b={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function R(w){return function(O){return A([w,O])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(g=0)),g;)try{if(m=1,C&&(_=w[0]&2?C.return:w[0]?C.throw||((_=C.return)&&_.call(C),0):C.next)&&!(_=_.call(C,w[1])).done)return _;switch(C=0,_&&(w=[w[0]&2,_.value]),w[0]){case 0:case 1:_=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,C=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(_=g.trys,!(_=_.length>0&&_[_.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!_||w[1]>_[0]&&w[1]<_[3])){g.label=w[1];break}if(w[0]===6&&g.label<_[1]){g.label=_[1],_=w;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(w);break}_[2]&&g.ops.pop(),g.trys.pop();continue}w=y.call(d,g)}catch(O){w=[6,O],C=0}finally{m=_=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.RequestDisassembler=void 0;var l=o("../payloads/payloadTypes"),u=o("./payloadDisassembler"),h=function(d){f(y,d);function y(g,m,C){var _=d.call(this,g,m)||this;return _.request=C,_.payloadType=l.PayloadTypes.request,_}return y.prototype.getStream=function(){var g,m,C,_;return a(this,void 0,void 0,function(){var b;return n(this,function(R){return b={verb:(g=this.request)===null||g===void 0?void 0:g.verb,path:(m=this.request)===null||m===void 0?void 0:m.path,streams:[]},(_=(C=this.request)===null||C===void 0?void 0:C.streams)===null||_===void 0||_.forEach(function(A){b.streams.push(A.description)}),[2,u.PayloadDisassembler.serialize(b)]})})},y}(u.PayloadDisassembler);s.RequestDisassembler=h},{"../payloads/payloadTypes":19,"./payloadDisassembler":5}],7:[function(o,p,s){var f=this&&this.__extends||function(){var d=function(y,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(m[_]=C[_])},d(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(y,g);function m(){this.constructor=y}y.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),a=this&&this.__awaiter||function(d,y,g,m){function C(_){return _ instanceof g?_:new g(function(b){b(_)})}return new(g||(g=Promise))(function(_,b){function R(O){try{w(m.next(O))}catch(P){b(P)}}function A(O){try{w(m.throw(O))}catch(P){b(P)}}function w(O){O.done?_(O.value):C(O.value).then(R,A)}w((m=m.apply(d,y||[])).next())})},n=this&&this.__generator||function(d,y){var g={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},m,C,_,b;return b={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function R(w){return function(O){return A([w,O])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(g=0)),g;)try{if(m=1,C&&(_=w[0]&2?C.return:w[0]?C.throw||((_=C.return)&&_.call(C),0):C.next)&&!(_=_.call(C,w[1])).done)return _;switch(C=0,_&&(w=[w[0]&2,_.value]),w[0]){case 0:case 1:_=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,C=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(_=g.trys,!(_=_.length>0&&_[_.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!_||w[1]>_[0]&&w[1]<_[3])){g.label=w[1];break}if(w[0]===6&&g.label<_[1]){g.label=_[1],_=w;break}if(_&&g.label<_[2]){g.label=_[2],g.ops.push(w);break}_[2]&&g.ops.pop(),g.trys.pop();continue}w=y.call(d,g)}catch(O){w=[6,O],C=0}finally{m=_=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.ResponseDisassembler=void 0;var l=o("../payloads/payloadTypes"),u=o("./payloadDisassembler"),h=function(d){f(y,d);function y(g,m,C){var _=d.call(this,g,m)||this;return _.payloadType=l.PayloadTypes.response,_.response=C,_}return y.prototype.getStream=function(){var g;return a(this,void 0,void 0,function(){var m;return n(this,function(C){return m={statusCode:this.response.statusCode,streams:[]},(g=this.response.streams)===null||g===void 0||g.forEach(function(_){var b=_.description;m.streams.push({id:b.id,contentType:b.type,length:b.length})}),[2,u.PayloadDisassembler.serialize(m)]})})},y}(u.PayloadDisassembler);s.ResponseDisassembler=h},{"../payloads/payloadTypes":19,"./payloadDisassembler":5}],8:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.HttpContent=s.HttpContentStream=void 0;var f=o("./utilities/protocol-base"),a=function(){function l(u){var h,d,y,g,m,C;this.content=u,this.id=(0,f.generateGuid)(),this.description={id:this.id,type:(y=(d=(h=this.content)===null||h===void 0?void 0:h.headers)===null||d===void 0?void 0:d.type)!==null&&y!==void 0?y:"unknown",length:(C=(m=(g=this.content)===null||g===void 0?void 0:g.headers)===null||m===void 0?void 0:m.contentLength)!==null&&C!==void 0?C:0}}return l}();s.HttpContentStream=a;var n=function(){function l(u,h){this.headers=u,this.stream=h}return l.prototype.getStream=function(){return this.stream},l}();s.HttpContent=n},{"./utilities/protocol-base":28}],9:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.WebSocketClient=s.BrowserWebSocket=s.SubscribableStream=s.StreamingResponse=s.StreamingRequest=s.RequestHandler=s.HttpContent=s.ContentStream=void 0;var f=o("./contentStream");Object.defineProperty(s,"ContentStream",{enumerable:!0,get:function(){return f.ContentStream}});var a=o("./httpContentStream");Object.defineProperty(s,"HttpContent",{enumerable:!0,get:function(){return a.HttpContent}});var n=o("./requestHandler");Object.defineProperty(s,"RequestHandler",{enumerable:!0,get:function(){return n.RequestHandler}});var l=o("./streamingRequest");Object.defineProperty(s,"StreamingRequest",{enumerable:!0,get:function(){return l.StreamingRequest}});var u=o("./streamingResponse");Object.defineProperty(s,"StreamingResponse",{enumerable:!0,get:function(){return u.StreamingResponse}});var h=o("./subscribableStream");Object.defineProperty(s,"SubscribableStream",{enumerable:!0,get:function(){return h.SubscribableStream}});var d=o("./webSocket/index-browser");Object.defineProperty(s,"BrowserWebSocket",{enumerable:!0,get:function(){return d.BrowserWebSocket}}),Object.defineProperty(s,"WebSocketClient",{enumerable:!0,get:function(){return d.WebSocketClient}})},{"./contentStream":2,"./httpContentStream":8,"./requestHandler":24,"./streamingRequest":25,"./streamingResponse":26,"./subscribableStream":27,"./webSocket/index-browser":31}],10:[function(o,p,s){var f=this&&this.__createBinding||(Object.create?function(n,l,u,h){h===void 0&&(h=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(n,h,d)}:function(n,l,u,h){h===void 0&&(h=u),n[h]=l[u]}),a=this&&this.__exportStar||function(n,l){for(var u in n)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&f(l,n,u)};Object.defineProperty(s,"__esModule",{value:!0}),a(o("./payloadReceiver"),s),a(o("./payloadSender"),s),a(o("./transportDisconnectedEvent"),s),a(o("./transportDisconnectedEventHandler"),s)},{"./payloadReceiver":11,"./payloadSender":12,"./transportDisconnectedEvent":13,"./transportDisconnectedEventHandler":14}],11:[function(o,p,s){var f=this&&this.__awaiter||function(y,g,m,C){function _(b){return b instanceof m?b:new m(function(R){R(b)})}return new(m||(m=Promise))(function(b,R){function A(P){try{O(C.next(P))}catch(D){R(D)}}function w(P){try{O(C.throw(P))}catch(D){R(D)}}function O(P){P.done?b(P.value):_(P.value).then(A,w)}O((C=C.apply(y,g||[])).next())})},a=this&&this.__generator||function(y,g){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},C,_,b,R;return R={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function A(O){return function(P){return w([O,P])}}function w(O){if(C)throw new TypeError("Generator is already executing.");for(;R&&(R=0,O[0]&&(m=0)),m;)try{if(C=1,_&&(b=O[0]&2?_.return:O[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,O[1])).done)return b;switch(_=0,b&&(O=[O[0]&2,b.value]),O[0]){case 0:case 1:b=O;break;case 4:return m.label++,{value:O[1],done:!1};case 5:m.label++,_=O[1],O=[0];continue;case 7:O=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(O[0]===6||O[0]===2)){m=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){m.label=O[1];break}if(O[0]===6&&m.label<b[1]){m.label=b[1],b=O;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(O);break}b[2]&&m.ops.pop(),m.trys.pop();continue}O=g.call(y,m)}catch(P){O=[6,P],_=0}finally{C=b=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadReceiver=void 0;var n=o("../payloads/payloadTypes"),l=o("../payloads/headerSerializer"),u=o("../payloads/payloadConstants"),h=o("./transportDisconnectedEvent"),d=function(){function y(){}return Object.defineProperty(y.prototype,"isConnected",{get:function(){return this._receiver!=null},enumerable:!1,configurable:!0}),y.prototype.connect=function(g){return this._receiver=g,this.receivePackets()},y.prototype.subscribe=function(g,m){this._getStream=g,this._receiveAction=m},y.prototype.disconnect=function(g){var m,C;if(g===void 0&&(g=h.TransportDisconnectedEvent.Empty),!!this.isConnected)try{this._receiver.close(),(m=this.disconnected)===null||m===void 0||m.call(this,this,g)}catch(_){(C=this.disconnected)===null||C===void 0||C.call(this,this,new h.TransportDisconnectedEvent(_.message))}finally{this._receiver=null}},y.prototype.receivePackets=function(){return f(this,void 0,void 0,function(){var g,m,C,_,b,R,A,w,O;return a(this,function(P){switch(P.label){case 0:if(!this.isConnected)return[3,11];P.label=1;case 1:P.trys.push([1,9,,10]),g=0,P.label=2;case 2:return g<u.PayloadConstants.MaxHeaderLength?(m=this,[4,this._receiver.receive(u.PayloadConstants.MaxHeaderLength-g)]):[3,4];case 3:return m._receiveHeaderBuffer=P.sent(),this._receiveHeaderBuffer&&(g+=this._receiveHeaderBuffer.length),[3,2];case 4:if(C=l.HeaderSerializer.deserialize(this._receiveHeaderBuffer),_=C.payloadType===n.PayloadTypes.stream,!(C.payloadLength>0))return[3,8];b=0,R=this._getStream(C),P.label=5;case 5:return b<C.payloadLength&&b<u.PayloadConstants.MaxPayloadLength?(A=Math.min(C.payloadLength-b,u.PayloadConstants.MaxPayloadLength),w=this,[4,this._receiver.receive(A)]):[3,7];case 6:return w._receivePayloadBuffer=P.sent(),b+=this._receivePayloadBuffer.byteLength,R.write(this._receivePayloadBuffer),_&&this._receiveAction(C,R,b),[3,5];case 7:_||this._receiveAction(C,R,b),P.label=8;case 8:return[3,10];case 9:return O=P.sent(),this.disconnect(new h.TransportDisconnectedEvent(O.message)),[3,10];case 10:return[3,0];case 11:return[2]}})})},y}();s.PayloadReceiver=d},{"../payloads/headerSerializer":15,"../payloads/payloadConstants":18,"../payloads/payloadTypes":19,"./transportDisconnectedEvent":13}],12:[function(o,p,s){(function(f){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadSender=void 0;var a=o("../payloads/headerSerializer"),n=o("../payloads/payloadConstants"),l=o("./transportDisconnectedEvent"),u=function(){function h(){}return Object.defineProperty(h.prototype,"isConnected",{get:function(){return this._sender!=null},enumerable:!1,configurable:!0}),h.prototype.connect=function(d){this._sender=d},h.prototype.sendPayload=function(d,y,g){var m={header:d,payload:y,sentCallback:g};this.writePacket(m)},h.prototype.disconnect=function(d){var y,g;if(d===void 0&&(d=l.TransportDisconnectedEvent.Empty),!!this.isConnected)try{this._sender.close(),(y=this.disconnected)===null||y===void 0||y.call(this,this,d)}catch(m){(g=this.disconnected)===null||g===void 0||g.call(this,this,new l.TransportDisconnectedEvent(m.message))}finally{this._sender=null}},h.prototype.writePacket=function(d){try{if(d.header.payloadLength>0&&d.payload){for(var y=d.header.payloadLength;y>0;){var g=y<=n.PayloadConstants.MaxPayloadLength?y:n.PayloadConstants.MaxPayloadLength,m=d.payload.read(g),C=d.header;C.payloadLength=g,C.end=y<=n.PayloadConstants.MaxPayloadLength;var _=f.alloc(n.PayloadConstants.MaxHeaderLength);a.HeaderSerializer.serialize(C,_),this._sender.send(_),this._sender.send(m),y-=m.length}d.sentCallback&&d.sentCallback()}}catch(b){this.disconnect(new l.TransportDisconnectedEvent(b.message))}},h}();s.PayloadSender=u}).call(this)}).call(this,o("buffer").Buffer)},{"../payloads/headerSerializer":15,"../payloads/payloadConstants":18,"./transportDisconnectedEvent":13,buffer:35}],13:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TransportDisconnectedEvent=void 0;var f=function(){function a(n){this.reason=n}return a.Empty=new a,a}();s.TransportDisconnectedEvent=f},{}],14:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0})},{}],15:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.HeaderSerializer=void 0;var f=o("./payloadConstants"),a=function(){function n(){}return n.serialize=function(l,u){u.write(l.payloadType,this.TypeOffset,1,this.Encoding),u.write(this.Delimiter,this.TypeDelimiterOffset,1,this.Encoding),u.write(this.headerLengthPadder(l.payloadLength,this.LengthLength,"0"),this.LengthOffset,this.LengthLength,this.Encoding),u.write(this.Delimiter,this.LengthDelimeterOffset,1,this.Encoding),u.write(l.id,this.IdOffset),u.write(this.Delimiter,this.IdDelimeterOffset,1,this.Encoding),u.write(l.end?this.End:this.NotEnd,this.EndOffset),u.write(this.Terminator,this.TerminatorOffset)},n.deserialize=function(l){var u=l.toString(this.Encoding),h=u.split(this.Delimiter);if(h.length!==4)throw Error("Cannot parse header, header is malformed. Header: ".concat(u));var d=h[0],y=h[1],g=h[2],m=h[3],C=m===`1
`,_=Number(y),b={end:C,payloadLength:_,payloadType:d,id:g};if(!(b.payloadLength<=f.PayloadConstants.MaxPayloadLength&&b.payloadLength>=f.PayloadConstants.MinLength))throw Error("Header length of ".concat(b.payloadLength," is missing or malformed"));if(b.payloadType.length!==this.TypeDelimiterOffset)throw Error("Header type '".concat(b.payloadType.length,"' is missing or malformed."));if(!b.id||!b.id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)||b.id.length!==this.IdLength)throw Error("Header ID '".concat(b.id,"' is missing or malformed."));if(!(m===`0
`||m===`1
`))throw Error("Header End is missing or not a valid value. Header end: '".concat(m,"'"));return b},n.headerLengthPadder=function(l,u,h){var d=Array(u+1).join(h),y=l.toString();return(d+y).slice(y.length)},n.Delimiter=".",n.Terminator=`
`,n.End="1",n.NotEnd="0",n.TypeOffset=0,n.TypeDelimiterOffset=1,n.LengthOffset=2,n.LengthLength=6,n.LengthDelimeterOffset=8,n.IdOffset=9,n.IdLength=36,n.IdDelimeterOffset=45,n.EndOffset=46,n.TerminatorOffset=47,n.Encoding="utf8",n}();s.HeaderSerializer=a},{"./payloadConstants":18}],16:[function(o,p,s){var f=this&&this.__createBinding||(Object.create?function(n,l,u,h){h===void 0&&(h=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(n,h,d)}:function(n,l,u,h){h===void 0&&(h=u),n[h]=l[u]}),a=this&&this.__exportStar||function(n,l){for(var u in n)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&f(l,n,u)};Object.defineProperty(s,"__esModule",{value:!0}),a(o("./headerSerializer"),s),a(o("./streamManager"),s),a(o("./payloadAssemblerManager"),s),a(o("./payloadTypes"),s),a(o("./requestManager"),s),a(o("./sendOperations"),s),a(o("./streamManager"),s)},{"./headerSerializer":15,"./payloadAssemblerManager":17,"./payloadTypes":19,"./requestManager":20,"./sendOperations":21,"./streamManager":22}],17:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadAssemblerManager=void 0;var f=o("../assemblers/payloadAssembler"),a=o("./payloadTypes"),n=function(){function l(u,h,d){this.streamManager=u,this.onReceiveResponse=h,this.onReceiveRequest=d,this.activeAssemblers={}}return l.prototype.getPayloadStream=function(u){if(u.payloadType===a.PayloadTypes.stream)return this.streamManager.getPayloadStream(u);if(!this.activeAssemblers[u.id]){var h=this.createPayloadAssembler(u);if(h)return this.activeAssemblers[u.id]=h,h.getPayloadStream()}},l.prototype.onReceive=function(u,h,d){if(u.payloadType===a.PayloadTypes.stream)this.streamManager.onReceive(u,h,d);else{if(this.activeAssemblers&&this.activeAssemblers[u.id]){var y=this.activeAssemblers[u.id];y.onReceive(u,h,d)}u.end&&delete this.activeAssemblers[u.id]}},l.prototype.createPayloadAssembler=function(u){if(u.payloadType===a.PayloadTypes.request)return new f.PayloadAssembler(this.streamManager,{header:u,onCompleted:this.onReceiveRequest});if(u.payloadType===a.PayloadTypes.response)return new f.PayloadAssembler(this.streamManager,{header:u,onCompleted:this.onReceiveResponse})},l}();s.PayloadAssemblerManager=n},{"../assemblers/payloadAssembler":1,"./payloadTypes":19}],18:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadConstants=void 0,function(f){f[f.MaxPayloadLength=4096]="MaxPayloadLength",f[f.MaxHeaderLength=48]="MaxHeaderLength",f[f.MaxLength=999999]="MaxLength",f[f.MinLength=0]="MinLength"}(s.PayloadConstants||(s.PayloadConstants={}))},{}],19:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.PayloadTypes=void 0,function(f){f.request="A",f.response="B",f.stream="S",f.cancelAll="X",f.cancelStream="C"}(s.PayloadTypes||(s.PayloadTypes={}))},{}],20:[function(o,p,s){var f=this&&this.__awaiter||function(u,h,d,y){function g(m){return m instanceof d?m:new d(function(C){C(m)})}return new(d||(d=Promise))(function(m,C){function _(A){try{R(y.next(A))}catch(w){C(w)}}function b(A){try{R(y.throw(A))}catch(w){C(w)}}function R(A){A.done?m(A.value):g(A.value).then(_,b)}R((y=y.apply(u,h||[])).next())})},a=this&&this.__generator||function(u,h){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},y,g,m,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(R){return function(A){return b([R,A])}}function b(R){if(y)throw new TypeError("Generator is already executing.");for(;C&&(C=0,R[0]&&(d=0)),d;)try{if(y=1,g&&(m=R[0]&2?g.return:R[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,R[1])).done)return m;switch(g=0,m&&(R=[R[0]&2,m.value]),R[0]){case 0:case 1:m=R;break;case 4:return d.label++,{value:R[1],done:!1};case 5:d.label++,g=R[1],R=[0];continue;case 7:R=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(R[0]===6||R[0]===2)){d=0;continue}if(R[0]===3&&(!m||R[1]>m[0]&&R[1]<m[3])){d.label=R[1];break}if(R[0]===6&&d.label<m[1]){d.label=m[1],m=R;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(R);break}m[2]&&d.ops.pop(),d.trys.pop();continue}R=h.call(u,d)}catch(A){R=[6,A],g=0}finally{y=m=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.RequestManager=void 0;var n=function(){function u(){}return u}(),l=function(){function u(){this._pendingRequests={}}return u.prototype.pendingRequestCount=function(){return Object.keys(this._pendingRequests).length},u.prototype.signalResponse=function(h,d){return f(this,void 0,void 0,function(){var y;return a(this,function(g){return y=this._pendingRequests[h],y?(y.resolve(d),delete this._pendingRequests[h],[2,!0]):[2,!1]})})},u.prototype.getResponse=function(h){var d=this._pendingRequests[h];if(d)return Promise.reject("requestId '".concat(h,"' already exists in RequestManager"));d=new n,d.requestId=h;var y=new Promise(function(g,m){d.resolve=g,d.reject=m});return this._pendingRequests[h]=d,y},u.prototype.rejectAllResponses=function(h){var d=this;Object.entries(this._pendingRequests).forEach(function(y){var g=y[0],m=y[1].reject;m(h),delete d._pendingRequests[g]})},u}();s.RequestManager=l},{}],21:[function(o,p,s){var f=this&&this.__awaiter||function(g,m,C,_){function b(R){return R instanceof C?R:new C(function(A){A(R)})}return new(C||(C=Promise))(function(R,A){function w(D){try{P(_.next(D))}catch(N){A(N)}}function O(D){try{P(_.throw(D))}catch(N){A(N)}}function P(D){D.done?R(D.value):b(D.value).then(w,O)}P((_=_.apply(g,m||[])).next())})},a=this&&this.__generator||function(g,m){var C={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},_,b,R,A;return A={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function w(P){return function(D){return O([P,D])}}function O(P){if(_)throw new TypeError("Generator is already executing.");for(;A&&(A=0,P[0]&&(C=0)),C;)try{if(_=1,b&&(R=P[0]&2?b.return:P[0]?b.throw||((R=b.return)&&R.call(b),0):b.next)&&!(R=R.call(b,P[1])).done)return R;switch(b=0,R&&(P=[P[0]&2,R.value]),P[0]){case 0:case 1:R=P;break;case 4:return C.label++,{value:P[1],done:!1};case 5:C.label++,b=P[1],P=[0];continue;case 7:P=C.ops.pop(),C.trys.pop();continue;default:if(R=C.trys,!(R=R.length>0&&R[R.length-1])&&(P[0]===6||P[0]===2)){C=0;continue}if(P[0]===3&&(!R||P[1]>R[0]&&P[1]<R[3])){C.label=P[1];break}if(P[0]===6&&C.label<R[1]){C.label=R[1],R=P;break}if(R&&C.label<R[2]){C.label=R[2],C.ops.push(P);break}R[2]&&C.ops.pop(),C.trys.pop();continue}P=m.call(g,C)}catch(D){P=[6,D],b=0}finally{_=R=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.SendOperations=void 0;var n=o("../disassemblers/cancelDisassembler"),l=o("../disassemblers/httpContentStreamDisassembler"),u=o("../disassemblers/requestDisassembler"),h=o("../disassemblers/responseDisassembler"),d=o("./payloadTypes"),y=function(){function g(m){this.payloadSender=m}return g.prototype.sendRequest=function(m,C){return f(this,void 0,void 0,function(){var _,b=this;return a(this,function(R){switch(R.label){case 0:return _=new u.RequestDisassembler(this.payloadSender,m,C),[4,_.disassemble()];case 1:return R.sent(),C.streams&&C.streams.forEach(function(A){return f(b,void 0,void 0,function(){return a(this,function(w){switch(w.label){case 0:return[4,new l.HttpContentStreamDisassembler(this.payloadSender,A).disassemble()];case 1:return w.sent(),[2]}})})}),[2]}})})},g.prototype.sendResponse=function(m,C){return f(this,void 0,void 0,function(){var _,b=this;return a(this,function(R){switch(R.label){case 0:return _=new h.ResponseDisassembler(this.payloadSender,m,C),[4,_.disassemble()];case 1:return R.sent(),C.streams&&C.streams.forEach(function(A){return f(b,void 0,void 0,function(){return a(this,function(w){switch(w.label){case 0:return[4,new l.HttpContentStreamDisassembler(this.payloadSender,A).disassemble()];case 1:return w.sent(),[2]}})})}),[2]}})})},g.prototype.sendCancelStream=function(m){return f(this,void 0,void 0,function(){var C;return a(this,function(_){return C=new n.CancelDisassembler(this.payloadSender,m,d.PayloadTypes.cancelStream),C.disassemble(),[2]})})},g}();s.SendOperations=y},{"../disassemblers/cancelDisassembler":3,"../disassemblers/httpContentStreamDisassembler":4,"../disassemblers/requestDisassembler":6,"../disassemblers/responseDisassembler":7,"./payloadTypes":19}],22:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.StreamManager=void 0;var f=o("../assemblers/payloadAssembler"),a=function(){function n(l){this.onCancelStream=l,this.activeAssemblers=[]}return n.prototype.getPayloadAssembler=function(l){if(this.activeAssemblers[l])return this.activeAssemblers[l];var u=new f.PayloadAssembler(this,{id:l});return this.activeAssemblers[l]=u,u},n.prototype.getPayloadStream=function(l){var u=this.getPayloadAssembler(l.id);return u.getPayloadStream()},n.prototype.onReceive=function(l,u,h){this.activeAssemblers[l.id]&&this.activeAssemblers[l.id].onReceive(l,u,h)},n.prototype.closeStream=function(l){if(this.activeAssemblers[l]){var u=this.activeAssemblers[l];this.activeAssemblers.splice(this.activeAssemblers.indexOf(l),1);var h=u.getPayloadStream();(u.contentLength&&h.length<u.contentLength||!u.end)&&this.onCancelStream(u)}else return},n}();s.StreamManager=a},{"../assemblers/payloadAssembler":1}],23:[function(o,p,s){var f=this&&this.__awaiter||function(y,g,m,C){function _(b){return b instanceof m?b:new m(function(R){R(b)})}return new(m||(m=Promise))(function(b,R){function A(P){try{O(C.next(P))}catch(D){R(D)}}function w(P){try{O(C.throw(P))}catch(D){R(D)}}function O(P){P.done?b(P.value):_(P.value).then(A,w)}O((C=C.apply(y,g||[])).next())})},a=this&&this.__generator||function(y,g){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},C,_,b,R;return R={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function A(O){return function(P){return w([O,P])}}function w(O){if(C)throw new TypeError("Generator is already executing.");for(;R&&(R=0,O[0]&&(m=0)),m;)try{if(C=1,_&&(b=O[0]&2?_.return:O[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,O[1])).done)return b;switch(_=0,b&&(O=[O[0]&2,b.value]),O[0]){case 0:case 1:b=O;break;case 4:return m.label++,{value:O[1],done:!1};case 5:m.label++,_=O[1],O=[0];continue;case 7:O=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(O[0]===6||O[0]===2)){m=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){m.label=O[1];break}if(O[0]===6&&m.label<b[1]){m.label=b[1],b=O;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(O);break}b[2]&&m.ops.pop(),m.trys.pop();continue}O=g.call(y,m)}catch(P){O=[6,P],_=0}finally{C=b=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.ProtocolAdapter=void 0;var n=o("./payloads/payloadAssemblerManager"),l=o("./payloads/sendOperations"),u=o("./payloads/streamManager"),h=o("./utilities/protocol-base"),d=function(){function y(g,m,C,_){var b=this;this.requestHandler=g,this.requestManager=m,this.payloadSender=C,this.payloadReceiver=_,this.sendOperations=new l.SendOperations(this.payloadSender),this.streamManager=new u.StreamManager(this.onCancelStream),this.assemblerManager=new n.PayloadAssemblerManager(this.streamManager,function(R,A){return b.onReceiveResponse(R,A)},function(R,A){return b.onReceiveRequest(R,A)}),this.payloadReceiver.subscribe(function(R){return b.assemblerManager.getPayloadStream(R)},function(R,A,w){return b.assemblerManager.onReceive(R,A,w)})}return y.prototype.sendRequest=function(g){return f(this,void 0,void 0,function(){var m,C;return a(this,function(_){switch(_.label){case 0:return m=(0,h.generateGuid)(),C=this.requestManager.getResponse(m),[4,this.sendOperations.sendRequest(m,g)];case 1:return _.sent(),[2,C]}})})},y.prototype.onReceiveRequest=function(g,m){return f(this,void 0,void 0,function(){var C;return a(this,function(_){switch(_.label){case 0:return this.requestHandler?[4,this.requestHandler.processRequest(m)]:[3,3];case 1:return C=_.sent(),C?[4,this.sendOperations.sendResponse(g,C)]:[3,3];case 2:_.sent(),_.label=3;case 3:return[2]}})})},y.prototype.onReceiveResponse=function(g,m){return f(this,void 0,void 0,function(){return a(this,function(C){switch(C.label){case 0:return[4,this.requestManager.signalResponse(g,m)];case 1:return C.sent(),[2]}})})},y.prototype.onCancelStream=function(g){this.sendOperations.sendCancelStream(g.id).catch()},y}();s.ProtocolAdapter=d},{"./payloads/payloadAssemblerManager":17,"./payloads/sendOperations":21,"./payloads/streamManager":22,"./utilities/protocol-base":28}],24:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.RequestHandler=void 0;var f=function(){function a(){}return a}();s.RequestHandler=f},{}],25:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.StreamingRequest=void 0;var f=o("./httpContentStream"),a=o("./subscribableStream"),n=function(){function l(){this.streams=[]}return l.create=function(u,h,d){var y=new l;return y.verb=u,y.path=h,d&&y.setBody(d),y},l.prototype.addStream=function(u){if(!u)throw new Error("Argument Undefined Exception: content undefined.");this.streams.push(new f.HttpContentStream(u))},l.prototype.setBody=function(u){if(typeof u=="string"){var h=new a.SubscribableStream;h.write(u,"utf8"),this.addStream(new f.HttpContent({type:"application/json; charset=utf-8",contentLength:h.length},h))}else typeof u=="object"&&this.addStream(u)},l}();s.StreamingRequest=n},{"./httpContentStream":8,"./subscribableStream":27}],26:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.StreamingResponse=void 0;var f=o("./httpContentStream"),a=o("./subscribableStream"),n=function(){function l(){this.streams=[]}return l.create=function(u,h){var d=new l;return d.statusCode=u,h&&d.addStream(h),d},l.prototype.addStream=function(u){this.streams.push(new f.HttpContentStream(u))},l.prototype.setBody=function(u){var h=new a.SubscribableStream;h.write(JSON.stringify(u),"utf8"),this.addStream(new f.HttpContent({type:"application/json; charset=utf-8",contentLength:h.length},h))},l}();s.StreamingResponse=n},{"./httpContentStream":8,"./subscribableStream":27}],27:[function(o,p,s){(function(f){(function(){var a=this&&this.__extends||function(){var u=function(h,d){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(y[m]=g[m])},u(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");u(h,d);function y(){this.constructor=h}h.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(s,"__esModule",{value:!0}),s.SubscribableStream=void 0;var n=o("stream"),l=function(u){a(h,u);function h(d){var y=u.call(this,d)||this;return y.length=0,y.bufferList=[],y}return h.prototype._write=function(d,y,g){var m=f.from(d);this.bufferList.push(m),this.length+=d.length,this._onData&&this._onData(m),g()},h.prototype._read=function(d){if(this.bufferList.length===0)this.push(null);else for(var y=0;y<d&&this.bufferList.length>0;){var g=this.bufferList[0];this.push(g),this.bufferList.splice(0,1),y+=g.length}},h.prototype.subscribe=function(d){this._onData=d},h}(n.Duplex);s.SubscribableStream=l}).call(this)}).call(this,o("buffer").Buffer)},{buffer:35,stream:41}],28:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.generateGuid=void 0;var f=o("uuid");function a(){return(0,f.v4)()}s.generateGuid=a},{uuid:58}],29:[function(o,p,s){var f=this&&this.__awaiter||function(l,u,h,d){function y(g){return g instanceof h?g:new h(function(m){m(g)})}return new(h||(h=Promise))(function(g,m){function C(R){try{b(d.next(R))}catch(A){m(A)}}function _(R){try{b(d.throw(R))}catch(A){m(A)}}function b(R){R.done?g(R.value):y(R.value).then(C,_)}b((d=d.apply(l,u||[])).next())})},a=this&&this.__generator||function(l,u){var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,y,g,m;return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(b){return function(R){return _([b,R])}}function _(b){if(d)throw new TypeError("Generator is already executing.");for(;m&&(m=0,b[0]&&(h=0)),h;)try{if(d=1,y&&(g=b[0]&2?y.return:b[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,b[1])).done)return g;switch(y=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return h.label++,{value:b[1],done:!1};case 5:h.label++,y=b[1],b=[0];continue;case 7:b=h.ops.pop(),h.trys.pop();continue;default:if(g=h.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){h=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){h.label=b[1];break}if(b[0]===6&&h.label<g[1]){h.label=g[1],g=b;break}if(g&&h.label<g[2]){h.label=g[2],h.ops.push(b);break}g[2]&&h.ops.pop(),h.trys.pop();continue}b=u.call(l,h)}catch(R){b=[6,R],y=0}finally{d=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.BrowserWebSocket=void 0;var n=function(){function l(u){u&&(this.webSocket=u)}return l.prototype.connect=function(u){return f(this,void 0,void 0,function(){var h,d;return a(this,function(y){return this.webSocket||(this.webSocket=new WebSocket(u)),this.webSocket.onerror=function(g){d(g)},this.webSocket.onopen=function(g){h(g)},[2,new Promise(function(g,m){h=g,d=m})]})})},Object.defineProperty(l.prototype,"isConnected",{get:function(){return this.webSocket.readyState===1},enumerable:!1,configurable:!0}),l.prototype.write=function(u){this.webSocket.send(u)},l.prototype.close=function(){this.webSocket.close()},l.prototype.setOnMessageHandler=function(u){var h="buffer",d=[];this.webSocket.onmessage=function(y){var g=new FileReader,m={buffer:null};d.push(m),g.onload=function(C){var _=C.target;if(m[h]=_.result,d[0]===m)for(;0<d.length&&d[0][h];)u(d[0][h]),d.splice(0,1)},g.readAsArrayBuffer(y.data)}},l.prototype.setOnErrorHandler=function(u){this.webSocket.onerror=function(h){h&&u(h)}},l.prototype.setOnCloseHandler=function(u){this.webSocket.onclose=u},l}();s.BrowserWebSocket=n},{}],30:[function(o,p,s){var f=this&&this.__awaiter||function(g,m,C,_){function b(R){return R instanceof C?R:new C(function(A){A(R)})}return new(C||(C=Promise))(function(R,A){function w(D){try{P(_.next(D))}catch(N){A(N)}}function O(D){try{P(_.throw(D))}catch(N){A(N)}}function P(D){D.done?R(D.value):b(D.value).then(w,O)}P((_=_.apply(g,m||[])).next())})},a=this&&this.__generator||function(g,m){var C={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},_,b,R,A;return A={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function w(P){return function(D){return O([P,D])}}function O(P){if(_)throw new TypeError("Generator is already executing.");for(;A&&(A=0,P[0]&&(C=0)),C;)try{if(_=1,b&&(R=P[0]&2?b.return:P[0]?b.throw||((R=b.return)&&R.call(b),0):b.next)&&!(R=R.call(b,P[1])).done)return R;switch(b=0,R&&(P=[P[0]&2,R.value]),P[0]){case 0:case 1:R=P;break;case 4:return C.label++,{value:P[1],done:!1};case 5:C.label++,b=P[1],P=[0];continue;case 7:P=C.ops.pop(),C.trys.pop();continue;default:if(R=C.trys,!(R=R.length>0&&R[R.length-1])&&(P[0]===6||P[0]===2)){C=0;continue}if(P[0]===3&&(!R||P[1]>R[0]&&P[1]<R[3])){C.label=P[1];break}if(P[0]===6&&C.label<R[1]){C.label=R[1],R=P;break}if(R&&C.label<R[2]){C.label=R[2],C.ops.push(P);break}R[2]&&C.ops.pop(),C.trys.pop();continue}P=m.call(g,C)}catch(D){P=[6,D],b=0}finally{_=R=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.WebSocketClient=void 0;var n=o("./browserWebSocket"),l=o("../payloadTransport"),u=o("../protocolAdapter"),h=o("../payloads"),d=o("./webSocketTransport"),y=function(){function g(m){var C=m.url,_=m.requestHandler,b=m.disconnectionHandler,R=b===void 0?null:b;this._url=C,this._requestHandler=_,this._disconnectionHandler=R,this._requestManager=new h.RequestManager,this._sender=new l.PayloadSender,this._sender.disconnected=this.onConnectionDisconnected.bind(this),this._receiver=new l.PayloadReceiver,this._receiver.disconnected=this.onConnectionDisconnected.bind(this),this._protocolAdapter=new u.ProtocolAdapter(this._requestHandler,this._requestManager,this._sender,this._receiver)}return g.prototype.connect=function(){return f(this,void 0,void 0,function(){var m,C;return a(this,function(_){switch(_.label){case 0:return m=new n.BrowserWebSocket,[4,m.connect(this._url)];case 1:return _.sent(),C=new d.WebSocketTransport(m),this._sender.connect(C),this._receiver.connect(C),[2]}})})},g.prototype.disconnect=function(){this._sender.disconnect(new l.TransportDisconnectedEvent("Disconnect was called.")),this._receiver.disconnect(new l.TransportDisconnectedEvent("Disconnect was called."))},g.prototype.send=function(m){return f(this,void 0,void 0,function(){return a(this,function(C){return[2,this._protocolAdapter.sendRequest(m)]})})},g.prototype.onConnectionDisconnected=function(m,C){if(this._requestManager.rejectAllResponses(new Error("Disconnect was called.")),this._disconnectionHandler!=null){this._disconnectionHandler("Disconnected");return}throw new Error("Unable to re-connect client to transport for url ".concat(this._url,". Sender: '").concat(JSON.stringify(m),"'. Args:' ").concat(JSON.stringify(C)))},g}();s.WebSocketClient=y},{"../payloadTransport":10,"../payloads":16,"../protocolAdapter":23,"./browserWebSocket":29,"./webSocketTransport":32}],31:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.WebSocketTransport=s.WebSocketClient=s.BrowserWebSocket=void 0;var f=o("./browserWebSocket");Object.defineProperty(s,"BrowserWebSocket",{enumerable:!0,get:function(){return f.BrowserWebSocket}});var a=o("./browserWebSocketClient");Object.defineProperty(s,"WebSocketClient",{enumerable:!0,get:function(){return a.WebSocketClient}});var n=o("./webSocketTransport");Object.defineProperty(s,"WebSocketTransport",{enumerable:!0,get:function(){return n.WebSocketTransport}})},{"./browserWebSocket":29,"./browserWebSocketClient":30,"./webSocketTransport":32}],32:[function(o,p,s){(function(f){(function(){var a=this&&this.__awaiter||function(u,h,d,y){function g(m){return m instanceof d?m:new d(function(C){C(m)})}return new(d||(d=Promise))(function(m,C){function _(A){try{R(y.next(A))}catch(w){C(w)}}function b(A){try{R(y.throw(A))}catch(w){C(w)}}function R(A){A.done?m(A.value):g(A.value).then(_,b)}R((y=y.apply(u,h||[])).next())})},n=this&&this.__generator||function(u,h){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},y,g,m,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(R){return function(A){return b([R,A])}}function b(R){if(y)throw new TypeError("Generator is already executing.");for(;C&&(C=0,R[0]&&(d=0)),d;)try{if(y=1,g&&(m=R[0]&2?g.return:R[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,R[1])).done)return m;switch(g=0,m&&(R=[R[0]&2,m.value]),R[0]){case 0:case 1:m=R;break;case 4:return d.label++,{value:R[1],done:!1};case 5:d.label++,g=R[1],R=[0];continue;case 7:R=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(R[0]===6||R[0]===2)){d=0;continue}if(R[0]===3&&(!m||R[1]>m[0]&&R[1]<m[3])){d.label=R[1];break}if(R[0]===6&&d.label<m[1]){d.label=m[1],m=R;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(R);break}m[2]&&d.ops.pop(),d.trys.pop();continue}R=h.call(u,d)}catch(A){R=[6,A],g=0}finally{y=m=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.WebSocketTransport=void 0;var l=function(){function u(h){var d=this;this.ws=h,this._queue=[],this._activeOffset=0,this._activeReceiveCount=0,this.ws.setOnMessageHandler(function(y){d.onReceive(y)}),this.ws.setOnErrorHandler(function(y){d.onError(y)}),this.ws.setOnCloseHandler(function(){d.onClose()})}return u.prototype.send=function(h){var d;return!((d=this.ws)===null||d===void 0)&&d.isConnected?(this.ws.write(h),h.length):0},Object.defineProperty(u.prototype,"isConnected",{get:function(){var h;return!!(!((h=this.ws)===null||h===void 0)&&h.isConnected)},enumerable:!1,configurable:!0}),u.prototype.close=function(){var h;!((h=this.ws)===null||h===void 0)&&h.isConnected&&this.ws.close()},u.prototype.receive=function(h){return a(this,void 0,void 0,function(){var d,y=this;return n(this,function(g){if(this._activeReceiveResolve)throw new Error("Cannot call receive more than once before it has returned.");return this._activeReceiveCount=h,d=new Promise(function(m,C){y._activeReceiveResolve=m,y._activeReceiveReject=C}),this.trySignalData(),[2,d]})})},u.prototype.onReceive=function(h){this._queue&&h&&h.byteLength>0&&(this._queue.push(f.from(h)),this.trySignalData())},u.prototype.onClose=function(){this._activeReceiveReject&&this._activeReceiveReject(new Error("Socket was closed.")),this._active=null,this._activeOffset=0,this._activeReceiveResolve=null,this._activeReceiveReject=null,this._activeReceiveCount=0,this.ws=null},u.prototype.onError=function(h){this._activeReceiveReject&&this._activeReceiveReject(h),this.onClose()},u.prototype.trySignalData=function(){if(this._activeReceiveResolve&&(!this._active&&this._queue.length>0&&(this._active=this._queue.shift(),this._activeOffset=0),this._active)){if(this._activeOffset===0&&this._active.length===this._activeReceiveCount){var h=this._active;this._active=null,this._activeReceiveResolve(h)}else{var d=Math.min(this._activeReceiveCount,this._active.length-this._activeOffset),h=f.alloc(d);this._active.copy(h,0,this._activeOffset,this._activeOffset+d),this._activeOffset+=d,this._activeOffset>=this._active.length&&(this._active=null,this._activeOffset=0),this._activeReceiveResolve(h)}this._activeReceiveCount=0,this._activeReceiveReject=null,this._activeReceiveResolve=null}},u}();s.WebSocketTransport=l}).call(this)}).call(this,o("buffer").Buffer)},{buffer:35}],33:[function(o,p,s){},{}],34:[function(o,p,s){s.byteLength=y,s.toByteArray=m,s.fromByteArray=b;for(var f=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,h=l.length;u<h;++u)f[u]=l[u],a[l.charCodeAt(u)]=u;a[45]=62,a[95]=63;function d(R){var A=R.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=R.indexOf("=");w===-1&&(w=A);var O=w===A?0:4-w%4;return[w,O]}function y(R){var A=d(R),w=A[0],O=A[1];return(w+O)*3/4-O}function g(R,A,w){return(A+w)*3/4-w}function m(R){var A,w=d(R),O=w[0],P=w[1],D=new n(g(R,O,P)),N=0,$=P>0?O-4:O,Y;for(Y=0;Y<$;Y+=4)A=a[R.charCodeAt(Y)]<<18|a[R.charCodeAt(Y+1)]<<12|a[R.charCodeAt(Y+2)]<<6|a[R.charCodeAt(Y+3)],D[N++]=A>>16&255,D[N++]=A>>8&255,D[N++]=A&255;return P===2&&(A=a[R.charCodeAt(Y)]<<2|a[R.charCodeAt(Y+1)]>>4,D[N++]=A&255),P===1&&(A=a[R.charCodeAt(Y)]<<10|a[R.charCodeAt(Y+1)]<<4|a[R.charCodeAt(Y+2)]>>2,D[N++]=A>>8&255,D[N++]=A&255),D}function C(R){return f[R>>18&63]+f[R>>12&63]+f[R>>6&63]+f[R&63]}function _(R,A,w){for(var O,P=[],D=A;D<w;D+=3)O=(R[D]<<16&16711680)+(R[D+1]<<8&65280)+(R[D+2]&255),P.push(C(O));return P.join("")}function b(R){for(var A,w=R.length,O=w%3,P=[],D=16383,N=0,$=w-O;N<$;N+=D)P.push(_(R,N,N+D>$?$:N+D));return O===1?(A=R[w-1],P.push(f[A>>2]+f[A<<4&63]+"==")):O===2&&(A=(R[w-2]<<8)+R[w-1],P.push(f[A>>10]+f[A>>4&63]+f[A<<2&63]+"=")),P.join("")}},{}],35:[function(o,p,s){(function(f){(function(){var a=o("base64-js"),n=o("ieee754");s.Buffer=d,s.SlowBuffer=O,s.INSPECT_MAX_BYTES=50;var l=2147483647;s.kMaxLength=l,d.TYPED_ARRAY_SUPPORT=u(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var x=new Uint8Array(1);return x.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},x.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function h(x){if(x>l)throw new RangeError('The value "'+x+'" is invalid for option "size"');var M=new Uint8Array(x);return M.__proto__=d.prototype,M}function d(x,M,k){if(typeof x=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(x)}return y(x,M,k)}typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192;function y(x,M,k){if(typeof x=="string")return _(x,M);if(ArrayBuffer.isView(x))return b(x);if(x==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(K(x,ArrayBuffer)||x&&K(x.buffer,ArrayBuffer))return R(x,M,k);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var H=x.valueOf&&x.valueOf();if(H!=null&&H!==x)return d.from(H,M,k);var ne=A(x);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return d.from(x[Symbol.toPrimitive]("string"),M,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}d.from=function(x,M,k){return y(x,M,k)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array;function g(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function m(x,M,k){return g(x),x<=0?h(x):M!==void 0?typeof k=="string"?h(x).fill(M,k):h(x).fill(M):h(x)}d.alloc=function(x,M,k){return m(x,M,k)};function C(x){return g(x),h(x<0?0:w(x)|0)}d.allocUnsafe=function(x){return C(x)},d.allocUnsafeSlow=function(x){return C(x)};function _(x,M){if((typeof M!="string"||M==="")&&(M="utf8"),!d.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var k=P(x,M)|0,H=h(k),ne=H.write(x,M);return ne!==k&&(H=H.slice(0,ne)),H}function b(x){for(var M=x.length<0?0:w(x.length)|0,k=h(M),H=0;H<M;H+=1)k[H]=x[H]&255;return k}function R(x,M,k){if(M<0||x.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<M+(k||0))throw new RangeError('"length" is outside of buffer bounds');var H;return M===void 0&&k===void 0?H=new Uint8Array(x):k===void 0?H=new Uint8Array(x,M):H=new Uint8Array(x,M,k),H.__proto__=d.prototype,H}function A(x){if(d.isBuffer(x)){var M=w(x.length)|0,k=h(M);return k.length===0||x.copy(k,0,0,M),k}if(x.length!==void 0)return typeof x.length!="number"||Q(x.length)?h(0):b(x);if(x.type==="Buffer"&&Array.isArray(x.data))return b(x.data)}function w(x){if(x>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return x|0}function O(x){return+x!=x&&(x=0),d.alloc(+x)}d.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==d.prototype},d.compare=function(M,k){if(K(M,Uint8Array)&&(M=d.from(M,M.offset,M.byteLength)),K(k,Uint8Array)&&(k=d.from(k,k.offset,k.byteLength)),!d.isBuffer(M)||!d.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===k)return 0;for(var H=M.length,ne=k.length,Se=0,Re=Math.min(H,ne);Se<Re;++Se)if(M[Se]!==k[Se]){H=M[Se],ne=k[Se];break}return H<ne?-1:ne<H?1:0},d.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(M,k){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return d.alloc(0);var H;if(k===void 0)for(k=0,H=0;H<M.length;++H)k+=M[H].length;var ne=d.allocUnsafe(k),Se=0;for(H=0;H<M.length;++H){var Re=M[H];if(K(Re,Uint8Array)&&(Re=d.from(Re)),!d.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(ne,Se),Se+=Re.length}return ne};function P(x,M){if(d.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||K(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);var k=x.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&k===0)return 0;for(var ne=!1;;)switch(M){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return de(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Me(x).length;default:if(ne)return H?-1:de(x).length;M=(""+M).toLowerCase(),ne=!0}}d.byteLength=P;function D(x,M,k){var H=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,M>>>=0,k<=M))return"";for(x||(x="utf8");;)switch(x){case"hex":return le(this,M,k);case"utf8":case"utf-8":return Z(this,M,k);case"ascii":return F(this,M,k);case"latin1":case"binary":return te(this,M,k);case"base64":return J(this,M,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,M,k);default:if(H)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),H=!0}}d.prototype._isBuffer=!0;function N(x,M,k){var H=x[M];x[M]=x[k],x[k]=H}d.prototype.swap16=function(){var M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<M;k+=2)N(this,k,k+1);return this},d.prototype.swap32=function(){var M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<M;k+=4)N(this,k,k+3),N(this,k+1,k+2);return this},d.prototype.swap64=function(){var M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<M;k+=8)N(this,k,k+7),N(this,k+1,k+6),N(this,k+2,k+5),N(this,k+3,k+4);return this},d.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?Z(this,0,M):D.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(M){if(!d.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:d.compare(this,M)===0},d.prototype.inspect=function(){var M="",k=s.INSPECT_MAX_BYTES;return M=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(M+=" ... "),"<Buffer "+M+">"},d.prototype.compare=function(M,k,H,ne,Se){if(K(M,Uint8Array)&&(M=d.from(M,M.offset,M.byteLength)),!d.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(k===void 0&&(k=0),H===void 0&&(H=M?M.length:0),ne===void 0&&(ne=0),Se===void 0&&(Se=this.length),k<0||H>M.length||ne<0||Se>this.length)throw new RangeError("out of range index");if(ne>=Se&&k>=H)return 0;if(ne>=Se)return-1;if(k>=H)return 1;if(k>>>=0,H>>>=0,ne>>>=0,Se>>>=0,this===M)return 0;for(var Re=Se-ne,L=H-k,T=Math.min(Re,L),I=this.slice(ne,Se),V=M.slice(k,H),W=0;W<T;++W)if(I[W]!==V[W]){Re=I[W],L=V[W];break}return Re<L?-1:L<Re?1:0};function $(x,M,k,H,ne){if(x.length===0)return-1;if(typeof k=="string"?(H=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,Q(k)&&(k=ne?0:x.length-1),k<0&&(k=x.length+k),k>=x.length){if(ne)return-1;k=x.length-1}else if(k<0)if(ne)k=0;else return-1;if(typeof M=="string"&&(M=d.from(M,H)),d.isBuffer(M))return M.length===0?-1:Y(x,M,k,H,ne);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(x,M,k):Uint8Array.prototype.lastIndexOf.call(x,M,k):Y(x,[M],k,H,ne);throw new TypeError("val must be string, number or Buffer")}function Y(x,M,k,H,ne){var Se=1,Re=x.length,L=M.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(x.length<2||M.length<2)return-1;Se=2,Re/=2,L/=2,k/=2}function T(ue,Te){return Se===1?ue[Te]:ue.readUInt16BE(Te*Se)}var I;if(ne){var V=-1;for(I=k;I<Re;I++)if(T(x,I)===T(M,V===-1?0:I-V)){if(V===-1&&(V=I),I-V+1===L)return V*Se}else V!==-1&&(I-=I-V),V=-1}else for(k+L>Re&&(k=Re-L),I=k;I>=0;I--){for(var W=!0,ee=0;ee<L;ee++)if(T(x,I+ee)!==T(M,ee)){W=!1;break}if(W)return I}return-1}d.prototype.includes=function(M,k,H){return this.indexOf(M,k,H)!==-1},d.prototype.indexOf=function(M,k,H){return $(this,M,k,H,!0)},d.prototype.lastIndexOf=function(M,k,H){return $(this,M,k,H,!1)};function oe(x,M,k,H){k=Number(k)||0;var ne=x.length-k;H?(H=Number(H),H>ne&&(H=ne)):H=ne;var Se=M.length;H>Se/2&&(H=Se/2);for(var Re=0;Re<H;++Re){var L=parseInt(M.substr(Re*2,2),16);if(Q(L))return Re;x[k+Re]=L}return Re}function ae(x,M,k,H){return Oe(de(M,x.length-k),x,k,H)}function fe(x,M,k,H){return Oe(ie(M),x,k,H)}function se(x,M,k,H){return fe(x,M,k,H)}function B(x,M,k,H){return Oe(Me(M),x,k,H)}function j(x,M,k,H){return Oe(we(M,x.length-k),x,k,H)}d.prototype.write=function(M,k,H,ne){if(k===void 0)ne="utf8",H=this.length,k=0;else if(H===void 0&&typeof k=="string")ne=k,H=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(H)?(H=H>>>0,ne===void 0&&(ne="utf8")):(ne=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Se=this.length-k;if((H===void 0||H>Se)&&(H=Se),M.length>0&&(H<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");for(var Re=!1;;)switch(ne){case"hex":return oe(this,M,k,H);case"utf8":case"utf-8":return ae(this,M,k,H);case"ascii":return fe(this,M,k,H);case"latin1":case"binary":return se(this,M,k,H);case"base64":return B(this,M,k,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,M,k,H);default:if(Re)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),Re=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(x,M,k){return M===0&&k===x.length?a.fromByteArray(x):a.fromByteArray(x.slice(M,k))}function Z(x,M,k){k=Math.min(x.length,k);for(var H=[],ne=M;ne<k;){var Se=x[ne],Re=null,L=Se>239?4:Se>223?3:Se>191?2:1;if(ne+L<=k){var T,I,V,W;switch(L){case 1:Se<128&&(Re=Se);break;case 2:T=x[ne+1],(T&192)===128&&(W=(Se&31)<<6|T&63,W>127&&(Re=W));break;case 3:T=x[ne+1],I=x[ne+2],(T&192)===128&&(I&192)===128&&(W=(Se&15)<<12|(T&63)<<6|I&63,W>2047&&(W<55296||W>57343)&&(Re=W));break;case 4:T=x[ne+1],I=x[ne+2],V=x[ne+3],(T&192)===128&&(I&192)===128&&(V&192)===128&&(W=(Se&15)<<18|(T&63)<<12|(I&63)<<6|V&63,W>65535&&W<1114112&&(Re=W))}}Re===null?(Re=65533,L=1):Re>65535&&(Re-=65536,H.push(Re>>>10&1023|55296),Re=56320|Re&1023),H.push(Re),ne+=L}return z(H)}var G=4096;function z(x){var M=x.length;if(M<=G)return String.fromCharCode.apply(String,x);for(var k="",H=0;H<M;)k+=String.fromCharCode.apply(String,x.slice(H,H+=G));return k}function F(x,M,k){var H="";k=Math.min(x.length,k);for(var ne=M;ne<k;++ne)H+=String.fromCharCode(x[ne]&127);return H}function te(x,M,k){var H="";k=Math.min(x.length,k);for(var ne=M;ne<k;++ne)H+=String.fromCharCode(x[ne]);return H}function le(x,M,k){var H=x.length;(!M||M<0)&&(M=0),(!k||k<0||k>H)&&(k=H);for(var ne="",Se=M;Se<k;++Se)ne+=pt(x[Se]);return ne}function pe(x,M,k){for(var H=x.slice(M,k),ne="",Se=0;Se<H.length;Se+=2)ne+=String.fromCharCode(H[Se]+H[Se+1]*256);return ne}d.prototype.slice=function(M,k){var H=this.length;M=~~M,k=k===void 0?H:~~k,M<0?(M+=H,M<0&&(M=0)):M>H&&(M=H),k<0?(k+=H,k<0&&(k=0)):k>H&&(k=H),k<M&&(k=M);var ne=this.subarray(M,k);return ne.__proto__=d.prototype,ne};function _e(x,M,k){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+M>k)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUIntLE=function(M,k,H){M=M>>>0,k=k>>>0,H||_e(M,k,this.length);for(var ne=this[M],Se=1,Re=0;++Re<k&&(Se*=256);)ne+=this[M+Re]*Se;return ne},d.prototype.readUIntBE=function(M,k,H){M=M>>>0,k=k>>>0,H||_e(M,k,this.length);for(var ne=this[M+--k],Se=1;k>0&&(Se*=256);)ne+=this[M+--k]*Se;return ne},d.prototype.readUInt8=function(M,k){return M=M>>>0,k||_e(M,1,this.length),this[M]},d.prototype.readUInt16LE=function(M,k){return M=M>>>0,k||_e(M,2,this.length),this[M]|this[M+1]<<8},d.prototype.readUInt16BE=function(M,k){return M=M>>>0,k||_e(M,2,this.length),this[M]<<8|this[M+1]},d.prototype.readUInt32LE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},d.prototype.readUInt32BE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},d.prototype.readIntLE=function(M,k,H){M=M>>>0,k=k>>>0,H||_e(M,k,this.length);for(var ne=this[M],Se=1,Re=0;++Re<k&&(Se*=256);)ne+=this[M+Re]*Se;return Se*=128,ne>=Se&&(ne-=Math.pow(2,8*k)),ne},d.prototype.readIntBE=function(M,k,H){M=M>>>0,k=k>>>0,H||_e(M,k,this.length);for(var ne=k,Se=1,Re=this[M+--ne];ne>0&&(Se*=256);)Re+=this[M+--ne]*Se;return Se*=128,Re>=Se&&(Re-=Math.pow(2,8*k)),Re},d.prototype.readInt8=function(M,k){return M=M>>>0,k||_e(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},d.prototype.readInt16LE=function(M,k){M=M>>>0,k||_e(M,2,this.length);var H=this[M]|this[M+1]<<8;return H&32768?H|4294901760:H},d.prototype.readInt16BE=function(M,k){M=M>>>0,k||_e(M,2,this.length);var H=this[M+1]|this[M]<<8;return H&32768?H|4294901760:H},d.prototype.readInt32LE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},d.prototype.readInt32BE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},d.prototype.readFloatLE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),n.read(this,M,!0,23,4)},d.prototype.readFloatBE=function(M,k){return M=M>>>0,k||_e(M,4,this.length),n.read(this,M,!1,23,4)},d.prototype.readDoubleLE=function(M,k){return M=M>>>0,k||_e(M,8,this.length),n.read(this,M,!0,52,8)},d.prototype.readDoubleBE=function(M,k){return M=M>>>0,k||_e(M,8,this.length),n.read(this,M,!1,52,8)};function Ee(x,M,k,H,ne,Se){if(!d.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ne||M<Se)throw new RangeError('"value" argument is out of bounds');if(k+H>x.length)throw new RangeError("Index out of range")}d.prototype.writeUIntLE=function(M,k,H,ne){if(M=+M,k=k>>>0,H=H>>>0,!ne){var Se=Math.pow(2,8*H)-1;Ee(this,M,k,H,Se,0)}var Re=1,L=0;for(this[k]=M&255;++L<H&&(Re*=256);)this[k+L]=M/Re&255;return k+H},d.prototype.writeUIntBE=function(M,k,H,ne){if(M=+M,k=k>>>0,H=H>>>0,!ne){var Se=Math.pow(2,8*H)-1;Ee(this,M,k,H,Se,0)}var Re=H-1,L=1;for(this[k+Re]=M&255;--Re>=0&&(L*=256);)this[k+Re]=M/L&255;return k+H},d.prototype.writeUInt8=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,1,255,0),this[k]=M&255,k+1},d.prototype.writeUInt16LE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,2,65535,0),this[k]=M&255,this[k+1]=M>>>8,k+2},d.prototype.writeUInt16BE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,2,65535,0),this[k]=M>>>8,this[k+1]=M&255,k+2},d.prototype.writeUInt32LE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,4,4294967295,0),this[k+3]=M>>>24,this[k+2]=M>>>16,this[k+1]=M>>>8,this[k]=M&255,k+4},d.prototype.writeUInt32BE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,4,4294967295,0),this[k]=M>>>24,this[k+1]=M>>>16,this[k+2]=M>>>8,this[k+3]=M&255,k+4},d.prototype.writeIntLE=function(M,k,H,ne){if(M=+M,k=k>>>0,!ne){var Se=Math.pow(2,8*H-1);Ee(this,M,k,H,Se-1,-Se)}var Re=0,L=1,T=0;for(this[k]=M&255;++Re<H&&(L*=256);)M<0&&T===0&&this[k+Re-1]!==0&&(T=1),this[k+Re]=(M/L>>0)-T&255;return k+H},d.prototype.writeIntBE=function(M,k,H,ne){if(M=+M,k=k>>>0,!ne){var Se=Math.pow(2,8*H-1);Ee(this,M,k,H,Se-1,-Se)}var Re=H-1,L=1,T=0;for(this[k+Re]=M&255;--Re>=0&&(L*=256);)M<0&&T===0&&this[k+Re+1]!==0&&(T=1),this[k+Re]=(M/L>>0)-T&255;return k+H},d.prototype.writeInt8=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,1,127,-128),M<0&&(M=255+M+1),this[k]=M&255,k+1},d.prototype.writeInt16LE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,2,32767,-32768),this[k]=M&255,this[k+1]=M>>>8,k+2},d.prototype.writeInt16BE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,2,32767,-32768),this[k]=M>>>8,this[k+1]=M&255,k+2},d.prototype.writeInt32LE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,4,2147483647,-2147483648),this[k]=M&255,this[k+1]=M>>>8,this[k+2]=M>>>16,this[k+3]=M>>>24,k+4},d.prototype.writeInt32BE=function(M,k,H){return M=+M,k=k>>>0,H||Ee(this,M,k,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[k]=M>>>24,this[k+1]=M>>>16,this[k+2]=M>>>8,this[k+3]=M&255,k+4};function Ne(x,M,k,H,ne,Se){if(k+H>x.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Pe(x,M,k,H,ne){return M=+M,k=k>>>0,ne||Ne(x,M,k,4),n.write(x,M,k,H,23,4),k+4}d.prototype.writeFloatLE=function(M,k,H){return Pe(this,M,k,!0,H)},d.prototype.writeFloatBE=function(M,k,H){return Pe(this,M,k,!1,H)};function Le(x,M,k,H,ne){return M=+M,k=k>>>0,ne||Ne(x,M,k,8),n.write(x,M,k,H,52,8),k+8}d.prototype.writeDoubleLE=function(M,k,H){return Le(this,M,k,!0,H)},d.prototype.writeDoubleBE=function(M,k,H){return Le(this,M,k,!1,H)},d.prototype.copy=function(M,k,H,ne){if(!d.isBuffer(M))throw new TypeError("argument should be a Buffer");if(H||(H=0),!ne&&ne!==0&&(ne=this.length),k>=M.length&&(k=M.length),k||(k=0),ne>0&&ne<H&&(ne=H),ne===H||M.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),M.length-k<ne-H&&(ne=M.length-k+H);var Se=ne-H;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(k,H,ne);else if(this===M&&H<k&&k<ne)for(var Re=Se-1;Re>=0;--Re)M[Re+k]=this[Re+H];else Uint8Array.prototype.set.call(M,this.subarray(H,ne),k);return Se},d.prototype.fill=function(M,k,H,ne){if(typeof M=="string"){if(typeof k=="string"?(ne=k,k=0,H=this.length):typeof H=="string"&&(ne=H,H=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!d.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(M.length===1){var Se=M.charCodeAt(0);(ne==="utf8"&&Se<128||ne==="latin1")&&(M=Se)}}else typeof M=="number"&&(M=M&255);if(k<0||this.length<k||this.length<H)throw new RangeError("Out of range index");if(H<=k)return this;k=k>>>0,H=H===void 0?this.length:H>>>0,M||(M=0);var Re;if(typeof M=="number")for(Re=k;Re<H;++Re)this[Re]=M;else{var L=d.isBuffer(M)?M:d.from(M,ne),T=L.length;if(T===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Re=0;Re<H-k;++Re)this[Re+k]=L[Re%T]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function lt(x){if(x=x.split("=")[0],x=x.trim().replace(qe,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function pt(x){return x<16?"0"+x.toString(16):x.toString(16)}function de(x,M){M=M||1/0;for(var k,H=x.length,ne=null,Se=[],Re=0;Re<H;++Re){if(k=x.charCodeAt(Re),k>55295&&k<57344){if(!ne){if(k>56319){(M-=3)>-1&&Se.push(239,191,189);continue}else if(Re+1===H){(M-=3)>-1&&Se.push(239,191,189);continue}ne=k;continue}if(k<56320){(M-=3)>-1&&Se.push(239,191,189),ne=k;continue}k=(ne-55296<<10|k-56320)+65536}else ne&&(M-=3)>-1&&Se.push(239,191,189);if(ne=null,k<128){if((M-=1)<0)break;Se.push(k)}else if(k<2048){if((M-=2)<0)break;Se.push(k>>6|192,k&63|128)}else if(k<65536){if((M-=3)<0)break;Se.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((M-=4)<0)break;Se.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return Se}function ie(x){for(var M=[],k=0;k<x.length;++k)M.push(x.charCodeAt(k)&255);return M}function we(x,M){for(var k,H,ne,Se=[],Re=0;Re<x.length&&!((M-=2)<0);++Re)k=x.charCodeAt(Re),H=k>>8,ne=k%256,Se.push(ne),Se.push(H);return Se}function Me(x){return a.toByteArray(lt(x))}function Oe(x,M,k,H){for(var ne=0;ne<H&&!(ne+k>=M.length||ne>=x.length);++ne)M[ne+k]=x[ne];return ne}function K(x,M){return x instanceof M||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===M.name}function Q(x){return x!==x}}).call(this)}).call(this,o("buffer").Buffer)},{"base64-js":34,buffer:35,ieee754:37}],36:[function(o,p,s){var f=typeof Reflect=="object"?Reflect:null,a=f&&typeof f.apply=="function"?f.apply:function(N,$,Y){return Function.prototype.apply.call(N,$,Y)},n;f&&typeof f.ownKeys=="function"?n=f.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function l(D){console&&console.warn&&console.warn(D)}var u=Number.isNaN||function(N){return N!==N};function h(){h.init.call(this)}p.exports=h,p.exports.once=P,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var d=10;function y(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(D){if(typeof D!="number"||D<0||u(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");d=D}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||u(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function g(D){return D._maxListeners===void 0?h.defaultMaxListeners:D._maxListeners}h.prototype.getMaxListeners=function(){return g(this)},h.prototype.emit=function(N){for(var $=[],Y=1;Y<arguments.length;Y++)$.push(arguments[Y]);var oe=N==="error",ae=this._events;if(ae!==void 0)oe=oe&&ae.error===void 0;else if(!oe)return!1;if(oe){var fe;if($.length>0&&(fe=$[0]),fe instanceof Error)throw fe;var se=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw se.context=fe,se}var B=ae[N];if(B===void 0)return!1;if(typeof B=="function")a(B,this,$);else for(var j=B.length,J=A(B,j),Y=0;Y<j;++Y)a(J[Y],this,$);return!0};function m(D,N,$,Y){var oe,ae,fe;if(y($),ae=D._events,ae===void 0?(ae=D._events=Object.create(null),D._eventsCount=0):(ae.newListener!==void 0&&(D.emit("newListener",N,$.listener?$.listener:$),ae=D._events),fe=ae[N]),fe===void 0)fe=ae[N]=$,++D._eventsCount;else if(typeof fe=="function"?fe=ae[N]=Y?[$,fe]:[fe,$]:Y?fe.unshift($):fe.push($),oe=g(D),oe>0&&fe.length>oe&&!fe.warned){fe.warned=!0;var se=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");se.name="MaxListenersExceededWarning",se.emitter=D,se.type=N,se.count=fe.length,l(se)}return D}h.prototype.addListener=function(N,$){return m(this,N,$,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(N,$){return m(this,N,$,!0)};function C(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(D,N,$){var Y={fired:!1,wrapFn:void 0,target:D,type:N,listener:$},oe=C.bind(Y);return oe.listener=$,Y.wrapFn=oe,oe}h.prototype.once=function(N,$){return y($),this.on(N,_(this,N,$)),this},h.prototype.prependOnceListener=function(N,$){return y($),this.prependListener(N,_(this,N,$)),this},h.prototype.removeListener=function(N,$){var Y,oe,ae,fe,se;if(y($),oe=this._events,oe===void 0)return this;if(Y=oe[N],Y===void 0)return this;if(Y===$||Y.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete oe[N],oe.removeListener&&this.emit("removeListener",N,Y.listener||$));else if(typeof Y!="function"){for(ae=-1,fe=Y.length-1;fe>=0;fe--)if(Y[fe]===$||Y[fe].listener===$){se=Y[fe].listener,ae=fe;break}if(ae<0)return this;ae===0?Y.shift():w(Y,ae),Y.length===1&&(oe[N]=Y[0]),oe.removeListener!==void 0&&this.emit("removeListener",N,se||$)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(N){var $,Y,oe;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[N]),this;if(arguments.length===0){var ae=Object.keys(Y),fe;for(oe=0;oe<ae.length;++oe)fe=ae[oe],fe!=="removeListener"&&this.removeAllListeners(fe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=Y[N],typeof $=="function")this.removeListener(N,$);else if($!==void 0)for(oe=$.length-1;oe>=0;oe--)this.removeListener(N,$[oe]);return this};function b(D,N,$){var Y=D._events;if(Y===void 0)return[];var oe=Y[N];return oe===void 0?[]:typeof oe=="function"?$?[oe.listener||oe]:[oe]:$?O(oe):A(oe,oe.length)}h.prototype.listeners=function(N){return b(this,N,!0)},h.prototype.rawListeners=function(N){return b(this,N,!1)},h.listenerCount=function(D,N){return typeof D.listenerCount=="function"?D.listenerCount(N):R.call(D,N)},h.prototype.listenerCount=R;function R(D){var N=this._events;if(N!==void 0){var $=N[D];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function A(D,N){for(var $=new Array(N),Y=0;Y<N;++Y)$[Y]=D[Y];return $}function w(D,N){for(;N+1<D.length;N++)D[N]=D[N+1];D.pop()}function O(D){for(var N=new Array(D.length),$=0;$<N.length;++$)N[$]=D[$].listener||D[$];return N}function P(D,N){return new Promise(function($,Y){function oe(){ae!==void 0&&D.removeListener("error",ae),$([].slice.call(arguments))}var ae;N!=="error"&&(ae=function(se){D.removeListener(N,oe),Y(se)},D.once("error",ae)),D.once(N,oe)})}},{}],37:[function(o,p,s){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */s.read=function(f,a,n,l,u){var h,d,y=u*8-l-1,g=(1<<y)-1,m=g>>1,C=-7,_=n?u-1:0,b=n?-1:1,R=f[a+_];for(_+=b,h=R&(1<<-C)-1,R>>=-C,C+=y;C>0;h=h*256+f[a+_],_+=b,C-=8);for(d=h&(1<<-C)-1,h>>=-C,C+=l;C>0;d=d*256+f[a+_],_+=b,C-=8);if(h===0)h=1-m;else{if(h===g)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,l),h=h-m}return(R?-1:1)*d*Math.pow(2,h-l)},s.write=function(f,a,n,l,u,h){var d,y,g,m=h*8-u-1,C=(1<<m)-1,_=C>>1,b=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=l?0:h-1,A=l?1:-1,w=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(y=isNaN(a)?1:0,d=C):(d=Math.floor(Math.log(a)/Math.LN2),a*(g=Math.pow(2,-d))<1&&(d--,g*=2),d+_>=1?a+=b/g:a+=b*Math.pow(2,1-_),a*g>=2&&(d++,g/=2),d+_>=C?(y=0,d=C):d+_>=1?(y=(a*g-1)*Math.pow(2,u),d=d+_):(y=a*Math.pow(2,_-1)*Math.pow(2,u),d=0));u>=8;f[n+R]=y&255,R+=A,y/=256,u-=8);for(d=d<<u|y,m+=u;m>0;f[n+R]=d&255,R+=A,d/=256,m-=8);f[n+R-A]|=w*128}},{}],38:[function(o,p,s){typeof Object.create=="function"?p.exports=function(a,n){n&&(a.super_=n,a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:p.exports=function(a,n){if(n){a.super_=n;var l=function(){};l.prototype=n.prototype,a.prototype=new l,a.prototype.constructor=a}}},{}],39:[function(o,p,s){var f=p.exports={},a,n;function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=l}catch{a=l}try{typeof clearTimeout=="function"?n=clearTimeout:n=u}catch{n=u}})();function h(w){if(a===setTimeout)return setTimeout(w,0);if((a===l||!a)&&setTimeout)return a=setTimeout,setTimeout(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this,w,0)}}}function d(w){if(n===clearTimeout)return clearTimeout(w);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(w);try{return n(w)}catch{try{return n.call(null,w)}catch{return n.call(this,w)}}}var y=[],g=!1,m,C=-1;function _(){!g||!m||(g=!1,m.length?y=m.concat(y):C=-1,y.length&&b())}function b(){if(!g){var w=h(_);g=!0;for(var O=y.length;O;){for(m=y,y=[];++C<O;)m&&m[C].run();C=-1,O=y.length}m=null,g=!1,d(w)}}f.nextTick=function(w){var O=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)O[P-1]=arguments[P];y.push(new R(w,O)),y.length===1&&!g&&h(b)};function R(w,O){this.fun=w,this.array=O}R.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function A(){}f.on=A,f.addListener=A,f.once=A,f.off=A,f.removeListener=A,f.removeAllListeners=A,f.emit=A,f.prependListener=A,f.prependOnceListener=A,f.listeners=function(w){return[]},f.binding=function(w){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(w){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],40:[function(o,p,s){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var f=o("buffer"),a=f.Buffer;function n(u,h){for(var d in u)h[d]=u[d]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?p.exports=f:(n(f,s),s.Buffer=l);function l(u,h,d){return a(u,h,d)}l.prototype=Object.create(a.prototype),n(a,l),l.from=function(u,h,d){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,h,d)},l.alloc=function(u,h,d){if(typeof u!="number")throw new TypeError("Argument must be a number");var y=a(u);return h!==void 0?typeof d=="string"?y.fill(h,d):y.fill(h):y.fill(0),y},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(u)}},{buffer:35}],41:[function(o,p,s){p.exports=n;var f=o("events").EventEmitter,a=o("inherits");a(n,f),n.Readable=o("readable-stream/lib/_stream_readable.js"),n.Writable=o("readable-stream/lib/_stream_writable.js"),n.Duplex=o("readable-stream/lib/_stream_duplex.js"),n.Transform=o("readable-stream/lib/_stream_transform.js"),n.PassThrough=o("readable-stream/lib/_stream_passthrough.js"),n.finished=o("readable-stream/lib/internal/streams/end-of-stream.js"),n.pipeline=o("readable-stream/lib/internal/streams/pipeline.js"),n.Stream=n;function n(){f.call(this)}n.prototype.pipe=function(l,u){var h=this;function d(R){l.writable&&l.write(R)===!1&&h.pause&&h.pause()}h.on("data",d);function y(){h.readable&&h.resume&&h.resume()}l.on("drain",y),!l._isStdio&&(!u||u.end!==!1)&&(h.on("end",m),h.on("close",C));var g=!1;function m(){g||(g=!0,l.end())}function C(){g||(g=!0,typeof l.destroy=="function"&&l.destroy())}function _(R){if(b(),f.listenerCount(this,"error")===0)throw R}h.on("error",_),l.on("error",_);function b(){h.removeListener("data",d),l.removeListener("drain",y),h.removeListener("end",m),h.removeListener("close",C),h.removeListener("error",_),l.removeListener("error",_),h.removeListener("end",b),h.removeListener("close",b),l.removeListener("close",b)}return h.on("end",b),h.on("close",b),l.on("close",b),l.emit("pipe",h),l}},{events:36,inherits:38,"readable-stream/lib/_stream_duplex.js":43,"readable-stream/lib/_stream_passthrough.js":44,"readable-stream/lib/_stream_readable.js":45,"readable-stream/lib/_stream_transform.js":46,"readable-stream/lib/_stream_writable.js":47,"readable-stream/lib/internal/streams/end-of-stream.js":51,"readable-stream/lib/internal/streams/pipeline.js":53}],42:[function(o,p,s){function f(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var a={};function n(y,g,m){m||(m=Error);function C(b,R,A){return typeof g=="string"?g:g(b,R,A)}var _=function(b){f(R,b);function R(A,w,O){return b.call(this,C(A,w,O))||this}return R}(m);_.prototype.name=m.name,_.prototype.code=y,a[y]=_}function l(y,g){if(Array.isArray(y)){var m=y.length;return y=y.map(function(C){return String(C)}),m>2?"one of ".concat(g," ").concat(y.slice(0,m-1).join(", "),", or ")+y[m-1]:m===2?"one of ".concat(g," ").concat(y[0]," or ").concat(y[1]):"of ".concat(g," ").concat(y[0])}else return"of ".concat(g," ").concat(String(y))}function u(y,g,m){return y.substr(0,g.length)===g}function h(y,g,m){return(m===void 0||m>y.length)&&(m=y.length),y.substring(m-g.length,m)===g}function d(y,g,m){return typeof m!="number"&&(m=0),m+g.length>y.length?!1:y.indexOf(g,m)!==-1}n("ERR_INVALID_OPT_VALUE",function(y,g){return'The value "'+g+'" is invalid for option "'+y+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(y,g,m){var C;typeof g=="string"&&u(g,"not ")?(C="must not be",g=g.replace(/^not /,"")):C="must be";var _;if(h(y," argument"))_="The ".concat(y," ").concat(C," ").concat(l(g,"type"));else{var b=d(y,".")?"property":"argument";_='The "'.concat(y,'" ').concat(b," ").concat(C," ").concat(l(g,"type"))}return _+=". Received type ".concat(typeof m),_},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),p.exports.codes=a},{}],43:[function(o,p,s){(function(f){(function(){var a=Object.keys||function(C){var _=[];for(var b in C)_.push(b);return _};p.exports=y;var n=o("./_stream_readable"),l=o("./_stream_writable");o("inherits")(y,n);for(var u=a(l.prototype),h=0;h<u.length;h++){var d=u[h];y.prototype[d]||(y.prototype[d]=l.prototype[d])}function y(C){if(!(this instanceof y))return new y(C);n.call(this,C),l.call(this,C),this.allowHalfOpen=!0,C&&(C.readable===!1&&(this.readable=!1),C.writable===!1&&(this.writable=!1),C.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function g(){this._writableState.ended||f.nextTick(m,this)}function m(C){C.end()}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=_,this._writableState.destroyed=_)}})}).call(this)}).call(this,o("_process"))},{"./_stream_readable":45,"./_stream_writable":47,_process:39,inherits:38}],44:[function(o,p,s){p.exports=a;var f=o("./_stream_transform");o("inherits")(a,f);function a(n){if(!(this instanceof a))return new a(n);f.call(this,n)}a.prototype._transform=function(n,l,u){u(null,n)}},{"./_stream_transform":46,inherits:38}],45:[function(o,p,s){(function(f,a){(function(){p.exports=j;var n;j.ReadableState=B,o("events").EventEmitter;var l=function(Q,x){return Q.listeners(x).length},u=o("./internal/streams/stream"),h=o("buffer").Buffer,d=a.Uint8Array||function(){};function y(K){return h.from(K)}function g(K){return h.isBuffer(K)||K instanceof d}var m=o("util"),C;m&&m.debuglog?C=m.debuglog("stream"):C=function(){};var _=o("./internal/streams/buffer_list"),b=o("./internal/streams/destroy"),R=o("./internal/streams/state"),A=R.getHighWaterMark,w=o("../errors").codes,O=w.ERR_INVALID_ARG_TYPE,P=w.ERR_STREAM_PUSH_AFTER_EOF,D=w.ERR_METHOD_NOT_IMPLEMENTED,N=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,$,Y,oe;o("inherits")(j,u);var ae=b.errorOrDestroy,fe=["error","close","destroy","pause","resume"];function se(K,Q,x){if(typeof K.prependListener=="function")return K.prependListener(Q,x);!K._events||!K._events[Q]?K.on(Q,x):Array.isArray(K._events[Q])?K._events[Q].unshift(x):K._events[Q]=[x,K._events[Q]]}function B(K,Q,x){n=n||o("./_stream_duplex"),K=K||{},typeof x!="boolean"&&(x=Q instanceof n),this.objectMode=!!K.objectMode,x&&(this.objectMode=this.objectMode||!!K.readableObjectMode),this.highWaterMark=A(this,K,"readableHighWaterMark",x),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&($||($=o("string_decoder/").StringDecoder),this.decoder=new $(K.encoding),this.encoding=K.encoding)}function j(K){if(n=n||o("./_stream_duplex"),!(this instanceof j))return new j(K);var Q=this instanceof n;this._readableState=new B(K,this,Q),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),u.call(this)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),j.prototype.destroy=b.destroy,j.prototype._undestroy=b.undestroy,j.prototype._destroy=function(K,Q){Q(K)},j.prototype.push=function(K,Q){var x=this._readableState,M;return x.objectMode?M=!0:typeof K=="string"&&(Q=Q||x.defaultEncoding,Q!==x.encoding&&(K=h.from(K,Q),Q=""),M=!0),J(this,K,Q,!1,M)},j.prototype.unshift=function(K){return J(this,K,null,!0,!1)};function J(K,Q,x,M,k){C("readableAddChunk",Q);var H=K._readableState;if(Q===null)H.reading=!1,le(K,H);else{var ne;if(k||(ne=G(H,Q)),ne)ae(K,ne);else if(H.objectMode||Q&&Q.length>0)if(typeof Q!="string"&&!H.objectMode&&Object.getPrototypeOf(Q)!==h.prototype&&(Q=y(Q)),M)H.endEmitted?ae(K,new N):Z(K,H,Q,!0);else if(H.ended)ae(K,new P);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!x?(Q=H.decoder.write(Q),H.objectMode||Q.length!==0?Z(K,H,Q,!1):Ee(K,H)):Z(K,H,Q,!1)}else M||(H.reading=!1,Ee(K,H))}return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function Z(K,Q,x,M){Q.flowing&&Q.length===0&&!Q.sync?(Q.awaitDrain=0,K.emit("data",x)):(Q.length+=Q.objectMode?1:x.length,M?Q.buffer.unshift(x):Q.buffer.push(x),Q.needReadable&&pe(K)),Ee(K,Q)}function G(K,Q){var x;return!g(Q)&&typeof Q!="string"&&Q!==void 0&&!K.objectMode&&(x=new O("chunk",["string","Buffer","Uint8Array"],Q)),x}j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(K){$||($=o("string_decoder/").StringDecoder);var Q=new $(K);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var x=this._readableState.buffer.head,M="";x!==null;)M+=Q.write(x.data),x=x.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var z=1073741824;function F(K){return K>=z?K=z:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function te(K,Q){return K<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:K!==K?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(K>Q.highWaterMark&&(Q.highWaterMark=F(K)),K<=Q.length?K:Q.ended?Q.length:(Q.needReadable=!0,0))}j.prototype.read=function(K){C("read",K),K=parseInt(K,10);var Q=this._readableState,x=K;if(K!==0&&(Q.emittedReadable=!1),K===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return C("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?we(this):pe(this),null;if(K=te(K,Q),K===0&&Q.ended)return Q.length===0&&we(this),null;var M=Q.needReadable;C("need readable",M),(Q.length===0||Q.length-K<Q.highWaterMark)&&(M=!0,C("length less than watermark",M)),Q.ended||Q.reading?(M=!1,C("reading or ended",M)):M&&(C("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(K=te(x,Q)));var k;return K>0?k=ie(K,Q):k=null,k===null?(Q.needReadable=Q.length<=Q.highWaterMark,K=0):(Q.length-=K,Q.awaitDrain=0),Q.length===0&&(Q.ended||(Q.needReadable=!0),x!==K&&Q.ended&&we(this)),k!==null&&this.emit("data",k),k};function le(K,Q){if(C("onEofChunk"),!Q.ended){if(Q.decoder){var x=Q.decoder.end();x&&x.length&&(Q.buffer.push(x),Q.length+=Q.objectMode?1:x.length)}Q.ended=!0,Q.sync?pe(K):(Q.needReadable=!1,Q.emittedReadable||(Q.emittedReadable=!0,_e(K)))}}function pe(K){var Q=K._readableState;C("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(C("emitReadable",Q.flowing),Q.emittedReadable=!0,f.nextTick(_e,K))}function _e(K){var Q=K._readableState;C("emitReadable_",Q.destroyed,Q.length,Q.ended),!Q.destroyed&&(Q.length||Q.ended)&&(K.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,de(K)}function Ee(K,Q){Q.readingMore||(Q.readingMore=!0,f.nextTick(Ne,K,Q))}function Ne(K,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){var x=Q.length;if(C("maybeReadMore read 0"),K.read(0),x===Q.length)break}Q.readingMore=!1}j.prototype._read=function(K){ae(this,new D("_read()"))},j.prototype.pipe=function(K,Q){var x=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=K;break;case 1:M.pipes=[M.pipes,K];break;default:M.pipes.push(K);break}M.pipesCount+=1,C("pipe count=%d opts=%j",M.pipesCount,Q);var k=(!Q||Q.end!==!1)&&K!==f.stdout&&K!==f.stderr,H=k?Se:ue;M.endEmitted?f.nextTick(H):x.once("end",H),K.on("unpipe",ne);function ne(Te,Ie){C("onunpipe"),Te===x&&Ie&&Ie.hasUnpiped===!1&&(Ie.hasUnpiped=!0,T())}function Se(){C("onend"),K.end()}var Re=Pe(x);K.on("drain",Re);var L=!1;function T(){C("cleanup"),K.removeListener("close",W),K.removeListener("finish",ee),K.removeListener("drain",Re),K.removeListener("error",V),K.removeListener("unpipe",ne),x.removeListener("end",Se),x.removeListener("end",ue),x.removeListener("data",I),L=!0,M.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&Re()}x.on("data",I);function I(Te){C("ondata");var Ie=K.write(Te);C("dest.write",Ie),Ie===!1&&((M.pipesCount===1&&M.pipes===K||M.pipesCount>1&&Oe(M.pipes,K)!==-1)&&!L&&(C("false write response, pause",M.awaitDrain),M.awaitDrain++),x.pause())}function V(Te){C("onerror",Te),ue(),K.removeListener("error",V),l(K,"error")===0&&ae(K,Te)}se(K,"error",V);function W(){K.removeListener("finish",ee),ue()}K.once("close",W);function ee(){C("onfinish"),K.removeListener("close",W),ue()}K.once("finish",ee);function ue(){C("unpipe"),x.unpipe(K)}return K.emit("pipe",x),M.flowing||(C("pipe resume"),x.resume()),K};function Pe(K){return function(){var x=K._readableState;C("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&l(K,"data")&&(x.flowing=!0,de(K))}}j.prototype.unpipe=function(K){var Q=this._readableState,x={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return K&&K!==Q.pipes?this:(K||(K=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,K&&K.emit("unpipe",this,x),this);if(!K){var M=Q.pipes,k=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var H=0;H<k;H++)M[H].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=Oe(Q.pipes,K);return ne===-1?this:(Q.pipes.splice(ne,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),K.emit("unpipe",this,x),this)},j.prototype.on=function(K,Q){var x=u.prototype.on.call(this,K,Q),M=this._readableState;return K==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):K==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,C("on readable",M.length,M.reading),M.length?pe(this):M.reading||f.nextTick(qe,this)),x},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(K,Q){var x=u.prototype.removeListener.call(this,K,Q);return K==="readable"&&f.nextTick(Le,this),x},j.prototype.removeAllListeners=function(K){var Q=u.prototype.removeAllListeners.apply(this,arguments);return(K==="readable"||K===void 0)&&f.nextTick(Le,this),Q};function Le(K){var Q=K._readableState;Q.readableListening=K.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:K.listenerCount("data")>0&&K.resume()}function qe(K){C("readable nexttick read 0"),K.read(0)}j.prototype.resume=function(){var K=this._readableState;return K.flowing||(C("resume"),K.flowing=!K.readableListening,lt(this,K)),K.paused=!1,this};function lt(K,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,f.nextTick(pt,K,Q))}function pt(K,Q){C("resume",Q.reading),Q.reading||K.read(0),Q.resumeScheduled=!1,K.emit("resume"),de(K),Q.flowing&&!Q.reading&&K.read(0)}j.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function de(K){var Q=K._readableState;for(C("flow",Q.flowing);Q.flowing&&K.read()!==null;);}j.prototype.wrap=function(K){var Q=this,x=this._readableState,M=!1;K.on("end",function(){if(C("wrapped end"),x.decoder&&!x.ended){var ne=x.decoder.end();ne&&ne.length&&Q.push(ne)}Q.push(null)}),K.on("data",function(ne){if(C("wrapped data"),x.decoder&&(ne=x.decoder.write(ne)),!(x.objectMode&&ne==null)&&!(!x.objectMode&&(!ne||!ne.length))){var Se=Q.push(ne);Se||(M=!0,K.pause())}});for(var k in K)this[k]===void 0&&typeof K[k]=="function"&&(this[k]=function(Se){return function(){return K[Se].apply(K,arguments)}}(k));for(var H=0;H<fe.length;H++)K.on(fe[H],this.emit.bind(this,fe[H]));return this._read=function(ne){C("wrapped _read",ne),M&&(M=!1,K.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return Y===void 0&&(Y=o("./internal/streams/async_iterator")),Y(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),j._fromList=ie,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ie(K,Q){if(Q.length===0)return null;var x;return Q.objectMode?x=Q.buffer.shift():!K||K>=Q.length?(Q.decoder?x=Q.buffer.join(""):Q.buffer.length===1?x=Q.buffer.first():x=Q.buffer.concat(Q.length),Q.buffer.clear()):x=Q.buffer.consume(K,Q.decoder),x}function we(K){var Q=K._readableState;C("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,f.nextTick(Me,Q,K))}function Me(K,Q){if(C("endReadableNT",K.endEmitted,K.length),!K.endEmitted&&K.length===0&&(K.endEmitted=!0,Q.readable=!1,Q.emit("end"),K.autoDestroy)){var x=Q._writableState;(!x||x.autoDestroy&&x.finished)&&Q.destroy()}}typeof Symbol=="function"&&(j.from=function(K,Q){return oe===void 0&&(oe=o("./internal/streams/from")),oe(j,K,Q)});function Oe(K,Q){for(var x=0,M=K.length;x<M;x++)if(K[x]===Q)return x;return-1}}).call(this)}).call(this,o("_process"),typeof Ft<"u"?Ft:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":42,"./_stream_duplex":43,"./internal/streams/async_iterator":48,"./internal/streams/buffer_list":49,"./internal/streams/destroy":50,"./internal/streams/from":52,"./internal/streams/state":54,"./internal/streams/stream":55,_process:39,buffer:35,events:36,inherits:38,"string_decoder/":56,util:33}],46:[function(o,p,s){p.exports=y;var f=o("../errors").codes,a=f.ERR_METHOD_NOT_IMPLEMENTED,n=f.ERR_MULTIPLE_CALLBACK,l=f.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=f.ERR_TRANSFORM_WITH_LENGTH_0,h=o("./_stream_duplex");o("inherits")(y,h);function d(C,_){var b=this._transformState;b.transforming=!1;var R=b.writecb;if(R===null)return this.emit("error",new n);b.writechunk=null,b.writecb=null,_!=null&&this.push(_),R(C);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function y(C){if(!(this instanceof y))return new y(C);h.call(this,C),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,C&&(typeof C.transform=="function"&&(this._transform=C.transform),typeof C.flush=="function"&&(this._flush=C.flush)),this.on("prefinish",g)}function g(){var C=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_,b){m(C,_,b)}):m(this,null,null)}y.prototype.push=function(C,_){return this._transformState.needTransform=!1,h.prototype.push.call(this,C,_)},y.prototype._transform=function(C,_,b){b(new a("_transform()"))},y.prototype._write=function(C,_,b){var R=this._transformState;if(R.writecb=b,R.writechunk=C,R.writeencoding=_,!R.transforming){var A=this._readableState;(R.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},y.prototype._read=function(C){var _=this._transformState;_.writechunk!==null&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0},y.prototype._destroy=function(C,_){h.prototype._destroy.call(this,C,function(b){_(b)})};function m(C,_,b){if(_)return C.emit("error",_);if(b!=null&&C.push(b),C._writableState.length)throw new u;if(C._transformState.transforming)throw new l;return C.push(null)}},{"../errors":42,"./_stream_duplex":43,inherits:38}],47:[function(o,p,s){(function(f,a){(function(){p.exports=B;function n(de){var ie=this;this.next=null,this.entry=null,this.finish=function(){pt(ie,de)}}var l;B.WritableState=fe;var u={deprecate:o("util-deprecate")},h=o("./internal/streams/stream"),d=o("buffer").Buffer,y=a.Uint8Array||function(){};function g(de){return d.from(de)}function m(de){return d.isBuffer(de)||de instanceof y}var C=o("./internal/streams/destroy"),_=o("./internal/streams/state"),b=_.getHighWaterMark,R=o("../errors").codes,A=R.ERR_INVALID_ARG_TYPE,w=R.ERR_METHOD_NOT_IMPLEMENTED,O=R.ERR_MULTIPLE_CALLBACK,P=R.ERR_STREAM_CANNOT_PIPE,D=R.ERR_STREAM_DESTROYED,N=R.ERR_STREAM_NULL_VALUES,$=R.ERR_STREAM_WRITE_AFTER_END,Y=R.ERR_UNKNOWN_ENCODING,oe=C.errorOrDestroy;o("inherits")(B,h);function ae(){}function fe(de,ie,we){l=l||o("./_stream_duplex"),de=de||{},typeof we!="boolean"&&(we=ie instanceof l),this.objectMode=!!de.objectMode,we&&(this.objectMode=this.objectMode||!!de.writableObjectMode),this.highWaterMark=b(this,de,"writableHighWaterMark",we),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Me=de.decodeStrings===!1;this.decodeStrings=!Me,this.defaultEncoding=de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Oe){le(ie,Oe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=de.emitClose!==!1,this.autoDestroy=!!de.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}fe.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,we=[];ie;)we.push(ie),ie=ie.next;return we},function(){try{Object.defineProperty(fe.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var se;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(se=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(ie){return se.call(this,ie)?!0:this!==B?!1:ie&&ie._writableState instanceof fe}})):se=function(ie){return ie instanceof this};function B(de){l=l||o("./_stream_duplex");var ie=this instanceof l;if(!ie&&!se.call(B,this))return new B(de);this._writableState=new fe(de,this,ie),this.writable=!0,de&&(typeof de.write=="function"&&(this._write=de.write),typeof de.writev=="function"&&(this._writev=de.writev),typeof de.destroy=="function"&&(this._destroy=de.destroy),typeof de.final=="function"&&(this._final=de.final)),h.call(this)}B.prototype.pipe=function(){oe(this,new P)};function j(de,ie){var we=new $;oe(de,we),f.nextTick(ie,we)}function J(de,ie,we,Me){var Oe;return we===null?Oe=new N:typeof we!="string"&&!ie.objectMode&&(Oe=new A("chunk",["string","Buffer"],we)),Oe?(oe(de,Oe),f.nextTick(Me,Oe),!1):!0}B.prototype.write=function(de,ie,we){var Me=this._writableState,Oe=!1,K=!Me.objectMode&&m(de);return K&&!d.isBuffer(de)&&(de=g(de)),typeof ie=="function"&&(we=ie,ie=null),K?ie="buffer":ie||(ie=Me.defaultEncoding),typeof we!="function"&&(we=ae),Me.ending?j(this,we):(K||J(this,Me,de,we))&&(Me.pendingcb++,Oe=G(this,Me,K,de,ie,we)),Oe},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var de=this._writableState;de.corked&&(de.corked--,!de.writing&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&Ee(this,de))},B.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new Y(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Z(de,ie,we){return!de.objectMode&&de.decodeStrings!==!1&&typeof ie=="string"&&(ie=d.from(ie,we)),ie}Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function G(de,ie,we,Me,Oe,K){if(!we){var Q=Z(ie,Me,Oe);Me!==Q&&(we=!0,Oe="buffer",Me=Q)}var x=ie.objectMode?1:Me.length;ie.length+=x;var M=ie.length<ie.highWaterMark;if(M||(ie.needDrain=!0),ie.writing||ie.corked){var k=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Me,encoding:Oe,isBuf:we,callback:K,next:null},k?k.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else z(de,ie,!1,x,Me,Oe,K);return M}function z(de,ie,we,Me,Oe,K,Q){ie.writelen=Me,ie.writecb=Q,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new D("write")):we?de._writev(Oe,ie.onwrite):de._write(Oe,K,ie.onwrite),ie.sync=!1}function F(de,ie,we,Me,Oe){--ie.pendingcb,we?(f.nextTick(Oe,Me),f.nextTick(qe,de,ie),de._writableState.errorEmitted=!0,oe(de,Me)):(Oe(Me),de._writableState.errorEmitted=!0,oe(de,Me),qe(de,ie))}function te(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}function le(de,ie){var we=de._writableState,Me=we.sync,Oe=we.writecb;if(typeof Oe!="function")throw new O;if(te(we),ie)F(de,we,Me,ie,Oe);else{var K=Ne(we)||de.destroyed;!K&&!we.corked&&!we.bufferProcessing&&we.bufferedRequest&&Ee(de,we),Me?f.nextTick(pe,de,we,K,Oe):pe(de,we,K,Oe)}}function pe(de,ie,we,Me){we||_e(de,ie),ie.pendingcb--,Me(),qe(de,ie)}function _e(de,ie){ie.length===0&&ie.needDrain&&(ie.needDrain=!1,de.emit("drain"))}function Ee(de,ie){ie.bufferProcessing=!0;var we=ie.bufferedRequest;if(de._writev&&we&&we.next){var Me=ie.bufferedRequestCount,Oe=new Array(Me),K=ie.corkedRequestsFree;K.entry=we;for(var Q=0,x=!0;we;)Oe[Q]=we,we.isBuf||(x=!1),we=we.next,Q+=1;Oe.allBuffers=x,z(de,ie,!0,ie.length,Oe,"",K.finish),ie.pendingcb++,ie.lastBufferedRequest=null,K.next?(ie.corkedRequestsFree=K.next,K.next=null):ie.corkedRequestsFree=new n(ie),ie.bufferedRequestCount=0}else{for(;we;){var M=we.chunk,k=we.encoding,H=we.callback,ne=ie.objectMode?1:M.length;if(z(de,ie,!1,ne,M,k,H),we=we.next,ie.bufferedRequestCount--,ie.writing)break}we===null&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=we,ie.bufferProcessing=!1}B.prototype._write=function(de,ie,we){we(new w("_write()"))},B.prototype._writev=null,B.prototype.end=function(de,ie,we){var Me=this._writableState;return typeof de=="function"?(we=de,de=null,ie=null):typeof ie=="function"&&(we=ie,ie=null),de!=null&&this.write(de,ie),Me.corked&&(Me.corked=1,this.uncork()),Me.ending||lt(this,Me,we),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ne(de){return de.ending&&de.length===0&&de.bufferedRequest===null&&!de.finished&&!de.writing}function Pe(de,ie){de._final(function(we){ie.pendingcb--,we&&oe(de,we),ie.prefinished=!0,de.emit("prefinish"),qe(de,ie)})}function Le(de,ie){!ie.prefinished&&!ie.finalCalled&&(typeof de._final=="function"&&!ie.destroyed?(ie.pendingcb++,ie.finalCalled=!0,f.nextTick(Pe,de,ie)):(ie.prefinished=!0,de.emit("prefinish")))}function qe(de,ie){var we=Ne(ie);if(we&&(Le(de,ie),ie.pendingcb===0&&(ie.finished=!0,de.emit("finish"),ie.autoDestroy))){var Me=de._readableState;(!Me||Me.autoDestroy&&Me.endEmitted)&&de.destroy()}return we}function lt(de,ie,we){ie.ending=!0,qe(de,ie),we&&(ie.finished?f.nextTick(we):de.once("finish",we)),ie.ended=!0,de.writable=!1}function pt(de,ie,we){var Me=de.entry;for(de.entry=null;Me;){var Oe=Me.callback;ie.pendingcb--,Oe(we),Me=Me.next}ie.corkedRequestsFree.next=de}Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),B.prototype.destroy=C.destroy,B.prototype._undestroy=C.undestroy,B.prototype._destroy=function(de,ie){ie(de)}}).call(this)}).call(this,o("_process"),typeof Ft<"u"?Ft:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":42,"./_stream_duplex":43,"./internal/streams/destroy":50,"./internal/streams/state":54,"./internal/streams/stream":55,_process:39,buffer:35,inherits:38,"util-deprecate":57}],48:[function(o,p,s){(function(f){(function(){var a;function n(D,N,$){return N in D?Object.defineProperty(D,N,{value:$,enumerable:!0,configurable:!0,writable:!0}):D[N]=$,D}var l=o("./end-of-stream"),u=Symbol("lastResolve"),h=Symbol("lastReject"),d=Symbol("error"),y=Symbol("ended"),g=Symbol("lastPromise"),m=Symbol("handlePromise"),C=Symbol("stream");function _(D,N){return{value:D,done:N}}function b(D){var N=D[u];if(N!==null){var $=D[C].read();$!==null&&(D[g]=null,D[u]=null,D[h]=null,N(_($,!1)))}}function R(D){f.nextTick(b,D)}function A(D,N){return function($,Y){D.then(function(){if(N[y]){$(_(void 0,!0));return}N[m]($,Y)},Y)}}var w=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((a={get stream(){return this[C]},next:function(){var N=this,$=this[d];if($!==null)return Promise.reject($);if(this[y])return Promise.resolve(_(void 0,!0));if(this[C].destroyed)return new Promise(function(fe,se){f.nextTick(function(){N[d]?se(N[d]):fe(_(void 0,!0))})});var Y=this[g],oe;if(Y)oe=new Promise(A(Y,this));else{var ae=this[C].read();if(ae!==null)return Promise.resolve(_(ae,!1));oe=new Promise(this[m])}return this[g]=oe,oe}},n(a,Symbol.asyncIterator,function(){return this}),n(a,"return",function(){var N=this;return new Promise(function($,Y){N[C].destroy(null,function(oe){if(oe){Y(oe);return}$(_(void 0,!0))})})}),a),w),P=function(N){var $,Y=Object.create(O,($={},n($,C,{value:N,writable:!0}),n($,u,{value:null,writable:!0}),n($,h,{value:null,writable:!0}),n($,d,{value:null,writable:!0}),n($,y,{value:N._readableState.endEmitted,writable:!0}),n($,m,{value:function(ae,fe){var se=Y[C].read();se?(Y[g]=null,Y[u]=null,Y[h]=null,ae(_(se,!1))):(Y[u]=ae,Y[h]=fe)},writable:!0}),$));return Y[g]=null,l(N,function(oe){if(oe&&oe.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ae=Y[h];ae!==null&&(Y[g]=null,Y[u]=null,Y[h]=null,ae(oe)),Y[d]=oe;return}var fe=Y[u];fe!==null&&(Y[g]=null,Y[u]=null,Y[h]=null,fe(_(void 0,!0))),Y[y]=!0}),N.on("readable",R.bind(null,Y)),Y};p.exports=P}).call(this)}).call(this,o("_process"))},{"./end-of-stream":51,_process:39}],49:[function(o,p,s){function f(b,R){var A=Object.keys(b);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(b);R&&(w=w.filter(function(O){return Object.getOwnPropertyDescriptor(b,O).enumerable})),A.push.apply(A,w)}return A}function a(b){for(var R=1;R<arguments.length;R++){var A=arguments[R]!=null?arguments[R]:{};R%2?f(Object(A),!0).forEach(function(w){n(b,w,A[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(w){Object.defineProperty(b,w,Object.getOwnPropertyDescriptor(A,w))})}return b}function n(b,R,A){return R in b?Object.defineProperty(b,R,{value:A,enumerable:!0,configurable:!0,writable:!0}):b[R]=A,b}function l(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")}function u(b,R){for(var A=0;A<R.length;A++){var w=R[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}function h(b,R,A){return R&&u(b.prototype,R),b}var d=o("buffer"),y=d.Buffer,g=o("util"),m=g.inspect,C=m&&m.custom||"inspect";function _(b,R,A){y.prototype.copy.call(b,R,A)}p.exports=function(){function b(){l(this,b),this.head=null,this.tail=null,this.length=0}return h(b,[{key:"push",value:function(A){var w={data:A,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(A){var w={data:A,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var A=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,A}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(A){if(this.length===0)return"";for(var w=this.head,O=""+w.data;w=w.next;)O+=A+w.data;return O}},{key:"concat",value:function(A){if(this.length===0)return y.alloc(0);for(var w=y.allocUnsafe(A>>>0),O=this.head,P=0;O;)_(O.data,w,P),P+=O.data.length,O=O.next;return w}},{key:"consume",value:function(A,w){var O;return A<this.head.data.length?(O=this.head.data.slice(0,A),this.head.data=this.head.data.slice(A)):A===this.head.data.length?O=this.shift():O=w?this._getString(A):this._getBuffer(A),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(A){var w=this.head,O=1,P=w.data;for(A-=P.length;w=w.next;){var D=w.data,N=A>D.length?D.length:A;if(N===D.length?P+=D:P+=D.slice(0,A),A-=N,A===0){N===D.length?(++O,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=D.slice(N));break}++O}return this.length-=O,P}},{key:"_getBuffer",value:function(A){var w=y.allocUnsafe(A),O=this.head,P=1;for(O.data.copy(w),A-=O.data.length;O=O.next;){var D=O.data,N=A>D.length?D.length:A;if(D.copy(w,w.length-A,0,N),A-=N,A===0){N===D.length?(++P,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=D.slice(N));break}++P}return this.length-=P,w}},{key:C,value:function(A,w){return m(this,a({},w,{depth:0,customInspect:!1}))}}]),b}()},{buffer:35,util:33}],50:[function(o,p,s){(function(f){(function(){function a(y,g){var m=this,C=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return C||_?(g?g(y):y&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(h,this,y)):f.nextTick(h,this,y)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(y||null,function(b){!g&&b?m._writableState?m._writableState.errorEmitted?f.nextTick(l,m):(m._writableState.errorEmitted=!0,f.nextTick(n,m,b)):f.nextTick(n,m,b):g?(f.nextTick(l,m),g(b)):f.nextTick(l,m)}),this)}function n(y,g){h(y,g),l(y)}function l(y){y._writableState&&!y._writableState.emitClose||y._readableState&&!y._readableState.emitClose||y.emit("close")}function u(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function h(y,g){y.emit("error",g)}function d(y,g){var m=y._readableState,C=y._writableState;m&&m.autoDestroy||C&&C.autoDestroy?y.destroy(g):y.emit("error",g)}p.exports={destroy:a,undestroy:u,errorOrDestroy:d}}).call(this)}).call(this,o("_process"))},{_process:39}],51:[function(o,p,s){var f=o("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(h){var d=!1;return function(){if(!d){d=!0;for(var y=arguments.length,g=new Array(y),m=0;m<y;m++)g[m]=arguments[m];h.apply(this,g)}}}function n(){}function l(h){return h.setHeader&&typeof h.abort=="function"}function u(h,d,y){if(typeof d=="function")return u(h,null,d);d||(d={}),y=a(y||n);var g=d.readable||d.readable!==!1&&h.readable,m=d.writable||d.writable!==!1&&h.writable,C=function(){h.writable||b()},_=h._writableState&&h._writableState.finished,b=function(){m=!1,_=!0,g||y.call(h)},R=h._readableState&&h._readableState.endEmitted,A=function(){g=!1,R=!0,m||y.call(h)},w=function(N){y.call(h,N)},O=function(){var N;if(g&&!R)return(!h._readableState||!h._readableState.ended)&&(N=new f),y.call(h,N);if(m&&!_)return(!h._writableState||!h._writableState.ended)&&(N=new f),y.call(h,N)},P=function(){h.req.on("finish",b)};return l(h)?(h.on("complete",b),h.on("abort",O),h.req?P():h.on("request",P)):m&&!h._writableState&&(h.on("end",C),h.on("close",C)),h.on("end",A),h.on("finish",b),d.error!==!1&&h.on("error",w),h.on("close",O),function(){h.removeListener("complete",b),h.removeListener("abort",O),h.removeListener("request",P),h.req&&h.req.removeListener("finish",b),h.removeListener("end",C),h.removeListener("close",C),h.removeListener("finish",b),h.removeListener("end",A),h.removeListener("error",w),h.removeListener("close",O)}}p.exports=u},{"../../../errors":42}],52:[function(o,p,s){p.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],53:[function(o,p,s){var f;function a(b){var R=!1;return function(){R||(R=!0,b.apply(void 0,arguments))}}var n=o("../../../errors").codes,l=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function h(b){if(b)throw b}function d(b){return b.setHeader&&typeof b.abort=="function"}function y(b,R,A,w){w=a(w);var O=!1;b.on("close",function(){O=!0}),f===void 0&&(f=o("./end-of-stream")),f(b,{readable:R,writable:A},function(D){if(D)return w(D);O=!0,w()});var P=!1;return function(D){if(!O&&!P){if(P=!0,d(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();w(D||new u("pipe"))}}}function g(b){b()}function m(b,R){return b.pipe(R)}function C(b){return!b.length||typeof b[b.length-1]!="function"?h:b.pop()}function _(){for(var b=arguments.length,R=new Array(b),A=0;A<b;A++)R[A]=arguments[A];var w=C(R);if(Array.isArray(R[0])&&(R=R[0]),R.length<2)throw new l("streams");var O,P=R.map(function(D,N){var $=N<R.length-1,Y=N>0;return y(D,$,Y,function(oe){O||(O=oe),oe&&P.forEach(g),!$&&(P.forEach(g),w(O))})});return R.reduce(m)}p.exports=_},{"../../../errors":42,"./end-of-stream":51}],54:[function(o,p,s){var f=o("../../../errors").codes.ERR_INVALID_OPT_VALUE;function a(l,u,h){return l.highWaterMark!=null?l.highWaterMark:u?l[h]:null}function n(l,u,h,d){var y=a(u,d,h);if(y!=null){if(!(isFinite(y)&&Math.floor(y)===y)||y<0){var g=d?h:"highWaterMark";throw new f(g,y)}return Math.floor(y)}return l.objectMode?16:16*1024}p.exports={getHighWaterMark:n}},{"../../../errors":42}],55:[function(o,p,s){p.exports=o("events").EventEmitter},{events:36}],56:[function(o,p,s){var f=o("safe-buffer").Buffer,a=f.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(P){if(!P)return"utf8";for(var D;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(D)return;P=(""+P).toLowerCase(),D=!0}}function l(P){var D=n(P);if(typeof D!="string"&&(f.isEncoding===a||!a(P)))throw new Error("Unknown encoding: "+P);return D||P}s.StringDecoder=u;function u(P){this.encoding=l(P);var D;switch(this.encoding){case"utf16le":this.text=_,this.end=b,D=4;break;case"utf8":this.fillLast=g,D=4;break;case"base64":this.text=R,this.end=A,D=3;break;default:this.write=w,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(D)}u.prototype.write=function(P){if(P.length===0)return"";var D,N;if(this.lastNeed){if(D=this.fillLast(P),D===void 0)return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<P.length?D?D+this.text(P,N):this.text(P,N):D||""},u.prototype.end=C,u.prototype.text=m,u.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function h(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function d(P,D,N){var $=D.length-1;if($<N)return 0;var Y=h(D[$]);return Y>=0?(Y>0&&(P.lastNeed=Y-1),Y):--$<N||Y===-2?0:(Y=h(D[$]),Y>=0?(Y>0&&(P.lastNeed=Y-2),Y):--$<N||Y===-2?0:(Y=h(D[$]),Y>=0?(Y>0&&(Y===2?Y=0:P.lastNeed=Y-3),Y):0))}function y(P,D,N){if((D[0]&192)!==128)return P.lastNeed=0,"";if(P.lastNeed>1&&D.length>1){if((D[1]&192)!==128)return P.lastNeed=1,"";if(P.lastNeed>2&&D.length>2&&(D[2]&192)!==128)return P.lastNeed=2,""}}function g(P){var D=this.lastTotal-this.lastNeed,N=y(this,P);if(N!==void 0)return N;if(this.lastNeed<=P.length)return P.copy(this.lastChar,D,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,D,0,P.length),this.lastNeed-=P.length}function m(P,D){var N=d(this,P,D);if(!this.lastNeed)return P.toString("utf8",D);this.lastTotal=N;var $=P.length-(N-this.lastNeed);return P.copy(this.lastChar,0,$),P.toString("utf8",D,$)}function C(P){var D=P&&P.length?this.write(P):"";return this.lastNeed?D+"":D}function _(P,D){if((P.length-D)%2===0){var N=P.toString("utf16le",D);if(N){var $=N.charCodeAt(N.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",D,P.length-1)}function b(P){var D=P&&P.length?this.write(P):"";if(this.lastNeed){var N=this.lastTotal-this.lastNeed;return D+this.lastChar.toString("utf16le",0,N)}return D}function R(P,D){var N=(P.length-D)%3;return N===0?P.toString("base64",D):(this.lastNeed=3-N,this.lastTotal=3,N===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",D,P.length-N))}function A(P){var D=P&&P.length?this.write(P):"";return this.lastNeed?D+this.lastChar.toString("base64",0,3-this.lastNeed):D}function w(P){return P.toString(this.encoding)}function O(P){return P&&P.length?this.write(P):""}},{"safe-buffer":40}],57:[function(o,p,s){(function(f){(function(){p.exports=a;function a(l,u){if(n("noDeprecation"))return l;var h=!1;function d(){if(!h){if(n("throwDeprecation"))throw new Error(u);n("traceDeprecation")?console.trace(u):console.warn(u),h=!0}return l.apply(this,arguments)}return d}function n(l){try{if(!f.localStorage)return!1}catch{return!1}var u=f.localStorage[l];return u==null?!1:String(u).toLowerCase()==="true"}}).call(this)}).call(this,typeof Ft<"u"?Ft:typeof self<"u"?self:typeof window<"u"?window:{})},{}],58:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"v1",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(s,"v3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(s,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return g.default}});var f=m(o("./v1.js")),a=m(o("./v3.js")),n=m(o("./v4.js")),l=m(o("./v5.js")),u=m(o("./nil.js")),h=m(o("./version.js")),d=m(o("./validate.js")),y=m(o("./stringify.js")),g=m(o("./parse.js"));function m(C){return C&&C.__esModule?C:{default:C}}},{"./nil.js":60,"./parse.js":61,"./stringify.js":65,"./v1.js":66,"./v3.js":67,"./v4.js":69,"./v5.js":70,"./validate.js":71,"./version.js":72}],59:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function f(R){if(typeof R=="string"){const A=unescape(encodeURIComponent(R));R=new Uint8Array(A.length);for(let w=0;w<A.length;++w)R[w]=A.charCodeAt(w)}return a(l(u(R),R.length*8))}function a(R){const A=[],w=R.length*32,O="0123456789abcdef";for(let P=0;P<w;P+=8){const D=R[P>>5]>>>P%32&255,N=parseInt(O.charAt(D>>>4&15)+O.charAt(D&15),16);A.push(N)}return A}function n(R){return(R+64>>>9<<4)+14+1}function l(R,A){R[A>>5]|=128<<A%32,R[n(A)-1]=A;let w=1732584193,O=-271733879,P=-1732584194,D=271733878;for(let N=0;N<R.length;N+=16){const $=w,Y=O,oe=P,ae=D;w=g(w,O,P,D,R[N],7,-680876936),D=g(D,w,O,P,R[N+1],12,-389564586),P=g(P,D,w,O,R[N+2],17,606105819),O=g(O,P,D,w,R[N+3],22,-1044525330),w=g(w,O,P,D,R[N+4],7,-176418897),D=g(D,w,O,P,R[N+5],12,1200080426),P=g(P,D,w,O,R[N+6],17,-1473231341),O=g(O,P,D,w,R[N+7],22,-45705983),w=g(w,O,P,D,R[N+8],7,1770035416),D=g(D,w,O,P,R[N+9],12,-1958414417),P=g(P,D,w,O,R[N+10],17,-42063),O=g(O,P,D,w,R[N+11],22,-1990404162),w=g(w,O,P,D,R[N+12],7,1804603682),D=g(D,w,O,P,R[N+13],12,-40341101),P=g(P,D,w,O,R[N+14],17,-1502002290),O=g(O,P,D,w,R[N+15],22,1236535329),w=m(w,O,P,D,R[N+1],5,-165796510),D=m(D,w,O,P,R[N+6],9,-1069501632),P=m(P,D,w,O,R[N+11],14,643717713),O=m(O,P,D,w,R[N],20,-373897302),w=m(w,O,P,D,R[N+5],5,-701558691),D=m(D,w,O,P,R[N+10],9,38016083),P=m(P,D,w,O,R[N+15],14,-660478335),O=m(O,P,D,w,R[N+4],20,-405537848),w=m(w,O,P,D,R[N+9],5,568446438),D=m(D,w,O,P,R[N+14],9,-1019803690),P=m(P,D,w,O,R[N+3],14,-187363961),O=m(O,P,D,w,R[N+8],20,1163531501),w=m(w,O,P,D,R[N+13],5,-1444681467),D=m(D,w,O,P,R[N+2],9,-51403784),P=m(P,D,w,O,R[N+7],14,1735328473),O=m(O,P,D,w,R[N+12],20,-1926607734),w=C(w,O,P,D,R[N+5],4,-378558),D=C(D,w,O,P,R[N+8],11,-2022574463),P=C(P,D,w,O,R[N+11],16,1839030562),O=C(O,P,D,w,R[N+14],23,-35309556),w=C(w,O,P,D,R[N+1],4,-1530992060),D=C(D,w,O,P,R[N+4],11,1272893353),P=C(P,D,w,O,R[N+7],16,-155497632),O=C(O,P,D,w,R[N+10],23,-1094730640),w=C(w,O,P,D,R[N+13],4,681279174),D=C(D,w,O,P,R[N],11,-358537222),P=C(P,D,w,O,R[N+3],16,-722521979),O=C(O,P,D,w,R[N+6],23,76029189),w=C(w,O,P,D,R[N+9],4,-640364487),D=C(D,w,O,P,R[N+12],11,-421815835),P=C(P,D,w,O,R[N+15],16,530742520),O=C(O,P,D,w,R[N+2],23,-995338651),w=_(w,O,P,D,R[N],6,-198630844),D=_(D,w,O,P,R[N+7],10,1126891415),P=_(P,D,w,O,R[N+14],15,-1416354905),O=_(O,P,D,w,R[N+5],21,-57434055),w=_(w,O,P,D,R[N+12],6,1700485571),D=_(D,w,O,P,R[N+3],10,-1894986606),P=_(P,D,w,O,R[N+10],15,-1051523),O=_(O,P,D,w,R[N+1],21,-2054922799),w=_(w,O,P,D,R[N+8],6,1873313359),D=_(D,w,O,P,R[N+15],10,-30611744),P=_(P,D,w,O,R[N+6],15,-1560198380),O=_(O,P,D,w,R[N+13],21,1309151649),w=_(w,O,P,D,R[N+4],6,-145523070),D=_(D,w,O,P,R[N+11],10,-1120210379),P=_(P,D,w,O,R[N+2],15,718787259),O=_(O,P,D,w,R[N+9],21,-343485551),w=h(w,$),O=h(O,Y),P=h(P,oe),D=h(D,ae)}return[w,O,P,D]}function u(R){if(R.length===0)return[];const A=R.length*8,w=new Uint32Array(n(A));for(let O=0;O<A;O+=8)w[O>>5]|=(R[O/8]&255)<<O%32;return w}function h(R,A){const w=(R&65535)+(A&65535);return(R>>16)+(A>>16)+(w>>16)<<16|w&65535}function d(R,A){return R<<A|R>>>32-A}function y(R,A,w,O,P,D){return h(d(h(h(A,R),h(O,D)),P),w)}function g(R,A,w,O,P,D,N){return y(A&w|~A&O,R,A,P,D,N)}function m(R,A,w,O,P,D,N){return y(A&O|w&~O,R,A,P,D,N)}function C(R,A,w,O,P,D,N){return y(A^w^O,R,A,P,D,N)}function _(R,A,w,O,P,D,N){return y(w^(A|~O),R,A,P,D,N)}var b=f;s.default=b},{}],60:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f="00000000-0000-0000-0000-000000000000";s.default=f},{}],61:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=a(o("./validate.js"));function a(u){return u&&u.__esModule?u:{default:u}}function n(u){if(!(0,f.default)(u))throw TypeError("Invalid UUID");let h;const d=new Uint8Array(16);return d[0]=(h=parseInt(u.slice(0,8),16))>>>24,d[1]=h>>>16&255,d[2]=h>>>8&255,d[3]=h&255,d[4]=(h=parseInt(u.slice(9,13),16))>>>8,d[5]=h&255,d[6]=(h=parseInt(u.slice(14,18),16))>>>8,d[7]=h&255,d[8]=(h=parseInt(u.slice(19,23),16))>>>8,d[9]=h&255,d[10]=(h=parseInt(u.slice(24,36),16))/1099511627776&255,d[11]=h/4294967296&255,d[12]=h>>>24&255,d[13]=h>>>16&255,d[14]=h>>>8&255,d[15]=h&255,d}var l=n;s.default=l},{"./validate.js":71}],62:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;s.default=f},{}],63:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=n;let f;const a=new Uint8Array(16);function n(){if(!f&&(f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f(a)}},{}],64:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function f(u,h,d,y){switch(u){case 0:return h&d^~h&y;case 1:return h^d^y;case 2:return h&d^h&y^d&y;case 3:return h^d^y}}function a(u,h){return u<<h|u>>>32-h}function n(u){const h=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof u=="string"){const C=unescape(encodeURIComponent(u));u=[];for(let _=0;_<C.length;++_)u.push(C.charCodeAt(_))}else Array.isArray(u)||(u=Array.prototype.slice.call(u));u.push(128);const y=u.length/4+2,g=Math.ceil(y/16),m=new Array(g);for(let C=0;C<g;++C){const _=new Uint32Array(16);for(let b=0;b<16;++b)_[b]=u[C*64+b*4]<<24|u[C*64+b*4+1]<<16|u[C*64+b*4+2]<<8|u[C*64+b*4+3];m[C]=_}m[g-1][14]=(u.length-1)*8/Math.pow(2,32),m[g-1][14]=Math.floor(m[g-1][14]),m[g-1][15]=(u.length-1)*8&4294967295;for(let C=0;C<g;++C){const _=new Uint32Array(80);for(let P=0;P<16;++P)_[P]=m[C][P];for(let P=16;P<80;++P)_[P]=a(_[P-3]^_[P-8]^_[P-14]^_[P-16],1);let b=d[0],R=d[1],A=d[2],w=d[3],O=d[4];for(let P=0;P<80;++P){const D=Math.floor(P/20),N=a(b,5)+f(D,R,A,w)+O+h[D]+_[P]>>>0;O=w,w=A,A=a(R,30)>>>0,R=b,b=N}d[0]=d[0]+b>>>0,d[1]=d[1]+R>>>0,d[2]=d[2]+A>>>0,d[3]=d[3]+w>>>0,d[4]=d[4]+O>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var l=n;s.default=l},{}],65:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=a(o("./validate.js"));function a(h){return h&&h.__esModule?h:{default:h}}const n=[];for(let h=0;h<256;++h)n.push((h+256).toString(16).substr(1));function l(h,d=0){const y=(n[h[d+0]]+n[h[d+1]]+n[h[d+2]]+n[h[d+3]]+"-"+n[h[d+4]]+n[h[d+5]]+"-"+n[h[d+6]]+n[h[d+7]]+"-"+n[h[d+8]]+n[h[d+9]]+"-"+n[h[d+10]]+n[h[d+11]]+n[h[d+12]]+n[h[d+13]]+n[h[d+14]]+n[h[d+15]]).toLowerCase();if(!(0,f.default)(y))throw TypeError("Stringified UUID is invalid");return y}var u=l;s.default=u},{"./validate.js":71}],66:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=n(o("./rng.js")),a=n(o("./stringify.js"));function n(m){return m&&m.__esModule?m:{default:m}}let l,u,h=0,d=0;function y(m,C,_){let b=C&&_||0;const R=C||new Array(16);m=m||{};let A=m.node||l,w=m.clockseq!==void 0?m.clockseq:u;if(A==null||w==null){const Y=m.random||(m.rng||f.default)();A==null&&(A=l=[Y[0]|1,Y[1],Y[2],Y[3],Y[4],Y[5]]),w==null&&(w=u=(Y[6]<<8|Y[7])&16383)}let O=m.msecs!==void 0?m.msecs:Date.now(),P=m.nsecs!==void 0?m.nsecs:d+1;const D=O-h+(P-d)/1e4;if(D<0&&m.clockseq===void 0&&(w=w+1&16383),(D<0||O>h)&&m.nsecs===void 0&&(P=0),P>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=O,d=P,u=w,O+=122192928e5;const N=((O&268435455)*1e4+P)%4294967296;R[b++]=N>>>24&255,R[b++]=N>>>16&255,R[b++]=N>>>8&255,R[b++]=N&255;const $=O/4294967296*1e4&268435455;R[b++]=$>>>8&255,R[b++]=$&255,R[b++]=$>>>24&15|16,R[b++]=$>>>16&255,R[b++]=w>>>8|128,R[b++]=w&255;for(let Y=0;Y<6;++Y)R[b+Y]=A[Y];return C||(0,a.default)(R)}var g=y;s.default=g},{"./rng.js":63,"./stringify.js":65}],67:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=n(o("./v35.js")),a=n(o("./md5.js"));function n(h){return h&&h.__esModule?h:{default:h}}var u=(0,f.default)("v3",48,a.default);s.default=u},{"./md5.js":59,"./v35.js":68}],68:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d,s.URL=s.DNS=void 0;var f=n(o("./stringify.js")),a=n(o("./parse.js"));function n(y){return y&&y.__esModule?y:{default:y}}function l(y){y=unescape(encodeURIComponent(y));const g=[];for(let m=0;m<y.length;++m)g.push(y.charCodeAt(m));return g}const u="6ba7b810-9dad-11d1-80b4-00c04fd430c8";s.DNS=u;const h="6ba7b811-9dad-11d1-80b4-00c04fd430c8";s.URL=h;function d(y,g,m){function C(_,b,R,A){if(typeof _=="string"&&(_=l(_)),typeof b=="string"&&(b=(0,a.default)(b)),b.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let w=new Uint8Array(16+_.length);if(w.set(b),w.set(_,b.length),w=m(w),w[6]=w[6]&15|g,w[8]=w[8]&63|128,R){A=A||0;for(let O=0;O<16;++O)R[A+O]=w[O];return R}return(0,f.default)(w)}try{C.name=y}catch{}return C.DNS=u,C.URL=h,C}},{"./parse.js":61,"./stringify.js":65}],69:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=n(o("./rng.js")),a=n(o("./stringify.js"));function n(h){return h&&h.__esModule?h:{default:h}}function l(h,d,y){h=h||{};const g=h.random||(h.rng||f.default)();if(g[6]=g[6]&15|64,g[8]=g[8]&63|128,d){y=y||0;for(let m=0;m<16;++m)d[y+m]=g[m];return d}return(0,a.default)(g)}var u=l;s.default=u},{"./rng.js":63,"./stringify.js":65}],70:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=n(o("./v35.js")),a=n(o("./sha1.js"));function n(h){return h&&h.__esModule?h:{default:h}}var u=(0,f.default)("v5",80,a.default);s.default=u},{"./sha1.js":64,"./v35.js":68}],71:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=a(o("./regex.js"));function a(u){return u&&u.__esModule?u:{default:u}}function n(u){return typeof u=="string"&&f.default.test(u)}var l=n;s.default=l},{"./regex.js":62}],72:[function(o,p,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var f=a(o("./validate.js"));function a(u){return u&&u.__esModule?u:{default:u}}function n(u){if(!(0,f.default)(u))throw TypeError("Invalid UUID");return parseInt(u.substr(14,1),16)}var l=n;s.default=l},{"./validate.js":71}]},{},[9])(9)})}(Um)),Um.exports}var Fm={},UM;function e4(){return UM||(UM=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function i(){var p={};return p.promise=new Promise(function(s,f){p.reject=f,p.resolve=s}),p}var o=i;r.default=o}(Fm)),Fm}var Uf={exports:{}},FM;function t4(){return FM||(FM=1,function(r,i){var o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ft<"u"&&Ft,p=function(){function f(){this.fetch=!1,this.DOMException=o.DOMException}return f.prototype=o,new f}();(function(f){(function(a){var n=typeof f<"u"&&f||typeof self<"u"&&self||typeof Ft<"u"&&Ft||{},l={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function u(B){return B&&DataView.prototype.isPrototypeOf(B)}if(l.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(B){return B&&h.indexOf(Object.prototype.toString.call(B))>-1};function y(B){if(typeof B!="string"&&(B=String(B)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(B)||B==="")throw new TypeError('Invalid character in header field name: "'+B+'"');return B.toLowerCase()}function g(B){return typeof B!="string"&&(B=String(B)),B}function m(B){var j={next:function(){var J=B.shift();return{done:J===void 0,value:J}}};return l.iterable&&(j[Symbol.iterator]=function(){return j}),j}function C(B){this.map={},B instanceof C?B.forEach(function(j,J){this.append(J,j)},this):Array.isArray(B)?B.forEach(function(j){if(j.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+j.length);this.append(j[0],j[1])},this):B&&Object.getOwnPropertyNames(B).forEach(function(j){this.append(j,B[j])},this)}C.prototype.append=function(B,j){B=y(B),j=g(j);var J=this.map[B];this.map[B]=J?J+", "+j:j},C.prototype.delete=function(B){delete this.map[y(B)]},C.prototype.get=function(B){return B=y(B),this.has(B)?this.map[B]:null},C.prototype.has=function(B){return this.map.hasOwnProperty(y(B))},C.prototype.set=function(B,j){this.map[y(B)]=g(j)},C.prototype.forEach=function(B,j){for(var J in this.map)this.map.hasOwnProperty(J)&&B.call(j,this.map[J],J,this)},C.prototype.keys=function(){var B=[];return this.forEach(function(j,J){B.push(J)}),m(B)},C.prototype.values=function(){var B=[];return this.forEach(function(j){B.push(j)}),m(B)},C.prototype.entries=function(){var B=[];return this.forEach(function(j,J){B.push([J,j])}),m(B)},l.iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);function _(B){if(!B._noBody){if(B.bodyUsed)return Promise.reject(new TypeError("Already read"));B.bodyUsed=!0}}function b(B){return new Promise(function(j,J){B.onload=function(){j(B.result)},B.onerror=function(){J(B.error)}})}function R(B){var j=new FileReader,J=b(j);return j.readAsArrayBuffer(B),J}function A(B){var j=new FileReader,J=b(j),Z=/charset=([A-Za-z0-9_-]+)/.exec(B.type),G=Z?Z[1]:"utf-8";return j.readAsText(B,G),J}function w(B){for(var j=new Uint8Array(B),J=new Array(j.length),Z=0;Z<j.length;Z++)J[Z]=String.fromCharCode(j[Z]);return J.join("")}function O(B){if(B.slice)return B.slice(0);var j=new Uint8Array(B.byteLength);return j.set(new Uint8Array(B)),j.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(B){this.bodyUsed=this.bodyUsed,this._bodyInit=B,B?typeof B=="string"?this._bodyText=B:l.blob&&Blob.prototype.isPrototypeOf(B)?this._bodyBlob=B:l.formData&&FormData.prototype.isPrototypeOf(B)?this._bodyFormData=B:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)?this._bodyText=B.toString():l.arrayBuffer&&l.blob&&u(B)?(this._bodyArrayBuffer=O(B.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(B)||d(B))?this._bodyArrayBuffer=O(B):this._bodyText=B=Object.prototype.toString.call(B):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof B=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var B=_(this);if(B)return B;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var B=_(this);return B||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var B=_(this);if(B)return B;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(B){var j=B.toUpperCase();return D.indexOf(j)>-1?j:B}function $(B,j){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');j=j||{};var J=j.body;if(B instanceof $){if(B.bodyUsed)throw new TypeError("Already read");this.url=B.url,this.credentials=B.credentials,j.headers||(this.headers=new C(B.headers)),this.method=B.method,this.mode=B.mode,this.signal=B.signal,!J&&B._bodyInit!=null&&(J=B._bodyInit,B.bodyUsed=!0)}else this.url=String(B);if(this.credentials=j.credentials||this.credentials||"same-origin",(j.headers||!this.headers)&&(this.headers=new C(j.headers)),this.method=N(j.method||this.method||"GET"),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal||function(){if("AbortController"in n){var z=new AbortController;return z.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(J),(this.method==="GET"||this.method==="HEAD")&&(j.cache==="no-store"||j.cache==="no-cache")){var Z=/([?&])_=[^&]*/;if(Z.test(this.url))this.url=this.url.replace(Z,"$1_="+new Date().getTime());else{var G=/\?/;this.url+=(G.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function Y(B){var j=new FormData;return B.trim().split("&").forEach(function(J){if(J){var Z=J.split("="),G=Z.shift().replace(/\+/g," "),z=Z.join("=").replace(/\+/g," ");j.append(decodeURIComponent(G),decodeURIComponent(z))}}),j}function oe(B){var j=new C,J=B.replace(/\r?\n[\t ]+/g," ");return J.split("\r").map(function(Z){return Z.indexOf(`
`)===0?Z.substr(1,Z.length):Z}).forEach(function(Z){var G=Z.split(":"),z=G.shift().trim();if(z){var F=G.join(":").trim();try{j.append(z,F)}catch(te){console.warn("Response "+te.message)}}}),j}P.call($.prototype);function ae(B,j){if(!(this instanceof ae))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=j.statusText===void 0?"":""+j.statusText,this.headers=new C(j.headers),this.url=j.url||"",this._initBody(B)}P.call(ae.prototype),ae.prototype.clone=function(){return new ae(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},ae.error=function(){var B=new ae(null,{status:200,statusText:""});return B.ok=!1,B.status=0,B.type="error",B};var fe=[301,302,303,307,308];ae.redirect=function(B,j){if(fe.indexOf(j)===-1)throw new RangeError("Invalid status code");return new ae(null,{status:j,headers:{location:B}})},a.DOMException=n.DOMException;try{new a.DOMException}catch{a.DOMException=function(j,J){this.message=j,this.name=J;var Z=Error(j);this.stack=Z.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function se(B,j){return new Promise(function(J,Z){var G=new $(B,j);if(G.signal&&G.signal.aborted)return Z(new a.DOMException("Aborted","AbortError"));var z=new XMLHttpRequest;function F(){z.abort()}z.onload=function(){var pe={statusText:z.statusText,headers:oe(z.getAllResponseHeaders()||"")};G.url.indexOf("file://")===0&&(z.status<200||z.status>599)?pe.status=200:pe.status=z.status,pe.url="responseURL"in z?z.responseURL:pe.headers.get("X-Request-URL");var _e="response"in z?z.response:z.responseText;setTimeout(function(){J(new ae(_e,pe))},0)},z.onerror=function(){setTimeout(function(){Z(new TypeError("Network request failed"))},0)},z.ontimeout=function(){setTimeout(function(){Z(new TypeError("Network request timed out"))},0)},z.onabort=function(){setTimeout(function(){Z(new a.DOMException("Aborted","AbortError"))},0)};function te(pe){try{return pe===""&&n.location.href?n.location.href:pe}catch{return pe}}if(z.open(G.method,te(G.url),!0),G.credentials==="include"?z.withCredentials=!0:G.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&(l.blob?z.responseType="blob":l.arrayBuffer&&(z.responseType="arraybuffer")),j&&typeof j.headers=="object"&&!(j.headers instanceof C||n.Headers&&j.headers instanceof n.Headers)){var le=[];Object.getOwnPropertyNames(j.headers).forEach(function(pe){le.push(y(pe)),z.setRequestHeader(pe,g(j.headers[pe]))}),G.headers.forEach(function(pe,_e){le.indexOf(_e)===-1&&z.setRequestHeader(_e,pe)})}else G.headers.forEach(function(pe,_e){z.setRequestHeader(_e,pe)});G.signal&&(G.signal.addEventListener("abort",F),z.onreadystatechange=function(){z.readyState===4&&G.signal.removeEventListener("abort",F)}),z.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return se.polyfill=!0,n.fetch||(n.fetch=se,n.Headers=C,n.Request=$,n.Response=ae),a.Headers=C,a.Request=$,a.Response=ae,a.fetch=se,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(p),p.fetch.ponyfill=!0,delete p.fetch.polyfill;var s=o.fetch?o:p;i=s.fetch,i.default=s.fetch,i.fetch=s.fetch,i.Headers=s.Headers,i.Request=s.Request,i.Response=s.Response,r.exports=i}(Uf,Uf.exports)),Uf.exports}var Hm={},Vm={exports:{}},HM;function Y2(){return HM||(HM=1,function(r){function i(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Vm)),Vm.exports}var Wm={exports:{}},Gm={exports:{}},Km={exports:{}},VM;function X2(){return VM||(VM=1,function(r){function i(o){return r.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},r.exports.__esModule=!0,r.exports.default=r.exports,i(o)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Km)),Km.exports}var WM;function r4(){return WM||(WM=1,function(r){var i=X2();function o(p,s){for(;!{}.hasOwnProperty.call(p,s)&&(p=i(p))!==null;);return p}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Gm)),Gm.exports}var GM;function n4(){return GM||(GM=1,function(r){var i=r4();function o(){return r.exports=o=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,s,f){var a=i(p,s);if(a){var n=Object.getOwnPropertyDescriptor(a,s);return n.get?n.get.call(arguments.length<3?p:f):n.value}},r.exports.__esModule=!0,r.exports.default=r.exports,o.apply(null,arguments)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(Wm)),Wm.exports}var $m={exports:{}},Jm={exports:{}},KM;function i4(){return KM||(KM=1,function(r){function i(o,p){return r.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,f){return s.__proto__=f,s},r.exports.__esModule=!0,r.exports.default=r.exports,i(o,p)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(Jm)),Jm.exports}var $M;function o4(){return $M||($M=1,function(r){var i=i4();function o(p,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(s&&s.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),s&&i(p,s)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}($m)),$m.exports}var Qm={exports:{}},JM;function s4(){return JM||(JM=1,function(r){var i=To().default,o=Y2();function p(s,f){if(f&&(i(f)=="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(s)}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}(Qm)),Qm.exports}var QM;function a4(){return QM||(QM=1,function(r){var i=yl();Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(yS()),p=i(mS()),s=i(Y2()),f=i(n4()),a=i(o4()),n=i(s4()),l=i(X2()),u=i($2()),h=i(J2()),d=Q2();function y(A){var w=g();return function(){var P=(0,l.default)(A),D;if(w){var N=(0,l.default)(this).constructor;D=Reflect.construct(P,arguments,N)}else D=P.apply(this,arguments);return(0,n.default)(this,D)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var m=new WeakMap,C=new WeakMap,_=new WeakMap,b=new WeakMap,R=function(A){(0,a.default)(O,A);var w=y(O);function O(P){var D,N=P.disconnectionHandler,$=P.networkInformation,Y=P.requestHandler,oe=P.url;return(0,o.default)(this,O),D=w.call(this,{disconnectionHandler:N,requestHandler:Y,url:oe}),m.set((0,s.default)(D),{writable:!0,value:!1}),C.set((0,s.default)(D),{writable:!0,value:function(){return(0,u.default)((0,s.default)(D),_)===(0,u.default)((0,s.default)(D),b).type||D.disconnect()}}),_.set((0,s.default)(D),{writable:!0,value:void 0}),b.set((0,s.default)(D),{writable:!0,value:void 0}),(0,h.default)((0,s.default)(D),b,$),D}return(0,p.default)(O,[{key:"connect",value:function(){if((0,u.default)(this,m))return console.warn("botframework-directlinejs: connect() can only be called once."),Promise.resolve();if((0,h.default)(this,m,!0),(0,u.default)(this,b)){var D=(0,u.default)(this,b),N=D.type;if((0,h.default)(this,_,N),N==="none")return console.warn("botframework-directlinejs: Failed to connect while offline."),Promise.reject(new Error("botframework-directlinejs: Failed to connect while offline."));(0,u.default)(this,b).addEventListener("change",(0,u.default)(this,C))}return(0,f.default)((0,l.default)(O.prototype),"connect",this).call(this)}},{key:"disconnect",value:function(){var D;(D=(0,u.default)(this,b))===null||D===void 0||D.removeEventListener("change",(0,u.default)(this,C)),(0,f.default)((0,l.default)(O.prototype),"disconnect",this).call(this)}}]),O}(d.WebSocketClient);r.default=R}(Hm)),Hm}var YM;function c4(){if(YM)return ll;YM=1;var r=yl(),i=To();Object.defineProperty(ll,"__esModule",{value:!0}),ll.DirectLineStreaming=void 0;var o=r(o2()),p=r(H6()),s=r($2()),f=r(J2()),a=r(J6()),n=r(Q6()),l=r(yS()),u=r(mS()),h=r(a2()),d=q2(),y=Z6(),g=et(),m=O(Q2()),C=r(e4()),_=r(t4()),b=Z2(),R=r(a4()),A=["attachments"];function w(fe){if(typeof WeakMap!="function")return null;var se=new WeakMap,B=new WeakMap;return(w=function(J){return J?B:se})(fe)}function O(fe,se){if(fe&&fe.__esModule)return fe;if(fe===null||i(fe)!=="object"&&typeof fe!="function")return{default:fe};var B=w(se);if(B&&B.has(fe))return B.get(fe);var j={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in fe)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(fe,Z)){var G=J?Object.getOwnPropertyDescriptor(fe,Z):null;G&&(G.get||G.set)?Object.defineProperty(j,Z,G):j[Z]=fe[Z]}return j.default=fe,B&&B.set(fe,j),j}var P="DirectLine/3.0",D=3,N=30*60*1e3,$=N/2,Y=function(){function fe(se,B,j){(0,l.default)(this,fe),(0,h.default)(this,"activityQueue",[]),this.subscriber=se,this.connectionStatus$=B,this.shouldQueue=j}return(0,u.default)(fe,[{key:"setSubscriber",value:function(B){this.subscriber=B}},{key:"processRequest",value:function(){var se=(0,n.default)(p.default.mark(function j(J,Z){var G,z,F,te,le,pe,_e,Ee,Ne;return p.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return G=(0,a.default)(J.streams),z=G.shift(),Le.next=4,z.readAsString();case 4:if(F=Le.sent,te=JSON.parse(F),te.activities.length===1){Le.next=9;break}return this.subscriber.error(new Error("there should be exactly one activity")),Le.abrupt("return",m.StreamingResponse.create(500));case 9:if(le=te.activities[0],!(G.length>0)){Le.next=21;break}pe=(0,a.default)(le.attachments);case 12:if(!(_e=G.shift())){Le.next=20;break}return Le.next=15,_e.readAsString();case 15:Ee=Le.sent,Ne="data:text/plain;base64,"+Ee,pe.push({contentType:_e.contentType,contentUrl:Ne}),Le.next=12;break;case 20:le.attachments=pe;case 21:return this.shouldQueue()?this.activityQueue.push(le):this.subscriber.next(le),Le.abrupt("return",m.StreamingResponse.create(200));case 23:case"end":return Le.stop()}},j,this)}));function B(j,J){return se.apply(this,arguments)}return B}()},{key:"flush",value:function(){var B=this;this.connectionStatus$.subscribe(function(){}),this.activityQueue.forEach(function(j){return B.subscriber.next(j)}),this.activityQueue=[]}},{key:"end",value:function(){this.subscriber.complete()}}]),fe}(),oe=new WeakMap,ae=function(){function fe(se){var B=this;(0,l.default)(this,fe),(0,h.default)(this,"connectionStatus$",new d.BehaviorSubject(b.ConnectionStatus.Uninitialized)),(0,h.default)(this,"_botAgent",""),oe.set(this,{writable:!0,value:void 0});var j=se?.networkInformation;typeof j>"u"||typeof j.addEventListener=="function"&&typeof j.removeEventListener=="function"&&typeof j.type=="string"?(0,f.default)(this,oe,j):console.warn('botframework-directlinejs: "networkInformation" option specified must be a `NetworkInformation`-like instance extending `EventTarget` interface with a `type` property returning a string.'),this.token=se.token,this.refreshToken().catch(function(){B.connectionStatus$.next(b.ConnectionStatus.ExpiredToken)}),this.domain=se.domain,se.conversationId&&(this.conversationId=se.conversationId),this._botAgent=this.getBotAgent(se.botAgent),this.queueActivities=!0,this.activity$=g.Observable.create(function(){var J=(0,n.default)(p.default.mark(function Z(G){return p.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:B.activitySubscriber=G,B.theStreamHandler=new Y(G,B.connectionStatus$,function(){return B.queueActivities}),B.connectDeferred.resolve();case 3:case"end":return F.stop()}},Z)}));return function(Z){return J.apply(this,arguments)}}()).share(),this.connectWithRetryAsync()}return(0,u.default)(fe,[{key:"reconnect",value:function(B){var j=B.conversationId,J=B.token;if(this.connectionStatus$.getValue()===b.ConnectionStatus.Ended)throw new Error("Connection has ended.");this.conversationId=j,this.token=J,this.connectDeferred.resolve()}},{key:"end",value:function(){this.activitySubscriber.complete(),this.connectionStatus$.next(b.ConnectionStatus.Ended),this.connectionStatus$.complete(),this.streamConnection.disconnect()}},{key:"commonHeaders",value:function(){return{Authorization:"Bearer ".concat(this.token),"x-ms-bot-agent":this._botAgent}}},{key:"getBotAgent",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",j="directlineStreaming";return B&&(j+="; ".concat(B)),"".concat(P," (").concat(j,")")}},{key:"refreshToken",value:function(){var se=(0,n.default)(p.default.mark(function j(){var J,Z,G,z;return p.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=4,this.waitUntilOnline();case 4:J=0;case 5:if(!(J<D)){te.next=30;break}return J++,te.next=9,new Promise(function(le){return setTimeout(le,$)});case 9:return te.prev=9,te.next=12,(0,_.default)("".concat(this.domain,"/tokens/refresh"),{method:"POST",headers:this.commonHeaders()});case 12:if(Z=te.sent,!Z.ok){te.next=22;break}return J=0,te.next=17,Z.json();case 17:G=te.sent,z=G.token,this.token=z,te.next=23;break;case 22:Z.status===403||Z.status===403?(console.error("Fatal error while refreshing the token: ".concat(Z.status," ").concat(Z.statusText)),this.streamConnection.disconnect()):console.warn("Refresh attempt #".concat(J," failed: ").concat(Z.status," ").concat(Z.statusText));case 23:te.next=28;break;case 25:te.prev=25,te.t0=te.catch(9),console.warn("Refresh attempt #".concat(J," threw an exception: ").concat(te.t0));case 28:te.next=5;break;case 30:console.error("Retries exhausted"),this.streamConnection.disconnect();case 32:case"end":return te.stop()}},j,this,[[9,25]])}));function B(){return se.apply(this,arguments)}return B}()},{key:"postActivity",value:function(B){var j=this;if(this.connectionStatus$.value===b.ConnectionStatus.Ended||this.connectionStatus$.value===b.ConnectionStatus.FailedToConnect)return g.Observable.throw(new Error("Connection is closed"));if(B.type==="message"&&B.attachments&&B.attachments.length>0)return this.postMessageWithAttachments(B);var J=g.Observable.create(function(){var Z=(0,n.default)(p.default.mark(function G(z){var F,te,le,pe,_e,Ee;return p.default.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return F=m.StreamingRequest.create("POST","/v3/directline/conversations/"+j.conversationId+"/activities"),F.setBody(JSON.stringify(B)),Pe.prev=2,Pe.next=5,j.streamConnection.send(F);case 5:if(te=Pe.sent,te.statusCode===200){Pe.next=8;break}throw new Error("PostActivity returned "+te.statusCode);case 8:if(le=te.streams.length,le===1){Pe.next=11;break}throw new Error("Expected one stream but got "+le);case 11:return Pe.next=13,te.streams[0].readAsString();case 13:return pe=Pe.sent,_e=JSON.parse(pe),Ee=_e.Id,z.next(Ee),Pe.abrupt("return",z.complete());case 19:return Pe.prev=19,Pe.t0=Pe.catch(2),console.warn(Pe.t0),j.streamConnection.disconnect(),Pe.abrupt("return",z.error(Pe.t0));case 24:case"end":return Pe.stop()}},G,null,[[2,19]])}));return function(G){return Z.apply(this,arguments)}}());return J}},{key:"postMessageWithAttachments",value:function(B){var j=this,J=B.attachments,Z=(0,o.default)(B,A);return g.Observable.create(function(G){var z=[];(0,n.default)(p.default.mark(function F(){var te,le,pe,_e,Ee,Ne,Pe;return p.default.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.prev=0,qe.next=3,Promise.all(J.map(function(){var lt=(0,n.default)(p.default.mark(function pt(de){var ie,we;return p.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return ie=de,Oe.next=3,(0,_.default)(ie.contentUrl);case 3:if(we=Oe.sent,!we.ok){Oe.next=12;break}return Oe.next=7,we.arrayBuffer();case 7:return Oe.t0=Oe.sent,Oe.t1=ie,Oe.abrupt("return",{arrayBuffer:Oe.t0,media:Oe.t1});case 12:throw new Error("...");case 13:case"end":return Oe.stop()}},pt)}));return function(pt){return lt.apply(this,arguments)}}()));case 3:return te=qe.sent,te.forEach(function(lt){var pt=lt.arrayBuffer,de=lt.media,ie=y.Buffer.from(pt),we=new m.SubscribableStream;we.write(ie);var Me=new m.HttpContent({type:de.contentType,contentLength:ie.length},we);z.push(Me)}),le="/v3/directline/conversations/".concat(j.conversationId,"/users/").concat(Z.from.id,"/upload"),pe=m.StreamingRequest.create("PUT",le),_e=new m.SubscribableStream,_e.write(JSON.stringify(Z),"utf-8"),pe.addStream(new m.HttpContent({type:"application/vnd.microsoft.activity",contentLength:_e.length},_e)),z.forEach(function(lt){return pe.addStream(lt)}),qe.next=13,j.streamConnection.send(pe);case 13:if(Ee=qe.sent,!(Ee.streams&&Ee.streams.length!==1)){qe.next=18;break}G.error(new Error("Invalid stream count ".concat(Ee.streams.length))),qe.next=24;break;case 18:return qe.next=20,Ee.streams[0].readAsJson();case 20:Ne=qe.sent,Pe=Ne.Id,G.next(Pe),G.complete();case 24:qe.next=29;break;case 26:qe.prev=26,qe.t0=qe.catch(0),G.error(qe.t0);case 29:case"end":return qe.stop()}},F,null,[[0,26]])}))()})}},{key:"waitUntilOnline",value:function(){var se=(0,n.default)(p.default.mark(function j(){var J=this;return p.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",new Promise(function(z,F){J.connectionStatus$.subscribe(function(te){if(te===b.ConnectionStatus.Online)return z()},function(te){return F(te)})}));case 1:case"end":return G.stop()}},j)}));function B(){return se.apply(this,arguments)}return B}()},{key:"connectAsync",value:function(){var se=(0,n.default)(p.default.mark(function j(){var J=this,Z,G,z,F,te;return p.default.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(Z=new RegExp("^http(s?)"),Z.test(this.domain)){pe.next=3;break}throw"Domain must begin with http or https";case 3:return G={token:this.token},this.conversationId&&(G.conversationId=this.conversationId),z=new AbortController,F=new URLSearchParams(G).toString(),te="".concat(this.domain.replace(Z,"ws$1"),"/conversations/connect?").concat(F),pe.abrupt("return",new Promise(function(){var _e=(0,n.default)(p.default.mark(function Ee(Ne,Pe){var Le,qe,lt,pt;return p.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,J.streamConnection=new R.default({disconnectionHandler:Ne,networkInformation:(0,s.default)(J,oe),requestHandler:{processRequest:function(Me){if(z.signal.aborted)throw new Error("Cannot process streaming request, `streamingConnection` should be disconnected.");return J.theStreamHandler.processRequest(Me)}},url:te}),J.queueActivities=!0,ie.next=5,J.streamConnection.connect();case 5:return Le=m.StreamingRequest.create("POST","/v3/directline/conversations"),ie.next=8,J.streamConnection.send(Le);case 8:if(qe=ie.sent,qe.statusCode===200){ie.next=11;break}throw new Error("Connection response code "+qe.statusCode);case 11:if(qe.streams.length===1){ie.next=13;break}throw new Error("Expected 1 stream but got "+qe.streams.length);case 13:return ie.next=15,qe.streams[0].readAsString();case 15:return lt=ie.sent,pt=JSON.parse(lt),J.conversationId=pt.conversationId,J.connectionStatus$.next(b.ConnectionStatus.Online),ie.next=21,J.waitUntilOnline();case 21:J.theStreamHandler.flush(),J.queueActivities=!1,ie.next=28;break;case 25:ie.prev=25,ie.t0=ie.catch(0),Pe(ie.t0);case 28:case"end":return ie.stop()}},Ee,null,[[0,25]])}));return function(Ee,Ne){return _e.apply(this,arguments)}}()).finally(function(){return z.abort()}));case 9:case"end":return pe.stop()}},j,this)}));function B(){return se.apply(this,arguments)}return B}()},{key:"connectWithRetryAsync",value:function(){var se=(0,n.default)(p.default.mark(function j(){var J=this,Z,G;return p.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(this.connectDeferred=(0,C.default)()).promise;case 2:Z=D,this.connectionStatus$.next(b.ConnectionStatus.Connecting);case 4:if(!(Z>0)){F.next=27;break}return Z--,G=Date.now(),F.prev=7,F.next=10,this.connectAsync();case 10:F.next=15;break;case 12:F.prev=12,F.t0=F.catch(7),console.error(F.t0);case 15:if(this.connectionStatus$.getValue()!==b.ConnectionStatus.Ended){F.next=17;break}return F.abrupt("return");case 17:if(this.connectionStatus$.getValue()!==b.ConnectionStatus.Connecting&&this.connectionStatus$.next(b.ConnectionStatus.Connecting),!(6e4<Date.now()-G)){F.next=22;break}Z=D,F.next=25;break;case 22:if(!(Z>0)){F.next=25;break}return F.next=25,new Promise(function(te){return setTimeout(te,J.getRetryDelay())});case 25:F.next=4;break;case 27:this.connectionStatus$.next(b.ConnectionStatus.FailedToConnect);case 28:F.next=0;break;case 30:case"end":return F.stop()}},j,this,[[7,12]])}));function B(){return se.apply(this,arguments)}return B}()},{key:"getRetryDelay",value:function(){return Math.floor(3e3+Math.random()*12e3)}}]),fe}();return ll.DirectLineStreaming=ae,ll}var XM;function Z2(){return XM||(XM=1,function(r){var i=yl(),o=To();Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DirectLineStreaming",{enumerable:!0,get:function(){return y.DirectLineStreaming}}),r.DirectLine=r.ConnectionStatus=void 0;var p=i(o2()),s=i(yS()),f=i(mS()),a=i(a2());vB(),gB();var n=q2(),l=et(),u=eh(),h=C(OB);jB(),zB(),BB(),VB(),KB(),QB(),XB(),e6(),n6(),s6(),f6(),v6(),m6(),C6(),T6(),M6(),j6(),q6();var d=i(U6()),y=c4(),g=["contentUrl"];function m(se){if(typeof WeakMap!="function")return null;var B=new WeakMap,j=new WeakMap;return(m=function(Z){return Z?j:B})(se)}function C(se,B){if(se&&se.__esModule)return se;if(se===null||o(se)!=="object"&&typeof se!="function")return{default:se};var j=m(B);if(j&&j.has(se))return j.get(se);var J={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in se)if(G!=="default"&&Object.prototype.hasOwnProperty.call(se,G)){var z=Z?Object.getOwnPropertyDescriptor(se,G):null;z&&(z.get||z.set)?Object.defineProperty(J,G,z):J[G]=se[G]}return J.default=se,j&&j.set(se,J),J}function _(se,B){var j=Object.keys(se);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(se);B&&(J=J.filter(function(Z){return Object.getOwnPropertyDescriptor(se,Z).enumerable})),j.push.apply(j,J)}return j}function b(se){for(var B=1;B<arguments.length;B++){var j=arguments[B]!=null?arguments[B]:{};B%2?_(Object(j),!0).forEach(function(J){(0,a.default)(se,J,j[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(j)):_(Object(j)).forEach(function(J){Object.defineProperty(se,J,Object.getOwnPropertyDescriptor(j,J))})}return se}var R="DirectLine/3.0",A;r.ConnectionStatus=A,function(se){se[se.Uninitialized=0]="Uninitialized",se[se.Connecting=1]="Connecting",se[se.Online=2]="Online",se[se.ExpiredToken=3]="ExpiredToken",se[se.FailedToConnect=4]="FailedToConnect",se[se.Ended=5]="Ended"}(A||(r.ConnectionStatus=A={}));var w=function(B,j){var J=function(){throw new Error("not implemented")},Z=function(F){return F.catch(function(te){if(te.status===429){var le=te.xhr.getResponseHeader("Retry-After"),pe=Number(le);if(!isNaN(pe))return l.Observable.timer(pe,j).flatMap(function(_e){return l.Observable.throw(te,j)})}return l.Observable.throw(te,j)})},G=function(F){return Z(B(F))};return Object.assign(G,{get:function(F,te){return J()},post:function(F,te,le){return J()},put:function(F,te,le){return J()},patch:function(F,te,le){return J()},delete:function(F,te){return J()},getJSON:function(F,te){return J()}})},O=function(B){var j=B.scheduler||u.async;return{scheduler:j,ajax:w(B.ajax||l.Observable.ajax,j),WebSocket:B.WebSocket||WebSocket,random:B.random||Math.random}},P=30*60*1e3,D=P/2,N=200,$=new Error("expired token"),Y=new Error("conversation ended"),oe=new Error("failed to connect"),ae={log:function(B){for(var j,J=arguments.length,Z=new Array(J>1?J-1:0),G=1;G<J;G++)Z[G-1]=arguments[G];typeof window<"u"&&window.botchatDebug&&B&&(j=console).log.apply(j,[B].concat(Z))}},fe=function(){function se(B){(0,s.default)(this,se),(0,a.default)(this,"connectionStatus$",new n.BehaviorSubject(A.Uninitialized)),(0,a.default)(this,"domain","https://directline.botframework.com/v3/directline"),(0,a.default)(this,"watermark",""),(0,a.default)(this,"_botAgent",""),(0,a.default)(this,"timeout",20*1e3),(0,a.default)(this,"pollingInterval",1e3),this.secret=B.secret,this.token=B.secret||B.token,this.webSocket=(B.webSocket===void 0?!0:B.webSocket)&&typeof WebSocket<"u"&&WebSocket!==void 0,B.conversationStartProperties&&B.conversationStartProperties.locale&&(Object.prototype.toString.call(B.conversationStartProperties.locale)==="[object String]"?this.localeOnStartConversation=B.conversationStartProperties.locale:console.warn("DirectLineJS: conversationStartProperties.locale was ignored: the locale name may be a BCP 47 language tag")),B.domain&&(this.domain=B.domain),B.conversationId&&(this.conversationId=B.conversationId),B.watermark&&(this.watermark=B.watermark),B.streamUrl&&(B.token&&B.conversationId?this.streamUrl=B.streamUrl:console.warn("DirectLineJS: streamUrl was ignored: you need to provide a token and a conversationid")),B.timeout!==void 0&&(this.timeout=B.timeout),this.retries=(P-D)/this.timeout,this._botAgent=this.getBotAgent(B.botAgent),this.services=O(B);var j=~~B.pollingInterval;j<N?typeof B.pollingInterval<"u"&&console.warn("DirectLineJS: provided pollingInterval (".concat(B.pollingInterval,") is under lower bound (200ms), using default of 1000ms")):this.pollingInterval=j,this.expiredTokenExhaustion=this.setConnectionStatusFallback(A.ExpiredToken,A.FailedToConnect,5),this.activity$=(this.webSocket?this.webSocketActivity$():this.pollingGetActivity$()).share()}return(0,f.default)(se,[{key:"checkConnection",value:function(){var j=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Z=this.connectionStatus$.flatMap(function(G){return G===A.Uninitialized?(j.connectionStatus$.next(A.Connecting),j.token&&j.streamUrl?(j.connectionStatus$.next(A.Online),l.Observable.of(G,j.services.scheduler)):j.startConversation().do(function(z){j.conversationId=z.conversationId,j.token=j.secret||z.token,j.streamUrl=z.streamUrl,j.referenceGrammarId=z.referenceGrammarId,j.secret||j.refreshTokenLoop(),j.connectionStatus$.next(A.Online)},function(z){j.connectionStatus$.next(A.FailedToConnect)}).map(function(z){return G})):l.Observable.of(G,j.services.scheduler)}).filter(function(G){return G!=A.Uninitialized&&G!=A.Connecting}).flatMap(function(G){switch(G){case A.Ended:return l.Observable.throw(Y,j.services.scheduler);case A.FailedToConnect:return l.Observable.throw(oe,j.services.scheduler);case A.ExpiredToken:return l.Observable.of(G,j.services.scheduler);default:return l.Observable.of(G,j.services.scheduler)}});return J?Z.take(1):Z}},{key:"setConnectionStatusFallback",value:function(j,J){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;Z--;var G=0,z=null;return function(F){return F===j&&z===F&&G>=Z?(G=0,J):(G++,z=F,F)}}},{key:"expiredToken",value:function(){var j=this.connectionStatus$.getValue();j!=A.Ended&&j!=A.FailedToConnect&&this.connectionStatus$.next(A.ExpiredToken);var J=this.expiredTokenExhaustion(this.connectionStatus$.getValue());this.connectionStatus$.next(J)}},{key:"startConversation",value:function(){var j=this,J=this.conversationId?"".concat(this.domain,"/conversations/").concat(this.conversationId,"?watermark=").concat(this.watermark):"".concat(this.domain,"/conversations"),Z=this.conversationId?"GET":"POST",G=this.conversationId?void 0:{user:{id:this.userIdOnStartConversation},locale:this.localeOnStartConversation};return this.services.ajax({method:Z,url:J,body:G,timeout:this.timeout,headers:b({Accept:"application/json","Content-Type":"application/json"},this.commonHeaders())}).map(function(z){return z.response}).retryWhen(function(z){return z.mergeMap(function(F){return F.status>=400&&F.status<600?l.Observable.throw(F,j.services.scheduler):l.Observable.of(F,j.services.scheduler)}).delay(j.timeout,j.services.scheduler).take(j.retries)})}},{key:"refreshTokenLoop",value:function(){var j=this;this.tokenRefreshSubscription=l.Observable.interval(D,this.services.scheduler).flatMap(function(J){return j.refreshToken()}).subscribe(function(J){ae.log("refreshing token",J,"at",new Date),j.token=J})}},{key:"refreshToken",value:function(){var j=this;return this.checkConnection(!0).flatMap(function(J){return j.services.ajax({method:"POST",url:"".concat(j.domain,"/tokens/refresh"),timeout:j.timeout,headers:b({},j.commonHeaders())}).map(function(Z){return Z.response.token}).retryWhen(function(Z){return Z.mergeMap(function(G){return G.status===403?(j.expiredToken(),l.Observable.throw(G,j.services.scheduler)):G.status===404?l.Observable.throw(G,j.services.scheduler):l.Observable.of(G,j.services.scheduler)}).delay(j.timeout,j.services.scheduler).take(j.retries)})})}},{key:"reconnect",value:function(j){this.token=j.token,this.streamUrl=j.streamUrl,this.connectionStatus$.getValue()===A.ExpiredToken&&this.connectionStatus$.next(A.Online)}},{key:"end",value:function(){this.tokenRefreshSubscription&&this.tokenRefreshSubscription.unsubscribe();try{this.connectionStatus$.next(A.Ended)}catch(j){if(j===Y)return;throw j}}},{key:"getSessionId",value:function(){var j=this;return ae.log("getSessionId"),this.checkConnection(!0).flatMap(function(J){return j.services.ajax({method:"GET",url:"".concat(j.domain,"/session/getsessionid"),withCredentials:!0,timeout:j.timeout,headers:b({"Content-Type":"application/json"},j.commonHeaders())}).map(function(Z){return Z&&Z.response&&Z.response.sessionId?(ae.log("getSessionId response: "+Z.response.sessionId),Z.response.sessionId):""}).catch(function(Z){return ae.log("getSessionId error: "+Z.status),l.Observable.of("",j.services.scheduler)})}).catch(function(J){return j.catchExpiredToken(J)})}},{key:"postActivity",value:function(j){var J=this;return this.userIdOnStartConversation&&j.from&&j.from.id!==this.userIdOnStartConversation&&(console.warn("DirectLineJS: Activity.from.id does not match with user id, ignoring activity.from.id"),j.from.id=this.userIdOnStartConversation),j.type==="message"&&j.attachments&&j.attachments.length>0?this.postMessageWithAttachments(j):(ae.log("postActivity",j),this.checkConnection(!0).flatMap(function(Z){return J.services.ajax({method:"POST",url:"".concat(J.domain,"/conversations/").concat(J.conversationId,"/activities"),body:j,timeout:J.timeout,headers:b({"Content-Type":"application/json"},J.commonHeaders())}).map(function(G){return G.response.id}).catch(function(G){return J.catchPostError(G)})}).catch(function(Z){return J.catchExpiredToken(Z)}))}},{key:"postMessageWithAttachments",value:function(j){var J=this,Z=j.attachments,G=(0,d.default)(Z.map(function(te){return te.name||"blob"})),z=Z.map(function(te,le){return b(b({},te),{},{name:G[le]})}),F;return this.checkConnection(!0).flatMap(function(te){return F=new FormData,F.append("activity",new Blob([JSON.stringify(b(b({},j),{},{attachments:z.map(function(le){le.contentUrl;var pe=(0,p.default)(le,g);return b({},pe)})}))],{type:"application/vnd.microsoft.activity"})),l.Observable.from(z,J.services.scheduler).flatMap(function(le){return J.services.ajax({method:"GET",url:le.contentUrl,responseType:"arraybuffer"}).do(function(pe){return F.append("file",new Blob([pe.response],{type:le.contentType}),le.name)})}).count()}).flatMap(function(te){return J.services.ajax({method:"POST",url:"".concat(J.domain,"/conversations/").concat(J.conversationId,"/upload?userId=").concat(j.from.id),body:F,timeout:J.timeout,headers:b({},J.commonHeaders())}).map(function(le){return le.response.id}).catch(function(le){return J.catchPostError(le)})}).catch(function(te){return J.catchPostError(te)})}},{key:"catchPostError",value:function(j){if(j.status===403)this.expiredToken();else if(j.status>=400&&j.status<500)return l.Observable.throw(j,this.services.scheduler);return l.Observable.of("retry",this.services.scheduler)}},{key:"catchExpiredToken",value:function(j){return j===$?l.Observable.of("retry",this.services.scheduler):l.Observable.throw(j,this.services.scheduler)}},{key:"pollingGetActivity$",value:function(){var j=this,J=l.Observable.create(function(Z){var G=new n.BehaviorSubject({});G.subscribe(function(){if(j.connectionStatus$.getValue()===A.Online){var z=Date.now();j.services.ajax({headers:b({Accept:"application/json"},j.commonHeaders()),method:"GET",url:"".concat(j.domain,"/conversations/").concat(j.conversationId,"/activities?watermark=").concat(j.watermark),timeout:j.timeout}).subscribe(function(F){Z.next(F),setTimeout(function(){return G.next(null)},Math.max(0,j.pollingInterval-Date.now()+z))},function(F){switch(F.status){case 403:j.connectionStatus$.next(A.ExpiredToken),setTimeout(function(){return G.next(null)},j.pollingInterval);break;case 404:j.connectionStatus$.next(A.Ended);break;default:Z.error(F);break}})}})});return this.checkConnection().flatMap(function(Z){return J.catch(function(){return l.Observable.empty()}).map(function(G){return G.response}).flatMap(function(G){return j.observableFromActivityGroup(G)})})}},{key:"observableFromActivityGroup",value:function(j){return j.watermark&&(this.watermark=j.watermark),l.Observable.from(j.activities,this.services.scheduler)}},{key:"webSocketActivity$",value:function(){var j=this;return this.checkConnection().flatMap(function(J){return j.observableWebSocket().retryWhen(function(Z){return Z.delay(j.getRetryDelay(),j.services.scheduler).mergeMap(function(G){return j.reconnectToConversation()})})}).flatMap(function(J){return j.observableFromActivityGroup(J)})}},{key:"getRetryDelay",value:function(){return Math.floor(3e3+this.services.random()*12e3)}},{key:"observableWebSocket",value:function(){var j=this;return l.Observable.create(function(J){ae.log("creating WebSocket",j.streamUrl);var Z=new j.services.WebSocket(j.streamUrl),G,z;return Z.onopen=function(F){ae.log("WebSocket open",F),G=l.Observable.interval(j.timeout,j.services.scheduler).subscribe(function(te){try{Z.send("")}catch(le){ae.log("Ping error",le)}})},Z.onclose=function(F){ae.log("WebSocket close",F),G&&G.unsubscribe(),z||J.error(F),z=!0},Z.onerror=function(F){ae.log("WebSocket error",F),G&&G.unsubscribe(),z||J.error(F),z=!0},Z.onmessage=function(F){return F.data&&J.next(JSON.parse(F.data))},function(){(Z.readyState===0||Z.readyState===1)&&Z.close()}})}},{key:"reconnectToConversation",value:function(){var j=this;return this.checkConnection(!0).flatMap(function(J){return j.services.ajax({method:"GET",url:"".concat(j.domain,"/conversations/").concat(j.conversationId,"?watermark=").concat(j.watermark),timeout:j.timeout,headers:b({Accept:"application/json"},j.commonHeaders())}).do(function(Z){j.secret||(j.token=Z.response.token),j.streamUrl=Z.response.streamUrl}).map(function(Z){return null}).retryWhen(function(Z){return Z.mergeMap(function(G){if(G.status===403)j.expiredToken();else if(G.status===404)return l.Observable.throw(Y,j.services.scheduler);return l.Observable.of(G,j.services.scheduler)}).delay(j.timeout,j.services.scheduler).take(j.retries)})})}},{key:"commonHeaders",value:function(){return{Authorization:"Bearer ".concat(this.token),"x-ms-bot-agent":this._botAgent}}},{key:"getBotAgent",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",J="directlinejs";return j&&(J+="; ".concat(j)),"".concat(R," (").concat(J," ").concat("0.15.6",")")}},{key:"setUserId",value:function(j){if(this.connectionStatus$.getValue()===A.Online)throw new Error("DirectLineJS: It is connected, we cannot set user id.");var J=this.parseToken(this.token);if(J)return console.warn("DirectLineJS: user id is already set in token, will ignore this user id.");if(/^dl_/.test(j))return console.warn('DirectLineJS: user id prefixed with "dl_" is reserved and must be embedded into the Direct Line token to prevent forgery.');this.userIdOnStartConversation=j}},{key:"parseToken",value:function(j){try{var J=(0,h.default)(j),Z=J.user;return Z}catch(G){if(G instanceof h.InvalidTokenError)return}}}]),se}();r.DirectLine=fe}(Nv)),Nv}var Pr=Z2();const qt=[];for(let r=0;r<256;++r)qt.push((r+256).toString(16).slice(1));function u4(r,i=0){return(qt[r[i+0]]+qt[r[i+1]]+qt[r[i+2]]+qt[r[i+3]]+"-"+qt[r[i+4]]+qt[r[i+5]]+"-"+qt[r[i+6]]+qt[r[i+7]]+"-"+qt[r[i+8]]+qt[r[i+9]]+"-"+qt[r[i+10]]+qt[r[i+11]]+qt[r[i+12]]+qt[r[i+13]]+qt[r[i+14]]+qt[r[i+15]]).toLowerCase()}let Ym;const l4=new Uint8Array(16);function f4(){if(!Ym){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ym=crypto.getRandomValues.bind(crypto)}return Ym(l4)}const h4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ZM={randomUUID:h4};function eD(r,i,o){if(ZM.randomUUID&&!r)return ZM.randomUUID();r=r||{};const p=r.random??r.rng?.()??f4();if(p.length<16)throw new Error("Random bytes length must be >= 16");return p[6]=p[6]&15|64,p[8]=p[8]&63|128,u4(p)}class p4{directLine=null;conversationState={messages:[]};isConnected=!1;constructor(){}async connect(){return new Promise((i,o)=>{try{const p=qr.getInstance().getBotConfig();this.directLine=new Pr.DirectLine({secret:p.directLineSecret,webSocket:!0}),this.directLine.connectionStatus$.subscribe({next:s=>{switch(console.log("Bot connection status:",this.getConnectionStatusText(s)),s){case Pr.ConnectionStatus.Uninitialized:console.log("Connection uninitialized");break;case Pr.ConnectionStatus.Connecting:console.log("Connecting to bot...");break;case Pr.ConnectionStatus.Online:console.log("Connected to bot successfully"),this.isConnected=!0,i();break;case Pr.ConnectionStatus.FailedToConnect:console.error("Failed to connect to bot"),this.isConnected=!1,o(new Error("Failed to connect to bot"));break;case Pr.ConnectionStatus.Ended:console.log("Bot conversation ended"),this.isConnected=!1;break;default:console.log("Unknown connection status:",s)}},error:s=>{console.error("Bot connection error:",s),this.isConnected=!1,o(s)}}),this.setupActivityListener()}catch(p){console.error("Failed to initialize bot connection:",p),o(p)}})}async sendMessage(i){if(!this.directLine||!this.isConnected)throw new Error("Bot is not connected");const o={id:eD(),text:i,from:{id:"user"},timestamp:new Date,type:"user"};return this.conversationState.messages.push(o),new Promise((p,s)=>{this.directLine.postActivity({from:{id:"user"},type:"message",text:i}).subscribe({next:f=>{console.log("Message sent to bot, activity ID:",f),p()},error:f=>{console.error("Failed to send message to bot:",f),s(f)}})})}setupActivityListener(){this.directLine&&this.directLine.activity$.subscribe({next:i=>{if(console.log("Received activity from bot:",i),i.from&&i.from.id!=="user"&&i.type==="message"){const o={id:i.id||eD(),text:i.text||"",from:{id:i.from.id,name:i.from.name},timestamp:new Date(i.timestamp||Date.now()),type:"bot"};this.conversationState.messages.push(o),this.emitBotResponse(o)}},error:i=>{console.error("Error receiving bot activity:",i)}})}emitBotResponse(i){const o=new CustomEvent("botResponse",{detail:i});window.dispatchEvent(o)}getConversationHistory(){return[...this.conversationState.messages]}getConnectionStatusText(i){switch(i){case Pr.ConnectionStatus.Uninitialized:return"Uninitialized";case Pr.ConnectionStatus.Connecting:return"Connecting";case Pr.ConnectionStatus.Online:return"Online";case Pr.ConnectionStatus.FailedToConnect:return"Failed to Connect";case Pr.ConnectionStatus.Ended:return"Ended";default:return"Unknown"}}isConnectedToBoot(){return this.isConnected}disconnect(){this.directLine&&(this.directLine.end(),this.directLine=null),this.isConnected=!1,this.conversationState={messages:[]}}dispose(){this.disconnect()}}class d4{avatarSynthesizer=null;peerConnection=null;isSessionActive=!1;configService;constructor(){this.configService=qr.getInstance()}async startSession(i="lisa",o="casual-sitting",p="avatarVideo"){if(this.isSessionActive){console.log("Avatar session already active");return}try{const s=this.createSpeechConfig();console.log(" Speech config created successfully"),console.log(" Getting ICE server credentials...");const f=await this.getIceServerInfo();console.log(" ICE server credentials obtained:",{url:f.url.substring(0,50)+"..."}),await this.tryAvatarConfigurations(s,f,i,o,p),console.log(" Azure Avatar Real-Time session started successfully"),this.isSessionActive=!0,this.emitEvent("sessionStarted",{message:"Avatar session started"})}catch(s){throw console.error(" Failed to start avatar session:",s),s instanceof Error&&console.error("Error details:",{name:s.name,message:s.message,stack:s.stack}),this.emitEvent("sessionError",{error:s instanceof Error?s.message:String(s)}),s}}async speak(i,o){if(!this.avatarSynthesizer||!this.isSessionActive)throw new Error("Avatar session not started. Call startSession() first.");try{const p=o||this.configService.getSpeechConfig().synthesisVoice||"en-US-JennyMultilingualNeural",s=this.createSSML(i,p);setTimeout(()=>this.emitEvent("speakingStarted",{text:i,voice:p}),0);const f=await this.avatarSynthesizer.speakSsmlAsync(s);setTimeout(()=>{f.reason===rt.ResultReason.SynthesizingAudioCompleted?this.emitEvent("speakingCompleted",{text:i,voice:p,resultId:f.resultId}):this.emitEvent("speakingError",{error:`Speech synthesis failed: ${f.reason}`,voice:p})},0)}catch(p){throw console.error(" Avatar speaking failed:",p),setTimeout(()=>this.emitEvent("speakingError",{error:p instanceof Error?p.message:String(p)}),0),p}}async stopSpeaking(){if(this.avatarSynthesizer)try{await Promise.race([new Promise((i,o)=>{this.avatarSynthesizer.stopSpeakingAsync().then(()=>{console.log("Avatar stopped speaking"),setTimeout(()=>this.emitEvent("speakingStopped",{}),0),i()}).catch(o)}),new Promise((i,o)=>setTimeout(()=>o(new Error("Stop speaking timeout")),1e3))])}catch(i){console.warn("Stop speaking timeout (non-critical):",i),setTimeout(()=>this.emitEvent("speakingStopped",{}),0)}}async stopSession(){if(this.isSessionActive)try{await this.stopSpeaking(),this.avatarSynthesizer&&(this.avatarSynthesizer.close(),this.avatarSynthesizer=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.isSessionActive=!1,console.log("Avatar session stopped"),this.emitEvent("sessionStopped",{})}catch(i){throw console.error("Failed to stop avatar session:",i),i}}isActive(){return this.isSessionActive}createSpeechConfig(){const i=this.configService.getSpeechConfig();if(console.log(" Creating speech config:",{hasKey:!!i.speechKey,keyLength:i.speechKey?.length,region:i.speechRegion,hasEndpoint:!!i.speechEndpoint}),!i.speechKey||!i.speechRegion)throw new Error("Missing required speech configuration. Please check VITE_SPEECH_KEY and VITE_SPEECH_REGION environment variables.");return rt.SpeechConfig.fromSubscription(i.speechKey,i.speechRegion)}createAvatarConfig(i,o){const p=new rt.AvatarVideoFormat,s=new rt.AvatarConfig(i,o,p);return s.customized=!1,s.backgroundColor="#FFFFFFFF",s}async getIceServerInfo(){const i=this.configService.getSpeechConfig(),o=`https://${i.speechRegion}.tts.speech.microsoft.com/cognitiveservices/avatar/relay/token/v1`;console.log(" Requesting ICE server token from:",o);try{const p=await fetch(o,{method:"GET",headers:{"Ocp-Apim-Subscription-Key":i.speechKey}});if(console.log(" ICE server response status:",p.status,p.statusText),!p.ok){const f=await p.text();throw console.error(" ICE server request failed:",{status:p.status,statusText:p.statusText,errorText:f}),new Error(`Failed to get ICE server info: ${p.status} ${p.statusText} - ${f}`)}const s=await p.json();if(console.log(" ICE server response received:",{hasUrls:!!s.Urls,urlCount:s.Urls?.length,hasUsername:!!s.Username,hasPassword:!!s.Password}),!s.Urls||!s.Username||!s.Password)throw new Error("Invalid ICE server response: missing required fields");return{url:s.Urls[0],username:s.Username,credential:s.Password}}catch(p){throw console.error(" Failed to get ICE server info:",p),p}}async setupWebRTC(i,o){this.peerConnection=new RTCPeerConnection({iceServers:[{urls:[i.url],username:i.username,credential:i.credential}]}),this.peerConnection.ontrack=p=>{p.track.kind==="video"?console.log(" Video track received - setting up stream..."):p.track.kind==="audio"&&console.log(" Audio track received - configuring audio...");const s=document.getElementById(o);if(s){if(p.track.kind==="video")console.log(" Attaching video stream to video element..."),s.srcObject=p.streams[0],s.autoplay=!0,s.playsInline=!0,s.muted=!1,s.volume=1,console.log(" Video stream attached to video element"),this.emitEvent("videoStreamReady",{videoElementId:o});else if(p.track.kind==="audio"){console.log(" Handling audio track...");const f=s.srcObject;if(f)f.addTrack(p.track),p.track.enabled=!0;else{console.log(" Creating new stream with audio track...");const a=new MediaStream([p.track]);s.srcObject=a}s.muted=!1,s.volume=1,p.track.enabled=!0,console.log(" Audio track added to video element:",{muted:s.muted,volume:s.volume,trackEnabled:p.track.enabled,trackMuted:p.track.muted})}s.onloadedmetadata||(s.onloadedmetadata=()=>{console.log(" Avatar video ready")},s.onplay=()=>{console.log(" Avatar video playing")},s.onerror=f=>{console.error(" Avatar video error:",f)})}},this.peerConnection.oniceconnectionstatechange=()=>{const p=this.peerConnection.iceConnectionState;(p==="connected"||p==="failed"||p==="disconnected")&&console.log("WebRTC connection state:",p),this.emitEvent("connectionStateChanged",{state:p}),(p==="failed"||p==="disconnected")&&this.emitEvent("connectionError",{state:p})},this.peerConnection.addEventListener("datachannel",p=>{const s=p.channel;s.onmessage=f=>{try{const a=JSON.parse(f.data);a.type!=="speaking"&&a.type!=="audio"&&console.log("Avatar event received:",a),this.emitEvent("avatarEvent",a)}catch(a){console.error("Failed to parse avatar event:",a)}}}),this.peerConnection.createDataChannel("eventChannel"),this.peerConnection.addTransceiver("video",{direction:"sendrecv"}),this.peerConnection.addTransceiver("audio",{direction:"sendrecv"}),console.log(" Starting avatar with WebRTC connection..."),await new Promise((p,s)=>{this.avatarSynthesizer.startAvatarAsync(this.peerConnection).then(f=>{if(console.log(" Avatar start result:",{reason:f.reason,resultId:f.resultId,reasonString:this.getResultReasonString(f.reason)}),f.reason===rt.ResultReason.SynthesizingAudioCompleted)console.log(" Avatar WebRTC session started successfully"),p();else{const a=this.getDetailedErrorInfo(f);console.error(" Failed to start avatar:",a),s(new Error(`Failed to start avatar: ${a.reason} - ${a.details}`))}}).catch(f=>{console.error(" Avatar start promise rejected:",f),s(f)})})}setupEventHandlers(){this.avatarSynthesizer&&(this.avatarSynthesizer.avatarEventReceived=(i,o)=>{const p=o.offset===0?"":`, offset: ${o.offset/1e4}ms`;!o.description.includes("audio")&&!o.description.includes("frame")&&console.log(`Avatar event: ${o.description}${p}`),this.emitEvent("avatarEventReceived",{description:o.description,offset:o.offset})})}createSSML(i,o){const p=i.replace(/[&<>]/g,s=>s==="&"?"&amp;":s==="<"?"&lt;":"&gt;");return`<speak version="1.0" xml:lang="en-US"><voice name="${o}">${p}</voice></speak>`}emitEvent(i,o){const p=()=>{const f=new CustomEvent("azureAvatarEvent",{detail:{eventType:i,data:o,timestamp:new Date}});window.dispatchEvent(f)};["speakingStarted","speakingCompleted","speakingStopped","speakingError","sessionStarted","sessionError"].includes(i)?p():"requestIdleCallback"in window?window.requestIdleCallback(p,{timeout:100}):setTimeout(p,0)}dispose(){this.stopSession().catch(console.error)}getDetailedErrorInfo(i){const o=this.getResultReasonString(i.reason);let p="Unknown error";if(i.reason===rt.ResultReason.Canceled)try{const s=rt.CancellationDetails.fromResult(i);p=`Cancellation reason: ${this.getCancellationReasonString(s.reason)}`,s.reason===rt.CancellationReason.Error&&(p+=` | Error details: ${s.errorDetails||"No additional details"}`,p+=` | Error code: ${s.ErrorCode||"Unknown"}`)}catch(s){p=`Failed to get cancellation details: ${s}`}return{reason:o,details:p}}getResultReasonString(i){return{0:"NoMatch",1:"RecognizedSpeech",2:"RecognizedIntent",3:"TranslatedSpeech",4:"SynthesizingAudio",5:"SynthesizingAudioCompleted",6:"SynthesizingAudioStarted",7:"Canceled"}[i]||`Unknown reason (${i})`}getCancellationReasonString(i){return{0:"Error",1:"EndOfStream",2:"CancelledByUser"}[i]||`Unknown cancellation reason (${i})`}getAvatarFallbacks(){return[{character:"lisa",style:"casual-sitting"},{character:"lisa",style:"technical-sitting"},{character:"anna",style:"casual-sitting"},{character:"anna",style:"technical-sitting"},{character:"lisa",style:"graceful-sitting"}]}async tryAvatarConfigurations(i,o,p,s,f){const a=[{character:p,style:s},...this.getAvatarFallbacks().filter(n=>!(n.character===p&&n.style===s))];for(let n=0;n<a.length;n++){const l=a[n];try{console.log(` Trying avatar configuration ${n+1}/${a.length}:`,l);const u=this.createAvatarConfig(l.character,l.style);u.remoteIceServers=[{urls:[o.url],username:o.username,credential:o.credential}],console.log(" Creating avatar synthesizer..."),console.log(" Avatar configuration:",{character:l.character,style:l.style,hasRemoteIceServers:!!u.remoteIceServers,iceServerCount:u.remoteIceServers?.length||0}),this.avatarSynthesizer=new rt.AvatarSynthesizer(i,u),console.log(" Avatar synthesizer created successfully"),this.setupEventHandlers(),console.log(" Event handlers set up"),console.log(" Setting up WebRTC connection..."),await this.setupWebRTC(o,f),console.log(" WebRTC connection established"),console.log(` Azure Avatar Real-Time session started successfully with ${l.character}/${l.style}`);return}catch(u){if(console.warn(` Failed to start avatar with ${l.character}/${l.style}:`,u),this.avatarSynthesizer){try{this.avatarSynthesizer.close()}catch(h){console.warn("Failed to close avatar synthesizer:",h)}this.avatarSynthesizer=null}if(n===a.length-1)throw u}}}getBestVoiceForLanguage(i){const p=this.configService.getAvailableLanguages().find(s=>s.code===i);return p?(console.log(` Found voice for ${i}: ${p.voice}`),p.voice):(console.log(` No specific voice found for ${i}, using multilingual fallback`),"en-US-JennyMultilingualNeural")}async speakWithAutoVoice(i,o){const p=o||"en-US",s=this.getBestVoiceForLanguage(p);await this.speak(i,s)}}const v4=({error:r,onDismiss:i})=>Be.jsxs("div",{className:"error-banner",children:[Be.jsxs("span",{children:[" ",r]}),Be.jsx("button",{onClick:i,className:"error-close",children:""})]}),g4=({isSessionActive:r,isSpeaking:i,onSessionStart:o,onSessionStop:p,onSpeakingStart:s,onSpeakingStop:f,onConnectionStateChange:a,onLastEventChange:n})=>{const l=it.useRef(null),[u,h]=it.useState("disconnected");return it.useEffect(()=>{const d=y=>{const g=y,{eventType:m,data:C}=g.detail;switch(m){case"sessionStarted":o?.();break;case"sessionStopped":p?.();break;case"speakingStarted":s?.();break;case"speakingCompleted":case"speakingStopped":f?.();break;case"connectionStateChanged":const _=C.state;h(_),a?.(_);break;case"avatarEvent":n?.(C.description||"Unknown event");break}};return window.addEventListener("azureAvatarEvent",d),()=>{window.removeEventListener("azureAvatarEvent",d)}},[o,p,s,f,a,n]),Be.jsxs("div",{className:"avatar-video-container",children:[Be.jsx("video",{ref:l,id:"avatarVideo",className:"avatar-video",autoPlay:!0,playsInline:!0,muted:!1,onLoadedMetadata:()=>{console.log(" Video metadata loaded")},onCanPlay:()=>{console.log(" Video can play")},onPlaying:()=>{console.log(" Video playing")},onError:d=>{console.error(" Video error:",d)},onClick:()=>{l.current&&(l.current.muted=!1,l.current.volume=1,l.current.play().catch(console.error))}}),!r&&Be.jsxs("div",{className:"avatar-placeholder",children:[Be.jsx("div",{children:""}),Be.jsx("p",{children:"Avatar Initializing..."})]}),r&&u!=="connected"&&Be.jsxs("div",{className:"avatar-placeholder",children:[Be.jsx("div",{className:"spinner"}),Be.jsx("p",{children:"Connecting..."})]})]})},y4=({messages:r})=>{const i=it.useRef(null);return it.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[r]),r.length===0?Be.jsx("div",{className:"conversation-history empty",children:Be.jsxs("div",{className:"empty-state",children:[Be.jsx("div",{className:"empty-icon",children:""}),Be.jsx("p",{children:"Start a conversation..."})]})}):Be.jsx("div",{className:"conversation-history",children:Be.jsxs("div",{className:"messages-container",children:[r.map(o=>Be.jsxs("div",{className:`message ${o.type}`,children:[Be.jsx("div",{className:"message-content",children:Be.jsx("p",{children:o.text})}),Be.jsx("div",{className:"message-time",children:o.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},o.id)),Be.jsx("div",{ref:i})]})})},m4=({onSendMessage:r,isProcessing:i,isListening:o,onStartListening:p,onStopListening:s,isConnected:f,onClearChat:a})=>{const[n,l]=it.useState(""),u=it.useRef(null);it.useEffect(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=`${u.current.scrollHeight}px`)},[n]);const h=y=>{y.preventDefault(),n.trim()&&!i&&(r(n.trim()),l(""))},d=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),h(y))};return Be.jsxs("div",{className:"chat-input-container",children:[Be.jsx("form",{onSubmit:h,className:"chat-input-form",children:Be.jsxs("div",{className:"input-group",children:[Be.jsx("textarea",{ref:u,value:n,onChange:y=>l(y.target.value),onKeyDown:d,placeholder:"Type your message or use voice...",className:"chat-input",disabled:i,rows:1}),Be.jsxs("div",{className:"input-actions",children:[Be.jsx("button",{type:"button",className:`voice-button ${o?"listening":""}`,onClick:o?s:p,disabled:!f||i,title:o?"Stop listening":"Start listening",children:o?Be.jsxs("div",{className:"listening-indicator",children:[Be.jsx("div",{className:"pulse"}),""]}):""}),Be.jsx("button",{type:"submit",className:"send-button",disabled:!n.trim()||i,title:"Send message",children:i?Be.jsx("div",{className:"spinner"}):""})]})]})}),Be.jsx("div",{className:"quick-actions",children:Be.jsx("button",{type:"button",className:"clear-button",onClick:a,disabled:i,title:"Clear conversation",children:""})})]})},S4=()=>{const[r,i]=it.useState({isListening:!1,isProcessing:!1,isConnected:!1,currentMessage:"",botResponse:"",error:void 0}),[o,p]=it.useState([]),[s,f]=it.useState([]),[a,n]=it.useState(!1),[l,u]=it.useState(!1),[h,d]=it.useState("disconnected"),[y,g]=it.useState(""),[m,C]=it.useState(!1),_=it.useRef(null),b=it.useRef(null),R=it.useRef(null),A=it.useRef(""),w=it.useRef(null),O=it.useRef(!1);it.useEffect(()=>((async()=>{try{const ae=qr.getInstance(),{isValid:fe,errors:se}=ae.validateConfiguration();if(!fe){i(j=>({...j,error:`Configuration error: ${se.join(", ")}`}));return}_.current=new wx,b.current=new p4,R.current=new d4,await b.current.connect();const B=ae.getAvatarConfig();await R.current.startSession(B.character,B.style),i(j=>({...j,isConnected:!0,error:void 0})),u(!0),console.log("All services initialized successfully")}catch(ae){const fe=ae instanceof Error?ae.message:String(ae);i(se=>({...se,error:`Initialization failed: ${fe}`,isConnected:!1})),console.error("Service initialization failed:",ae)}})(),()=>{_.current?.dispose(),b.current?.dispose(),R.current?.dispose(),w.current&&(clearTimeout(w.current),w.current=null)}),[]),it.useEffect(()=>{const oe=async ae=>{const se=ae.detail;i(B=>({...B,botResponse:se.text,isProcessing:!1})),p(B=>[...B,se]);try{R.current&&se.text.trim()&&await R.current.speakWithAutoVoice(se.text,"en-US")}catch(B){i(j=>({...j,error:`Avatar speech failed: ${B instanceof Error?B.message:String(B)}`})),P("Failed to speak response","warning")}};return window.addEventListener("botResponse",oe),()=>{window.removeEventListener("botResponse",oe)}},[]),it.useEffect(()=>{const oe=ae=>{const fe=ae,{eventType:se,data:B}=fe.detail;switch(console.log("Azure avatar event:",{eventType:se,data:B}),se){case"sessionStarted":u(!0),P("Avatar session started","success");break;case"sessionStopped":u(!1),n(!1),P("Avatar session stopped","info");break;case"speakingStarted":console.log(" Avatar started speaking"),n(!0);break;case"speakingCompleted":case"speakingStopped":console.log(" Avatar stopped speaking"),n(!1);break;case"sessionError":case"speakingError":P(`Avatar error: ${B.error}`,"warning");break}};return window.addEventListener("azureAvatarEvent",oe),()=>{window.removeEventListener("azureAvatarEvent",oe)}},[]);const P=it.useCallback((oe,ae="info")=>{const fe=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;f(se=>[...se,{id:fe,message:oe,type:ae}]),setTimeout(()=>{f(se=>se.filter(B=>B.id!==fe))},5e3)},[]),D=it.useCallback(async()=>{if(!_.current||!b.current){i(oe=>({...oe,error:"Services not initialized"}));return}try{if(console.log(" Checking microphone permission..."),console.log(" Current protocol:",window.location.protocol),console.log(" Current host:",window.location.host),window.location.protocol!=="https:"&&!window.location.hostname.includes("localhost")){const ae=window.location.href.replace("http:","https:");i(fe=>({...fe,error:`Microphone access requires HTTPS. Please visit: ${ae}`})),P(" Redirecting to HTTPS for microphone access...","info"),window.location.href=ae;return}if(!await _.current.checkMicrophonePermission()){i(ae=>({...ae,error:"Microphone permission required. Please allow microphone access when prompted."})),P(" Please allow microphone access in your browser","warning");return}C(!1),i(ae=>({...ae,isListening:!0,error:void 0,currentMessage:""})),await _.current.startRecognition(ae=>{i(fe=>({...fe,currentMessage:ae}))},async ae=>{if(ae.trim()){const fe=ae.trim().toLowerCase(),se=A.current.toLowerCase();if(fe===se||se&&fe.includes(se)&&fe.length-se.length<5||O.current)return;w.current&&(clearTimeout(w.current),w.current=null),w.current=setTimeout(async()=>{try{O.current=!0,A.current=ae.trim();const B={id:Date.now().toString(),text:ae,from:{id:"user"},timestamp:new Date,type:"user"};p(j=>[...j,B]),i(j=>({...j,isProcessing:!0,currentMessage:ae}));try{await b.current.sendMessage(ae)}catch(j){console.error("Failed to send message to bot:",j),i(J=>({...J,error:`Failed to send message: ${j instanceof Error?j.message:String(j)}`,isProcessing:!1}))}finally{setTimeout(()=>{O.current=!1},1e3)}}catch(B){console.error("Error processing message:",B),O.current=!1}},150)}},ae=>{console.error("Speech recognition error:",ae),i(fe=>({...fe,error:`Speech recognition error: ${ae}`,isListening:!1}))})}catch(oe){console.error("Failed to start speech recognition:",oe),i(ae=>({...ae,error:`Failed to start listening: ${oe instanceof Error?oe.message:String(oe)}`,isListening:!1}))}},[P]),N=it.useCallback(async()=>{if(_.current)try{w.current&&(clearTimeout(w.current),w.current=null),O.current=!1,C(!0),await _.current.stopRecognition(),i(oe=>({...oe,isListening:!1}))}catch(oe){console.error("Failed to stop speech recognition:",oe),i(ae=>({...ae,error:`Failed to stop listening: ${oe instanceof Error?oe.message:String(oe)}`,isListening:!1}))}},[]),$=it.useCallback(()=>{w.current&&(clearTimeout(w.current),w.current=null),O.current=!1,A.current="",p([]),i(oe=>({...oe,currentMessage:"",botResponse:"",error:void 0}))},[]),Y=it.useCallback(async oe=>{if(!b.current||!oe.trim())return;i(fe=>({...fe,isProcessing:!0,currentMessage:oe}));const ae={id:Date.now().toString(),type:"user",text:oe,from:{id:"user",name:"You"},timestamp:new Date};p(fe=>[...fe,ae]);try{await b.current.sendMessage(oe)}catch(fe){console.error("Failed to send message:",fe),i(se=>({...se,error:`Failed to send message: ${fe instanceof Error?fe.message:String(fe)}`,isProcessing:!1}))}},[]);return it.useEffect(()=>{(async()=>{if(a&&r.isListening){console.log(" Avatar started speaking, stopping speech recognition");try{await _.current?.stopRecognition(),i(ae=>({...ae,isListening:!1}))}catch(ae){console.warn("Failed to stop speech recognition when avatar started speaking:",ae)}}else if(!a&&r.isConnected&&!r.isListening&&!r.isProcessing&&!m){console.log(" Avatar stopped speaking, automatically restarting speech recognition");try{setTimeout(async()=>{!r.isListening&&!a&&r.isConnected&&!m&&await D()},1e3)}catch(ae){console.warn("Failed to restart speech recognition when avatar stopped speaking:",ae)}}})()},[a,r.isListening,r.isConnected,r.isProcessing,m,D]),Be.jsxs("div",{className:"app",children:[s.length>0&&Be.jsx("div",{className:"notifications",children:s.map(oe=>Be.jsxs("div",{className:`notification ${oe.type}`,children:[Be.jsx("span",{children:oe.message}),Be.jsx("button",{onClick:()=>f(ae=>ae.filter(fe=>fe.id!==oe.id)),className:"notification-close",children:""})]},oe.id))}),r.error&&Be.jsx(v4,{error:r.error,onDismiss:()=>i(oe=>({...oe,error:void 0}))}),Be.jsxs("div",{className:"app-layout",children:[Be.jsxs("div",{className:"avatar-section",children:[Be.jsx(g4,{isSessionActive:l,isSpeaking:a,onSessionStart:()=>P("Avatar session started","success"),onSessionStop:()=>P("Avatar session stopped","info"),onSpeakingStart:()=>{console.log("Avatar started speaking (from player)"),n(!0)},onSpeakingStop:()=>{console.log("Avatar stopped speaking (from player)"),n(!1)},onConnectionStateChange:oe=>d(oe),onLastEventChange:oe=>g(oe)}),Be.jsxs("div",{className:"status-indicator",children:[Be.jsx("div",{className:`status-dot ${l?"active":"inactive"}`}),Be.jsx("span",{children:a?"Speaking":l?"Ready":"Connecting"})]})]}),Be.jsxs("div",{className:"chat-section",children:[Be.jsx(y4,{messages:o}),Be.jsx("div",{className:"input-area",children:Be.jsx(m4,{onSendMessage:Y,isProcessing:r.isProcessing,isListening:r.isListening,onStartListening:D,onStopListening:N,isConnected:r.isConnected,onClearChat:$})})]})]})]})};yN.createRoot(document.getElementById("root")).render(Be.jsx(S4,{}));
